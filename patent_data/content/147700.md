# APPARATUS FOR TEMPERATURE COMPENSATION IN A DIGITAL DATA HANDLING SYSTEM

## Claims
Digitales Datenverarbeitungssystem mit

## Description
The invention relates to compensating temperature influences on a digital data handling system according to the first part of claim 1. A particular type of data handling system and means for partially compensating temperature influences is known from GB A 21 13 849, where a 2 wire differential pressure transmitter comprises a pressure sensor having a pressure sensitive element for converting a change in a measured pressure into a resistance change to produce an electrical signal indicative of the pressure change. A temperature detector includes a temperature sensitive element disposed in the vicinity of the pressure sensitive element for generating an electric signal indicative of a change in ambient temperature of the pressure sensitive element. A memory stores data on the relationship of the electrical signal from the pressure sensor with respect to the pressure and the ambient temperature. An analog to digital converter is alternatively connected to the output of the temperature sensor and of the pressure sensor and alternately supplies to a digital computer a digital representation of the measured temperature and of the measured pressure. The computer responsive to the electric signals from the pressure sensor and the temperature detector reads data out of the memory and computes from those data and digital signals a temperature compensated digital output signal which in turn is converted into an analog signal by a digital to analog converter and is supplied to a 2 wire transmission line. This system, therefore, compensates for temperature changes influencing the pressure sensor. The present invention takes into account that changes of the ambient temperature do not only influence the sensor element for the measured physical condition such as temperature, but also may influence the digital data handling system itself. Based on a digital data handling system as described in GB A 21 13 849, the invention solves the above mentioned problem by the features as characterized in claim 1. The temperature sensor in this case is exposed to the actual temperature of the data handling system and therewith provides a temperature dependent signal, which, in combination with a stored characterization equation, is used for compensating any influences which temperature changes may have on the operation of the data handling system itself. Preferred embodiments and modifications are described in the dependent claims. A better understanding of the present invention may be had when the following detailed description is read in connection with the accompanying drawings, in which Referring to Figure 1 in more detail, there is shown a digital data handling apparatus having a digital computer 1 connected to a non volatile memory 2 and a computer input 3. The computer 1 is connected by a data bus 4 to a digital to analog D A converter 6. A reference diode 8, e.g., a Zener diode, and a resistor 10 are connected in series across a source of voltage V and a junction 11 therebetween is connected to the digital to analog converter 6 to supply a voltage reference thereto. The analog output of the digital to analog converter 6 is supplied through an amplifier 12 to an analog output terminal 14. The data bus 4 is also connected to a bus driver 16 which is used to apply a temperature representative digital word to the data bus 4. The digital word from the bus driver 16 is obtained from a tracking analog to digital A D converter 18 utilizing a resistor ladder 20 connected between a source of voltage V and a ground or common return. The output of the resistor ladder 20 is obtained from junctions between serially connected resistors forming the resistor ladder 20 and is selected by a switch assembly 22. The output of the switch assembly is connected to a first input of a signal comparator 24 to supply a first input signal thereto. A second input signal for the comparator 24 is obtained from the junction between a resistor 26 and a temperature sensitive diode 28 in a temperature sensitive diode circuit 29. The resistor 26 and the diode 28 are connected in series between the source of voltage V and ground. The output of the comparator 24 is connected directly to a first input of a first AND gate 30 and through a logical inverter 32 to a first input to a second AND gate 34. The second inputs of the first and second AND gates 30, 34 are connected to a source of clock signals 36 having a frequency which controls the updating of digital word supplied to the bus driver 16. The outputs of the first and second AND gates 30, 34 are connected to control the counting direction of an up down counter 38. The output of the up down counter 38 representative of a count stored in the counter 38 is connected to a data bus 40 for application as an input to a decoder 42 and to the bus driver 16. The output of the decoder 42 is applied to the switch assembly 22 to control its resistor ladder output selecting operation. During hot cold testing of the digital data handling apparatus, a characterization equation, which describes the temperature performance of the digital data handling apparatus including the digital to analog converter 6 as a function of the digital representation of environmental temperature, i.e., Output f D,M where D digital data and M f temperature , is stored in the computer memory 2. The characterization equation may be developed by a testing computer using a conventional curve fitting technique using samples, e.g., four, of the output from the converter 6 for a known data word at corresponding digital representations of the test temperatures. Since the resulting characterization equation can then be used to handle the digital data input word from the computer input 3 to the computer 1 in light of the effect of temperature on the analog output of the converter 6, i.e., the output of the digital data handing apparatus, it is used to compensate the output of the digital computer 1 before the computer output is applied to the converter 6. Thus, the compensating temperature representative digital word from the digital compensation system, i.e., the A D converter 18, is periodically sampled, e.g., once a minute, to update the temperature compensation data word, i.e, M, used in the characterization equation stored in the memory 2. The digital output from the computer 1 is accordingly modified to produce a compensated analog data output signal from the D A converter 6. In other words, the method of operation of the compensation system is based on converting the voltage drop across the temperature sensitive diode 28 to a digital word by the analog to digital converter 18. This digital word is applied to the data bus 4 for use by the digital computer 1 during the use of the stored characterization equation in handling the digital input data from the computer input 3 to modify the operation of the D A converter 6. Thus, the analog output signal appearing at the output terminal 14 is compensated for the effect of environmental temperature on the digital handling apparatus which includes the operation of the digital to analog converter 6 and the reference diode 8. The analog to digital converter 18 operates by using the switch assembly 22 to select a voltage from the resistor ladder 20 approximately equal to the output of the temperature sensitive diode circuit. The comparator 24 is used to sense the difference between the resistor ladder output and the temperature sensitive diode circuit 29 and to change its output signal polarity as a representation of the identity of the higher comparator input signal. The comparator output signal is used to operate one of the AND gates 30, 34 depending on its polarity which, in turn, operates the counting direction of the counter 38. Since the output of the counter 38 is decoded by the decoder 42 and is used to control the setting of the switching assembly 22, the comparator output signal is effective to produce a variation in the output of the resistor ladder 20 in a direction to match the output of the temperature sensitive diode circuit 29. Thus, the count output of the counter 38 is a digital word that represents the temperature induced variations on the output of the temperature sensitive diode circuit 29. The output of the counter is, accordingly, supplied over bus driver 16 as the digital word M to be used in the computation of the digital output from the digital computer 1. In Figure 2, there is shown a block diagram of a digital data handling apparatus embodying the method of the present invention for use in a pressure transmitter application. In this application, the data input to the digital computer 1 is obtained from a pressure sensor 50 having its analog output converted by an analog to digital converter 52 to a digital signal. The characterization equation stored in the memory 2 is then used by the digital computer 1 to modify the digital output representative of the detected pressure before the digital signal is converted by the digital to analog converter 6 to an analog signal in a suitable analog signal range as used in the process control industry, e.g., 4 to 20 mA.