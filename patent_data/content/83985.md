# Improved ultrasonic image storage system.

## Abstract
An improved ultrasonic imaging system and method are provided for medical diagnostic purposes. In order to store additional digital ultrasonic imaging information in a limited memory, a first digital signal representative of a video input signal is provided. The first digital signal comprises a series of digital amplitude samples of the transverse component of the input signal. A second series of samples is provided from the first series. Each element of the second series is the arithmetic average of a group of elements of the first series. Since the number of elements of the second series is less than the number of elements of the first series, memory density of the transverse component of the input signal is decreased. The second digital signal series is companded to form a third digital signal series, the third digital signal series being stored. The companding provides a third digital signal which is a non linear function of the second digital signal such that the granularity of the stored signal is increased in regions of high diagnostic interest at the expense of decreased resolution in areas of low diagnostic interest. When it is desired to display the stored digital image, the third digital signal is retrieved from the storage means and decompanded to provide the reconstituted second digital signal which is thereafter directed to a video display.

## Claims
What is claimed is 1. An ultrasonic imaging system for collecting and thereafter displaying body tissue images comprising an ultrasonic transducer input imaging means for converting signals received by said transducer to an analog video input signal means for producing a first series of digital amplitude samples representative of said video input signal means for forming a second series of digital amplitude samples from said first series, each element of said second series being an average of a group of elements from said first series means for storing and retrieving said second series of samples means for converting said retrieved samples to a video output signal substantially similar to said video input signal and display means responsive to said video output signal for producing an image of said tissue. 2. The system of claim 1 wherein said means for forming said second series of samples comprises a means for storing elements of said first series a means for summing each stored element in said group to each other and a means for dividing the output of said summing means by the number of elements in said group. 3. The system of claim I wherein said means for forming said second series of samples comprises a means for storing a current sum of the amplitudes of elements in said group a means for adding the amplitudes of one element of said group to said current sum to form an updated sum of said amplitudes a means for storing said updated sum and for incre menting said current sum to equal said updated sum a means for dividing said updated sum by the number of elements in said group after each element in said group has been added to said updated sum. 4. An ultrasonic imaging system for collecting and thereafter displaying body tissue images comprising an ultrasonic transducer input imaging means for converting signals received by said transducer to an analog video input signal means for companding said first digital signal to produce a second digital signal, said second digital signal being a first non linear function of said first digital signal means for storing and retrieving said second digital signal means for decompanding a retrieved second digital signal to reconstitute said first digital signal means responsive to said decompanding means for con verting said first digital signal to a video output signal substantially similar to said video input signal and display means responsive to said video output signal for producing an image of said tissue. 5. The system of claim 4 wherein said first digital signal produced by said decompanding means is a second non linear function of said retrieved second digital signal whereby certain regions of said image have enhanced resolution compared to certain other regions. 6. The system of claim 4 wherein said first non linear function is a monotonically increasing function with a monotonically decreasing slope. 7. The system of claim 5 wherein said second non linear function is a monotonically increasing function with a monotonically increasing slope. 8. The system of claim 5 wherein said first non linear function is the inverse of said second non linear function. 9. The system of claim 4 wherein said means for companding comprises a random access memory, each value of said second digital signal being stored therein at an address determined by a value of said first digital signal sample. 10. The system of claim 9 wherein said decompanding means comprises a second random access memory, each value of said first digital signal being stored therein at an address determined by the value of said retrieved second digital signal. 11. A means for digitally storing and retrieving an ultrasonic image comprising means for producing a first digital signal representa tive of said image, said first digital signal compris ing a first series of digital amplitude samples means for forming a second series of digital amplitude samples each element of which is an arithmetic average of a group of elements from said first series means for companding said second series of digital samples to produce a second digital signal, said second digital signal being a first non linear func tion of said first digital signal means for storing said second digital signal means for retrieving said second digital signal means for decompanding said retrieved second digital signal to reconstitute said first digital signal and means responsive to said decompanding means to produce an analog output signal representative of said ultrasonic image. 12. An ultrasonic imaging system for collecting and thereafter displaying body tissue images comprising an ultrasonic transducer input imaging means for converting signals received by said transducer to an analog video input signal means for producing a first series of digital amplitude samples representative of said video input signal means for forming a second series of digital amplitude samples from said first series, each element, bnt of said second series being the average of a group of elements, am, am 1,... of said first series means for storing and retrieving said second series of samples means for converting said retrieved samples to a video output signal substantially similar to said video input signal and display means responsive to said video output signal for producing an image of said tissue. 13. The system of claim 12 wherein each element of said second series is related to elements of said first series by the relationshipEMI19.1 where n is a positive integer identifying each element of said second series and k is the number of elements in each group. 14. A method of storing and retrieving an ultrasonic image comprising the steps of providing an analog video input signal representative of said image converting said analog video input signal to a first series of digital amplitude samples forming a second series of digital amplitude samples from said first series, each element, bnt of said second series being the average of a group of elements, am, am 1,... of said first series storing said second series of samples in a memory retrieving said stored samples from. said memory converting said retrieved samples to a video output signal for video display of said image. 15. The method of claim 1 wherein each element of said second series is related to elements of said first series by the relationshipEMI20.1 where n is a positive integer identifying each element of said second series and k is the number of elements in each group.

## Description
IMPROVED ULTRASONIC IMAGE STORAGE DEVICE AND METHODThe present invention relates, in general, to ultrasonic imaging, and, in particular, relates to an improved technique and device for storing and retrieving ultrasonic images of the type used in medical diagnostics.Ultrasonic imaging has found increased utility in the field of medical diagnosis. For example, ultrasonic imaging is utilized extensively for the detection and diagnosis of mammarian cancer. It is also utilized to ascertain various stages of fetal development. A major problem encountered with ultrasonic imaging has been the need to find a suitable technique for storing and retrieving the vast quantities of data generated when ultrasonic imaging techniques are employed. One technique employed for storing such data is to store information on photographic film. However, a typical mammarian scan for a single patient may comprise as many as sixty pages of photographs per patient with four photographs per page.Because of the unwieldy nature of such photographic records, less than a complete set of records may be collected and maintained for a given patient. Since record selection is generally done by a technician, the technician s judgment as to which data should be collected and which discarded may be substituted for that of the physician.To alleviate the disadvantage of unwieldy photographic records of ultrasonic imaging, digital storage of such images has been proposed. However, ultrasonic imaging generates large quantities of digital data. While digital data storage techniques are available to store large quantities of digital data, retrieving such information may be sufficiently time consuming so as to be undesirable for a busy physician. One alternative is to provide a minimum digital storage capacity and to simply collect less data. In this manner, information retrieval time may be minimized but fewer than the optimum number of records per patient may be stored. Alternatively, if many records per patient are stored, but with data dentsity for each record reduced, the image resolution for each record may be less than optimum.It would be desirable to provide an improved ultrasonic image data storage and retrieval technique and device which utilized minimum digital storage capacity.It would be still further desirable to provide such an ultrasonic image storage and retrieval device and technique which utilizes minimum storage capacity and yet which is capable of storing all imaging data which is diagnostically significant.it would be still further desirable to provide such an ultrasonic image storage and retrieval device and technique having the capability for information retrieval in a short period of time.It would he still further desirable to provide such a device and technique which permits the storage of more patient records in a memory of a given size without appreciable loss of resolution.The foregoing needs are met by the provision of a new ultrasonic image storage device and technique of the present invention which employs the technique of data companding and decompanding, and takes advantage of the fact that an ultrasonic image is more highly variable in a direction along the axis of the ultrasonic transducer than in a direction transverse to that axis. Thus, the frequency of the axial component of a video signal representing an ultrasonic image is higher than the frequency of the transverse component. Because the frequency of the transverse component of the video signal is relatively low, a storage and retrieval technique may be employed wherein the memory density allocated for storage of the transverse component is decreased without loss of axial resolution and without noticeable loss of transverse resolution.In accordance with the present invention, a method of storing and retrieving an ultrasonic image is disclosed in which an analog video input signal is provided. The analog video input signal is converted to a first series of digital amplitude samples. A second series of digital amplitude samples is formed from the first series, with each element of the second series being the average of a group of elements in the first series. Since the second series of samples comprises fewer elements than the first series of samples, memory density may be decreased.However, since the second series of samples is the average of elements from the first series of samples, the second series of samples provides a reasonable approximation of the original video input signal. Since the frequency of the transverse component of the ultrasonic image is relatively low, such an approximation is sufficiently accurate to faithfully reproduce an ultrasonic image.Following production of the second series of samples, companding means is provided for producing a third series of digital signals from the second digital signal series.In accordance with the present invention, the third digital signal series is a non linear function of the second digital signal series, the non linear function being such as to provde increased granularity in regions of greater interest from a diagnostic standpoint and decreased granularity in regions of lesser interest. A means for storing and retrieving the third digital signal series is provided and a decompanding means is provided to reconstitute the second digital signal series from the retrieved third digital signal series. The reconstituted second digital signal series is thereafter smoothed and converted to analog form for video display. Since the stored digital signal employs increased granularity in regions of high interest, resolution in regions of interest is improved at the expense of slightly increased distortion in regions of low diagnostic interest.In accordance with an important aspect of the present invention, when ultrasonic imaging is utilized for the detection and diagnosis of, for example, mammarian cancer, low amplitude video input signals correspond to areas of possible malignancy. Accordingly, in accordance with the present invention, granularity of the stored digital signal is increased by the companding means for low level signals and decreased for high level signals. This is accomplished by insuring that the companding means produces a third digital signal series which is a monotonically increasing function of the second digital signal series, the function having a monotonically decreasing slope. Further, the decompanding means aprovides that the reconstituted digital signal produced thereby is a monotonically increasing function of the third digital signal series input thereto with a monotonically increasing slope.The present invention will be more fully understood by reference to the accompanying drawings, in which FIG. 1 is a general block diagram of an ultrasonic imaging system employing the novel image storage and retrieval means of the present invention FIG. 2 is a schematic diagram of the image storage and retrieval means of FIG. 1 FIG. 3 is a schematic circuit diagram of the video input processing circuit of FIG. 2 FIG. 3A is a plot of the amplitude of a video input signal versus time at the input of the video input processing circuit of FIG. 2 FIG. 3B is a plot of amplitude versus time of the signal at the input to the companing means of FIG.3 FIG. 4 is a plot of the transfer function of the companding means of the video input processing circuit of FIG. 3 FIG. 5 is a schematic circuit diagram of the video output processing circuit shown in FIG. 2 andFIG. 6 is a plot of the transfer function of the decompanding means of the video output processing circuit ofFIG. 5.Referring now to Fig. 1, the ultrasonic imaging system of the present invention is shown generally at 10. The imaging system 10 of the present invention has the capability of storing 240 records or frames of information per patient. The ultrasonic imaging system 10 of the present invention employs an ultrasonic transducer 12 of conventional type. Signals received by the ultrasonic transducer 12 are directed to input imaging electronics 14.The input imaging electronics 14 are also of conventional design. The input imaging electronics 14 provides an analog video input signal which is representative of the ultrasonic image detected by the transducer 12. 176 lines of the analog video input signal constitute one frame or record of information from a given patient. The analog video input signal emanating from the input imaging electronics 14 is directed, in accordance with the present invention, to an image storage and retrieval circuit 16 of the present invention, which will be described in detail in connection with Fig. 2 below. The image storage and retrieval circuit 16 is effective to convert the analog video input signal to digital form and for directing the digital signal to a peripheral storage means 18. The peripheral storage means 18 preferably comprises a three megabyte floppy disk.As mentioned above, when the ultrasonic transducer 12 is utilized for diagnostic purposes, 240 records or frames are digitized and stored in the peripheral storage means 18, per patient. Upon command from a control means described more completely in connection with Fig. 2 below, image storage and retrieval means 16 retrieves patient records from the peripheral storage nenas 18 and converts such records to analog form.The converted analog signals are then directed to output imaging electronics 118, also of conventional design, which converts the signals to a form suitable for display on a cathode ray tube such as shown at 120.Referring now to Fig. 2, the image storage and retrieval means 16 of the present invention will be described in detail. The image storage and retrieval means 16 of the present invention includes an analog to digital converter 22 which is responsive to the analog video input signal from the input imaging electronics 14. The analog to digital converter 22 samples the analog video input signal at a rate of, for example, 10 MHz to produce a first digital input signal comprising a first series of amplitude samples representative of the analog input signal. The first series of samples preferably comprises 512 samples of information per line. Each sample comprises a 6 bit value corresponding to an instantaneous amplitude of the analog input signal.The first series of amplitude samples is directed to a video input processing circuit 24 which will be described in detail in connection with Fig.3 below.The output of the video input processing circuit 24 is a second digital signal which is directed through a switch 26 to an input memory 28. The switch 26 operates under the control of a microprocessor control means 30. The output of memory 28 is connected by means of a switch 32, also under the control of the control means 30, to a direct memory access means 34. When the imaging system of the present invention is in an input mode, the microprocessor controller 30 controls switches 26 and 32 so as to store the second digital signal emanating from the video input processing circuit 24 in the input memory 28.After the input memory 28 is filled with one frame of input information, a direct memory access means 34 is activated by the microprocessor controller 30 so as to transfer the stored information from input memory 28 through the disk interface 36 to the peripheral storage means 18. Images are directed to the peripheral storage means 18 at a rate of, for example, four frames per second.When it is desired to retrieve a patient record from the peripheral storage means 18, the switches 26 and 32 are opened at the command of the microprocessor controller 30. Retrieved information from the peripheral storage means 18 is thereafter directed through the disk interface 36 and the direct memory access means 34 to either one or the other of output memories 38 and 40, the particular one being determined by the position of the switching means 42. The switching means 42 also operates under the con trol of the microprocessor controller 30. Two memory means 38 and 40 are provided so that retrieval from the storage means 18 to either output memory 38 or 40 can be overlapped in time with the viewing of a previously retrieved image in the alternate output m ry 40 or 38. In this way, a continuous visual image G a nieved. When the imaging system of the present invention is operating in an output mode, each of the output memories 38 and 40 contain a second digital signal retrieved from peripheral storage means 18. This retrieved, second digital signal is directed through a switching means 44, also under the control of microprocessor controller 30, to a video output processing circuit 46, which will be described in more detail in connection with Fig. 5 below. The video output processing circuit 46 reconstitutes the first digital signal from the second digital signal input thereto by performing an inverse transform of the type performed in the video input processing circuit 24. The first digital signal output from the video output processing circuit 46 is directed to analog to digital converter z8 which produces a video output signal substan tially similar to the analog video input signal which was originally received from input imaging electronics 14. The video output signal is an analog signal which is directed to the video display 20 referred to in connection with Fig. 1 above. In a preferred embodiment of the present invention, the image storage and retrieval means 16 of the present inven tion further includes a character generating means 50 which is under the control of the microprocessor control ler 16. The analog to digital converter 48 is responsive to the character generating means 50 so that upon command of the microprocessor controller 30, alphanumeric informa tion may be simultaneously or sequentially displayed along with patient records. Referring now t tig. 3, the video input processing circuit 24 shout 1. Fig. 2 will be described in detail.In accordance with the present invention, the video input processing circuit 24 includes a means for reducing the data density of ultrasonic images in a direction lateral to the axis of the transducer 12. This means includes a first latch 50, a summing means 52, a second latch 54, and a first digital multiplexer 56. The video input processing circuit 24 also includes in accordance with the present invention, a companding means 58, a third latch 60 and a fourth latch 62.In accordance with the present invention the first six bit sample of the first digital input signal from the analogto digital converter 22 is directed to the first latch 50 and from there to the summing means 52, as shown. At the summing means 52, the first six bit sample of the first digital signal is added to the eight bit output of the first digital multiplexer 56, which output is initially zero. The eight bit output of the summing nenas 52 is directed to a second latch 54, the output of which is directed to an input of the first digital multiplexer 56.The second six bit sample of the first digital input signal from the analog to digital converter 22 is then directed to the latch 50 and from there to the summing means 52, where it is added to the last preceding eightbit sample of that digital signal from the digital multiplexer 56. After preferably four successive iterations, the most significant six bits of the eight bits stored in latch 54 are directed to the companding means 58. These six bits comprise the average of four successive samples of the first digital signal.Thus, in accordance with the present invention, the analog to digital converter 22 provides a first series of amplitude samples. At the output of the latch 54, a second series of digital amplitude samples is provided which is related to the first series. The second series of amplitude samples has fewer elements than the first series since each element bn, of the second series of amplitude samples is an average of a group of four elements, am, am 1, am 2, and am 3 of the first series of samples. Since the second series of samples has but one fourth the number of samples than the first series, and since the second series of samples after companding as explained below is ultimately stored in storage means 18, memory density is appreciably reduced.While in the embodiment shown in Fig. 3, each element, bn, of the second series of samples is comprised of the average of four elements am through am 3 of the first series of samples, other arrangements are within the scope of the present invention. For example, the output of latch 54 could also comprise the average of some different number of samples from analog to digital converter 22 as opposed to the four samples referred to above. Thus, each element of the second series of samples is related to the elements of the first series of samples by the relationshipEMI10.1 where n is a positive integer identifying each element of the second series of samples and k is the number of elements in each group of elements being sunned.The operation of the means for reducing data density of ultrasonic images in a direction lateral to the axis of the transducer 12 will be more fully appreciated by reference to Figs. 3A and 3B. Fig. 3A is a plot of the amplitude versus time of the output of the analog todigital converter 22. An analog video input signal S is sampled by the analog to digital converter 22 to form the first series of amplitude samples shown in Fig. 3A.However, as may be seen from Fig. 3B, at the output of the latch 54, a second series of amplitude samples is produced, each element of which is an average of a group of samples shown in Fig. 3A. Since the frequency of the analog video input signal S in a direction transverse to the axis of the ultrasonic transducer 12 is relatively low, the second series of amplitude samples shown in Fig.3B is a reasonably accurate approximation of that video input signal. Since the number of elements in the second series Fig. 3B is less than the number of elements in the first series Fig. 3A the memory capacity requirements of the peripheral means 18 are substantially reduced.In accordance with the present invention, the companding means 58 is a random access memory, the output of which is a third digital signal four bit , the third digital signal being a non linear function of the samples of the second digital signal input thereto. In this manner, the granularity of the second digital signal is increased in regions of greater diagnostic interest and decreased in regions of lesser interest. The transfer function of the companding means 58 will be described in detail in connection with Fig. 4 below. Since the output of the companding means 58 is a four bit binary number and since the data format employed by most commonly utilized peripheral storage means is an eight bit format, the output of the companding means 58 may be converted to an eight bit format by taking the first four bit byte from the companding means 58 and storing it in a latch 50.The next four bit byte from the companding means 5 is immediately directed to the fourth latch eight bits 62, wherein the four bit byte stored in latch 60 is combined to form an eight bit byte directed to the input memory 28.Referring now to Fig. 4, the transfer function of the companding means 58 will be described in detail. As may be seen in Fig 4, when the transfer function compand output versus compand input is plotted, the plot is a monotonically increasing curve with a monotonically decreasing slope. Utilizing this transfer function, the granularity of low level input signals is increased at the expense of high amplitude level input signals. In this manner, resolution is enhanced for low level signals at the expense of high level signals, low level signals corresponding to areas of possible malignancy. Thus, fromFig. 4, it may be seen that a change in the value of the input to the companing means 58 produces a greater change in the value of the output of the companding means at lower values of the companding means input than at higher values of that input. Referring now to Fig. 5, the video output circuit 46 will be described in detail. The video output processing circuit includes a latch 64 to which retrieved eight bit digital information from the peripheral storage means 18 is directed. The digital signal from the latch 64 is directed to a multiplexer 66 in which it is converted to two four bit bytes. The digital signal from the multiplexer 66 is then directed to the decompanding means 68 in accordance with the present invention. The decompanding means is operative to convert the retrieved third digital signal from the storage means 18 to a reconstituted second digital signal. The reconstituted digital signal output from the decompanding means 68 is a non linear function of the digital signal input thereto. The non linear transfer function of the decompanding means 68 will be described in detail in connection with Fig. 6 below.Referring now to Fig. 6, the transfer function of the decompanding means 68 will be seen. As will be seen inFig. 6, the transfer function of the decompanding means 58 decompand input versus decompand output is a monotonically increasing function with a monotonically increasing slope. Thus, the transfer function of the decompanding means 68 is the inverse of the transfer function of the companding means 58. The companding means 58 preferably comprises a random access memory, each value of the second digital signal stored therein being located at an address determined by a value of the third digital signal input thereto. The decompanding means 68 also comprises a random access memory storing the various values of the second digital signal at addresses determined by values of the retrieved third digital signal.In accordance with the present invention, the output of the decompanding means 68 is directed to a smoothing circuit comprised of a latch 70 and a summing means 72, the output of the s mming means then being directed to another latch 74. Each of the latches 70 and 74 are strobed by clock pulses from a clock means not shown . The latch 74 is strobed at a rate twice that of the rate utilized to storbe latch 70. In this manner, the output of latch 74 is a digital signal comprising a fourth series of digital samples, each element, cn, of which is related to the elements, bm of the second series of digital samples by the relationships EMI13.1 where n is a positive even integer andEMI14.1 where n is a positive odd integer.Thus, the digital signal emanating from the latch 74, comprises a series of amplitude samples cn, cn I..., etc., the third series being directed to the digital toanalog converter 48 where an analog signal suitable for video display is produced.