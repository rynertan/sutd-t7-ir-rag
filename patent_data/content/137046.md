# METHOD OF RESTARTING PROFILING MACHINING.

## Abstract
A method of restarting profiling machining comprises the steps of interrupting the profiling machining when a tool of abnormality occurs storing the machine position P at the time at which the tool abnormality occurred or a start point C₂ of the operating sequence as a resumption position at which the profiling machining is to be resumed, and storing profiling operational conditions at the time at which the tool abnormality occurred automatically return ing the tool to a tool replacing position R automatically positioning a new tool, after tool replacement, at the resumption position point C₂ or P and resuming the profiling machining from the resumption position on the basis of the stored profiling operational conditions.

## Claims
CLAIMS 1. A tracer machining restart method in a tracer apparatus having a tracer head for generating a detection signal dependent upon the shape of a model, and a tracer control unit for generating commanded velocities along respective axes based on the detection signal genreated by said tracer head, wherein motors provided for the respective axes are driven in response to said commanded velocities to cause the tracer head to trace the model and to move a tool relative to a workpiece so that the workpiece is machined in accordance with the shape of the model, said tracer machining restart method characterized by having steps of interrupting tracer machining in response to occurrence of a tool failure, preserving a restart position at which tracer machining is to be resumed as well as tracer operating conditions which prevail when the tool failure occurs, restoring the tool to a tool change position automatically, positioning a new tool following a tool change at said restart position automatically, and resuming tracer machining based on said preserved tracer operating conditions. 2. A tracer machining restart method according to claim 1, characterized by having a step of previously creating and storing in memory an instruction for moving the tool to the tool change position, an instruction for executing a tool change at said tool change position, and an instruction for positioning the new tool at said restart position. 3. A tracer machining restart method according to claim 1, characterized in that after the tool is positioned directly above said restart position, the tool is moved together with the tracer head toward the restart position and is determined to have arrived at the restart position when a resultant tracer head deflection quantity exceeds a predetermined level. 4. A tracer machining restart method according to claim 1, characterized in that a state indicative of tool breakage and a state indicative of tool wear are each treated as indicating a tool failure. 5. A tracer machining restart method according to claim 4, characterized in that a state indicative of end of tool life is treated as indicating a tool failure. 6. A tracer machining restart method according to claim 1, characterized in that said tracing restart position is a machine position which prevails when the tool failure occurs. 7. A tracer machining restart method according to claim 1, characterized in that said tracing restart position is a starting point of an operating sequence which prevails when the tool failure occurs.

## Description
DESCRIPTIONTechnical Field This invention relates to a tracer machining restart method and, more particularly, to a tracer machining restart method through which a tool change can be performed automatically during tracing and tracer machining resumed automatically after the tool change.Background Art A tracer apparatus operates by causing a tracer head to trace a model, calculating velocity commands along various axes by using a deflection value sensed by the tracer head, driving motors for the corresponding axes on the basis of the velocity commands along these axes to transport a tool relative to a workpiece, causing the tracer head to trace the surface of the model, and repeating these operations to machine the workpiece into a shape identical with that of the model. Since tracer machining performed by an apparatus of this type is employed in machining molds and the like, machining time is of considerable length and, hence, a tool may develop a failure in the course of machining. Examples of such failure are tool breakage and wear which, if they occur, make it impossible to continue machining or to continue machining at high precision.In cases where tool life supervision is practiced, there are situations where a tool change command is generated when a tool has reached the end of its life during tracer machining.Thus, when a tool fails or a tool change command is generated during tracer machining, tracing is suspended, the tool change is performed, and tracing must be restarted following the tool change. Since the tool change and tracer restart processes demand operator intervention in order to be performed, machining cannot be automated. This has the disadvantage of making it impossible to achieve unattended operation, such as automatic operation at night. Accordingly, an object of the present invention is to provide a novel tracer machining restart method through which an automatic tool change and automatic tracer machining restart can be performed during tracer machining. Another object of the present invention is to provide a tracer machining restart method through which, when a tool fails, tracer machining is suspended at the position where the failure occurred, the tool is subsequently exchanged automatically, and tracer machining is resumed automatically after the tool change from the position at which machining was suspended. Still another object of the present invention is to provide a tracer machining restart method through which unattended tracer machining can be achieved. Disclosure of the Invention The present invention includes steps of halting tracer machining in response to occurrence of a tool failure attendant upon the end of tool life, tool breakage or the like, restoring the tool to a tool change position automatically, storing, subsequent to a tool change, a tracer machining restart position and tracer machining conditions which prevailed at the occurrence of the tool failure, returning a new tool to the restart position automatically after the change to said tool, and resuming tracer machining based on the stored machining conditions. According to the present invention, in the event that a tool develops a failure, a tool change is effected automatically and tracer machining can be resumed with the new tool from the point at which machining was suspended.It is therefore possible to perform unattended tracer machining at night, so that tracer machining can be exercised continually over a long period of time.Brief Description of the Drawings Fig. 1 is a schematic view of a tracer machine tool to which the present invention can be applied,Figs. 2 A , B are views for describing a tracer machining restart method according to the present invention, Fig.3 is a block diagram of an embodiment of the present invention, and Fig. 4 is a flowchart of processing according to the present invention.Best Mode for Carrying Out the Invention Fig. 1 is a view showing the construction of a tracing machine tool to which the present invention can be applied. The tracing machine tool is provided with an X axis motor XM for driving a table TBL along the X axis, a Z axis motor ZM for driving, along the Z axis, a column CLM mounting a tracer head TC and a cutter head CT, a Y axis motor YM for moving the table TBL along the Y axis, a pulse generator PGX for generating a single pulse Px whenever the X axis motor XM rotates by a predetermined amount, a pulse generator PGZ for generating a single pulse P2 whenever the Z axis motorZM rotates by a predetermined amount, and a pulse generator PGY for generating a single pulse P whenever y the Y axis motor YM rotates by a predetermined amount.Secured to the table TBL are a model MDL and a workpiece WK. The tracer head TC contacts and traces the surface of the model MDL, and the cutter head CT cuts the workpiece WE in accordance with the shape of the model. As known in the art, the tracer head TC is arranged to sense deflection Ex syt Ez along the respective X, Y and Z axes of the surface of model MDL, and the deflection along the various axes sensed by the tracer head TC is applied to a tracer control unit TCC, which performs known tracing calculations to generate velocity components along respective axes. For example, as a tracing method, let us consider two way scan tracing in the X Z plane.Two way tracing is performed by generating velocity components Vx, Vz, and applying these to the X and Y axis motors XM, ZM via servo circuits SVX, SVZ, respectively, whereby the motors XM, ZM are driven into rotation. As a result, the cutter head CT is transported relative to the workpiece WK to cut the workpiece to the shape of the model MDL, and the tracer head TC traces the surface of the model MDL. Pulses Pxt Pyr P2 generated by the respective pulse generators PGX, PGZ, PGY are applied to present position registers for the various axes, the registers, which are not shown, being incorporated within the tracer control unit TCC. Upon receiving the pulses Pxf Pyt P as inputs thereto, each present position register has its status counted up or counted down depending upon the direction of travel. When a present position Xa along the X axis becomes equivalent to an X coordinate value xl on a first boundary line of a tracing area, the tracer control unit TCC takes the tracing plane as the Y Z plane and generates velocity components Vyr Vz. The velocity component V is y applied to a servo circuit SVY, as a result of which the table TBL is moved along the Y axis to perform scan tracing in the Y Z plane.When the distance traveled by the table TBL along the Y axis becomes equivalent to a preset pick feed value P, the tracer control unit TCC subsequently takes the tracing plane as the X Z plane and generates velocity components Vx, Vz to perform return tracing until the present position along the X axis comes into agreement with an X coordinate value x2 on a second boundary line of a tracing area. Thereafter, pick feed, scan tracing in one direction, pick feed and scan tracing in the other direction are repeated to bring the present position along the Y axis to a tracing area boundary point along the Y axis. With the arrival at the boundary point, two way scan tracing ends. Fig. 2 is a schematic view for describing a tracer machining restart method according to the present invention. Fig. 2 A is a view for describing how a J sew tool following a tool change is returned to the starting point of a tracer operating sequence when a tool fails, and how tracing is resumed from the starting point. Fig. 2tB is a view for describing how a new tool following a tool change is returned to a machine position when a tool fails, and how tracing is resumed from that position.In two way scan tracing in the X Z plane where the X axis is the feed axis and the Z axis is the tracing axis , a workpiece is cut to the shape of a model by repeating a four step sequence after the completion of approach, the sequence steps being a tracing in the X direction referred to as one way tracing , b pick feed, c tracing in the X direction referred to as return tracing , and d pick feed. It should be noted that data necessary for implementing the foregoing tracer machining are preset. These data include machining condition data specifying the tracing plane, tracing velocity, reference deflection value, tracing direction, pick feed value and pick feed direction, etc., as well as tracing area data indicative of a tracing area, such as X axis positions X1, X2 of first and second boundary linesXL1, XL2, and a boundary position Y1 along the Y axis.Tracer machining control in accordance with a through d above is carried out on the basis of these tracer machining condition data and tracing area data. In the tracer machining restart method shown inFig. 2 A , it is so arranged that the starting point of the aforementioned sequence is stored before executing a new sequence. Specifically, the arrangement is such that the present position of the tool or tracer head which position shall be referred to as the machine present position hereafter is monitored at all times, and such that the following steps, which serve as examples, are performed before a new tracer operating sequence begins storing the coordinate values of points A1, A2 prior to the one way tracing in a , storing the coor dinate values of points B1, B2 prior to the pick feed in b , storing the coordinate values of points C1, C2 prior to the return tracing in c , and storing the coordinate values of points D1, D2 prior to the pick feed in d .If, say, a tool breaks at pointP during the course of return tracing c as shown inFig. 2 A , tracer machining is halted immediatedly, the tracer machining data and tracing area data are saved preserved , and the tool is thenceforth positioned at a tool change point R, where a tool change is performed. When the change to the new tool is completed, the new tool is then positioned at a point Q directly above the point C2, after which the tool is moved toward the point C2 in a rapid traverse rapid approach mode. After the tool arrives at a position which is a distance from point C2, there is a changeover to low velocity feed deceleration to bring the tracer head into contact with the model.When the tracer head generates a deflection quantity which is greater than a predetermined value, the tool is brought into position precisely at the point C21 thereby completing the approach. Lastly, the preserved data are recovered and tracing is resumed based on these data. In the tracer machining restart method shown inFig. 2 B , the arrangement is such as to store coordinate values X0, or ZO of the maching present position P at the instant a tool failure signal or tool change command is generated. For example, if breakage of the tool is sensed at point P during the course of one way tracing a , as shown in Fig. 2 B , tracer machining is halted immediatedly, the machining present position P is stored, the tracer machining data and tracing area data are preserved, and the tool is thereafter positioned at the tool change point R, where a tool change is performed. When the change to the new tool is completed, the new tool is then positioned at a point Pm directly above the point P, after which the tool is moved toward the point P in a rapid traverse mode.After the tool arrives at a position which is a distance OL from point P, there is a changeover to low velocity feed to bring the tracer head into contact with the model. When the tracer head generates a deflection quantity which is greater than a predetermined value, the tool is brought into position precisely at the point P, thereby completing the approach. When the approach has been completed, the saved tracer machining condition data are recovered and tracing is resumed based on these data. Fig. 3 is a block diagram of an embodiment for a case where the tracer machining restart method of Fig.2 A is applied to multiple step tracer machining. In Fig.3, numeral 1 denotes a processor for executing processing in accordance with a tracer control program. Numeral 2 designates a program memory ROM which stores the tracer control program. A machining program memory RAM 3 for storing a machining program is adapted to store a tracing method, tracer machining condition data and tracing area data as a multiple step tracer machining program in the order of the process steps. A data memory 4 is for storing a plurality of machining condition data Pull, P12..., a plurality of tracing area data Lull, L12.... as well as other parameters. A subprogram memory 5 stores a subprogram for executing tool change processing when a failure such as tool breakage occurs.Numeral 6 denotes a working memory for storing a machine present position Xar Ya, Za an execution sequence number s, an operating sequence starting position Xs, Ys, Z1 , machining condition data for the present tracing step, area data, and the like. A saving memory 7 is for storing the contents of the working memory 6 when a failure such as tool breakage occurs. Numeral 8 designates a digital analog converter DA converter for converting velocity data incremental mlQes commanded by the processor 1 along each axis into analog velocity signals Vx, Vyt Vz. An operator s panel 9 is for setting machining condition data and area data and for entering commands.Numeral 10 denotes a pulse distributor, and 11 an analogdigital converter AD converter for converting deflection quantities x, y, z produced by the tracer head TC Fig. 1 along the respective axes into digital values. Numeral 12 represents a tool breakage sensor. Designated at 13 is a present position monitoring unit which includes present position registers 13X, 13Y, 13z for storing the present positions Xar Yat ,a along the respective axes. Error registers 14X, 14Y, 14z are for real time calculation and storage of differences Ex, Ey I Ez between the number of distributed pulses XP, YP,ZP generated by the pulse distributor io, and the number of pulses Xf, Yf, Zf generated in response to actual movement, respectively.DA converters 15X, 1sty, 15Z produce analog voltages proportional to the differences Ex, Eyr Ez. Numerals l6X, 16Y, 16Z denote gate circuits, 17X, 17Y, 17Z adding circuits, 18X, 18 , 18Z X , Y and Z axis servo circuits, respectively, l9X, 19 , 19Z X , Y and Z axis servomotors, respectively, and 20X, 20Y, 20Z pulse generators each for generating a single pulse Xf, Yf, Zf, respectively, each time the corresponding motor rotates through a predetermined angle. A plurality of tracer machining condition data and tracing area data conforming to each of the tracing method are entered from the operator s panel 9 prior to tracer machining. As an example, for manual tracing, five kinds of machining condition data from P11 to P15, and five kinds of tracing area data from Lll to L15 are set. Thereafter, and in similar fashion, P21 P251 L21 L25 are set for two way scan tracing, P31 P35, L31 L35 are set for one way scan tracing, P41 P45,L41 L45 are set for 3600 contour tracing, P51 P55,L51 L55 are set for partial contour tracing, and P61 P65, L61 L65 are set for three dimensional tracing.Through this operation, the tracer machining data Pll P65 and tracing area data L11 through L65 are set in the data memory 4. Further, one item of machining condition data P. . is composed of the tracing plane, tracing velocity F, approach velocity Paf reference deflection E, tracing direction, pick feed quantity P, pick feed direction, etc. One item of tracing area data Lij is composed of boundary position coordinate values of the tracing region along the respective axes. Next, when operation is started by manipulation of a button on the operator s panel 9, the processor 1 reads, one block at a time, the machining program already stored in the machining program memory 3 and performs multiple step tracer machining control. It should be noted that the tracer machining program has the following constitution, which serves as one example G901 Z 0 P31 L32 ..... A G903 P34 L34 ..... B GOO x y , C G901 Z Pc n L a D G904 P43 L45 ..... E M02 t ..... F In the program, the block A is an approach command block in which the G function instruction G901 signifies an approach command, wZ 0 indicates approach along the Z axis, and P31 L32 specify feedrate and deceleration positions, respectively, during approach. The block B is a command block specifying tracing method, tracer machining condition data and tracing area data in a first tracer machining step, in which two way scan tracing is designated by G903 , and in which tracer machining condition data and tracing machining area data are specified by P31 , L32 , respectively.Block C is an instruction for positioning the tracer head in a rapid traverse mode directly above a tracer machining starting point of a second step in order to execute the tracer machining of the second step. The block D is an approach command in the second step, and the block E is a block specifying tracing method, tracer machining condition data and tracing area data in the second tracer machining step, in which 3600 contour tracing is designated by G904 . The block F is an M function instruction indicating the end of the program. When operation starts, the processor 1 reads the approach command of block A out of the machining program memory 3, then reads the tracer machining condition data specified by P31 as well as the tracing area data specified by t32 out of the data memory 4, and stores these data in the working memory 6. Thereafter, the processor reverses the sign of the rapid traverse approach velocity data F a contained in the machining condition data, and applies the data to the DA converter 8 as Z axis feed velocity data Vz. The DA converter 8 converts the Z axis feed velocity Vz into an analog velocity signal Vza and applies this signal to the Z axis motor 19Z via the adding circuit 17Z. As a result, the Z axis motor 19Z rotates to transport the column CLM Fig. 1 along the Z axis.When the Z axis motor l9Z rotates, the pulse generator 20 generates the pulses Zf, and the present position monitoring unit 13 updates the contents of the Z axis present position register 13Z in accordance with the travelling direction each time one of the pulses 2f is generated. The processor 1 reads the present position Za stored in the Z axis present position register 13Z and monitors whether the tracer head TC has arrived at the deceleration position the Z axis coordinate value whereof is assumed to be Zd specified by the tracing region data L32 . If Za 2d hol , tbe processor 1 reverses the sign of low velocity approach velocity data Pad contained in the machining condition data P31 and delivers the data to the DA converter 8 as feed velocity V2 along the Z axis. As a result, the tracer head is lowered toward the model MDL Fig. 1 at a low velocity. When the tracer head contacts the model, the deflection quantities Ex Eyt z along the respective axes are generated, and these are converted into digital val es by the AD converter 11. These are then read by the processor 1. The processor 1 obtains a resultant deflection quantity E based on the following equation EMI14.1 and checks as to whether the resultant deflection quantity E is greater than a set level acontained in the machining condition data hop31 . If the relation g ga holds, then the processor 1 regards this as indicating that the tracer head has arrived at the tracer machining starting point, establishes the condition Vz 0 and halts the tracer head. Thereafter, the processor 1 reads the two way scan tracing command of block B out of the machining program memory 3, stores the command in the working memory 6, reads the tracer machining condition data and the tracing region data specified by P34 , L34 contained in the command, and similarly stores these in the working memory 6. The processor 1 thenceforth updates the sequence number S the initial value whereof is zero , which has been stored in the working memory 6, in accordance with the following formula S 1 S 2 The processor also reads the starting point coordinate values Xs, Ys, Z5 of the S th sequence out of the present position monitoring unit 13 and stores these values in the working memory 6. The processor 1 follows this by performing the operation of Eq. 1 to calculate the resultant deflection , and by calculating the difference between the resultant deflection E and the reference deflection EO specified the machining condition data Wp34 n . The processor 1 also generates a velocity signal V N which is proportional to the difference s , and a velocity signal VT which is inversely proportional to At. When A 0 holds, VN is zero and VT is the tracing velocity F specified by P34 . The processor 1 uses the deflection signals Ex, z along the X and Z axes to calculate deflection direction signals sin , cose by performing the operations given by the following equations EMI16.1 and calculates velocity signals Va, Vb along the respective axes by performing the operations given by the following equations Va VT.sin VN.cos 5 Vb VT cose VN sinG 6 When Va, Vb have been obtained from Eqs. 5 , 6 , the processor 1 refers to the tracing plane specified by P34 , establishes the conditions Vx Va, Vz Vb, and delivers these to the DA converter 8. The DA converter 8 converts the X axis and Y axis feed velocities Vx, V2 into analog velocity signals Vxa, Vza and applies these signals to the X and Z axis servo circuits 18X, 18Z via the adding circuits 17X, 17Z, respectively. As a result, the X and Z axis motors 19X, 19Z rotate to transport the table TBL Fig.1 , which carries the model MDL and the workpiece WK, along the X axis, and to transport the column CLM along the Z axis. Consequently, the tracer head TC travels along the surface of the model MDL and therefore generates new deflection quantities x, y, z, which are read by the processor 1.Upon reading the deflection quantities x, y, z, the processor 1 obtains new velocity signals Var Vb based on these deflection quantities by performing the operations ofEqs. 1 , 3 6 , and delivers these signals in the form Vx Va, Vz Vb. Processing similar to the above is then repeated to move the tracer head along the model surface toward the first boundary line XL1 FIg. 2 A 3. The cutter head tool moves in the same manner as the tracer head to cut the workpiece wx into a shape identical with that of the model MDL. Each time the pulse generator 20X generates the pulse Xf owing to rotation of the X axis motor 19X, the present position monitoring unit 13, depending upon the travelling direction, executes the operation Xa 1 Xa 7 Each time the pulse generator 20z generates the pulseZ owing to rotation of the Z axis motor 19Z, the present position monitoring unit 13, depending upon the travelling direction, executes the operation Za 1 Za 8 Thus, the contents of the present position registers 13X, 13z are updated. In parallel with the above described velocity processing, the processor 1 reads the present positions Xa, Yat Za along the respective axes, stores these in the working memory 6 and determines whether the X axis present position Xa is equal to the coorinate value X1 which is specified by the region data L34 of the first boundary line XL1 Fig. 2 A . Accordingly, one way tracing advances until the relation Xa Xl is established.When this occurs, the processor sets Vxu V2 to zero, sets the state of the sequence register to 2 in accordance with Eq. 2 , and updates the starting point coordinate values Xs, Ys, Zs of the s th sequence stored in the working memory 6 by the present positions Xar Yat Za along the respective axes. Next, the processor 1 calculates the velocity signals Va, Vb in accordance with the Eqs. 5 , 6 , takes the calculated velocity signals Va, Vb as velocities along the Y and Z axes vy va Vz Vb and delivers these to the DA converter 8. The DA converter 8 converts the Y axis and Z axis feed velocities Vyt V2 into analog velocity signals Vya, Vza and applies these signals to the Y and Z axis servo circuits lax, 18Z via the adding circuits 17Y, 17z, respectively. As a result, the Y and Z axis motors 19 , 19Z rotate to perform a pick feed along the model in the direction of the Y axis. Each time the pulse generator 20Z generates the pulse Yf owing to rotation of the Y axis motor l9Y, the present position monitoring unit 13, depending upon the travelling direction, executes the operation Ya 1 Ya 9 to update the status of the present position register 13Y, as well as the status of present position register 13Z in accordance with Eq. 8 . In parallel with the pick feed velocity processing, the processor 1 reads the present positions a a a along the respective axes out of the present position registers, stores these in the working memory 6, determines whether the Y axis present position Ya is equal to the boundary position Y1 Fig. 2 A of theY axis tracing area specified by the region data L34 , and determines whether the travelling distance LY along the Y axis coincides with the pick feed quantity P designated by the tracing machining data P34 .If the pick feed ends without Ya becoming equal to Y1 i.e., if the condition P is established , the processor sets the sequence number s stored in the working memory 6 to 3 and treats the machine present position Xat Yat Za prevailing at the end of the pick feed as the staring point coordinate values Xs, YSt Z5 of the third sequence. The processor thenceforth refers to the tracer machining condition data and executes return tracer processing in the same manner as the one way tracing.As the return tracing advances and the machining present position a along the X axis becomes equal to the X axis coordinate value X2 Fig. 2 A 1 of the second boundary line XL2 specified by the area data WL34 , the processor 1 sets Vx, Vz to zero, sets the sequence number s to 4, stores the machining present position Xa, Yat Za as the starting point coordinate values Xs, Y I Z8 of the fourth sequence, and executes a pick feed in the manner set forth above. Thereafter, similar processing is repeated and, when the Y axis present position Y becomes equivalent to Y1, two way scan tracing ends.The processor 1 then reads data for subsequent multi step tracing out of the machining program memory 3 to perform tracing processing, with the multiple step tracing processing ending when M02 is finally read. It should be noted that the sequence number for two way scan tracing steps through values cyclically in the manner 1 2 2 3 4 1 2 ... each time a sequence ends, in which 1 indicates that one way tracing is in progress, 2 indicates that a pick feed following one way tracing is in progress, 3 indicates that return tracing is in progess, and 4 indicates that a pick feed following return tracing is in progress. Let us assume that the tool breaks at the point P Fig. 2 A 1 during the above described tracer machining operation. Such tool breakage will be sensed by the tool breakage sensor 12. Since the armature current of the spindle motor that rotates the tool will increase when the tool breaks, breakage can be sensed by monitoring the armature current. When a tool breakage signal TBS is generated, the processor 1 is interrupted, immediately establishes the conditions Vx 0, VyflO, Viz 0 to halt the tracing operation, and saves all data stored by the working memory 6 in v preservation memory 7. The working memory 6 is then used for tool change processing. The processor 1 subsequently delivers a gate enable signal GCS via a data output unit 21 to open all gates 16X, 16Y, 16Z and then reads the subprogram for a tool change out of the subprogram memory 5 one block at a time to execute tool change processing. The subprogram has the following constitution, which serves as an example 09001 G28 Z Zm M06 Tn Cl G29 G901 Z 0 P31 L31 M99 wherein O9001 represents a subprogram number, G28 ZZm denotes an instruction for automatically restoring the tool to the tool change position R Fig. 2 A via an intermediate point Pm a position directly above the point P and having a Z axis coordinate value Zm M06T a nw is an automatic tool change instruction, G29 is an instruction for restoring the tool to the point Q directly above the starting pointC2 of the operating sequence via the intermediate point Pmt G901 Z 0 P31 L31 represents an approach command, and we99 is a subprogram end instruction. The processor 1 responds to G28 ZZ n by obtaining incremental values Xi 0 , Yi Zi Zm Za along the respective axes from the machine present position P to the intermediate position Pm, and uses these incremental values as well as the feedrate F to find feed rate components Fx, Fyr F2 along the respective axes by performing the computations indicated by the following equations EMI22.1 The processor 1 then obtains, from the following equations, travelling distances aX, aY, Z to be traversed along the respective axes during a predetermined time interval T sec. 8 msec. . X Fx. T 14 Y Fy. T 15 AZ F2 AT 16 These travelling distances X, Y, are delivered to the pulse distributor 10 regularly at the time interval On On the basis of the input data X, Y, Z , the pulse distributor 10 performs a pulse distribution computation simultaneously along the three axes to generate distributed pulses Xp, Yp, Zp The distributed pulses are applied to the error registers 14X, 14Y, 14Z for the respective axes to update them by one count.It should be noted that since Xi Yi O holds for movement to the intermediate point Pmt distributed pulses Xp, Yp along the X and Y axe axe not generated at this time, with the only distributed pulses generated being the pulses Zp along the Z axis. As a result, the DA converter 15Z produces an analog velocity signal which is applied to the Z axis servo circuit 18Z through the adding circuit 17Z to rotate the Z axis motor 19Z. When the Z axis motor rotates, the column CLM Fig. 1 rises. In addition, the pulse generator 20Z generates the pulses Zf, so that the error register 14Z is updated by one count in the negative direction each time one of the pulses Zf is produced. The processor 1, in accordance with the following expressions, updates the present positions Xar Yar Za along the respective axes regularly at the time interval AT sec, which positions have been stored in the working memory 6 Xa AX Xa 17 Ya Y Ya 18 Za Z Za 19 The sign depends upon the direction of movement.Similarly, in accordance with the following formulae, the processor 1 updates remaining travelling distances Xr, Yrw Zr the initial values whereof are the incremental values Xi, Yi, Zit respectively every LT sec, these travelling distances having been stored in the working memory 6 Xr AX Xr Yr Y Yr Zr LZ Zr When the following condition is established Xr Yr Zr 0 a decision is rendered to the effect that the tool has arrived at the intermediate position Pmt the coordinate values Xm, Ymt Zm of the intermediate point Pm are stored, and path processing up to the intermediate point Pm is terminated. The processor 1 then obtains incremental values along the respective axes from the intermediate point to tothe tool change point R and performs path processing similar to that described above to bring the tool into position at the tool change point R. The coordinate values of the tool change point R have already been stored in the data memory 4, as known. When positioning of the tool at the tool change point R ends, the processor 1 reads the next command M06 T n n out of the subprogram memory 5 and performs an automatic tool change based on this command. It should be noted that the automatic tool change mechanism and the control sequence thereof are known from the specification of, e.g., Japanese Patent Publication Kokoku No. 51 48825 and, hence, are not described here. When the tool change ends, the processor 1 reads the next command G29 out of the subprogram memory 5 and, through path control exactly the same as that described above, positions the tool at the intermediate position Pm. Next, the processor 1 uses the X and Y coordinate values Xs, Y8 of the operating sequence starting point C2, as well as the X and Y coordinate values Xm, Ym of the intermediate point Pn, which values have already been stored in the working memory 6, to calculate the incremental values Xi, Yi along the respective axes and position the tool at the point Q directly above the point C2 by the above described path processing. When positioning at the point Q ends, the processor 1 reads the approach instruction out of the subprogram memory 5 and performs approach processing just as set forth earlier. With the completion of approach, M99 is read out of the subprogram memory 5, whereupon the processor 1 restores the data, which have been preserved in the preservation memory 7, to the working memory 6. Thereafter, the processor 1 closes the gates 16X, 16Y, 16Z via the data output unit 21 and resumes return tracer machining from the point C2 by using, e.g., the machining program data, machining condition data and sequence numbers restored to the working memory 6. In this manner the tool is moved to overlap the portion from point C2 to point P traversed before breakage, with tracer machining being performed afresh from pointP by the new tool. The foregoing relates to a case where tracer machining is resumed by bringing the tool into position at the starting point of an operating sequence when tool breakage occurs. However, tracing can also be resumed by bringing the new tool into position at the tool breakage point in the maner shown in Fig. 2 B . Further, while the foregoing is an example in which the present invention is applied to a situation where a tool breaks, it should be obvious that the invention can also be applied when a tool has reached the end of its life.Industrial Ap 1icability According to the present invention, when a tool breaks in the course of a tracing operation, the tool can be changed automatically and positioned at a tracing restart point. This makes it possible to improve tracer machining efficiency and to achieve unattended tracer machining.