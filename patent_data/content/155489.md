# AUTOMATIC FREQUENCY CONTROL FOR RADAR RECEIVER

## Claims
Verfahren zur Regelung der Frequenz des Empfängeroszillators eines Überlagerungsempfängers in einem Impulsradarsystem, das einen Sender 10 , eine Antenne 12 , einen Überlagerungsempfänger 13 und eine Sendeempfangsweiche 11 besitzt, die den größten Teil des Ausganges des Senders an die Antenne ankoppelt und Radarechosignale von der Antenne an den Eingang des Empfängers ankoppelt, wobei ein stark geschwächter Teil des Ausganges des Senders durch Ableitung von der Sendeempfangsweiche an den Eingang des Empfängers angekoppelt wird, der Empfänger einen spannungsgesteuerten Empfängeroszillator 15 besitzt, ferner eine Mischstufe zum Kombinieren von an den Eingang des Empfängers angelegten Sionalen mit dem Ausgang des Empfängeroszillators zwecks Erzeugung von Zwischenfrequenzsignalen, einen mit Mitteln zur automatischen Verstärkungsregelung versehenen Zwischenfrequenzverstärker 16 und einen Rilddemodulator 17 zum Empfang des Ausganges des Zwischenfrequenzverstärkers,

## Description
The present invention relates to an automatic frequency control for pulse type radar receivers. More particularly, it relates to an automatic frequency control for a radar receiver local oscillator in which the bandpass characteristic of the receiver is directly utilized, through digially controlled sampling means, to adjust and maintain the receiver local oscillator frequency to the precise value necessary to produce an intermediate frequency output which is centered in the receiver passband at maximum gain. Superheterodyne receivers used in radar systems are of the same general form as superheterodyne broadcast receivers. The radar return signals, being reflections of the transmitted pulse signals, appear at the receiver input on the same carrier frequency as the transmitter pulses, except for a possible Doppler shift in frequency. The return signals are mixed with the output of a local oscillator to produce intermediate frequency signals, which are amplified in a multi stage i.f. amplifier, detected, further amplified in a video amplifier and finally displayed. The receiver local oscillator must be tuned to a frequency differing from the transmitter carrier precisely by the amount of the frequency at the center of the if. amplifier passband or else the receiver performance will be degraded. The radar transmitters most commonly used have poor frequency stability. The frequency of the carriers generated therein may vary substantially over a short time span because of variations in voltage, temperature, pressure and the antenna standing wave ratio. Manual adjustment of the local oscillator frequency to maintain the receiver in tune is impractical. Therefore some form of automatic frequency control AFC for the receiver local oscillator is provided as a necessary feature of pulse type radar systems. The AFC in widest use comprises a voltage controlled local oscillator and a control loop for generating the oscillator control voltage which includes a mixer, an i.f. amplifier and a frequency discriminator. The AFC mixer and AFC i.f. amplifier are separate from the mixer and i.f. amplifier to which the radar return signals are applied. The center frequency of the AFC i.f. amplifier and crossover frequency of the discriminator are aligned. A highly attentuated sample of the transmitter pulse is injected into the AFC mixer together with a portion of the local oscillator output, the resulting difference frequency signal is amplified in the AFC i.f. amplifier and applied to the discriminator where a control voltage is developed of the proper sense to maintain the local oscillator frequency at a value producing an AFC mixer difference frequency equal to the discriminator crossover frequency. The conventional AFC system, for proper operation, requires that the AFC mixer, AFC i.f. amplifier and discriminator be accurately aligned with the receiver mixer and i.f. amplifier and that the bandpass characteristics of these stages vary nearly identically with changes in temperature, voltage or other factors having an influence on such characteristics of the receiver mixer and i.f. stages increases the initial cost and adds to the maintenance cost of a radar system. The conventional AFC system also reduces the reliability of the radar because of the likelihood of the development of misalignments during use. U. S. Patent 3,757,866, issued Sept. 11, 1973, to N. W. Hansen et al., titled Search Lock System describes two types of AFC systems in common use. The first type, corresponding to the conventional AFC systems briefly described above, is denominated a proportional AFC system, so called because the amplitude of the control voltage developed to correct the frequency error of the local oscillator is proportional to the magnitude of the frequency error. The second type of system, referred to as a bang bang AFC system, is briefly described as having a method of local oscillator frequency control in which a fixed corrective voltage is applied in one direction to repeatedly correct the oscillator frequency. If the IF frequency passes through the discriminator center or cross over frequency and the video output exceeds a voltage threshold, the bang bang AFC generates a type of flyback signal, whose magnitude is independent of the specific discriminator output, to rapidly return the oscillator frequency to a corresponding level on the other side of the center frequency so the time averaged discriminator output voltage is zero. The Hansen et al. patent discloses improvements in bang bang AFC systems which reduce the tendency of such systems to lose frequency lock in the presence of large noise spikes. The system of Hansen et al. generates a control voltage for the local oscillator in a control loop which includes an i.f. amplifier and a discriminator which are separate from the i.f. amplifier used to generate signals for utilization or display. Thus, in the Hansen et al. AFC system maintenance of alignment between the control loop i.f. amplifier and discriminator and i. f. amplifier of the receiver are of concern, just as in the conventional proportional AFC systems, briefly described above. Bang bang AFC systems are advantageous for use in situations where the radar receiver is not continuously tuned to a nominally constant transmitter frequency, but rather sweeps a prescribed bandwidth to search for received radar pulses whose exact frequency is not predictable. In accordance with one aspect of this invention there is provided a method as claimed in claim 1. In accordance with another aspect of this invention there is provided an apparatus as claimed in claim 4. The present invention has some attributes of the prior bang bang type AFC systems in that, during the fine tuning sequence of the invention, the frequency of the local oscillator is side stepped above and below a frequency corresponding coarsely to the center frequency of the receiver i.f. amplifier. Such side stepping of the local oscillator frequency occurs, however, only during the time a transmitter pulse is present, as a result of leakage from the radar system duplexer, at the receiver input. During the interpulse period, when radar return signals are being received, the local oscillator frequency is held constant, as is done in other prior proportional AFC systems. Briefly, the invention comprises an AFC for a radar receiver having digital control means for the receiver local oscillator whereby the local oscillator frequency is adjusted to and maintained at a value producing a mixer difference frequency centered within the receiver i.f. amplifier bandpass characteristic. The AFC includes means for sweeping the local oscillator frequency to tune the local oscillator coarsely to a frequency to produce a difference frequency output from the receiver mixer which is within the passband of the i.f. amplifier. Thereafter, fine tuning means come into play to tune the local oscillator frequency to a value producing a mixer output frequency centered at maximum gain within the i.f. amplifier passband. During transmission of a pulse, a highly attenuated portion of the pulse is applied to the receiver mixer. The mixer output is amplified in the i.f. amplifier operating at reduced gain. The analog output of the i.f. amplifier is converted to a four digit binary number by a four level sample and hold comparator. When the comparator output rises to a theshold value, the local oscillator sweep is arrested, holding the local oscillator frequency at a value which produces an i.f. frequency, f Returning to operation during transmission, the digitized output of the i.f. amplifier is stored for each side step increment of the local oscillator frequency. The sum of such outputs for the increments producing mixer outputs above the frequency f One advantage of the present invention is to provide an improved AFC for a radar receiver which employs the bandpass characteristic of the receiver i.f. amplifier directly to control the frequency of the receiver local oscillator. Another advantage of the invention is to provide an AFC for a radar receiver wherein the requirement for maintaining coincidence in the frequency characteristics of several separate circuits is eliminated, thereby simplifying the manufacture, reducing the costs and improving the reliability of the system. A further advantage of the invention is to provide an AFC for a radar receiver which includes means for controlling the gain of the receiver i.f. amplifier during the AFC sample time so that gain variations due to aging or other causes may be compensated. In the drawings Fig. 1 is a simplified functional block diagram of a radar receiver incorporating the automatic frequency control of the invention Fig. 2 is a chart showing the frequency response of a typical i.f. amplifier and showing the responses obtained by side stepping the local oscillator frequency in accordance with the invention Fig. 3 is a functional block diagram of the automatic frequency control of the invention Fig. 4 is a simplified schematic diagram of the blanking switch and a portion of the i.f. amplifier shown in Fig. 3 and Fig. 5 is a chart showing the frequency vs. control voltage characteristic of a typical solid state microwave local oscillator. Referring to Fig.1, wherein a simplified block diagram of a typical radar system appears, a pulse type transmitter 10 produces pulses of r.f. carrier suitably at a frequency of 9345 MHz. The pulses pass through a duplexer 11 to an antenna 12 and are radiated into space. Reflections from objects within the antenna beam return to the antenna whence they again pass through the duplexer in the reverse direction and are diverted to the receiver 13. The return signal pulses from duplexer 11 enter the receiver mixer 14 where they are combined with the output of a local oscillator 15 operating at a frequency f Fig.2 provides an insight to the operation of the digital AFC 20. Curve 22 shows the amplitude of the response of i.f. amplifier 16 to constant amplitude signals at various frequencies. Curve 22 defines the passband of the i.f. amplifier. Peak response is obtained at an input signal frequency f The digital AFC 20 makes use of the degraded amplitude response of the i.f. amplifier resulting from incorrect local oscillator tuning to adjust the local oscillator to the proper frequency. The AFC causes the local oscillator frequency to vary in incremental steps Δs, both above and below the coarse tuning frequency, to produce the i.f. amplifier responses as shown by lines 23, 24 and 25, 26. In the prefered embodiment of the invention, line 23 represents the initial amplifier response and line 24 represents the final amplifier response for sixteen incremental steps in the local oscillator frequency above the coarse tuning frequency. Line 25 represents the initial response and line 26 represents the final response for sixteen incremental steps in the local oscillator frequency below the coarse tuning frequency. The amplifier response for each of the steps 23 24 is stored in an accumulater which produces the sum output Σ H. Similarly, the amplifier response for each of the steps 25 26 is stored in an accumulater which produces the sum output Σ L. Whenever the local oscillator is incorrectly tuned to produce a frequency f The functional aspects and structure of the digital AFC 20 are shown in greater detail in Fig. 3, to which reference is now made. The difference frequency f Referring to Fig. 4, blanking switch 28 may suitably comprise a transistor 30 which is biased to conduct for the duration of a transmitter pulse by a trigger signal on line 31. When conductive, transistor 30 interposes resistor R The signal output of i.f. amplifier 16 is detected at 17, then amplified in video amplifier 18. Video amplifier 18 is preferably of a known type having a logarithmic gain characteristic. The video signal output of amplifier 18 is filtered in a conventional R C low pass filter 36 having a high frequency roll off characteristic with the corner frequency thereof, as it is conventionally defined, selectable at frequencies ranging between 68 KHz and 1.6 MHz, according to the range setting of the radar. After filtering the video signal is converted from analog to digital form in a A D converter 37 which is preferably of a known four level sample and hold type. The digitized output of converter 37 is a 3 bit binary number having a maximum value of decimal four corresponding to a received video signal of maximum amplitude. The digital output of converter 37 is supplied to the input data port of a microprocessor unit MPU 40 and to the input port of the memory system incorporated in display 19. Display 19 is preferably of the recirculating memory type as described, for example, in U.S. Patent 3,964,064 to R. L. Brandao et al. MPU 40, represented by the dashed line enclosure, is programmed to perform the functions shown by the boxes enclosed therein, as will be understood by those skilled in the art. The automatic frequency control program is initiated by a control input signal on line 42 from transmitter control 29 to the sample cycle control function 43 of MPU 40. Sample cycle control 43 enables most significant byte MSB control 44 to output an eight bit binary number on line 45 to MSB D A converter 46. The analog voltage output of converter 46 provides one input through resistor 47 to a summing network 50, which also includes resistors 48 and 49. The frequency control voltage for local oscillator 15 appears on line 51 from summing network 50. In a preferred embodiment of the invention local oscillator 15 is comprised by a Gunn diode type oscillator which typically produces an output frequency of 9375 MHz for a control voltage input on line 51 of approximately 6v. Initially, MSB control 44 furnishes an eight digit binary number on line 45 of sufficient value to provide a control voltage amplitude of approximately 15v on line 51. The actual value of such number is dependent upon the conversion scale factor of D A converter 46 and the attenuation of the output thereof by the summing junction of resistors 47 and 49. Blanking switch 28 is operative approximately for the duration of the transmitter pulse. During this time, MPU 40 is responsive to the output of A D converter 37. Threshold logic 52 determines whether the amplitude of the video signal equals or exceeds level three binary 11 . If the video signal is less than that level, sweep control 53 causes MSB control 44 to decrement the binary number being furnished to D A converter 46, thereby reducing the local oscillator control voltage on line 51 to reduce the local oscillator frequency. For the higher selected radar ranges, where longer transmitter pulses are employed, two samplings of the video output level are taken from converter 37 during each transmitter pulse and two adjustments are made in the local oscillator frequency. When, by this process, the local oscillator frequency is reduced sufficiently close to the transmitter frequency to provide a difference frequency output from mixer 14 near the center of the passband of i.f. amplifier 16 the output of converter 37 will equal or exceed level three. Sweep control 53 then discontinues decrementing MSB control 44 and switches the output of threshold logic 52 to data register 54. Sweep control 53 also signals sample cycle control 43 to commence the local oscillator frequency side step routine, as discussed broadly with reference to Fig. 2. At the beginning of the side step routine, control 43 receives the output number from MSB control 44 for access to a look up table containing stored values of eight digit binary numbers ΔP and smaller valued incremental numbers ΔS. Because of the non linearity of the frequency vs. control voltage characteristic of local oscillator 15, as shown typically in Fig. 5, it is necessary to correlate, by means of the look up table, the values of ΔP and ΔS with the control voltage then present on line 51 in order to obtain equal side step frequency displacements throughout the tuning range of local oscillator 15. The number Δ P obtained from the look up table of control 43 appears on line 55 as one input to adder 56. A second input to adder 56 appears on line 57 from an offset A D converter 58 which produces an eight digit binary number having a value dependent upon the voltage input thereto from a manually adjustable potentiometer 59. The purpose of offset converter 58 is to provide means for compensating for differences in the frequency response characteristics of mixer 14, waveguide components and the like resulting from manufacturing tolerances. The output of adder 56 is converted from an eight digit binary number to an analog voltage in least significant byte LSB D A converter 61. The voltage output of converter 61 is added to the output of converter 46 through resistor 48. The value of resistor 48 is suitably about sixteen times the value of resistor 47 so that the contribution of the output voltage of converter 46 to the control voltage on line 51 is of the order of sixteen times as great as the contribution of converter 61 thereto. In practice, the ratio of the values of resistor 48 to resistor 47 is selected in accordance with the desired resolution of fine tuning adjustments. The first step of the local oscillator frequency side step routine adds the number Δ P to the contents of converter 61 which is initially centered at the binary equivalent of decimal 128. The local oscillator frequency is thereby displaced to a value corresponding to line 23, Fig. 2. The second step of the side step routine adds Δ P to the contents of converter 61, thereby displacing the local oscillator frequency to a value corresponding to line 25, Fig. 2. Succeeding steps of the side step routine alternately add and subtract the number Δ P n Δ S , where n is related to the step number, to the contents of converter 6l, thereby side stepping the local oscillator frequency through the values bounded by the lines 23 24 and 25 26 of Fig. 2. For each such side step producing an increase in local oscillator frequency, sweep control 53 applies the output of threshold logic 52 to a Σ H accumulator of data register 54 and for each such side step producing a decrease in local oscillator frequency sweep control 53 applies the output of threshold logic 52 to a ΣL accumulator of data register 54. After the side step routine is completed, i.e. after thirty two sidesteps, control 43 causes the contents of the Σ H and Σ L to be compared in a subtractor 62, the output of which constitutes an error signal indicative of the tuning error of local oscillator 15. The error signal output of subtractor 62 is supplied as the integrand to an integrator 63, the output of which is added to the converter output on line 57 in adder 56 and the sum is applied to converter 61 for fine adjustment of the local oscillator frequency. If during the sidestep routine the contents of converter 61 are caused to overflow or underflow by the number furnished thereto by adder 56, the carry or borrow bit appearing from converter 61 is applied through overflow underflow corrector 60 to increment or decrement converter 46, as may be appropriate. Converter 61 is then recentered at approximately the decimal value 128, and operation continues. At the end of each sample cycle, i.e. at the end of each transmitted pulse, the number on line 55 is removed but the number on line 57 is retained at all times and the output of integrator 63 is retained, so long as control 43 does not cause reset of sweep control 53, to maintain the frequency adjustment of the local oscillator near the i.f. amplifier center frequency during the following interpulse period. The data input to register 54 are binary level three 11 signals. For simplicity of computation, only the most significant bit 10 of the data input is recognized in register 54. Since the Σ H and Σ L outputs are summations of binary two s data the difference output of subtractor 62 is divided by two prior to integration to provide improved resolution in the local oscillator fine tuning adjustment. The Σ H and Σ L from register 54 are added in adder 65 and the sum output thereof is furnished to sample cycle control 43 and AFC amplitude control 66. If the value of such sum is below a predetermined threshold, control 43 causes reset of sweep control 53. When reset, sweep control 53 clears the output number of MSB control 44 and clears integrator 63. The control signal on line 42 appearing with the next following transmitter pulse causes sample cycle control 43 to re initialize MSB control 44 and the frequency sweep of the local oscillator is repeated during following transmitter pulses. The automatic gain control AGC voltage for i.f. amplifier 16 is established during the interpulse receive period by applying the lowest level digitized output of converter 37 to an integrator which is gated active only during the final portion of the interpulse period. The output of integrator 67 is applied through threshold comparator means included therein to AGC control 68 which outputs a ten digit binary number in response thereto. The output of control 68, after passing through adder 69 is converted to AGC voltage by D A converter 71. AGC control 68 responds to the output of the comparator means 67 to produce a number of such value that the voltage output of converter 71 on line 72 will set the gain of i.f. amplifier 16 at the proper value to maintain a constant false alarm rate FAR at the output of converter 37, as will be understood by those skilled in the art. The AGC voltage established by the means just described, which are analogous to means operating wholly with analog voltages as heretofore known, may be further refined by employing the sum output of adder 65 for fine adjustment. When the local oscillator frequency is adjusted to coincide with the center frequency of i.f. amplifier 16, as is indicated by zero output from subtractor 62 and an output from adder 65 exceeding the reset threshold level, control 43 enables AFC amplitude control 66. Control 66 compares the numerical output of adder 65 with a predetermined threshold to provide a numerical adjustment which is added to the numerical output of AGC control in adder 69, thereby effecting the fine adjustment of the AGC voltage on line 62. Table I, below, contains a listing of the transmitter pulsewidths, pulse repetition frequencies, AFC sample cycle periods and video filter rolloff frequencies for various full scale range settings of one specific radar system embodying the invention.