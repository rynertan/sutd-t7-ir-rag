# NUMERICAL CONTROL MACHINING SYSTEM

## Claims
Numerisch gesteuertes Bearbeitungssystem, in welchem ein Spindelmotor 34 die mit einem Werkzeug 31 verbundene Spindel 33 eines Bearbeitungsgeräts dreht, ein Vorschubmotor 38 den Tisch 35 des Bearbeitungsgeräts bewegt, an dem ein Werkstück 40 sicher befestigt ist, eine numerische Steuervorrichtung 20 die Drehgeschwindigkeit des Spindelmotors 34 steuert, ein Bearbeitungslaststrom des Spindelmotors 34 erfaßt wird, der Laststrom durch die numerische Steuervorrichtung 20 gemittelt wird und die numerische Steuervorrichtung 20 die Vorschubgeschwindigkeit des Tisches 35 derart steuert, daß das Werkstück 40 mit dem Werkzeug 31 bearbeitet wird, dadurch gekennzeichnet, daß die Drehung der Spindel 33 erfaßt wird, der dadurch erfaßte Laststrom an zwei Drehpositionen der Spindel 33 abgetastet wird, wobei die positionen durch 180 Drehung der Spindel 33 voneinander getrennt sind, daß die abgetasteten Laststromdaten in die numerische Vorrichtung 20 eingegeben werden, daß die numerische Steuervorrichtung 20 arbeitet, um die abgetasteten Laststromdaten zu mitteln und eine Lastausgangsgröße des Spindelmotors 34 erhält basierend auf den gemittelten abgetasteten Laststromdaten und auf der Drehgeschwindigkeit des Spindelmotors 34 und daß die Lastausgangsgröße mit einer erlaubten Lastausgangsgröße des Spindelmotors 34 verglichen wird, die im voraus berechnet wurde, so daß, wenn die erste gleich oder größer als die zweite ist, die Vorschubgeschwindigkeit des Vorschubmotors 38 reduziert wird.

## Description
This invention relates to a numerical control machining system hereinafter referred to as an NC machining system , when applicable in which a machining apparatus is controlled by a numerical control device hereinafter referred to as an NC , when applicable to machine a workpiece, and more particularly to an NC machining system in which, during machining, the load of a workpiece is detected to monitor the machining conditions. In a numerical control machining apparatus controlled by an NC hereinafter referred to as an NC machining apparatus , when applicable numerical data instruct the position of a tool with respect to the workpiece so that the workpiece is machined by being controlled numerical values which are calculated by the NC. Accordingly, with the NC machining apparatus, a workpiece can be machined into an intricate product with ease and with high accuracy, and the productivity can be increased. In general, an NC machining apparatus, as shown in Fig. 1, comprises an NC 20 for performing calculation on numeral data commands inputted through a terminal 10 and a machining device 30 which is controlled by the output data of the NC 20. The NC 20 comprises an input unit 21 to which commands are inputted an arithmetic unit 22 for performing operation on commands from the input section 21 a memory unit 23 for storing operation results outputted by the arithmetic unit 22 and commands from the input unit 21 a control unit 24 for controlling the operation of the arithmetic unit and an output unit 25 for delivering operation values such as operation results provided by the arithmetic unit 22 out of the NC 20. On the other hand, in the machining apparatus 30, a tool 31 is held by a tool holder 32 which is secured to the chuck of a spindle 33, and the latter 33 is rotated by a spindle motor 34 which is driven by signals from the output unit 25 in the NC 20. A workpiece 40 is fixedly set on the table 35 of the apparatus 30 with a jig or the like. In Fig. 1, reference numeral 36 designates a ball screw for moving the table 35 along the X axis. The ball screw 36 is driven through a gear box 37 by an X axis feed motor 38, which is driven by signals from the output unit 25. Mechanisms not shown for moving the table 35 along the Y axis and the Z axis are provided, which are similar to the above described mechanism for moving the table 35 along the X axis. These mechanisms are also controlled by signals from the NC 20. In the above described NC machining system using the NC machining apparatus, machining time can be reduced by heavy load machining however, the system suffers from a drawback that, when a load applied to the tool exceeds its allowable value, the tool is broken. This drawback may be eliminated by decreasing the load however, in this case, the machining speed becomes low. According, in the conventional NC machining system, in order to increase the machining efficiency and to prevent the tool from being damage, machining conditions calculated according to the tool s allowable load are stored in the memory unit 23 of the NC 20, so that machining is carried out according to the machining conditions thus stored. Thus, the conventional NC machining system is disadvantageous in the following points When the load of the tool exceeds its allowable value abruptly, the tool may be broken, because the change of the load of the tool cannot be detected during machining. If, in order to prevent the trouble that, when the load of the tool changes abruptly, the tool is broken, the machining conditions are determined with the load of the tool being much lower than the allowable load, then the machining efficiency is lowered. US A 3 809 870 describes a method and apparatus for monitoring the condition of a cutter on a cutting machine while it is being used and for indicating when the cutter wear rate has increased sufficiently to economically require removal for replacement and or servicing. During at least a portion of an actual cutting operation on the machine, the power being consumed by the cutting machine drive motor is monitored and a frequency spectrum of the monitored power consumption is obtained therefrom. At least part of this power consumption frequency spectrum is then integrated to provide a wear rate index value called a wear number which, when compared with previous wear rate index values, may be used as an indication of the relative wear rate for the corresponding cutter. To minimize statistical fluctuations, provisions are also made for averaging over several different measurement or sampling periods. The data obtained is used to determine when the cutter is to be replaced but is not used to control the machine by a feed back control. US A 3 665 493 describes a machining system in which the rate of feed of the cutter along its path and the rate of rotation of the cutter are controlled by an adaptive system. The system forms a servo loop about the actual cutting operation by sensing the torque and vibration of the cutter. Maximum and minimum limits of torque, vibration, spindle speed and feed rate as well as variables which may be derived from these factors are preset into the system. The adaptive control acts to optimize spindle speed and feed rate without violating any of these restraints. The above subject is solved by a numerical control machining system in which a spindle motor rotates the spindle of a machining apparatus to which a tool is connected, a feed motor moves the table of said machining apparatus to which a workpiece is fixedly secured, a numerical control device controls the speed of rotation of said spindle motor, a machining load current of said spindle motor is detected, said load current is averaged by said numerical control device and said numerical control device controls the feed speed of said table, so that said workpiece is machined with said tool Fig. 1 is an arrangement diagram for outlining an NC machining apparatus. Fig. 2 is an explanatory diagram for a description of a first example of an NC machining apparatus necessary for understanding the invention. Fig. 3 is a graphical representation for a description of a method of averaging load current data. Fig. 4 is an explanatory diagram for a description of the generation of an alarm signal in the first example in Fig. 2. Fig. 5 is an explanatory diagram for a description of a second example of an NC machining apparatus. Fig. 6 is an explanatory diagram for a description of a third example of an NC machining apparatus. Fig. 7 is an explanatory diagram for a description of a fourth example of an NC machining apparatus. Fig. 8 is an explanatory diagram for a description of a first embodiment of the invention. The part a of Fig. 9 is a perspective view shown a tool. The part b of Fig. 9 is an explanatory diagram for a description of a method of detecting a spindle load current in the first embodiment in Fig. 8. Fig. 10 is an explanatory diagram for a description of a second embodiment of the invention. One example of a numerical control machining system will be described with reference to Fig. 2. Fig. 2 is an explanatory diagram for a description of the example, in which the machining apparatus is a milling machine. In Fig. 2, a Z axis feed speed S mm revolution 101, Fig. 2 instructed to the Z axis feed motor 38 in Fig. 1 is overridden to S mm revolution 102, Fig. 2 , and a spindle speed N r.p.m. instructed to the spindle motor 34 103, Fig. 2 instructed to the spindle motor 34 is overridden to N r.p.m. 104, Fig. 2 . The term overriding as herein used is intended to means that the operator, monitoring actual machining conditions, suitably corrects the Z axis feed speed S and the spindle speed N. The Z axis feed motor is to move the table 35 toward the main spindle 33. In the example, the feed motor 38 is the Z axis feed motor. According to the Z axis feed speed S and the spindle speed N , the NC calculates a Z axis speed per minute F S x N mm min 105, Fig. 2 which is supplied to a Z axis feed speed servo control 106, Fig. 2 . The Z axis speed servo control drives a Z axis feed motor 38Z through a Z axis feed motor servo amplifier 107, Fig. 2 according to the Z axis feed speed per minute F. Thus, the Z axis feed motor rotates as required, to feed the Z axis at a predetermined speed. The spindle speed N obtained through overriding is used for spindle speed calculation 108, Fig. 2 and is supplied to a spindle speed control 109, Fig. 2 . The spindle speed control drives the spindle motor 34 through a spindle motor amplifier 110, Fig. 2 according to the spindle speed N . Thus, the spindle motor rotates as required, to turn the spindle at a predetermined speed. As the table is moved in the Z axis direction by the Z axis motor 38Z while the spindle 33 is turned by the spindle motor 34 as described above, a desired recess or hole can be formed in the workpiece 40 with the tool mounted on the spindle. One of the specific features of this example resides in that the load current of the spindle motor is detected during machining and is applied to the NC to obtain the load output of the spindle motor, and the load output thus obtained is compared with its allowable value, to control the feed speed of the Z axis feed motor. In other words, the load current shunt current is detected in the spindle motor amplifier 110 and is subjected to A D conversion 111, Fig. 2 . The load current data is inputted to the numerical control device 112, Fig. 2 and is then averaged 113, Fig. 2 . Another specific feature of the example is to average the load current data. This averaging method is shown in Fig. 3, in which the horizontal axis represents time while the vertical axis represents current. The load current is sampled periodically, for instance ten times at time intervals of 100 m sec. The ten load current values thus obtained are averaged, to average the load current data. If, of the ten load current values, the maximum and minimum ones are disregarded, and the remaining eight load current values are used for averaging the load current data, then the load current can be detected more accurately. Referring back to Fig. 2, after averaging the load current data has been achieved, a load output is calculated from the average load current. An allowable load output is calculated 116, Fig. 2 from the maximum output of the spindle motor 115, Fig. 2 and the spindle speed N 108, Fig. 2 . The load output 114 is compared 118, Fig. 2 with an allowable load output 117, Fig. 2 equivalent to a tool s allowable load which is a predetermined value . When the load output is equal to or higher than the allowable load output, i.e., the tool s allowable load, the Z axis feed speed is automatically corrected into S 119, Fig. 2 . Accordingly, the Z axis feed speed per minute F is automatically corrected, and therefore the load output of the spindle motor 34 becomes lower than the tool s allowable load, whereby the tool is protected from damage. When the load output is lower than the tool s allowable load, the load current data of the spindle motor is continuously inputted without correcting the Z axis feed speed S . As is clear from the above description, in the first example of an NC machining apparatus, the Z axis feed motor feed speed can be controlled according to the load output of the spindle motor. In the first example, the load output is compared with the allowable load output, and when the former is higher than the latter, the Z axis feed speed S is automatically corrected to S , as described above. In this connection, an alarm signal may be outputted 120, Fig. 4 , as shown in Fig. 4. In Fig. 4, parts corresponding functionally to those already described with reference to Fig. 2 are designated by corresponding reference numerals and the preceeding descriptions are applicable. The alarm signal may be used, for instance, for stopping the NC machining apparatus. In the first example in Fig. 2, the feed speed of the Z axis feed motor 38Z is controlled. The technical concept is applicable to the X axis feed motor 38X for moving the table 35 along the X axis and the Y axis feed motor 38Y for moving the table along the Y axis, to control the feed speeds thereof. Fig. 5 shows a second example of an NC machining apparatus. In Fig. 5, those components which have been already described with reference to the first example in Fig. 2 are accordingly designated by the same reference numerals, and it is omitted to describe them again in detail. In the second example also, the machining apparatus is a milling machine, and of the feed motors, only the Z axis feed motor is indicated as a typical one. In the first example shown in Fig. 2, the load current of the spindle motor 34 is detected during machining, to control the feed speed of the Z axis feed motor. On the other hand, in the second example Fig. 5, the load current of the spindle motor 34 is detected during machining, and the load current of the Z axis feed motor 38Z is detected during machining and is applied to the NC. Furthermore, the load torque is obtained, and according to the load output of the spindle motor 34 and the load torque of the Z axis feed motor 38Z the feed speed of the Z axis feed motor 38Z is controlled. That is, in Fig. 5, a Z axis feed motor servo amplifier 107 provides a load current shunt current during machining and is subjected to A D conversion 121, Fig. 5 , and the load current data is inputted to the numerical control device 122, Fig. 5 and is averaged 123, Fig. 5 . This load current data averaging method is similar to that described with reference to the first example. After averaging the load current data has been achieved, a load torque is calculated from the averaged load current 124, Fig. 5 . The load torque is compared with a tool s allowable load torque which is predetermined 125, Fig. 5 . When the load torque is large than its allowable value, then the Z axis feed speed S is automatically corrected to S . Accordingly, the Z axis feed speed per minute F is also automatically corrected, so that the load torque of the Z axis feed motor 38Z becomes smaller than its allowable value and the damage of the tool can be prevented. When the load torque is smaller than the allowable load torque, inputting the load current data of the Z axis feed motor is continued without correcting the Z axis feed speed S . As is apparent from the above description, in the second example, the feed speed of the Z axis feed motor can be controlled according to the load output of the spindle motor and the load torque of the Z axis feed motor. In the first and second examples, the technical concept is applied to the spindle and the Z axis of the milling machine however, it should be noted that the technical concept is applicable to the other axes of the milling machine, namely, the X axis and the Y axis, and to other machining apparatuses such as lathes. In the case where the system according to the second example in Fig. 5 is employed to move the table 35 with the X axis feed motor 38X, Y axis feed motor 38Y and Z axis feed motor 38Z, the operation should be carried out as indicated in Fig. 6. In Fig. 6, those parts which have been already described with reference to Fig. 5 are accordingly designated by the same reference numerals or characters, and it is omitted to describe them in detail again. In a third example of an NC machining apparatus shown in Fig. 3, Load currents supplied to the X axis feed motor 38X, Y axis feed motor 38Y and Z axis feed motor 38Z are detected by servo amplifiers 107a, 107b and 107c, respectively, and are subjected to A D conversion 121 . The resultant data are inputted to the NC 122 and are averaged 123 to calculate load torques, respectively. The load torques are compared with their allowable torques 125 . When for at least one of the axes, the load torque is larger than its allowable load torque, the feed speed is automatically corrected 119 . In the third example in Fig. 6, interpolation is carried out 126, Fig. 6 in order to distribute the to the three axes the signal F which is obtained automatically correcting the feed speed, and the resultant interpolation signal is utilized to calculate feed speeds for the axes 127, Fig. 6 which are applied, as signals, to the servo controls 106a, 106b and 106c. Fig. 7 shows a fourth example of an NC machining apparatus. In Fig. 7, those components which have been already described with reference to the second example in Fig. 2 are accordingly designated by the same reference numerals or characters, and are not described in detail here. In the fourth example, only a feed motor is indicated, and the machining apparatus is a drilling machine. In the second example shown in Fig. 5, the load current of the spindle motor 34 is obtained during machining, and the load current of the Z axis feed motor 38Z is detected and inputted to the NC and the load torque is obtained, so that according to the load output of the spindle motor 34 and the load torque of the Z axis feed motor the feed speed of the Z axis feed motor 38Z is controlled. On the other hand, in the fourth example shown in Fig. 7, the load current of the Z axis feed motor 38Z is detected during machining and is inputted to the NC, and the load torque thereof is obtained, so that according to the load torque of the Z axis feed motor 38Z the feed speed of the Z axis feed motor 38Z is controlled. More specifically, similarly as in the first example shown in Fig. 2, the Z axis feed motor 38Z moves the table 35 along the Z axis and the spindle motor 34 rotates the spindle 33, so that a recess or hole having a desired configuration is formed in the workpiece 40 with a drill 31 coupled to the spindle. The specific feature of the fourth example resides in that the load current of the Z axis feed motor is detected during machining and the load torque of the Z axis feed motor is obtained from the load current thus detected, to control the feed speed of the Z axis feed motor 38Z. In other words, in the fourth example in Fig. 7, the load current for machining is detected from a Z axis feed motor servo amplifier 107 and is subjected to A D conversion 121 , and the resultant load current data is inputted to a numerical control device for instance 122 and is averaged 123 . The load current data averaging method is similar to that which has been described with reference to the first example in Figs. 2 and 3. In Fig. 7, after the load current data have been averaged, the load torque is calculated according to the averaged load current 124 . The load torque is compared with a predetermined allowable load torque 125 . When the former is larger than the latter, the Z axis feed speed S is automatically corrected into a value S 119 . Accordingly, the Z axis feed speed per minute F is also automatically corrected, so that the load torque of the Z axis feed motor 38Z becomes smaller than the allowable load torque and the tool is prevented from being damaged. When the load torque is smaller than the allowable load torque, inputting the load current data is carried out again without correcting the Z axis feed speed S . In the fourth example in Fig. 7, the machining apparatus is a drilling machine, and the technical concept is applied to the Z axis. However, it should be noted that the technical concept is applicable to the other machining axes such as the X axis and the Y axis, and that the technical concept can be applied to other machining apparatuses such as a milling machine and a lathe. In the case of a milling machine, a large load is applied to the spindle motor, and therefore it is preferable to employ the system according to the first example shown in Fig. 2. In the case of a drilling machine, a large load acts on the Z axis motor, and therefore it is desirable to employ the system according to the fourth example shown in Fig. 4. Fig. 8 shows a first embodiment of the invention. In Fig. 8, those parts which have been already described with reference to the first example in Fig. 2 are accordingly designated by the same reference numerals or characters and their detailed descriptions are omitted. In the first embodiment also, the machining apparatus is a milling machine, and only the Z axis feed motor is indicated. The specific feature of the first embodiment resides in that the load current of the spindle motor 34 for machining is detected in synchronization with the rotation of the spindle to take into account the waviness which attributes, for instance, to the number of edges of a tool encountered during one revolution of the spindle, the load output of the spindle motor is obtained from the load current thus detected, and the load output thus obtained is compared with an allowable load output, to control the feed speed of the feed motor. In other words, in detecting the load of the spindle, in order to take into consideration the load current waviness attributing for instance to the number of edges of a tool, current at a certain angle in one revolution and that at an angle which is obtained by adding 180 to the aforementioned angle are averaged to cancel out the load current pulsation in one revolution, so that a load current small in variation is detected. Detecting the machining load current as described above makes it possible to detect the load of the tool. Similarly as in the first example in Fig. 2, the Z axis feed motor 38Z moves the table 35 along the Z axis and the spindle motor 34 rotates the spindle 33, so that a recess or hole having a desired configuration is formed in the workpiece 40 with the tool 31 secured to the spindle. The specific feature of the first embodiment resides in that the machining load current of the spindle motor 34 is detected in synthronization with the rotation of the spindle, and the load output of the spindle motor is obtained from the load current, to control the feed speed of the Z axis feed motor 38Z. In other words, in Fig. 8, the machining load current shunt current is detected from the spindle motor amplifier 110 and is subjected to A D conversion in synchronization with a one revolution signal from a spindle encoder 130 Fig. 8 and a half revolution signal which is formed from the one revolution signal, and the resultant load current data is inputted to the numerical control device 112 and is averaged 113 . This load current data averaging method is similar to that which has been described with reference to the first example shown in Figs. 2 and 3. A method of detecting the load current of the spindle in the first embodiment will be described with reference to Fig. 9. When the load current of the spindle 33 is detected, pulsation occurs during one revolution of the spindle because of the number of edges of the tool 31 or the inclination of the working face thereof. It has been known through experience that the pulsation is about 10 to 20 of the actual load. Therefore, the pulsation cannot be disregarded to suitably control the load. Therefore, a method of eliminating the pulsation to detect a true load current will be described. In the part a of Fig. 9, reference character T designates a tool which is an end mill by way of example, and C₁, C₂ and C₃ cutting edges of the tools, respectively. In the part b of Fig. 9, reference characters IC₁ and IC₂ designate the pulsations which attributes to the loads of the cutting edges C₁ and C₂, respectively, P₀ the position of a one revolution one pulse signal of the spindle encoder 130, and P₁ the position which is apart by 180 from the position P₀. As is apparent from the part b of Fig. 9, the pulsation can be eliminated by averaging two different load currents at two positions which are apart by 180 from each other. Accordingly, a load current pulsation due to each cutting edges is A load current pulsation at a position different by 180 in phase is Averaging the two values, In the above described expressions, I₁ is the pulsation of the composite current of the load currents at the position P₀ which attribute to the cutting edges, and I₂ is the pulsation of the composite current of the load currents at the position P₁. Therefore, the pulsation component can be eliminate by averaging the values at two positions which are different by 180 in phase from each other. In the first embodiment in Fig. 8, after the load current data have been averaged 113 , the load output is calculated according to the averaged load current 114 . An allowable load output is calculated 116 from the maximum output which is set for the spindle motor 34 115 and the spindle speed N 108 , and the aforementioned load output is compared 118 with the allowable load output 117 which is equivalent to the predetermined allowable load of the tool. When the load output is equal to or larger than the allowable load output, i.e., the tool s allowable load, the Z axis feed speed S is automatically corrected to a value S . Accordingly, the Z axis feed speed per minute F is also automatically corrected, so that the load output of the spindle motor becomes smaller than the tool s allowable load and the tool is protected from being damaged. When the load output is smaller than the tool s allowable load, the load current data of the spindle motor is carried out continuously with the Z axis feed speed S not corrected. As is apparent from the above description, according to the first embodiment of the invention, the feed speed of the Z axis feed motor can be controlled according to the load output of the spindle motor. In the first embodiment, the feed speed of the Z axis feed motor is controlled however, the feed speed of the X axis feed motor or Y axis feed motor can be equally controlled. Fig. 10 shows a second embodiment of the invention. In Fig. 10, parts which are equal to or correspond to those described with reference to the second example in Fig. 2 and the first embodiment in Fig. 8 are accordingly designated by the same reference numerals or characters, and their detailed descriptions are omitted. In the second embodiment also, the machining apparatus is a milling machine and the feed speed of the Z axis feed motor is controlled by way of example. In the second example in Fig. 5, the machining load current of the spindle 34 is detected to obtain the load output, the machining load current of the Z axis feed motor 38Z is detected and inputted to the NC, and the load torque is obtained, so that the feed speed of the Z axis feed motor 38Z is controlled according to the load output of the spindle motor 34 and the Z axis feed motor 38Z. On the other hand, in the second embodiment in Fig. 10, the technical concept of the first embodiment in Fig. 8 is applied to the second example in Fig. 5. That is, the machining load current of the spindle motor 34 is detected in synthronization with the rotation of the spindle to obtain the load output, the machining load current of the Z axis feed motor 38Z is detected and inputted to the NC, and the load torque is obtained, so that the feed speed of the Z axis feed motor 38Z is controlled according to the load output of the spindle motor 34 and the load torque of the Z axis feed motor 38Z. In the second embodiment in Fig. 10, the machining load current shunt current is detected from a Z axis feed motor servo amplifier 107 and is subjected to A D conversion 121 , and the resultant load current data is inputted into the numerical control device 122 and averaged 123 . A method of averaging the load current data is similar to that which has been described with reference to the first example in Fig. 2. After the load current data have been averaged, the load torque is calculated according to the averaged load current 124. The load torque is compared with the predetermined allowable load torque of the tool 125 . When the load torque is equal to or larger than the allowable load torque, the Z axis feed speed S is automatically corrected to a value S . Accordingly, the Z axis feed speed per minute F is also automatically corrected, so that the load torque of the Z axis feed motor 38Z becomes smaller than the allowable load torque and the tool is protected from being damaged. When the load torque is smaller than the allowable load torque, the Z axis feed speed S is not corrected, and the load current data of the Z axis feed motor is inputted continuously. As is clear from the above description, according to the second example of the invention, the feed speed of the Z axis feed motor can be controlled according to the load output of the spindle motor and the load torque of the Z axis feed motor. In the second embodiment, the spindle of the milling machine and the Z axis are controlled. However, the technical concept of the invention is applicable to other machining axes such as the X axis and the Y axis. Furthermore, the technical concept can be applied to other machining apparatuses such as for instance lathes. In the NC machining system according to the invention, as was described above, the machining load current of the spindle motor or the feed motor is detected, the detection signal is inputted to the input unit of the NC to obtain the load output, and the load output is compared with the allowable load output, so that the comparison signal is utilized to control the feed speed of the feed motor and the tool is protected from being damaged. Furthermore, as the load output of the motor can be set close to the tool s allowable load, the machining efficiency can be increased.