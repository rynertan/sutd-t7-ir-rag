# Temperature compensation apparatus for gear shapers

## Claims
Programmgesteuerte hydromechanische Zahnradformungsmaschine mit einer Basis 12 , einer relativ zu der Basis 12 entlang einer Hauptachse 16 bewegbaren Subbasis 14 , einer Spindel 18 , an deren einem Ende ein Schneidwerkzeug montiert ist, wobei die Spindel 18 an der Subbasis 14 montiert und relativ zu dieser bewegbar ist und sich längs einer Spindelachse 20 einschließlich eines Schneidhubes zum Entfernen von Material von einem Werkstück hin und her bewegt, wobei das Schneidwerkzeug um die Spindelachse 20 drehbar ist, wobei ferner die Basis 12 zur Aufnahme eines Werkstückes ausgebildet ist und der Mittelpunkt des Werkstücks auf einer Werkstückachse 24 montiert ist, die im wesentlichen senkrecht zur Hauptachse 16 verläuft, wobei der Abstand zwischen der Werkstückachse 24 und der Spindelachse 20 einen Zentrumsabstand 26 definiert, ferner mit einem von einer Steuereinrichtung gesteuerten Motor zur Bewegung der Subbasis 14 relativ zur Basis 12 , um den Zentrumsabstand 26 in einer vorbestimmten Weise zu verändern, um eine vorbestimmte Werkstückgestalt zu bilden, sowie mit einer Temperaturkompensationsvorrichtung, welche eine Auslenkungswandlereinrichtung 50 zur Erzeugung eines ersten Signals umfaßt, welches dem Abstand zwischen dem Schneidwerkzeug und einem vorbestimmten Wärmegleichgewichtsreferenzpunkt entspricht, um thermische Expansions und Kontraktionseffekte am Schneidwerkzeug abzufühlen, und mit Steuereinrichtungen 58 , die auf das erste Signal ansprechen, um ein Korrektursignal für den Motor zu erzeugen, wobei das Korrektursignal dem Ausmaß entspricht, mit dem der Motor die Subbasis 14 zur Kompensierung der thermischen Expansions und Kontraktionseffekte bewegen soll,

## Description
The invention relates to compensating for temperature induced structural size variations occurring in machine components during a machining process and has particular but not exclusive application to gear production equipment. Many manufacturing processes are affected by ambient or operational temperature changes occurring during manufacture. Gear production processes utilizing machining apparatus for producing gears by any one of several methods are particularly sensitive to temperature variations occurring during the manufacturing process. Gear production equipment is generally sensitive to center distance, i.e. the distance between the center of the gear being produced and the center of the tool cutting the gear. Thermal expansion and contraction of various components of gear production equipment cause varying center distance and consequent variations in the gear being produced. One type of gear production machinery susceptible to such temperature variations is the hydromechanical gear shaping machine shown in our U.S. A 4,125,056, 4,136,302 and 4,254,690. The gear shaper produces gears from a workpiece mounted on a rotating worktable. A cutter is mounted on a spindle whose axis is substantially parallel to the worktable axis. Moving or feeding the cutter spindle relative to the workpiece in a predetermined manner while reciprocating the spindle and rotating the worktable causes the cutter to shape a gear. It is apparent that the center distance between the workpiece and the cutter must be accurately controlled in order to produce the desired shape. Hydromechanical gear shapers use closed loop servo systems to provide for extremely accurate positioning of the center distance between the centreline of a gear shaper cutter spindle and the centerline of the workpiece through the use of digital or analog feedback devices sensing various parameters of the machine structure. However, such feedback devices are insensitive to temperature dependent expansion and contraction of components of the machine. This creates size changes in the gears being produced, which changes are a function of the operating temperature of the machine components. It has been found that temperature variations during the production of any particular gear, may result in size variations of finished gears of as much as 0.076m.m. 0.003 inches . This part size variation is most noticeable in large gears requiring several hours to produce. In extreme circumstances a spiral cut is caused and a step occurs in the gear s circumference. The defective gears so produced must either be re cut to different specifications or discarded. Temperature changes may be induced by a number of different things. Obviously, ambient temperature changes occurring between the beginning and end of a particular work shift or cycle are significant. Additionally, the mere operation of the gear shaper causes its various components to heat up during the operational cycle. Furthermore, various operating conditions, such as the amount and type of coolant, whether or not the operation is continuous over a work day, types of materials being cut, size of the workpiece, etc., all contribute to operational temperature variations. Production accuracy of prior art machines is enhanced with limited success by controlling these various temperature inducing parameters to maintain temperature stability. For example, these machines could be operated in temperature controlled, air conditioned environments under constant operating conditions or could be continuously operated 24 hours a day. These various methods used to ensure accurate production are quite costly, and as a practical matter, prior art gear shapers are usually run through a warm up period which generally requires considerable time to enable the machine to reach temperature equilibrium. This equilibrium must then be maintained by attempting to operate the machine at a constant cutting rate. Usually, if operating parameters of feed and speed are changed, the heat generated by rotating or reciprocating machine members increases or decreases establishing, after a period of time, a new equilibrium at a different structural temperature which results in an associated size change of the workpiece. Prior art machines are also affected by the fact that various critical machine components, due to their masses and heat dissipation properties, not only reach equilibrium at different temperatures but also over different time spans so that their combined effect on gear size could cause an initial center distance reduction and a subsequent increase as different components of the machine structure change their temperature. Even if the aforementioned parameters may be controlled, changes in ambient air temperature over a full day of operation, or the temperature of the cutting fluids used will cause additional size changes even at constant cutting speeds and feeds. It has been proposed in JP 57 48448 to provide machining apparatus with an automatic temperature compensating system which senses displacement. The apparatus has a base, a sub base movable relative to the base along a main axis, a spindle having a cutter mounted at one end, the spindle being mounted on the sub base and movable relative thereto, said base being arranged to receive a workpiece, the center of the workpiece being mounted on a workpiece axis substantially perpendicular to the main axis, the distance between the workpiece axis and the spindle axis defining a center distance, a motor controlled by a control means for moving the sub base relative to the base in order to vary the center distance in a predetermined manner to form a predetermined workpiece shape, and temperature compensating apparatus including displacement transducer means for producing a first signal representative of the distance between the cutter and a predetermined thermal equilibrium reference point, for sensing thermal expansion and contraction effects on the cutter, and control means responsive to said first signal for producing a correction signal for the motor, said correction signal corresponding to the extent to which the motor is to move said sub base to compensate for said thermal expansion and contraction effects. In accordance with the invention in a first aspect, improved compensation is achieved by utilising temperature sensing means for producing a temperature output signal representative of an operating temperature of the apparatus, comparator means for comparing said temperature output signal to a predetermined reference value and for producing a temperature correction signal corresponding to said comparison, and said control means being responsive to said temperature correction signal whereby said motor correction signal is a function of said sensed temperature. Referring again to the prior art, it is known from DD 146410 to provide apparatus for compensating for thermal expansion or contraction of a machine component along an axis, the component being movable along the axis relative to another component by a motor, including temperature sensing means for producing a signal indicative of the temperature of the machine component, means for establishing a signal indicative of a reference temperature, and means for controlling operation of the motor in dependence upon said reference temperature signal and said signal from the temperature sensing means. In a second aspect, the present invention provides an improvement wherein a time average of the temperature of the machine component is monitored. The invention includes means for determining a time averaged temperature of said machine component comparator means for determining if said average temperature is within predetermined limits, means responsive to said comparator means for stopping operation of the machine if said average temperature is not within predetermined limits, means responsive to said comparator means if said average temperature is within said limits for comparing the average temperature to said reference temperature and for producing a correction signal corresponding to the dimensional effect on said machine component and of the difference between said average temperature and said reference temperature, and means for applying said correction signal to said motor. There now follows a detailed description to be read with reference to the accompanying drawings, of a gear shaping machine embodying the invention. In the accompanying drawings Referring now to Figure 1 there is shown a side elevational diagrammatic view of a hydromechanical gear shaping machine 10, constructed in accordance with the principles described in the aforementioned U.S. patents. The machine includes a fixed base 12 and a movable sub base 14 which is slidable along base 12 between the full line position shown in Figure 1 and phantom line position. Sub base 14 is moved along main axis 16 of the machine by an infeed motor now shown responsive to control signals produced by a position control system. Sub base 14 carries a spindle 18 the bottom end of which is adapted for receiving a cutting tool or cutter not shown . Spindle 18 is rotatable about and vertically reciprocable along its axis 20. Work table 22 is mounted on base 12 for rotation about its axis 24. The worktable is for supporting a work piece not shown to be formed into a gear. Each of the axes 20 and 24 are substantially perpendicular to the longitudinal machine axis 16. Programmed movement of sub base 14 along axis 16 simultaneously with rotation and vertical reciprocation of the spindle and cutter and rotation of the workpiece results in predetermined variations in the radial infeed or center distance 26 thereby causing the cutter to shape the workpiece in a predetermined manner to form the desired gear. Cutter spindle 18 and its associated components are contained in cutter spindle housing 32 which is hinged about transverse axis 30 which vertically reciprocates with the spindle. It will be understood by those skilled in the art that housing 32 is mounted so that there will be, in operation, relative movement between the housing and the sub base. While the aforementioned description describes the conventional operation of a prior art hydromechanical gear shaper, the invention is an improvement of this machine and is adaptable to similar hydromechanical gear shapers. The invention is diagrammatically shown in Figure 3 and comprises 3 analog sensors a displacement or proximity transducer 50, a sub base thermistor 52 and a base thermistor 54 each of the sensors providing an input to analog to digital converter 56, the output of which is connected to CPU 58. Calibrating resistors 60 and 62 as well as filters 64 and 66 are used in a conventional manner to condition the output of thermistors 52 and 54 into converter 56. Sample switch 70 is operatively connected to CPU 58 through optical coupler 72. The location and operation of sample switch 70 will be described in more detail below. The location of displacement transducer 50 and therminstors 52 and 54 is diagrammatically shown in Figure 1. 1. These locations are not more specifically located because each location must be somewhat empirically determined on each type of machine design in order to find a mounting location where the sensed parameter will be representative of the thermal expansion and contraction of the associated component. In the preferred embodiment, the mounting locations of thermistors 52 and 54 are generally along the longitudinal machine axis 16 while the location of displacement transducer 50 is preferably somewhat off center because of the particular type of transducer used. The locations of the various sensors are not absolute and the invention will perform as intended because it is the relative temperature values which are operative to effect infeed motor compensation. In each type of machine design some components may have greater thermal effect on machine operation than others. In the hydromechanical gear shaper shown in the Figures, it has been determined that the machine base 12 is a primary structural component whose thermal expansion and contraction should be monitored because this component provides a mounting point for the center distance position control system and carries work table 22 as well as the workpiece. Also, sub base 14 has been empirically determined to be another primary structural component because it houses most of the drive elements of the machine and is slidably mounted on base 12 for translational motion along axis 16. It has also been determined that cutter spindle housing 32 is a third primary structural component whose temperature should be monitored because it carries cutter spindle 18 and the cutter. The motion of the cutter spindle is such that during its cutting stroke it is engaging the workpiece for chip removal and during its return stroke it is retracted from the workpiece to provide for clearance between the workpiece and the cutter. During the cutting stroke the pass of the cutter may be parallel to workpiece axis 24 or at an incline or may be a curved path depending upon the type of gear being produced. The major amount of temperature induced size changes in gear shaper operations occur between the mounting points of cutter spindle housing 32 and sub base 14. Thus, the displacement transducer 50 senses the most critical parameter because the area of the cutter spindle housing is one of the hottest areas of the machine because of the frictional forces associated with the cutting and because the distance between the cutting point and hinge axis 30 is relatively large, thus magnifying the effect of thermal expansion and contraction. The axis 20 of the cutter spindle is relatively thermally insensitive with respect to housing 32. Thermal expansions and contractions in this area are of a complex non linear nature and cannot be adequately determined by mere temperature measurements. Consequently, a displacement or proximity transducer rather than a thermistor is utilized to directly sense the displacement of housing 32 relative to its normal thermal equilibrium position. The direction of deviation of cutter spindle 18 caused by thermal effects on housing 32 is shown by line 75 which diagrammatically represents not to scale motion of axis 20 and housing 32 relative to hinge axis 30 as a result of increased temperature. That is, increased temperature generally means decreased center distance. Displacement transducer 50 is used to cyclically measure displacement of a predetermined point of spindle housing 32 relative to its mounting points on sub base 14. The sensed displacement is geometrically related to the displacement of the axis of the cutter spindle from its normal, equilibrium axis. Since the cutter spindle is during operation, continuously reciprocating and rotating causing the position of the cutter spindle to vary during its cycle, sample switch 70 shown in Figure 3 is mounted at a predetermined point not shown relative to spindle housing 32 in order to clock the measurements of displacement transducer 50 and other sensors so that they occur during operation always at the same cyclical point during the cutting stroke. Any convenient location may be chosen so long as the measurement is consistent. As has been stated above, the placement of the various sensors must be representative of the thermal effect on the associated component. Similarly, the amount of correction required for each degree of temperature variation must be determined for each component. Any number of such sensors and associated components may be employed in the operation of the invention if desired. In order to determine the placement of thermistors 52 and 54 in a particular machine one must empirically determine the relationship between the temperatures sensed at various locations on a component and the expansion or contraction of the component. The locations shown in Figure 1 for thermistors 52 and 54 are the approximate locations where the sensed temperature of the respective components is most closely linearly related to the amount of expansion or contraction. The various sensor outputs are read by CPU 58 and processed according to the various programs diagrammatically shown in Figures 4 8, in order to arrive at a correction signal which is essentially an arithmetic sum of the component of each thermal expansion or contraction lying along the center distance. For example, the thermal expansion or contraction of base 12 may be empirically related to the temperature sensed by thermistor 54. This thermal effect has a predetermined center distance component along axis 16 affecting distance 26. This thermal effect may be calculated for each degree of temperature change. Similarly, the thermal expansion or contraction of sub base 14 along line 16 may be determined and combined with the center distance components associated with base 12 to produce the needed correction. As will be understood below, the amount of correction required is related to a particular number of drive pulses to be delivered to the digital infeed motor. The control programs controlling the operation of CPU 58 are shown in Figures 4 and 5. The description of the operation of the control system and the various subroutines shown in Figures 6 9 will be described by reference to the various blocks diagrammatically shown in the flow charts. As shown in Figure 4, after starting, the program branches to decision block 101 to determine if the cutter is making a cut. The preferred embodiment makes the temperature compensation on the first cut although this could be done periodically during a cut for the production of large gears. If the cut count is one or larger, the program proceeds to block 102 in order to set the read sensors flag time and the sample number to zero. The program goes to block 104 to detect the sample switch interrupt produced by closure of switch 70. At the interrupt the program will branch to block 106 causing CPU 58 to read the digital values output from converter 56 corresponding to the displacement or proximity transducer, the sub base thermistor and the base thermistor. The values read at this point correspond to displacement in inches and temperature values in degrees. These values are stored in memory and the program branches to blocks 108 and 110 in order to increment the sample member and determine if N samples have been taken. The number of samples to be taken may be programmed into the control system in order to achieve a satisfactory system operation. All samples are taken at the clock rate when switch 70 is closed. If the required number of samples have not been taken, the program returns to block 102 in order to repeat the procedure and take the next sample. When N samples have been taken the program will branch to block 112 where the read sensors flag will be set false and the program will continue with the cycle procedure shown in Figure 5. Once N samples have been taken, the program will continue through decision block 114 to access the proximity temperature compensation subroutine 300, the base compensation subroutine 400, the sub base temperature compensation subroutine 500 and the total compensation procedure 600. Proximity compensation procedure 300 is used to compare the output of displacement transducer 50 to various predetermined limits and determine the affect of the sensed displacement on the control signals to be provided to the infeed motor. The first time this subroutine is run, a determination is made in decision block 302 if P₁ P In both situations the program causes the CRT to display P The operation of Figures 7 and 8 is similar to that of Figure 6 and the various program steps are identified by similar numbers although in the 400 and 500 series respectively. The base midpoint is identified as Y and the sub base midpoint is Z. Each subroutine determines its respective correction factor, all of which are summed in block 601 of Figure 9 to arrive at total compensation necessary. Note that the base error correction is subtracted from the others because it is the mounting reference on which the other sensors are located. The total compensation is compared in block 602 to a predetermined distance value D and a running compensation value. The running compensation is a total correction which may have been determined on previous cycles of system operation on the first run through this subroutine it is zero and D equals a predetermined boundary constant such that the running compensation is updated in block 604 only if the total compensation required at any one time is excessive by an amount D. Smaller corrections are therefore not made. The running compensation valve is used in block 606 to update a distance counter in CPU 58 which counts the total number of pulses to be provided to the infeed motor in block 608. The distance counter also receives inputs from the primary position control system.