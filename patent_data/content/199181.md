# FUEL INJECTION SYSTEM FOR AN INTERNAL COMBUSTION ENGINE

## Claims
Brennstoffeinspritzsystem für eine 4 Takt Mehrzylinder Brennkraftmaschine, das eine Einspritzvorrichtung, die in Ansaugrohrabschnitte der Maschine eingespritzte Brennstoffströme erzeugt, eine Zeitsteuereinrichtung, die eine Vielzahl von zumindest einer Stelle in einem Maschinenzyklus entsprechenden Zeitsteuersignalen abgibt, eine erste Recheneinrichtung, die für eine Vielzahl aufeinanderfolgender Einspritzungen eine Grundbrennstoffmenge für einen Maschinenzyklus entsprechend den Maschinenbetriebszuständen berechnet, eine Speichereinrichtung, die Daten für eine mittels der Einspritzvorrichtung auf den Empfang eines vorangehenden Zeitsteuersignals hin eingespritzte Brennstoffmenge speichert, eine zweite Recheneinrichtung, die entsprechend einer Differenz zwischen der von der ersten Recheneinrichtung berechneten Grundbrennstoffmenge und einer vorangehend eingespritzten, in der Speichereinrichtung gespeicherten Brennstoffmenge eine endgültig einzuspritzende Brennstoffmenge berechnet, und eine auf das Zeitsteuersignal aus der Zeitsteuereinrichtung ansprechende Betätigungseinrichtung aufweist, die die Einspritzvorrichtung zum Erzielen eines gleichzeitigen Einspritzens einer endgültigen Brennstoffmenge gemäß der Berechnung durch die zweite Recheneinrichtung in Ansaugrohrabschnitte betreibt, gekennzeichnet durch eine Einrichtung 101, 103, 105 107, 109, 111 , die bei gleichbleibendem Laufzustand der Maschine 7 die endgültigen Brennstoffmenge Tau durch Einstellen der endgültigen Menge allein entsprechend der Differenz derart korrigiert, daß für zwei aufeinanderfolgende Brennstoffeinspritzungen die von der Einspritzvorrichtung 11 1, 11 2, 11 3, 11 4 eingespritzte Menge gleichgemacht ist.

## Description
The present invention relates to a fuel injection system of a four stroke multicylinder internal combustion engine, comprising injecting means generating flows of fuel injected into manifold portions of the engine timing means providing a plurality of timing signals corresponding to at least one position in one engine cycle first calculating means calculating, in accordance with engine operating conditions, a basic amount of fuel for one engine cycle for a plurality of consecutive injections memory means storing data of an amount of fuel injected by said injecting means upon receipt of a preceding timing signal second calculating means calculating a final amount of injected fuel corresponding to a difference between the basic amount of fuel calculated by the first calculating means and a preceding injected amount of fuel stored in the memory and operating means, responsive to the timing signal from the timing means, operating the injecting means to obtain a final amount of fuel as calculated by the second calculating means to be simultaneously injected into manifold portions. Document US A 4 401 087 discloses a fuel injection system of this type, wherein the amount of fuel to be injected in such an injection cycle can be calculated as twice the basic fuel injection amount subtracted by the finally injected amount during the preceding injection cycle. This means that an injection of fuel of an amount which is short during the preceding injection cycle can be injected in the present cycle to compensate the amount of fuel missing in the preceding cycle. As a result, a desired air fuel ratio can be obtained regardless of the degree of acceleration of the engine. Accordingly the object of the present invention is to provide a fuel injection system for a four stroke multi cylinder internal combustion engine capable of obtaining an appropriate amount of fuel for injection in the steady state of the engine. According to the present invention, means correcting the final amount of fuel are provided so that the injected amount of two consecutive fuel injections from said injecting means is equalized in the steady state condition of the engine, by setting said final amount only according to said difference. Figure 1 schematically illustrates an internal combustion engine provided with a fuel injection system according to the present invention. An amount of air passed through an air cleaner 1 is controlled by a throttle valve 3 connected to an accelerator pedal 2. The air is introduced, via a surge tank 4, an intake pipe 5, and an intake valve 6, to a combustion chamber 8 of an engine body 7. An exhaust gas resultant from the combustion in the combustion chamber 8 is removed, via an exhaust valve 9, by an exhaust pipe 10. This engine is, for example, provided with four cylinders, and therefore, four fuel injectors 11 1, 11 2, 11 3, and 11 4 are provided in the respective intake pipes 5 at a position adjacent to the respective intake ports 7a. The fuel injectors 11 1, 11 2, 11 3, and 11 4 are divided into first and second groups, wherein the grouping is such that the cylinders belonging to each of the groups have respective operational phases which are spaced at a value of 360 degrees CA. In the particular arrangement of the engine, the ignition in the cylinders is attained in the order of number 1, 3, 4 and 2 cylinder, during the one complete engine cycle, i.e., 720 degrees CA. Therefore, the first group includes the fuel injectors 11 1 and 11 4 of the first and fourth cylinders, and the second group includes the fuel injectors 11 2 and 11 3 of the second and third cylinders, respectively. As will be fully described later, the injectors 11 1 and 11 4 and 11 2 and 11 3 of the first and second groups are operated independently. Reference numeral 12 designates an electronic control circuit as a micro computer system for attaining the independent group fuel injection operation. A fuel pump 13 is connected, via a fuel supply conduit 15, to the fuel injectors 11 1, 11 2, 11 3, and 11 4 for forcibly supplying fuel from the fuel tank 14 to those fuel injectors. The electric control circuit 12 as a micro computer system has, as essential components, a micro processing unit MPU 16, a memory 17 comprised by a read only memory ROM and a random access memory RAM , an input port 18, an output port 19, and a bus 20 interconnecting these elements for transmitting commands and data therebetween. A pressure sensor 22 is adapted for providing an analog signal indicating an absolute pressure at the surge tank 4 corresponding to the load of the engine, and a throttle sensor 23 detects the degree of opening of the throttle valve 3. The throttle sensor 23 is, for example, constructed as a rotary switch for producing pulse signals, a number of which corresponds to the degree of opening of the throttle valve 3. A crank angle sensor 24 detects a position of a crankshaft 27 of the engine, to which is connected a connecting rod 26 connected to a piston 25. The crank angle sensor 24 is, for example, constructed as a Hall element facing magnetized teeth members 28 for producing pulse signals. The pulse distance of these pulse signals is utilized to detect the engine speed. These pulse signals are also used as a triggering signal for commencing a fuel injection routine in the control circuit 12. A coolant temperature sensor 29 is connected to the engine body 7, in contact with the engine coolant, to provide an analog signal indicating the temperature of the engine coolant. The outputs of the pressure sensor 22, throttle sensor 23, and engine coolant temperature sensor 29 are connected to an analog to digital converter 21. As well known to those skilled in this art, the A D converter 21 is provided with a multiplexer for sequentially inputting the signals from the analog sensors 22 and 29 for providing digital signals to be input to the input port 18. The crank angle sensor 24 is provided with a first output for producing pulse signals for every 30 degrees rotation of the crankshaft 27, and a second output for producing pulse signals for every rotation of the crankshaft 27 of 720 degrees, as shown in Fig. 8 b and c , respectively. These pulse signals are input to the input port 18 via lines 33 and 34, respectively. The pulse signal from the throttle sensor 23 is also input to the input port 18. The output port 19 is connected to a drive circuit 36 for operating the first group of injectors 11 1 and 11 4 and to a drive circuit 37 for operating the second group of injectors 11 2 and 11 3. The MPU 16 operates, in accordance with programs stored in the ROM portion of the memory 17, to calculate fuel injection periods, and to issue signals directed to the drive circuits 36 and 37 for operating the respective groups of fuel injectors 11 1 and 11 4 11 2 and 11 3 for the calculated periods. The routines attained by the control circuit 12 will be described with reference to the flowcharts. Figure 2 illustrates a flow chart for illustrating how the analog to digital conversion routine is attained. The MPU 16 issues a control signal directed to the A D converter 21 to select one channel connected to one of the analog sensors, such as the pressure sensor 22, so as to commence the conversion of the analog signal to a digital signal. When such analog to digital conversion is completed, an interruption signal is sent from the A D converter 21 to the MPU 16 to start an interruption routine as shown in Fig. 2. At point 49, the output data from the A D converter 21 is read out, and this data is stored in a predetermined RAM area of the memory 17 for storing the intake pressure data. At the following point 50, a command signal is issued to the A D converter 21 for selecting the channel connected to the next analog sensor, such as the engine coolant temperature sensor 29, so as to commence to convert the analog signal therefrom to a digital signal. Figure 3 shows a routine for calculating a basic fuel injection period. This routine is entered into calculation by an interruption signal from an oscillator or timer counter at a predetermined time interval, such as 2 msec. or 4 msec. At point 40 and 41, the data of the engine speed and intake pressure stored in the RAM areas is read out. At point 42, a basic fuel injection period Tp corresponding to the amount of fuel for two fuel injections from an injector is determined so as to attain the stoichiometric air fuel ratio. The injection period Tp corresponding to the amount of fuel for two fuel injections per single injector is very important for attaining the object of the present invention, as will be fully described later. The calculation of the basic injection period Tp is calculated by a map extrapolation method which is, per se, known. The ROM area of the memory 17 is provided, as shown by the following Table, with a data map comprised by data of the engine revolution number per one rotation r.p.m. , D₁ data of the intake pressure D₂ data of the fuel injection period Tp corresponding to the amount of fuel for two fuel injections per one injector, D₃ and numbers of the addresses of the ROM, D₄. As will be seen from the Table, the engine speed data D₁ is selected from a value of 400 r.p.m. to 5600 r.p.m. for an interval of 400 r.p.m. Ten values of intake pressure P₀ to P₉ are employed at appropriate intervals. Note P₀ P₁ ... P₉. A fuel injection period Tp is calculated under the two dimensional extrapolation method in the following way. When, for example, an actual engine speed is 1000 r.p.m. and the value of the actual intake pressure P is between P₅ to P₆ , the data of the fuel injection periods T₁₅ and T₁₆ is read out from the addresses A 15 and A 16 where the data of intake pressure P₅ and P₆ at 800 r.p.m. is stored. The data of the fuel injection periods T₂₅ and T₂₆ are then read out from the addresses A 25 and A 26 where the data of the intake pressure P₅ and P₆ at 1200 r.p.m. is stored. Then, the following calculation is attained. Figure 4 shows a routine for resetting a counter m for discrimination of the group of cylinders designated for the following fuel injection. As shown in Fig. 7 b , the counter m is incremented at every instance when the 30 CA signal, as shown in Fig. 8 c , is received from the crank angle sensor 24. In addition to this 30 signal, the crank angle sensor 24 issues pulse signals at every 720 degrees CA of the crankshaft 27, as shown by Fig. 8 b . At a discrimination point 51 in Fig. 4, it is judged if the 720 CA signal is now coming. If the judgement is yes at point 51, the routine goes to point 52 where the counter m is reset. Figure 5 shows a routine for determining the timing for energizing the fuel injectors 11 1 and 11 4 11 2 and 11 3, which routine is executed at every interval of 30 degrees CA detected by the crank angle sensor 24. The counter m is incremented for every 30 degrees CA step 57 and is cleared by the 720 degrees CA pulse, as already illustrated with reference to Fig. 4. Therefore, the counter m has integer values from 0 to 24, as shown in Fig. 8 d , in one complete engine cycle corresponding to 720 degrees CA. At point 55 in Fig. 5, it is judged whether the value of the counter m is 0 or 12. The value of 0 or 12 of the counter m means, as shown in Fig. 8 a , that the first and fourth cylinders belonging to the first group are at position near top dead center in an intake or expansion stroke. This position becomes a reference position for calculating an injection signal. At this reference position, the second and the third cylinders belonging to the second group are in positions near to the bottom dead center during the exhaust or compression strokes. When the result of the judgement at point 55 is No , the routine goes directly to point 57 for incrementing the counter m . If the result of the judgement at point 55 is yes , the routine goes first to point 56 and then to point 57. At point 56, a preset value m₀ of the counter m for determining a timing which corresponds approximately to the timing for actually starting the fuel injection is determined, and the calculated value is stored in the memory 17. This preset value of the counter m₀ is referred to as an injection set timing , and is calculated in the following way. As well known to those skilled in this art, the fuel injection is required to end before the intake stroke is completed, in order to attain a flow of a combustion mixture having a good stratified condition introduced into the combustion chamber. Assuming the maximum period of the fuel injection period is 5 mseconds, the angle of rotation of the crankshaft 27 during this period, Xang, is calculated by the following equation. Returning to the flow chart of Fig. 5, at point 58, it is judged if the value of the counter m is equal to m₀. If m is not equal to m₀ , the routine returns to the main routine. The equality of m and m₀ means that it is now a time t A result of No at point 59 F₁ 1 means that the calculation of the final injection period is for the second group of injectors 11 2 and 11 3. The program then flows to point 64 where the injection period Tp₂ during the preceding fuel injection of the second group is loaded. At point 65, the newest value of the injection period Tp calculated by the routine of Fig. 3 is loaded. At point 65, a final injection period Tau as a difference Tp Tp₂ is calculated. At point 66 1, Tau is moved to Tp2. At point 67, the flag F₁ is reset, which means that the injection to be effected from now is for the second group of injectors 11 2 and 11 3. When the final fuel injection period has been thus calculated for the respective groups of injectors, the routine goes to point 68 where the present time t At the following point 71, data related to the time t Figure 6 shows an interruption routine entering into calculation when, at the compare register 48, the values at the two inputs thereof coincide with each other. At point 90, it is judged if this interruption routine is for the commencement of the fuel injection. When the present time t When the present time t Figure 8 shows general timing charts illustrating the operation of the present invention. Figure 8 a shows the change in cycle between the intake, compression, expansion, and exhaust strokes for every cylinder in accordance with the lapse of time. Figure 8 b shows the pulse signal issued at every crankshaft rotation of 720 degrees CA, corresponding to one complete engine rotation. Figure 8 c shows the pulse signal issued at every rotation of the crankshaft of 30 degrees CA, wherein g₁ shows the first 30 degrees CA signal after the 720 degrees CA signal, and g₂₄ shows the 24th 30 degrees CA signal. A time difference f exists between the adjacent 720 degrees CA pulse and the first 30 degrees CA pulse g₁. Figure 8 d illustrates the change in the value of the counter m . Figure 8 e shows the ignition set timing m₀ for attaining the calculation of the fuel injection amount. Figures 8 f and g show ignition pulse signals for the first and second groups of injectors 11 1 and 11 4 11 2 and 11 3, respectively. Figure 8 h shows interruption pulses for commencing the fuel injection and for stopping the fuel injection. Figure 8 i shows the change in condition of the flag F₁. The judgement of point 99 is attained by detecting a rate of change of the ratio of the engine speed to the intake air amount, a rate of change in the engine speed, a rate of change in the vehicle speed, or a rate of change of the intake vacuum, and by judging if the rate is larger than a preset value. When the engine is in the steady state, the result of the judgement at point 99 becomes Yes . Thus the program goes to the steps after step 100. At point 100 it is judged if flag F₁ is 0, i.e., the injection now to be attained is for the first group. When the injection is for the first group, the program goes to point 101, where the injection amount at the preceding injection, Tp₁ , is read. At point 102, Tp₁ is multiplied by N 2 and moved to Tp₁ , wherein N is an integer larger than 2. The value of N determines the rate of compensation of the difference in the injected fuel amount between two adjacent injections. The larger the value N, the faster becomes the rate of compensation. In order to ease the calculation under the binary code, N is conveniently expressed by 2 When the injection to be attained is for the injection of the second group, the routine goes to steps 107 to 112, which correspond to steps 101 to 106 for the first group. In a similar way, a final injection period Tau is calculated as a difference between the basic injection amount Tp multiplied by N 1 and the preceding injected amount Tp₁ multiplied by N 2 averaged by N. In this case N 1 and N 2 are weight factors for calculating a mean value. Now the principle for equalizing the injected amount of fuel between adjacent injections during the steady state condition will be described. Assuming that the engine has entered a steady state from the transient state, a difference occurs between the two adjacent injections, as will be clearly seen from Fig. 9 b , since, in this Figure, the injected amount Tau when the engine just has entered the steady state is not usually equal to one half of the basic fuel amount Tp, which is always equal between the adjacent injections during the steady state. The final injected amount Taui after the execution of the injection amount calculating number i of the routines steps 102 to 106 or 108 to 112 is obtained by the following equation. As mentioned above, Figure 9 b illustrates the change in the injected amount of fuel Tau as time lapses during the steady state. At the first stage, the injected amount Tau is spaced from Tp 2. However, as the times lapses further by the repetition of the injections, the injected amount approaches Tp 2 as shown by Tau , Tau and Tau . Figure 10 shows a routine,for calculating a final fuel injection amount in a further embodiment. This routine includes, similar to Fig. 5, steps 100 to 102 or 104 to 105 of equalizing the injected amount between the adjacent injections. The routine, however, eliminates steps after 99 in Fig. 5 for switching the system for a transient state and steady state. In Figure 10, when the injection is for the injection of the first group, at step 100, it is judged if the half of the basic amount, Tp 2, is larger than the injected fuel amount at the preceding injection, Tpl. When Tp 2 Tp₁ , the routine goes to point 102 where Tp α is moved to Tp. When Tp Tp₁ , the routine goes to point 102 where Tp β is moved to Tp. In this case, α or β is suitably selected so that the injection amount Tau approaches Tp 2 at an appropriate rate after the engine has entered the steady state from the transient state. If a large value of α or β is selected, a quick equalization can be obtained, but control of the air fuel ratio is worsened. An opposite result is obtained if a small value of α or β is employed. The same equalization routine can be attained when the injection is for the second group effected at points 103 to 105 No at point 59 . While the embodiments as illustrated are directed to a four cylinder internal combustion engine, this invention can be applied to engines having any other number of cylinders, such as a 6 cylinder or 8 cylinder engine. In the case of a 6 cylinder engine, the injectors are divided into three groups and the cylinders in each of the groups have a phase difference of 360 degrees CA.