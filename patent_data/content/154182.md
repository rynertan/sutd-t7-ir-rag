# ELECTRONIC CIRCUIT CAPABLE OF CARRYING OUT A SUCCESSION OF DIVISIONS AT A HIGH SPEED WITHOUT AN OBJECTIONABLE ERROR

## Claims
Elektronische Schaltung zum Dividieren eines Dividenden RR durch einen Divisor RD zum Berechnen eines Endquotienten Q mit mehreren Anzahl N Stellen, der in erste bis N te Teilquotienten Q₁ bis Q

## Description
This invention relates to an electronic circuit for use in dividing a dividend by a divisor to calculate a quotient and, in particular, to an electronic circuit capable of calculating the quotient by the use of an approximate reciprocal of the divisor. As will later be described with reference to one of several figures of the accompanying drawing, an electronic circuit of the type described is proposed by H. Matsumoto in Japanese Unexamined Patent Publication No. Syô 57 41,737, namely, 41,737 1982. With the electronic circuit, it is possible to calculate an eventual quotient which has a plurality of digits, N in number, for g ary numbers and which is divisible into first through N th partial quotients for the respective digits. More particularly, the proposed electronic circuit carries out current division between a dividend and a divisor with reference to an approximate reciprocal of the divisor and a correction factor which is given by a product between the approximate reciprocal and the divisor and is therefore nearly equal to unity. The correction factor is therefore calculated by a multiplying circuit. Subsequently, the dividend is multiplied by the approximate reciprocal by the multiplying circuit to produce a primitive quotient which is equal to a product between the dividend and the approximate reciprocal. Thereafter, the primitive quotient is processed by the multiplying circuit into the first through the N th partial quotients in accordance with a predetermined algorithm. Anyway, the multiplying circuit may be an adder and should repeatedly be used to calculate the correction factor, the primitive quotients, and so on. Consequently, the next following division can not be started until the current division is finished. Thus, the electronic circuit can not achieve a high throughput on processing the division. In Cray 1S SERIES HARDWARE REFERENCE MANUAL HR 0808 published 1980, 1981, by Cray Research Inc., Newton s method is used to accurately calculate a reciprocal of a divisor. The calculation of the reciprocal is carried out in a so called pipeline method at a high speed. Although the reciprocal is accurately calculated, an objectionable error takes place such that a final residue becomes negative. It is an object of this invention to provide an electronic circuit which can accomplish a high through put on carrying out division. It is another object of this invention to provide an electronic circuit of the type described, which can successively carry out the division in a pipeline method. It is a further object of this invention to provide an electronic circuit of the type described, wherein no objectionable error takes place. An electronic circuit to which this invention is applicable is for use in dividing a dividend by a divisor to calculate an eventual quotient which has a plurality of digits, N in number, and is divisible into first through N th partial quotients for the respective digits. The electronic circuit includes reciprocal calculating means responsive to the divisor for calculating an approximate reciprocal of the divisor. According to this invention, the electronic circuit comprises first calculating means responsive to the divisor and the approximate reciprocal for calculating a correction factor which is equal to a product of the divisor and the approximate reciprocal, second calculating means responsive to the dividend and the approximate reciprocal for calculating a first provisional quotient which is equal to a product of the dividend and the approximate reciprocal, processing means responsive to the correction factor and the first provisional quotient for processing the first provisional quotient with reference to the correction factor to produce a succession of the first through the N th partial quotients, and collecting means for collecting the succession of first through N th partial quotients into the eventual quotient. Referring to Fig. 1, a conventional electronic circuit will be described for a better understanding of this invention. The illustrated electronic circuit is substantially equivalent to that mentioned in the preamble of the instant specification and is supplied with a dividend RR and a divisor RD to produce an eventual or final quotient Q which has a plurality of digits, N in number, and which is divisible into first through N th partial quotients Q₁, Q₂, ..., and Q The dividend RR and the divisor RD are at first kept in a dividend register 11 and a divisor register 12 in a known manner, respectively. The divisor RD is partially sent to a reciprocal table memory 14 which memorizes a reciprocal table for conversion of various divisors into the corresponding approximate reciprocals. Accessed by a part of the divisor RD, the reciprocal table memory 14 produces a selected one of the approximate reciprocals. The selected approximate reciprocal is supplied to an arithmetic logic unit ALU 15 through a multiplier register 16. In the illustrated electronic circuit, the divisor RD is multiplied by the selected approximate reciprocal to calculate a correction factor C which is near to unity. Subsequently, the dividend RR is multiplied by the selected approximate reciprocal to calculate a first provisional quotient R₁ which has a plurality of digits and which may approximate the eventual quotient Q. A rounding operation is carried out as regards the first provisional quotient R₁ to derive a first partial provisional quotient P₁ from the first provisional quotient R₁. A second provisional quotient R₂ is calculated with reference to the correction factor C, the first provisional quotient R₁, and the first partial provisional quotient P₁. The first partial provisional quotient P₁ is modified into the first partial quotient Q₁ with reference to the first partial provisional quotient P₁ and the second provisional quotient R₂ in a manner disclosed by H. Matsumoto. Similar operation is repeated to calculate the remaining provisional quotients and the remaining partial provisional quotients and to modify the partial provisional quotients into the respective partial quotients. In general, an i th provisional quotient R It has been proved by H. Matsumoto that the eventual quotient Q calculated in the above mentioned manner gives a true quotient and that no negative residue appears because the i th partial provisional quotient P In Fig. 1, the above mentioned calculation is carried out by the use of the arithmetic logic unit 15. Specifically, the arithmetic logic unit 15 is successively and repeatedly operated to calculate the correction factor C, the provisional quotients R suffix omitted , the partial provisional quotients P and the like. For this purpose, the arithmetic logic unit 15 is supplied with first, second, and third input signals depicted at A, B, and M and can selectively carry out calculations as will become clear as the description proceeds. At first, the selected approximate reciprocal and the divisor RD are supplied from the multiplier register 16 and the divisor register 12 to the arithmetic logic unit 15. The arithmetic logic unit 15 calculates a product of the selected approximate reciprocal and the divisor RD with the selected approximate reciprocal left in the multiplier register 16. The product is representative of the correction factor C and is kept in the divisor register 12. Preferably, the correction factor C takes a negative value in consideration of procedure to be. The dividend RR and the selected approximate reciprocal are supplied to the arithmetic logic unit 15 as the second and the third input signals B and M from the dividend register 11 and the multiplier register 16, respectively. Multiplication is carried out between the dividend RR and the selected approximate reciprocal in the arithmetic logic unit 15 to calculate the first provisional quotient R₁. The first provisional quotient R₁ is delivered to the dividend register 11 to be stored therein. Subsequently, the first provisional quotient R₁ is sent to the arithmetic logic unit 15 to be subjected to the rounding operation. The rounding operation is carried out at a predetermined digit with reference to the number of Subsequently, the first partial provisional quotient P₁ is sent to a partial quotient register 17 with the first partial quotient P₁ left in the multiplier register 16. Under the circumstances, the arithmetic logic unit 15 calculates the second provisional quotient R₂ in accordance with the recurrence formula 1 in response to the first provisional quotient R₁, the first partial provisional quotient P₁, and the correction factor C. The second provisional quotient R₂ is delivered from the arithmetic logic unit 15 to the dividend register 11. The second provisional quotient R₂ is further delivered to the arithmetic logic unit 15 with the second provisional quotient R₂ kept in the dividend register 11. The rounding operation is again carried out to derive the second partial provisional quotient P₂ from the second provisional quotient R₂. The second partial provisional quotient P₂ is sent to the multiplier register 16. Supplied with the first and the second partial provisional quotients P₁ and P₂ from the partial quotient register 17 and the multiplier register 16, respectively, a correction circuit 18 modifies the first partial provisional quotient P₁ into the first partial quotient Q₁ in consideration of the second partial provisional quotient P₂. The first partial quotient Q₁ is kept in a quotient register 19. Thereafter, the following partial quotients are successively stored in the quotient register 19 to provide the eventual quotient Q. Thus, the arithmetic logic unit 15 should be successively and iteratively put into operation during carrying out the division. Therefore, the division is time consuming with the illustrated electronic circuit. Referring to Fig. 2 an electronic circuit according to a preferred embodiment of this invention is similar in operation to that illustrated in Fig. 1 except that a succession of divisions can continuously be carried out in the electronic circuit of Fig. 2. This means that, when a current one of the divisions is succeeded by the following division, the following division can be started before completion of the current division. More particularly, the electronic circuit illustrated in Fig. 2 comprises first and second registers 31 and 32 which are loaded with the dividend RR and the divisor RD in the known manner, respectively. Like in Fig. 1, each of the dividend RR and the divisor RD is assumed to be a hexadecimal number and to be represented by a binary number of four bits. It is also assumed that the dividend RR is normalized within a range smaller than 2³ while the divisor RD is normalized within another range smaller than unity and not smaller than 2 ¹. In the example being illustrated, let the first and the second registers 31 and 32 be loaded with 02 ₁₆ and 0.AE ₁₆ as the dividend RR and the divisor RD, respectively. The divisor RD is partially sent to a memory which is similar to the reciprocal table memory 14 illustrated in Fig. 1 and which is indicated at 34. Accessed by the divisor RD, the memory 34 produces an approximate reciprocal RC corresponding to the divisor RD. For example, the approximate reciprocal RC may be equal to 1.78 ₁₆ corresponding to 0.AE ₁₆. The approximate reciprocal RC is delivered from the memory 34 to first and second multiplication circuit 36 and 37. Referring to Fig. 3 together with Fig. 2, the first multiplication circuit 36 multiplies the divisor RD by the approximate reciprocal RC to calculate a correction factor depicted at C₁ which is equal to a product of the approximate reciprocal RC and the divisor RD. In the example being illustrated, the correction factor C₁ is equal to 0.AE ₁₆ x 1.78 ₁₆, namely, 0.FF ₁₆. Thus, the approximate reciprocal RC is given to the first calculation circuit 36 in the form of a negative number so as to facilitate the following procedure. Production of the negative number is possible in the known manner and will not be described any longer. Let the illustrated multiplication circuit 36 be operable in accordance with Booth algorithm known in the art. Specifically, first and second additional registers 41 and 42 are loaded with the divisor RD and the approximate reciprocal RC, respectively. The approximate reciprocal RC is assumed to be represented by eight parallel bits of m₀, m₁, ..., and m₇ and to take the form of m₀m₁.m₂m₃m₄m₅m₆m₇ ₂. The approximate reciprocal RC is sent to a complement calculator, namely, complementor 44 to calculate that complement of the approximate reciprocal RC which may be two s complement. In order to stand for the two s complement of the approximate reciprocal RC, the complementor 44 at first calculates one s complement of the approximate reciprocal RC given by On carrying out multiplication, the two s complement of the approximate reciprocal RC serves as a multiplier while the divisor RD serves as a multiplicand. As known in the art, the Booth algorithm is useful for reducing the number of partial products inevitably occurring on carrying out multiplication. According to the Booth algorithm, the multiplier is divided into a plurality of bit groups each of which consists of three bits and which can take eight kinds of patterns. Predetermined multiplying factors are assigned to the respective patterns in accordance with Table 1. A first factor generator 46 assigns a selected one of the multiplying factors listed on Table 1 to each bit group of the two s complement in consideration of each pattern of the bit groups. In the first factor generator 46 the selected multiplying factors are multiplied by weights determined with reference to positions of the bit groups. In the example being illustrated, the weights of 1, 2 ², 2 ⁴, and 2 ⁶ are assigned to the respective groups in the following manner. At any rate, the selected multiplying factors multiplied by the weights serve as partial multipliers by which the divisor RD given as the multiplicand is multiplied in the first factor generator 46. A set of partial products are sent from the first factor generator 46 to a carry saving adder CSA 48 of a multiple input type. The carry saving adder 48 calculates a sum of the partial products independently of a carry resulting from the calculation in the known manner to produce an end sum and an end carry. The end sum and the end carry are summed up in a carry lookahead adder CLA 49 to be produced as the correction factor C₁ equal to 0.FF9 ₁₆. Referring to Fig. 4 afresh and Fig. 2 again, the second multiplication circuit 37 is operable simultaneously with the first multiplication circuit 36 in response to the dividend RR and the approximate reciprocal RC. In Fig. 4, the dividend RR and the approximate reciprocal RC are stored in first and second subsidiary registers 51 and 52, respectively, and sent to a second factor generator 54. The second factor generator 54 is operable in a manner similar to the first factor generator 46 to produce additional partial products in consideration of the multiplying factors listed on Table 1 and the weights as mentioned before. The additional partial products are supplied to an additional carry saving adder 56 of a multiple input type to be summed up. As a result, the additional carry saving adder 56 produces a first sum RS₁ of the partial products and a first carry CA₁ both of which appear as a first provisional quotient R₁ equal to a product of the dividend RR and the approximate reciprocal RC. The illustrated second multiplication circuit 37 carries out multiplication of 02 ₁₆ and 1.78 ₁₆ given as the dividend RR and the approximate reciprocal RC, respectively, to produce the first provisional quotient R₁ equal to 2.F0 ₁₆. Specifically, the approximate reciprocal RC of 1.78 ₁₆ is represented by eight bits of 10.111100 ₂ in the binary notation and is stored in the second subsidiary register 52. An extra bit is added under the least significant bit in consideration of a rounding operation to be carried out later and is kept at the logic 0. In this case, first through fourth ones 101 , 111 , 110 , and 000 of the bit groups are successively formed from the most significant bit of the approximate reciprocal RC to the extra bit thereof and given the multiplying factors of 1, 0, 1, and 0, respectively, in accordance with Table 1. The multiplying factors of 1, 0, 1, and 0 are multiplied by 2⁰, 2 ², 2 ⁴, and 2 ⁶ to produce first through fourth partial reciprocals, respectively. On the other hand, the dividend RR of 02 ₁₆ is represented by 000010.0 ₂ in the binary notation and is multiplied in the second factor generator 54 by the first through the fourth partial reciprocals to calculate first through fourth ones of the additional partial products, respectively. The first through the fourth additional partial products are summed up in the additional carry saving adder 56 in the above mentioned manner. Anyway, the first sum RS₁ and the first carry CA₁ appear in the form of 111000.11101110 ₂ and 001010.00000010 ₂, respectively. The multiplying factors and the weights may be assigned to the dividend RR of 000010.0 ₂. In this event, the multiplying factors of 0, 1, and 2 and the weights of 2⁴, 2², and 2⁰ are assigned to three of the bit groups of the dividend RR. Turning back to Fig. 2, the first sum RS₁ and the first carry CA₁ are partially sent to a first adder circuit 61 for calculating a first partial provisional quotient P₁ which may be modified as will become clear as the description proceeds. In the example being illustrated, nine upper bits of the first sum RS₁ and the first carry CA₁ are supplied to the first adder circuit 61 to be added to each other. A result of addition becomes equal to 000010.1 ₂ when taken to the first place under the binary point and is produced as the first partial provisional quotient P₁. The first partial provisional quotient P₁ is delivered to a first partial divider 64₁ and a first correction circuit 66₁, both of which will be operable in a manner to be described later. The first partial provisional quotient P₁ is processed together with the first provisional quotient R₁ Fig. 4 in a manner similar to that mentioned in conjunction with Fig. 1. Referring to Fig. 5 anew and Fig. 2 again, the first partial divider 64₁ may be specified by a suffix i 1 in Fig. 5 and is coupled to the first and the second multiplication circuits 36 and 37 and to the first adder circuit 61 which are all illustrated in Fig. 2. As shown in Fig. 5, the first partial divider 64, comprises first, second, third, and fourth local registers 71, 72, 73, and 74 supplied with the first carry CA₁, the first sum RS₁, the first partial provisional quotient P₁, and the correction factor C₁, respectively. In the first partial divider 64₁, the first partial provisional quotient P₁ of 000010.1 is processed in a third factor generator 78 in the manner described in conjunction with Table 1. More specifically, the multiplying factors of 0, 1, and 1 are selected for the respective groups of the first partial provisional quotient P₁ in accordance with Table 1 and assigned with the weights of 2⁴, 2², and 2⁰ to form first, second, and third partial multiplicands represented by 0 2⁴, 1 2², and 1 2⁰, respectively. Under the circumstances, the third factor generator 78 multiplies the first through the third partial multiplicands by the correction factor C₁ of 0.FF9 ₁₆ to calculate first, second, and third partial local products, respectively. A local carry saving adder 79 sums up the first through the third partial local products to supply an output carry saving adder 81 with a local sum LS and a local carry LC. A combination of the local sum LS and the local carry LC is representative of a product of the correction factor C₁ and the first partial provisional quotient P₁. In the above mentioned example, the local sum LS and the local carry LC are equal to 111100.111111100101 and 000000.000000110000 , respectively. The output carry saving adder 81 is also supplied with the first sum RS₁ and the first carry CA₁ as the first provisional quotient R₁. As a result, the output carry saving adder 81 carries out addition of the local sum LS, the local carry LC, the first sum RS₁, and the first carry CA₁ to produce a second sum RS₂ and a second carry CA₂ as the second provisional quotient R₂. Practically, results of addition are shifted by four bits upwards by multiplication of g 16 to obtain the second sum RS₂ and the second carry CA₂. In the example, the second sum RC₂ and the second carry CA₂ are therefore equal to 111100.11010101 ₂ and 000010.01000000 ₂, respectively. In the first partial divider 64₁, the correction factor C₁ stored in the fourth local register 74 is shifted to an output register 83 and is produced simultaneously with the second provisional quotient R₂. Thus, the output register 83 serves to adjust timing of the correction factor C₁ and to produce a timing adjusted factor C₂. Although a sign detector 86 is illustrated in Fig. 5, the sign detector 86 is useless in the first partial divider 64₁ and will therefore be described later. As shown in Fig. 2, the second sum RS₂ and the second carry CA₂ are partially sent to a first quotient adder 91₁. Practically, the first quotient adder 91₁ adds nine upper bits of the second carry CA₂ to nine upper bits of the second sum RS₂ to calculate the second partial provisional quotient P₂. In the example in question, the second partial provisional quotient P₂ becomes equal to 111111.0 ₂ when taken to the first place of the binary point. The second partial provisional quotient P₂ is supplied to a second partial divider 64₂ together with the second sum RS₂, the second carry CS₂, and the timing adjusted factor C₂ which are all given from the first partial divider 64₁. In Fig. 5, the second partial divider 64₂ may be specified by i 2 and is similar in structure and operation to the first partial divider 64₁ except that the second partial divider 64₂ comprises the sign detector 86. More particularly, the second carry CA₂, the second sum RS₂, the second partial provisional quotient P₂, and the timing adjusted factor C₂ are kept in the first through the fourth local registers 71 to 74, respectively. In the second partial divider 64₂, the sign detector 86 sums up the second sum RS₂ and the second carry CA₂ to detect whether a most significant bit of the sum is equal to 1 or 0 and to produce a sign bit PT. If the most significant bit of the sum takes the logic 1 and specifies a negative number, the sign bit PT becomes the logic 1. Otherwise, the sign bit PT becomes the logic 0 to specify a positive number. Thus, the sign bit PT indicates a sign of the second provisional quotient R₂. In the above mentioned example, the sign bit PT takes the logic 1 because the logic 1 is placed at the most significant bit when the second sum RS₂ is added to the second carry CA₂, as readily understood from the above. In addition, the second partial divider 64₂ produces a third provisional quotient R₃ equal to a combination of a third sum RS₃ and a third carry CA₃ along with another timing adjusted factor C₃, like the first partial divider 64₁. Referring to Fig. 6 together with Fig. 2, the sign bit PT is delivered from the second partial divider 64₂ to the first correction circuit 66₁ along with the first partial provisional quotient P₁. In Fig. 6, the first correction circuit 66₁ may be for i 1. The first correction circuit 66₁ adds 1 to the first partial provisional quotient P₁ when the sign bit PT takes the logic 1. Otherwise, the first correction circuit 66₁ adds 0000 to the first partial provisional quotient P₁, namely, allows the first partial provisional quotient P₁ to pass therethrough. As known in the art, four bits from 2³ to 2⁰ are representative of principal values mod 16 . The number 1 may be made to correspond to the principal value of 15. Under the circumstances, the sign bit PT is rendered by a wiring indicated at 93 into four parallel bits each of which takes the same logic 1 or 0 as the sign bit PT. Therefore, the sign bit PT is produced through the wiring 93 as a first value On the other hand, the first partial provisional quotient P₁ of 000010.1 ₂ is sent through a timing adjusting register 94 to a selector 96. The selector 96 selects five lower bits of 00101 from the first partial provisional quotient P₁ and divides the five lower bits into four upper bits 0010 and the least significant bit 1 which may be called second and third values An adder circuit 97 calculates a sum of the first through the third values In Fig. 2, the third sum RS₃ and the third carry CA₃ are partially sent to a second quotient adder 91₂. The second quotient adder 91₂ calculates a third partial provisional quotient P₃ in the manner described in connection to the first quotient adder 91₁. In the example, the third partial provisional quotient P₃ is represented by 000001.0 . The third sum RS₃ and the third carry CA₃ are also sent from the second partial divider 64₂ as the third provisional quotient R₃ to a third partial divider 64₃ together with another time adjusted factor C₃. The third partial divider 64₃ calculates a fourth provisional quotient R₄ represented by a fourth sum RS₄ and a fourth carry CA₄ in the manner described in conjunction with the second partial divider 64₂. In addition, the third partial divider 64₃ detects the sign of the third partial quotient R₃ to supply a second correction circuit 66₂ with the sign bit PT. A timing adjusted factor C₄ is transferred in the manner mentioned with reference to Fig. 5. In any event, the second correction circuit 66₂ corrects the second partial provisional quotient P₂ in accordance with the sign bit PT indicative of the sign of the third provisional quotient R₃ CA₃ RS₃ , like the first correction circuit 66₁. Thus, the second partial quotient Q₂ is produced from the second correction circuit 66₂. In the above mentioned example, the second partial quotient Q₂ becomes 1111 ₂ because the five lower bits of the second partial provisional quotient P₂ is equal to 1111.0 and the sign of the third provisional quotient R₃ takes the logic 0. Similar operation is successively carried out to calculate each of the first through the N 1 th partial quotients Q₁ to Q It is mentioned here that an N 1 th partial quotient Q Anyway, the first through the N th correction circuits 66₁ to 66 In Fig. 2, it is readily understood that circuit elements between the first adder circuit 61 and the N th correction circuit 66 The first through the N th partial quotients Q₁ to Q After the first partial quotient Q₁ is calculated in cooperation with the first adder 61, the second partial divider 64₂, and the first correction circuit 66₁, the second partial quotient Q₂ is calculated in cooperation with the first quotient adder 91₁, the third partial divider 64₃, and the second correction circuit 66₂. Similarly, operation for a single division is successively progressive from an upper part of the electronic circuit illustrated in Fig. 2 to a lower part thereof. Thus, only a part of the electronic circuit is used for the single division with the remaining part kept inactive. This means that a plurality of divisions can successively be carried out in the electronic circuit as is the case with the pipeline method. Accordingly, it is possible for the illustrated electronic circuit to improve a throughput for processing divisions. While this invention has thus far been described in conjunction with a preferred embodiment thereof, it will readily be possible for those skilled in the art to put this invention into practice in various other manners. For example, the g ary number may be a binary number or the like. Multiplication may be carried out in accordance with any other algorithms than Booth algorithm.