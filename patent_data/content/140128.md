# IMAGE DISPLAY APPARATUS

## Claims
Bildverarbeitungssystem mit

## Description
The present invention relates to an image processing system used in tomographic equipment such as X ray computed tomographic equipment and a magnetic resonance imaging system or MRI system. An image processing system is arranged in conventional X ray computed tomographic equipment or a conventional magnetic resonance imaging system to display output image information. In such an image processing system, cine display motion display for displaying motion of a stomach or a heart is performed in addition to still image display. The cine display of an image in, for example, a 5122 512 x 512 matrix corresponds to a sequential display of 20 to 30 still images per second. For the cine display in a conventional image processing system, if a series of images since the images are sequentially displayed while each image is displayed for a predetermined period of time to be recognized as substantially a one frame still image is given to an image unit, image information corresponding to 20 to 30 still images of the 5122 matrix is stored in a memory, and the 20 to 30 still images, data of which are stored in the memory, are switched at high speed and displayed. Therefore, in order to perform cine display, a very large capacity memory must be used. In addition, since the images stored in the memory are sequentially read out, switched and displayed, it is very difficult to perform the cine display in the conventional image display apparatus. Furthermore, when window processing is performed for the image information gradation is provided in a specific range of the original gradation data , a larger capacity memory than that described above is required, and the memory switching access becomes more complicated. Image information write read access with respect to the memory and window processing are performed by a common central processing unit CPU . Therefore, display image switching is greatly degraded. Prior art document US A 4 219 876 discloses a tomography system comprising a frame memory, processing means, display means, address signal generating means and transferring means. However, this document does not show a display memory and thus does not disclose partial transfer of original data from the frame memory into a display memory for enabling cine display on display means. Further, prior art document EP A 0 017 553 describes a tomographic apparatus which uses a frame memory for storing data. These data are transferred through a buffer and a D A converter to display means. Also this known apparatus does not comprise a display memory and thus does not disclose a partial transfer of original data from the frame memory into a display memory for enabling cine display. Prior art document DE A 28 11 699 describes an ultrasonic diagnostic apparatus which comprises a display memory which is connected between a multiplexer and a processor. However, this apparatus does not include a frame memory. Similarly, also prior art document US A 4 232 376 describes a raster display refresh system comprising a display memory. However, also this system does not use a frame memory. In other words, also prior art documents DE A 28 11 699 and US A 4 232 376 do not disclose a partial transfer of original data from a frame memory into a display memory for enabling a cine display. None of above mentioned prior art documents discloses or even suggests a partial transfer address signal which includes data indicating the size and position of a partial transfer area that can be set optionally, and the application of a start address to a frame memory so that the image data stored in the frame memory is transferred sequentially to a display memory in synchronism with a synchronizing signal. Of course, documents DE A 28 11 699 and US A 4 232 376 do also not suggest an idea how to connect a display memory to a frame memory as known from documents DE A 28 11 699 or EP A 0 017 553 in order to perform a cine type display by switching a plurality of still images. It is an object of the present invention to provide a simple image processing system, wherein a plurality of images can be easily switched and displayed on a display means, the size of a frame memory is reduced, and the cine display switching is speeded up. To solve this object, the present invention provides an image processing system as specified in claim 1. In other words, the image processing system of the present invention comprises especially address signal generating means in the form of a memory controller This controller generates a write address signal of display memory in synchronism with the synchronizing signal so that only partial data in frame memory is to be transferred to the display memory. In other words, frame synchronization is established between the address signal of the frame memory and that of the display memory. This synchronization is easily performed by the memory controller. Thus, the image processing system is not only characterized by synchronously reading out a part of an image to be displayed on a cathode ray tube CRT in order to only depict this interesting part of the picture on the CRT screen. To be more specific, a characterizing feature of the image processing system according to the present invention resides especially in the memory controller This memory controller establishes frame synchronization between address signals to be supplied to the frame memory and address signals to be supplied to the display memory. Due to such frame synchronization between frame memory and display memory, only partial data in the frame memory is to be transferred to the display memory so that the size of the frame memory can be reduced and switching of the display image is speeded up. To reiterate, in the image processing system according to the present invention, a frame memory for storing original data prior to image data processing and a display memory for storing display image data are used, and image data transfer from the frame memory to the display memory is performed by a memory control unit in accordance with a DMA direct memory access scheme. In addition, this data transfer is also performed through a data conversion memory which is programmable under the control of the CPU, thus performing data conversion as image processing e.g., window processing . When data is transferred by the window control unit, at least a desired part of the iamge data from the frame memory is transferred to the display memory through the data conversion memory in accordance with an address signal, synchronized with a sync signal, used for reading out the image data from the display memory and displaying the image data on the display apparatus. Therefore, according to this image processing system, the DMA transfer of the image data from the frame memory to the display memory is performed such that part of the data from the frame memory is transferred in synchronism with read scanning of the image data from the display memory. According to the image processing system of the present invention, a desired portion of the plurality of images stored in the frame memory is image processed and partially transferred in synchronism with the sync signal of the display apparatus in such a manner that a start address of the frame memory corresponds to the frame sync signal normally, a vertical sync signal of the display apparatus. Therefore, even if the image processing system has a simple construction, the switching operation of the plurality of images is performed at high speed, so that cine displac can be performed. To summarize up, the present invention provides a simple image processing system in which a plurality of images can be easily switched and displayed on a display means. This invention can be more fully understood from the following detailed description when taken in conjunction with the accompanying drawings, in which Referring to Fig. 1, a frame memory 10 stores image data CD transferred from an external memory in response to a write signal CW supplied from a CPU central processing unit not shown under the control of the CPU. Output data Fd read out from the frame memory 10 is supplied to a data conversion memory 7 through a multiplexer MUX 16. The data conversion memory 7 has a capacity of 2 x n1 bits. The data conversion memory 7 converts the n bit data Fd read out from the frame memory 10 to n1 bit data Cd. The data conversion memory 7 can be accessed by the CPU. Various types of tables are selectively written in the data conversion memory 7 under the control of the CPU. These various types of tables are used to convert the data Fd into the n1 bit data Cd. The output Cd from the data conversion memory 7 is located at the same x and y addresses as those of data stored in the frame memory 10. The data Cd is supplied to a display memory 11 connected to the output of the data conversion memory 7. An output Dd from the display memory 11 is supplied to a display unit not shown such as a CRT display through a D A digital to analog converter 6. The arrangement of a memory controller 15 for controlling the operation of the frame memory 10 and the display memory 11 will now be described. A timing generator 3 in the memory controller 15 generates, in response to an externally supplied reference clock CLKA, a horizontal sync signal HD, a vertical sync signal VD, a horizontal blanking signal The FM address counter 2 comprises a programable sync counter e.g., an SN74163 available from Texas Instruments Inc. . The FM address counter 2 receives the signal CLKB from the timing generator 3, the partial transfer address signal F x,y from the AND gate 9, and an externally supplied frame memory start address signal S x,y , and generates a signal f xa,ya . The signal f xa,ya is supplied to one input terminal of a multiplexer MUX 1 connected to the FM address counter 2. The multiplexer 1 selects one of the output signals f xa,ya from the FM address counter 2 and an address signal CA, transferred from the CPU address bus, and generates the selected signal as an address signal F xa,ya to the frame memory 10. The AND gate 8 receives the partial transfer address signal F x,y from the AND gate 9, and a partial transfer start signal TRFGO and a write signal WE, which are externally supplied. The AND gate 8 generates a write signal An AND gate 12 having two inverting input terminals receives the horizontal blanking signal The memory controller 15 having the arrangement described above is operated as follows. First, image data write control for the frame memory 10 will be described. When image data is written in the frame memory 10, the multiplexer 1 is enabled in response to the address signal CA transferred from the CPU address bus. The address signal CA is transferred from the multiplexer 1 to the frame memory 10. The frame memory 10 stores image data transferred from the CPU in response to the address signal CA and the write signal CW. The signal f x,y supplied to the timing generator 4 comprises address data which represents the position and size of the preset partial transfer area, obtained by preediting such that an operator moves a joy stick to shift a marker on the display screen so as to specify x and y coordinates. The signal f x,y is supplied to the timing generator 4 through the CPU or the like. The address signal F xa,ya for the frame memory will be described. The address signal F xa,ya is an output from the multiplexer 1 when the multiplexer 1 selects the output f xa,ya from the FM address counter 2. The AND signal F x,y of the outputs F x and F y from the timing generator 4 is used as a load instruction signal. The externally supplied start address signal S x,y is used as a load input the preset value . The FM address counter 2 is preset at the load input value in response to the load instruction signal. Under these assumptions, the contents of the frame memory 10 are read out in response to the output f xa,ya from the FM address counter 2. The n0 bit image data Fd read out of the frame memory 10, is selected by the multiplexer 16 and is converted by the data conversion memory 7 to n1 bit image data Cd. As previously described, the data conversion memory 7 stores various types of conversion tables supplied from the CPU. These conversion tables are written in the data conversion memory 7 in response to the data CD and the write signal CW, which are supplied from the CPU when the data conversion memory 7 is enabled in response to the address input as the CPU address CA supplied from the CPU through the multiplexer 16. Data is written in the display memory 11 when the output In this manner, the frame memory 10 and the display memory 11 are controlled by the memory controller 15, so that only the specified portion of image data is transferred partial transfer from the frame memory 10 to the display memory 11. The partial transfer according to the image processing system of the embodiment will be described. When only image data indicated by the hatched portion in the frame memory 10 is transferred, a start address fx, fy is supplied as the signal S x,y to the FM address counter 2. The partial matrix size x,y is supplied as the signal f x,y to the timing generator 4. The timing generator 4 receives the signal f x,y and generates the partial transfer address signals F x , F y which are respectively synchronized with the horizontal and vertical sync signals HD and VD, as shown in Fig. 3. When the clock pulse CLKB is received by the DM address counter 5, an address D xa,ya of the display memory 11 is incremented. When the count reaches an address dx,dy , the FM address counter 2 is enabled in response to the signal F x,y . The FM address counter 2, as the programable sync counter, is simultaneously preset and enabled when it receives as the signals fx and fy the start address S x,y from the frame memory 10. The signal F xa,ya is synchronized with the up counting of the address of the display memory 11. Therefore, the FM address counter 2 is set in the address increment mode. When the AND gate 9 is enabled in this case, the externally supplied signal TRFGO for the partial transfer mode goes to H high level , the signal The operation timings for the partial transfer will be described with reference to Figs. 2 to 5. Referring to Fig. 2, the signals F x and F y respectively comprise partial transfer X address F x and partial transfer Y address F y , generated from the timing generator 4 in synchronism with the horizontal and vertical syn signals HD and VD in accordance with the frame start address f x,y selected for the desired partial transfer. The signal F x,y , which is the AND output of the signals F x and F y , is generated from the AND gate 9. The y H period of the signal F y becomes a partial transfer time corresponding to the partial transfer address . The NAND output HVBLK of the signals When the partial transfer matrix is given by x and y addresses, a horizontal transfer time address is given to be Xt sec, as shown in Figs. 3 and 4. The partial transfer address f xa,ya of the frame memory 10 during the Xt sec period is incremented by the FM address counter 2 in an order of fx,fy , fx 1,fy ,... fx x 2,fy , fx x 1,fy up to fx,fy 1 . This partial transfer address f xa,ya is incremented by one address along the vertical direction y direction every time a line number, i.e., a raster number dy, is increased. In this case, the display memory address D xa,ya is updated in an order of 0,dy , 1,dy ,..., dx 1,dy , dx,dy , dx 1,dy ,..., dx x 1,dy , dx x,dy ,... during the horizontal display time Xt sec of the display unit. The display memory address data D xa,ya is used for displaying the matrix size x,y on the display unit. It should be noted that the timings of the respective signals, excluding the area of the vertical direction partial transfer address corresponding to the time y H of Fig. 2, are illustrated in Fig. 5. In this case, since F y 0 is established, the product F x,y becomes logic 0 . When the product F x,y of the signals F x and F y falls within the area i.e., partial transfer area of F x,y H, the AND output In this manner, the partial transfer address S x,y from the frame memory 10 is updated for every frame one picture in synchronism with the vertical sync signal VD, so that the plurality of images stored in the frame memory 10 are sequentially displayed on the display unit not shown at the rate VD period of the display unit. A scanned image in the X ray CT equipment has a moving portion e.g., heart and a stationary portion e.g., the background such as a bone . When the image data representing only the portion in motion is read out from the frame memory 10, the capacity of the operating portion of the frame memory 10 can be decreased, and cine display switching of the display image on the display unit can be easily performed at a higher speed. In the above embodiment corresponding to the timing charts in Figs. 2 to 5 , image data transfer from the frame memory 10 to the display memory 11 is completed during a one frame period between two adjacent vertical sync VD periods . However, even when every other scanning line is scanned in the interlaced scanning mode, partial transfer can be performed. As shown in Fig. 6, according to a second embodiment, one frame image data can be transferred by a set of even and odd field image data. Since interlaced scanning is performed, the vertical address increment operation of the FM and DM address counters 2 and 5 does not correspond to that of the first embodiment, although the horizontal address increment operation of the second embodiment is the same as that of the first embodiment. Referring to the timing chart in Fig. 3, the odd and even field image data can be alternately transferred in units of pixels. In the even field period, only the even field address data is transferred by the signal F xa,ya . The odd field address data is transferred by the signal F xa,ya during the even field period. The image processing system according to a third embodiment of the present invention adopting this transfer method is illustrated in Fig. 7. Referring to Fig. 7, the logical products of an output FSEL from the timing generator 3 and the signals WE, TRFGO and F x,y are generated from AND gates 13 and 14. An even field memory EMEM 11a and an odd field memory OMEM 11b of a display memory 11 are switched such that the odd field is enabled in response to an output ODWE from the AND gate 13, and the even field is enabled in response to an output EDWE from the AND gate 14. In this case, an FM address counter 2 is also switched for the even and odd addresses in response to the signal FSEL. According to the arrangement described above, partial transfer of the image data in interlaced scanning can be performed. In this case, the even and odd field image data are alternately transferred to the display memories 11a and 11b in units of pixels. Therefore, the access rates of the display memories 11a and 11b can be decreased, so that low speed memories can be used as the display memories 11a and 11b, respectively. The partial image data transfer in the image processing system according to the present invention is performed such that, in addition to cine display, different types of images stored in the frame memory 10 can be simultaneously displayed by partially transferring the image data of any size x,y X x and Y y from any start address S x,y of the frame memory 10 to the start position dx,dy of the display memory 11. Two identical slow memories may be used to constitute the display memory. In this case, these two memories are used alternately such that data is written in one memory, while data is read out from the other memory.