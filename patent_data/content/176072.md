# ELECTRONIC CASH REGISTER SYSTEM INCORPORATING LOCAL GOODS DATA STORAGE

## Claims
Elektronisches Registrierkassensystem zur Behandlung einer Menge von Datenposten, mit

## Description
The present invention relates to the field of electronic cash register systems, and in particular relates to such an electronic cash register system in which some of the data relating to goods which are to be sold is available locally at each cash register. There is a per se known type of electronic cash register system, for registering the sales of various types of goods at various different outlets, in which a plurality of electronic cash registers are linked together by a transfer line system. In such a system, it is per se known for a so called price look up system to be adopted, in which either a master one of the electronic cash registers or a host computer stores and maintains a master file which contains information on all the various types of goods which are to be sold using the system. In such a system, when a transaction such as the sale of an item of goods is to be performed by one of the electronic cash registers, said electronic cash register sends a message by way of the transfer line system to the master electronic cash register or host computer requesting data relating that item of goods, such as its unit price. This causes the master electronic cash register or host computer to forward that information to the transacting electronic cash register, again by way of the transfer line system. And then the transacting electronic cash register is enabled to process the transaction. This prior art system is structured in this way because an information storage means for storing such a master file which contains information on all the various types of goods which are to be sold using the system is required to have a considerably large capacity, and accordingly is quite high in cost as well as being possibly large in physical size. Therefore, it is not considered to be efficient to store such a master file at each of the individual electronic cash registers, and, in order to reduce the unit price of the electronic cash registers, a single master file is maintained on the master electronic cash register or host computer, thu avoiding duplication of storage. However, according to such a conventional type of multiple electronic cash register system, since each of the electronic cash registers accesses the master file on the master electronic cash register or host computer by way of the transfer line system each time the sale of any item of goods is required to be performed by any of the electronic cash registers, to receive price and other data regarding such item of goods, a considerable flow volume of data is required to be transferred by the transfer line system and to be retrieved from the master file, and this can cause undue slowdown in speed of operation. Especially this is the case if the transfer line system for transferring information between the master file serving means and the individual electronic cash registers is of relatively low transmission capability, which may be desirable from the point of view of cost of the system. Another problem that has arisen in such a conventional type of multiple electronic cash register system has related to failure thereof. It is inevitable that at some time such a master file should become unusable, either for a relatively short time as because of breakdown of the master electronic cash register or host computer, or for a relatively long time as because of failure of the file storage media itself. In the case of such an event, the attendant at each of the electronic cash registers is required to enter on the keyboard of his or her electronic cash register all the data such as price data and other data for each item of goods which is sold, and not only is the speed of operation drastically reduced but also the entire processing of transactions may become unmanageable. An electronic cash register system according to the preamble of claim 1 is known from IBM Technical Disclosure Bulletin, volume 24, No. 2, July 1981, pages 976 978, New York, US. According to this known electronic cash register system, the sub file is updated by reshuffling the merchandise item data in a table in which they are stored. Whenever a data associated with a merchandise item is entered through the keyboard of the electronic cash register this data is looked for in the table, extracted where found and reinserted at the top of the table. A data not found in the table forming the sub file is looked up in the master file and transferred to the sub file where it is inserted at the top of the table after the table has been pushed down by eliminating the data which was at that time at the bottom of the table. By this, always the data of a merchandise item which was requested farthest in the past is eliminated. The invention is claimed as in claim 1. According to such a structure, the determining means may usefully employ this information about totals relating to goods dealt with, which has been compiled by the individual electronic cash registers, without having to compile said information itself. This represents an economy of operation. The present invention will now be shown and described with reference to the preferred embodiment thereof, and with reference to the illustrative drawings. It should be clearly understood, however, that the description of the embodiment, and the drawings, are all of them given purely for the purposes of explanation and exemplification only, and are none of them intended to be limitative of the scope of the present invention in any way, since the scope of the present invention is to be defined solely by the legitimate and proper scope of the appended claims. In the drawings, like parts and spaces and so on are denoted by like reference symbols in the various figures thereof in the description, spatial terms are to be everywhere understood in terms of the relevant figure and The present invention will now be described with reference to the preferred embodiment thereof, and with reference to the appended drawings. Fig. 1 shows in a very schematic block diagram form said preferred embodiment of the electronic cash register system of the present invention. This electronic cash register system comprises a plurality of electronic cash registers, referred to in the figures as 1, 2, 3, ....... n, which are mutually interconnected by a transfer line L. Further, in this preferred embodiment, the electronic cash register 1, which will hereinafter be referred to as the master electronic cash register, performs overall control of the electronic cash register system as a whole. In other words, the master electronic cash register 1 not only performs the processing of normal transactions in the same way as do the other electronic cash registers 2, 3, .... n which hereinafter will be referred to as slave electronic cash registers , but also has the additional function of performing the overall management of the data on sold goods for the overall system, as will be explained in detail later. In an alternative form of such an electronic cash register system, a host computer may be installed, but according to this shown preferred embodiment a system which is solely comprised of a plurality of master and slave electronic cash registers as shown in the drawing is considered. Fig. 2 shows in schematic block diagrammatical form the construction of a typical one of the slave electronic cash registers 2, 3, ...... n. This slave electronic cash register comprises a microcomputer 1 as its central element and a keyboard 2 for serving as an input means for said microcomputer 1, and further comprises as output means a display 3 for indicating data visually to the operator and or the customer and a printer 4 for printing receipts and the like. There is also provided a transfer device 5 which interfaces between the microcomputer 1 and the transfer line L, and a random access memory unit RAM 6 which stores data on goods which are to be sold in the form of files, as will be particularly described hereinafter. And the structure of the master electronic cash register 1 is substantially the same as that shown in Fig. 2, except that the capacity of the RAM 6 is much larger, for storing more data as will be explained later alternatively, a backup storage means such as a disk storage device or the like may be provided for said master electronic cash register 1. As shown in diagrammatical front view in Fig. 3, the keyboard 2 of each of the electronic cash registers comprises a ten key pad 31, a set 32 of classification keys, a set of function keys 33, and a key switch 34 for mode switch over. As will be understood from the designations in Fig. 3 of these keys, when an item of goods is to be sold by the operator of this slave electronic cash register i.e., one of the electronic cash registers 2, 3, ..... n , upon performing price look up operation on the function keys 33, key operation of the classification keys 32, and goods code input operation on the ten key pad 31, the local RAM 6 of this slave electronic cash register is consulted for relevant data. If this data is available in said local RAM 6 of this slave electronic cash register, then it is retrieved but, if the local RAM 6 of this slave electronic cash register does not contain such data, then the microcomputer 1 sends a signal out via the transfer device 5 and the transfer line L to order this data from the exhaustive data file available on the master electronic cash register 1, and, waits until said data is received. Then, in either case, when the data becomes available, the price of the item of goods is displayed on the display 3, and also a receipt entry is issued from the printer 4. Thereby, so called price look up processing is performed. Now this operation according to the principle of the present invention will be explained in more detail. In Fig. 4 there are schematically shown in its subfigure 4 A a part of the contents of the RAM 6 of the master electronic cash register 1 and in its subfigure 4 B a part of the contents of one of the slave electronic cash registers 2, 3, ...... n in this discussion, for the purposes of simplicity of explanation, it will be assumed that the relevant contents of the RAMs 6 of the various slave electronic cash registers 2, 3, ...... n are identical, but in fact this is not necessarily the case. The part of the contents of the RAM 6 of the master electronic cash register 1 shown in Fig. 4 A constitutes master files 41 for each of the classifications DP , while the part of the contents of the RAMs 6 of the slave electronic cash registers 2, 3, ...... n shown in Fig. 4 B constitutes a sub file 42 for each of the classifications DP . Each of the master files 41 and the sub files 42 incorporates a goods data box a and a total box b the total box of the master file 41 is designated as b1, and the total box of the sub files 42 is designated as b2. The goods data box a lists the goods code of a type of goods and the unit price and so on for each of the classifications DP , and the total boxes b1 and b2 each have a cash total box and a units total box. The total box b1 of the master file 41 stores long term totals, for instance the totals over a period of one month or over a period corresponding to a certain season. On the other hand, the total boxes b2 of the sub files 42 contain short term totals, for instance the totals for the current day. In this preferred embodiment, for simplification of illustration, the contents of the sub file 42 of each of the slave electronic cash registers are supposed to be identical, and the total box b1 of the master file 41 simply holds totals for each of the goods without classifying them for each of the slave electronic cash registers. Fig. 5 is a schematic flow chart showing the action of the overall system, and is referred to in the following description. It should be understood that this flow chart is only an informal one for aiding the understanding of the system according to the present invention, and does not actually represent the operation of any of the individual microcomputers in the electronic cash registers 1, 2, 3, ....... n. In. the Fig. 5 flow chart, the steps 501 and 502 are initial processing steps for the master electronic cash register 1, and this initial processing involves forming of the master file 41 in the RAM 6 of said master electronic cash register 1 in the step 501 , extracting the data relevant to a certain number, for instance 2000, of the best selling goods for the section where each of the electronic cash registers is installed, and storing this data in a certain area of the RAM 6 of each of the slave electronic cash registers 2, 3, ...... n as sub file data 42 by extracting this data from said master file of the RAM 6 of said master electronic cash register 1 in the step 502 . This system initial processing is performed, for instance, when the system is started up. At each of the slave electronic cash registers 2, 3, ... n, since the data for the sub file 42 therein is transferred from the RAM 6 of the master electronic cash register 1 to the RAM 6 of said slave electronic cash register by way of the transfer line L in the step 503, the routines in the step 504 to the step 508 are performed as the processing for everyday transactions. In other words, a key entry is made on the keyboard 2 in the step 504, the sub file 42 of this slave electronic cash register is looked up, and it is determined in the step 505 whether the entered goods code is available in this own sub file 42 or not. If the sub file 42 of this slave electronic cash register has the goods code, it is looked up, and if not the master file 41 of the master electronic cash register 1 is looked up by way of the transfer line L in the step 507, and then not only the unit price and the total price of the goods is displayed on the display 3 but also an appropriate receipt is issued from the printer 4, and then the totalling processing of the step 506 is performed. The totalling processing of the step 506 consists of adding the price and the quantity to the total box b2 of the sub file 42 if the type of goods is one whose code was available in said sub file 42 of this slave electronic cash register, and on the other hand in creating a sub file for this type of goods if the data on the goods was required to be obtained by looking up the master file 41 in the step 507. When the day s business is completed, the total data which has been totalled up in the step 506 as described above is transferred to the master file in the master electronic cash register 1 all together, in the step 508. In the master electronic cash register 1, the total data which is transferred from each of the slave electronic cash registers 2, 3, ...... n every day is entered into the total box b1 of the master file 41 each time in a cumulative manner, and when for instance the total data for one month have been obtained, in the step 509, the best selling goods are determined by statistical techniques, for instance according to the order of sales volume or the order of the increase rate in sales volume, in the step 510. Then, in the step 511, a group of goods, for instance the top 2000 best selling goods, is extracted from the master file 41 as data for the sub files, and by comparing these data for the sub files with the contents of the sub files 42 of the slave electronic cash registers 2, 3, ... n, disagreeing data on the goods are obtained, so that they may be transferred to the corresponding sub files 42 of the corresponding slave electronic cash registers, in the step 503 when it is next performed. Thereafter, the steps 503 to 511 are repeated, and each of the sub files 42 of the electronic cash registers is updated, for instance once every month or once every season. Thus, since the price look up processing which is performed in the processing of normal everyday transactions at each of the electronic cash registers can be performed mostly by looking up its own sub file, locally, and the need for looking up the master file 41 by way of the transfer line L is minimized, in addition to the advantage of gradually increasing the accuracy of the group of well selling goods stored in the sub files 42, the processing of transactions at each of the electronic cash registers can be performed in a very efficient manner. Furthermore, according to this preferred embodiment of the present invention, since the sub file data for each of the electronic cash registers is prepared for instance at the start up of the system, the improvement of the processing speed may be achieved from the beginning of the operation of the system. Although in the above described preferred embodiment the sub file data is prepared in advance as part of the system initial processing, this invention is not to be considered as limited thereby, but it is also possible to prepare the data for the sub files during the initial period of the system start up from the results of looking up the master file for each transaction at each of the electronic cash registers for a certain number of goods, and renewing the sub file according to the subsequent determination of well selling goods. Also, in the above described embodiment the determination of the best selling goods is performed by the master electronic cash register, but it is also possible for each individual electronic cash register to do the determination. And, in an electronic cash register system using a host computer, it is possible to provide the master file in the host computer, and to perform the determination of best selling goods and creation of data for the sub files on the part of the host computer, as a matter of course.