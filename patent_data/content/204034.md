# Configurable logic array

## Claims
Konfigurierbarer Logikarray Chip Fig. 9, 110 Fig. 4A Fig. 7A Fig. 8A, 8B, Master, Slave , mit

## Description
This invention relates to programmable logic arrays and in particular, to a method for providing on chip programming of each of a plurality of logic elements formed on a chip of semiconductor material to configure each logic element to carry out certain desired functions. Gate arrays are well known in the prior art. Typically a gate array is produced by interconnecting a plurality of active devices in a base array in any one of a number of ways to achieve a desired logic function. As gate arrays become more complex, the simulation of the logic to be achieved from a given interconnection of the active devices in the base array becomes more difficult and is typically carried out using a computer program. The layout of the actual interconnections for the active devices in the base array to yield a finished gate array is then derived using a computer aided design program of a type well known in the art. The process of designing such a structure is complex and reasonably expensive requiring the use of logic simulation and verification programs and semiconductor device layout programs. Accordingly, a need exists for an alternative approach which significantly simplifies the obtaining of a given logic function from a base array. A configurable logic array which allows changing the configuration of the finished integrated circuit from time to time even when the integrated circuit is installed in a system to provide any one of a plurality of logical functions from the same integrated circuit. By providing a number of configurable logical elements also referred to herein as logic elements in the base array, a new type of integrated circuit is achieved which is capable of being configured to provide any one of a plurality of logic functions depending upon the tasks which the system of which it is a part is called upon to perform. By configurable logical element I mean a combination of devices which are capable of being electrically interconnected by switches operated in response to control bits to form any one of a plurality of logical functions. A configurable logic array is comprised of a multiplicity of configurable logic elements each of which can include all the circuit elements necessary to provide one or more of the functions provided by an AND gate, flip flop, inverter, NOR gate, exclusive OR gate, and combinations of these functions to form more complex functions. The particular function to be carried out by a configurable logic element is determined by control signals applied to the configurable logic element from control logic. Depending on the control signals, the configurable logic element used in my invention can function as an AND gate, an OR gate, a NOR gate, a NAND gate or an exclusive OR gate or any one of a number of other logic elements without any change in physical structure. Structure is provided to allow any one of a plurality of functions to be selected from each configurable logic element. This is done by providing control logic to store and generate control signals which control the configuration of each configurable logic element. In an embodiment the control signals are stored and transmitted by control logic formed integrally with and as part of the integrated circuit chip containing the configurable logic element. However, if desired the control information can be stored and or generated outside this integrated circuit and transmitted through pins to the configurable logic element. In general, a given set of control signals is transmitted to one configurable logic element to control the configuration of that configurable logic element. The control logic is thus arranged to provide any one set of a plurality of sets of control bits to each configurable logic element on the chip. The actual set of control bits provided to each configurable logic element on the integrated circuit chip depends on the function to be carried out by the integrated circuit chip or by each configurable logic element on the chip. The configuration of each logic element on the chip is determined by the intended function of the total chip and by the intended formation of that configurable logic element as part of the chip. Thus the resulting structure is known as a Configurable Logic Array or CLA and each logic element in the array is known as a Configurable Logic Element or CLE . In general, each integrated circuit chip has in addition to and associated with the control logic certain on chip data routing circuitry. In an embodiment the on chip data routing is achieved by using a memory to store the particular data used to configure the configurable logic elements and by then transferring the data from the memory to a combination of a dynamic shift register and static latch element within or associated with each configurable logic element on the chip. The particular structure used in this invention is versatile in that it can be implemented particularly easily using P channel, N channel, or CMOS technologies in the embodiment shown. Of course, structure incorporating the principles of this invention can, if desired, be implemented using any other appropriate semiconductor technology. The dynamic shift register static latch element used in this invention is particularly useful in that the structural overhead i.e., access circuitry and routing circuitry is kept to a minimum relative to the useful logic functions on the total chip. Of particular importance, no addressing, data selection, or decoding in each configurable logic element is necessary when this combination of a dynamic shift register and static latch element is used to implement the configurable logic array used in my invention. The object of the present invention is achieved by the features of Claim 1. Preferred embodiments and a method implementing the configurable logic array chip according to Claim 1 are specified by the features of Claims 8, 13, 15, and 21, respectively. This invention as claimed in the attached claims will be more fully understood in conjunction with the following detailed description thereof taken together with the drawings. EP A 0 177 261 representing the state of the art according to Art. 54 3 , EPC, for all of the designated contracting states concerned will now be described in some detail by referring to Figures 1 7B of the drawings. EP A 0 177 261 discloses a configurable logic array chip comprising a plurality of configurable logic elements each comprising a combination of devices capable of being configured in response to configuration information to form any one of a plurality of logical functions, and a plurality of memory cells for holding configuration information, said configuration information configuring said configurable logic array chip. Turning now to Figure 1, Figure 1 illustrates certain logic functions capable of being integrated into a configurable logic element. The 28 functions shown in Figure 1 are merely illustrative and other elements not shown can, if desired, be included in a configurable logic element, The following elements are shown Of course, other logic elements can also be implemented in accordance with this invention. Figure 2 illustrates the internal logic structure of one possible logic element which is capable of implementing all useful functions of the two variables A and B, with the functions being selected by configuration control signals C0, Figure 3A illustrates a 16 bit RAM capable of to producing an output signal in response to any one of sixteen possible combinations of input signals. Thus input signals A and B control the X decoder to select any one of the four columns in the 16 bit RAM. Input signals C and D control the Y decoder to select any one of the four rows in the 16 bit RAM. The 16 bit RAM produces an output signal representative of the bit at the intersection of the selected row and column. There are 16 such intersections and thus sixteen such bits. There are 2¹⁶ possible combinations of functions capable of being represented by 16 bits. Thus, if a NOR gate is to be simulated by the 16 bits in the RAM, the Karnough map for the RAM would be as shown in Figure 3C. In Figure 3C all bits are 0 except the bit at the intersection of the first row representing A 0, B 0 and the first column representing C 0, D 0 . Should a less frequently used function be desired to be generated by the 16 bit RAM, for example, should a 1 output signal be desired for A 1, B 0, C 0 and D 0 then a binary 1 is stored at the intersection of the second row and the first column. Should a binary 1 be desired both when A 0, B 0, C 0 and D 0 and also when A 1, B 0, C 0 and D 0, then a binary 1 is stored at each of the intersections of the first column with the first row and the second row. The logic circuit represented by this loading of the RAM is as shown in Figure 3D. Thus the RAM of Figure 3A represents an elegant and simple implementation of any one of 2¹⁶ logic functions. Figure 3B shows another structure for yielding any one of sixteen select bits. Each of registers 0 15 in the vertical column to the left labelled 16 Select Bits , contains a selected signal, either a binary 1 or 0. By selecting the proper combination of A, B, C, and D, a particular bit stored in a particular one of the sixteen locations in the 16 Select Bits register is transmitted to the output lead. Thus, for example, to transmit the bit in the 1 register to the output lead, the signal A, B, C, D is applied to the leads so labeled. To transmit the signal labeled 15 in the sixteenth location in the 16 Select Bits register to the output lead, the signal A, Figures 4A illustrates an embodiment of a configurable logic array containing nine configurable logical elements. As shown in Figure 4A, nine logical elements are placed on an integrated circuit chip together with interconnects and variable switches for connecting various leads to other leads. Each of logic elements 40 1 through 40 9 represents a collection of circuitry such as that shown in Figure 2 or some similar structure capable of being configured as described above in Figure 2 to perform any one of a number of logic functions. To program the circuitry, selected signals are applied to input leads identified as configuration control input leads thereby to generate a desired logical function in each of the logic elements. In Figure 4A, no specific lead has been identified as an input lead for the configuration control signals. However, any particular I O pad can be selected for this purpose. The configuration control bids can be input into the configurable logic array either in series or in parallel depending upon design considerations. In addition, another I O pad will be used on input clock signals to clock the logic elements both for the shifting in of the configuration control signals to each configurable logic element and for controlling the operation of each logic element during the. functioning of the integrated circuit chip in its intended manner. The combination of logic elements 40 1 through 40 9 yields the desired logical output for the configurable Logic Array. Figure 4B illustrates the meaning of the interconnect symbols used in Figure 4A. To configure a logic element such as logic element 40 1 Figure 4A, 4B a number of bits must be applied to the configuration control leads such as leads C0 through C5, as shown, for example, in Figure 2. To do this, a shift register is utilized, in an preferred embodiment, as part of each configurable logic element. Figure 5 illustrates a shift register of use in this invention. The shift register of Figure 5 is illustrated showing two basic storage cells. Each storage cell is capable of storing one bit of information. Of course, an actual shift register will contain as many storage cells as required to configure the logic element of which the shift register is a part, to its desired configuration. In operation, an input signal is applied to input lead 58. This input signal shown in Figure 6D contains the pulses to be stored in the shift register as configuration control bits to configure the configurable logic element to perform a desired logic function or to configure an interconnection between leads in a manner to be described shortly. Thus the sequence of pulses applied to input lead 58 represents those pulses which when stored in the storage cells of the shift register will activate the configuration control bits in the proper manner to achieve the desired functional and or interconnection result. For example, if the circuit of Figure 2 is to be configured to form an AND gate, the pulses C0, C1, C2, C3, C4, and C5 would be represented by 1,1,X X, 0,1. The sequence of pulses applied to input lead 58 is synchronized with clocking pulses 1 and 2 applied to leads 57 and 59 respectively. Thus in the first period of operation clocking pulse 1 goes high Fig. 6A , clocking pulse 2 is low Fig. 6B , the hold signal Fig. 6C is low during shifting thereby facilitating the passage of data through sequentially connected cells 5 1, 5 2 et al. of the shift register. To shift the pattern 01010 into the shift register, the following operations occur The input signal on lead 58 is low during approximately the first half cycle of the clocking period t1. The output signal At the beginning of the second period labeled t2 in Fig. 6A , 1 goes high Fig. 6A and 2 is low Fig. 6B having gone low before period t1 ended. The input signal Figure 6D now has risen to a high level representing a binary 1 and thus the output signal The When 1 is low, 2 and hold may be brought high, thus holding the data indefinitely. The entire shift register may be set or cleared by setting or clearing the input with 1 and 2 both high and HOLD low. Enough set reset time must be allowed for the signal to propagate the entire length of the shift register to clear the shift register in this manner. Naturally this time is dependent upon the length of the shift register. The shift register operates in its dynamic phase by storing the information being shifted as charge on the gates of the transistors not shown in Figure 5 but well known comprising inventers 51 1, 52 1, 51 2, 52 2 et al. of the shift register. These inverters are of well known design and will not be described in detail. The use of dynamic shift register is an important feature of the invention because a dynamic shift register uses six transistors and thus takes up very little area. Uniquely, the dynamic shift register is converted to a static latch by adding only one transistor. Thus the dynamic shift register static latch can be easily fabricated as part of a configurable logic element without adding significant complexity to the circuit or consuming significant semiconductor area. Because of the hold signal, the dynamic shift register can be driven at a very low frequency because placing the shift register on hold automatically refreshes the data. Thus a separate refresh circuit is not needed. It will be apparent from the above description that the dynamic shift register static latch circuit is unique in that it does not need refreshing once it has been latched into a hold position. This is accomplished by use of the feedback circuit comprising lead 50 1 and pass transistor 54 1 in cell 5 1, for example. Figure 7A shows an additional configurable logic array containing a plurality of configurable logic elements. In particular, configurable logic elements 70 1, 70 2, 70 4 and 70 5 are shown in their entirety while configurable logic elements 70 3, 70 6 and 70 7 through 70 9 are shown partially. In particular, the complete interconnections of these last five logical elements are not shown. The structure shown in Figure 7A is merely illustrative of the types of configurations and connections which can be implemented using the configurable logic array of this invention and does not depict an actual circuit configured to carry out an intended function. As shown in Figure 7A, given leads can be interconnected by any one of a plurality of different means i.e., interconnection structures . The symbols representing the interconnections shown in Figure 7A are illustrated in Figure 7B. In particular, the schematics depicting various interconnections are to some extent self explanatory. For example, Figure 7B 2 illustrates a solid block involving a twenty pass transistor interchange. This particular twenty transistor interchange is shown in more detail in Figure 7B 7. For convenience, Figure 7B 1 illustrates three transistors capable of making a T connection or a cross connection but not a full interconnection. By full interconnection is meant the ability to connect each of the leads in Figure 7B 1, four leads coming into a node to a given node or to each of the other leads coming into the node in any combination. Figure 7B 2 shows a one transistor interconnection to connect a row with a column. Figure 7B 3 shows a six transistor full cross interconnection wherein any one of four leads coming into a node can be connected to any one of the other three leads. Figure 7B 4 shows six leads coming into an intersection wherein ten pass transistors are used to interconnect any one of the six input leads to any one of the five other leads input to the node. Figure 7B 5 illustrates a four lead node where two horizontal continuous leads are interconnected with two separate vertical leads using five pass transistors. Figure 7B 6 illustrates a three transistor interconnection wherein any one of three leads coming into a node can be interconnected with any one of the other two leads. Figure 7B 7 illustrates the twenty transistor interchange for interconnecting any one of eight input leads to any one of the other eight input leads except that lead parallel and adjacent to the lead being interconnected and except for four interconnections which also cannot be directly made using the structure of Figure 7B 7. Figures 8A and 8B illustrate two possible systems capable of using the configurable logic arrays of this invention. In Figure 8A, a microprocessor microcontroller produces address signals, control signals and data signals which are transmitted to a master configurable logic array. Also shown as N slave CLAs. As shown in Figure 8A, the control bits to control each of the configurable logic elements in each slave configurable logic array are transmitted on the data leads from the microcontroller to the master configurable logic array. From the master configurable logic array, this data is transmitted in series to each one of N configurable logic arrays where N is a selected integer. The control bits for controlling the configuration of each configurable logic element in each of the configurable logic arrays are transmitted in series through slave configurable logic array 1, slave configurable logic array 2 through to the Nth configurable array. The data is stored in serial shift registers as described above in conjunction with Figure 5. When the proper bits are located in the proper storage cells in each shift register, the hold signal shown in Figure 6C is raised to a high level thereby locking each data bit into the proper location in the corresponding shift register and thus configuring each configurable logic element in each configurable logic array. The data clock signals are applied on a separate lead to each configurable logic array as shown to clock in the control data. The address arrow pointing to CLA master in Figure 8A merely indicates that the microprocessor has the ability to select a particular master configurable logic array for receipt of data from the microprocessor. In Figure 8B the master configurable logic array is capable going into the nonvolatile memory with addresses to select particular data to be retrieved from the memory to be used to configure each of the slave configurable logic arrays. In Figure 8A the microprocessor produces address signals which will go to off chip memory or to other circuitry not shown . In Figure 8B the structure is similar to that shown in Figure 8A except that a nonvolatile memory such as a ROM, EPROM or E²PROM is used as the source for the configuration control bits to be transmitted into each of the configurable logic arrays. The structure of Figure 8B is unique in that when power is turned on or when a reset signal is applied to the master CLA, the master CLA initiates the transfer of the information for controlling the transfer of the information for controlling or configuring the Configurable Logic Array from the non volatile memory to the master CLS and to the slave CLAs 1 to N. In this sense, the structure of Figure 8B is self configuring in response to power on or a reset signal. A single board microcomputer using a Configurable Logic Array of this invention is shown in Figure 9. Configurable Logic Array 110 performs the chip decode functions, the latching functions and the various special logic that is necessary to implement a single board microcomputer. The CLA has an output lead DONE which is low from the time the power is turned on until the single board microcomputer is fully functional. The first event that occurs when power is turned on is that the Configurable Logic Array 110 forces the Z8000 CPU 111 into the reset state. Reset forces the outputs of the CPU to be tri stated i.e., to go to high impedance level which makes it possible for the Configurable Logic Array to use the control lines from the CPU 111 while it is being configured. The Configurable Logic Array 110 through a set of address lines LA₁ LA₁₂ addresses the EPROMS which are also used for the bootstrap of the microprocessor. In addition, the EPROMS have available in them configuration information for the CLA 110. The CLA 110 has signals which, during the self loading time, are fixed high, fixed low so that particular bi directional buffers 112 can be set in the correct direction for loading data from the EPROMS 113 to the Configurable Logic Array 110. Configurable Logic Array 110 then sequentially addresses locations in the EPROMS 113 which are read into the Configurable Logic Array 110 to configure the CLA 110. When array 110 is totally configured it then takes on its new functions and unlatches the done output which releases the reset line to the CPU 111. CPU 111 is then in control of the entire system. The decode used herein decodes the addresses from the CPU to create chip enables and chip selects for the various RAMS and EPROMS in the system and for the I O devices as well. In Figure 4A directional amplifiers shown by an X in a box are used to amplify signals which have been attenuated by a number of pass transistors. This speeds up considerably the operation of the circuit. The delay of a signal increases approximately in proportion to the square of the number of pass transistors through which a signal must pass. The amplifer brings the signal voltage back to its normal level. In view of the above description, it will be obvious to those skilled in the art that a configurable logic element in a Configurable Logic Array is capable of being reconfigured even after the Configurable Logic Array has been installed in a circuit. Indeed, this is one of the key advantages of the Configurable Logic Array of this invention. Thus, a configurable Logic Array can be reconfigured to provide a new logical function as part of its normal operation in the system of which it is a part. Another advantage of this invention is that the I O pads can be used as either input or output pads and can connect to any internal signal using pass transistors.