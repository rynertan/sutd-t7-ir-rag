# ALTERING FACIAL DISPLAYS IN CINEMATIC WORKS

## Claims
Verfahren zur Änderung eines Filmes durch Einsetzen eines zweiten Gesichtsausdruckes entsprechend einer zweiten Sprache für einen ersten Gesichtsausdruck auf einem vorhandenen Film entsprechend einer ersten Sprache, in der die Gesichtsausdrücke Lippenbewegungen entsprechend der benutzten Sprache aufweisen, umfassend die Erzeugung eines ersten Satzes von Daten in digitaler Form, die der Anordnung des ersten Gesichtsausdrucks in einer ersten Vielzahl von Filmbildern entsprechen, umfassend die Erzeugung eines zweiten Satzes von Daten in digitaler Form, die einer Anordnung des zweiten Gesichtsausdruckes entsprechen, und bei dem ferner durch Steuern mit beiden Sätzen von Daten und einem programmierten Digitalcomputer die Änderung der Anordnung des ersten Gesichtsausdrucks bewirkt wird, um im wesentlichen die Anordnung des zweiten Gesichtsausdrucks zu erzeugen, dadurch gekennzeichnet, daß der zweite Satz von Daten aufgrund des vorher vorhandenen zweiten Gesichtsausdruckes erzeugt wird während die zweite Sprache über eine zweite Anzahl von Filmbildern gesprochen wird.

## Description
This invention relates generally to methods for altering a cinematic work by substituting a second animated facial display for a first or presently existing animated facial display in the work and in which the displays have lip movements corresponding to the languages used by the actors and wherein the languages of the two displays are sufficiently different to result in different lip and or other facial movements for each display. The present invention is intended to avoid the simple dubbed in effect wherein the lip movements do not agree with the dialogue. Thus, the invention is particularly applicable for replacing the sound track of a motion picture with a new sound track of a different language while also modifying the lip movements of the actors in the picture to correspond to the new language to be applied to the sound track. The invention is applicable to works using live actors as well as for animated cartoons. In United States Patent 4,260,229 granted April 7, 1981, there is shown and described a system and method wherein predetermined visual images such as lip movements are graphically created to correspond with speech sounds so that when the visual images and speech sounds are recorded on film, video tape or other media the presentation to the listener or viewer will be that of lip movements corresponding to the language being used and for that reason will make the cinematic work more real and interesting. In the system of the foregoing patent speech sounds are analyzed, digitally encoded and transmitted to a computer. Stored within the computer is a program for producing output data that creates visual images of lip movements corresponding to the speech sounds. Under control of the data for the speech sounds, the graphical output from the computer is sent to a graphic output device and related display equipment to produce the graphical display which may he combined with speech sounds so that resultant audio visual display contains lip movements corresponding to the speech sounds. Broadly speaking the present invention has for one of its objects an improved novel technique for correcting lip movements on frames of the film by a novel use of a programmed digital computer and selected data, whereby a new sound track with correct lip movements for the same may be substituted for the original sound track in a motion picture where the original sound track is in a foreign language with different lip movements whereby the film avoids having a dubbed in appearance. A further object of this invention is to provide a method and arrangement of the type stated in which it is not necessary to store phoneme codes nor is it necessary to provide elaborate drawings for mouth shapes, i.e., the mouth shapes are just several in number and are utilized in conjunction with unique algorithms to effect the changes in lip configurations corresponding to the new language applied to the cinematic work. From one aspect the invention includes a method of altering a cinematic work by substituting a second facial display corresponding to a second language for a first facial display, on an existing work, corresponding to a first language and in which the facial displays have lip movements corresponding to the languages used, comprising generating a set of data in digital form representing the configuration of the first facial display over a first plurality of cinematic frames, generating a second set of data in digital form representing a configuration of the second facial display and altering, under the control of both sets of said data and a programmed digital computer, the configuration of said first facial display to produce substantially the configuration of the second facial display, characterised in that the second set of data is generated from the second and pre existing facial display whilst the second language is being spoken over a second plurality of cinematic frames. For the avoidance of doubt references to facial display on this specification do not necessarily refer to the entire facial display, but can refer only to those portions of the facial display which are associated with speech, e.g. the lips. A further object of this invention is to provide a method and arrangement of the type stated which eliminates the need for a voice encoder to determine the lips shapes required by the sounds. In lieu thereof a recording is made by the actor whose voice and lip movements will be substituted for that on the existing cinematic work. The audio is recorded separately from the motion picture or video portion, and the latter is used to make a limited number of measurements graphically on a frame by frame basis. However, it is not necessary to make measurements on each frame, but generally only on those frames where there is a change in direction of the lips as determined by slow motion viewing of the frames. The measurements on intermediate frames is carried out in the computer utilizing a non linear interpolation algorithm. These measurements make the relationship between the new sound and the original lip shape more direct. Whenever possible an effort is made to select frames where the new sound and the original lip shapes match. Sometimes this means skipping and or duplicating frames. However, this approach does not always produce acceptable looking movements and many frames have to be altered. For this purpose there are traced standard facial curves, including lip and jaw curves. Data for these standard curves are sent into the programmed digital computer, and this is done with respect to each actor. The standard curves may in particular include full open mouth, full closed mouth, normal width of mouth, and pursed. These standard curves become the basis for later interpolation of mouth, jaw and lip lines for each frame. For example, if an actor s lower lip is twenty five percent open its curve is approximated by the curve calculated by interpolation of each point twenty five percent of the way between the standard closed position curve and the standard opened position curve for that actor. In this regard it has been found that the percentage open or closed for any particular actor is relatively constant over the width of the mouth, and this discovery tends to simplify the geometry and reduce the number of curves necessary to effect reasonably accurate correction of the lip configuration. The frames are corrected by creating a new lip configuration through alteration within the computer. The computer is used in conjunction with an image processor, a known commercially available piece of equipment. Signals are transmitted to and from the computer and the image processor during the correction process. The image processor is capable of receiving the successive video frames in analog form and converting them to digital form for storage therein. Moreover, each frame may be retransmitted from the image processor to a standard video monitor where the frame appears as a still picture. The image processor may send the necessary video signal for the frame to the monitor sixty times a second, whereby the corrected video frames may be viewed or dealt with in the processing operation. The video screen is conventionally made up of pixels, and each pixel is scanned and digitized into an array of numbers corresponding to the light intensity of a number of points for example 512 x 480 pixels or points on the original scene. These numbers are stored into and displayed from a large but otherwise conventional digital computer memory. Each number is addressable by a unique location corresponding to the original point location. Moving the numbers from one set of memory locations to another set has the effect of moving a part of the frame from one area to another. Since the movement is done by computer, the movement can involve complex numerical algorithms corresponding to complex movements. This digital figure permits the actors lips to be stretched or shrunk directly on the displayed face. Furthermore, the computer algorithms calculate the individual moves for each point in the actors face depending on where the point lies between the standard curves and the degree or percent of alteration as determined by measurements from the new language lip movements and measurements of existing language lip movements. After the pixels have been moved on the video displayed face of the actor based on the foregoing calculations, the computer program provides a fill in from previous frames. For example, the computer stores the representation of the teeth from the actors open mouth in part of the computer memory so as to enable the mouth to be filled when stretched open in later frames. Viewed another way the method of the invention comprises substituting a second language and associated lip movements with a first language and associated lip movements in a cinematic work made up of a number of frames and wherein the two languages have different lip movements and including the steps of generating data in digital form representing the lip movements of the respective languages, transmitting said data to a programmed digital computer, and under control of said computer, and in accordance with said data, modifying the light intensities at selected areas of the frame to alter the lip movements to a configuration corresponding to said second language. Referring now in more detail to the drawings, and in particular to Fig. 1, there is shown a block diagram setting forth the basic functional steps in accordance with the disclosed embodiment of the invention. Thus, the block diagram shows an arrangement for substituting a second or new language dialog with accompanying facial animation including lip movements for a section of a motion picture 2 in a language foreign to that of the new language. The foreign language work may be in film form or in the form of a video tape. A new actor is utilized to speak audio , and lip movements with the audio are to be substituted for that of an actor in the film. The actor with the new language records the new language on a recording medium 4 such as a tape and at the same time the lip movements and configurations of that actor are video taped, displayed and measured. This information is converted into digital form. Similarly, the head and lip movements of the actor in the film are measured together with head movements. This information is converted into digital form. The two groups of data are compared in a programmed computer to provide a measure of the amount of correction that must be made to the lip movements of the foreign film actor to bring those lip movements, along with facial movements, into positions which correspond to the new language sound of the new actor. Such data are stored in a computer in digital form. The data constituting measurements of the lip movements of the new actor and the original actor are on a frame by frame basis, but it will be understood that it is not necessary to utilize all frames of the foreign film, as will be presently more fully described. Furthermore, standard curves are derived from selected frames to serve as reference points for making the corrections in the lip and facial movements. All of the data are fed into a programmed digital computer, and by the use of unique algorithms, more fully described herein the frames of the foreign film are altered to provide the desired lip shapes corresponding to the new language. Thereafter, the new language audio is combined with the new language lip movements to provide a film or video tape 6 with a new sound track and revised lip movements properly matching the audio. In the process the frames of the foreign film are preferably converted into video form where the changes are effected by moving pixels to the extent necessary to correct the position of the lips and other facial configurations being revised. The altered frames may then be rephotographed or alternatively the foreign movie may be retained in video tape form. Referring now to Fig. 2 there is shown an actor 8 that speaks into a microphone 10 in the language to which the film is being converted. The actor s voice is recorded on an audio recorder 12, and simultaneously a video camera 14 photographs the lip movements of the actor 8. The video signals from the camera 14 are recorded on a video tape recorder 16 which when operated sends its output signals to a video monitor 18. The monitor 18 displays the video signals on a frame by frame basis or by selected frames may have measurements made thereon as will be presently more fully described. The measurement signals constituting video information are sent to a computer 20 for recording on a diskette 22. It has been found that only a limited number of measurements need be taken on the new language lip movements, as shown in Fig. 3. Generally speaking the measurements taken are upper height 26, lower height 28, inner width 30 and outer width 32. While in theory at least all of the frames could be measured, in practice the measurements may be limited to selected frames at which the lip movements change, namely starting to open, stopping opening, starting to close and other abrupt changes in configuration. In making the measurements the operator displays each frame to be measured on the monitor 18 and then measures the distances 26, 28, 30, 32 with a ruler. The measurements may be converted to a unit lip size by comparing each measurement to the maximum for the actor 8 and restated as an absolute dimension, such as inches or centimeters, to a percent of the maximum. As will be seen hereafter this permits comparison of the lip movements presently existing on the audio visual film so that movements of the lips on the film may also be restated to the same index. Furthermore, the center of the mouth graphically X 0, Y 0 may be located as shown at 24 in Fig. 3. Moreover, the measurements can be converted from the screen coordinates X, Y, locations to percent open by measuring and comparing each movement to the maximum distance of the open mouth condition encountered for the actor 8, and for each other actor whose lips and voice will be processed. The computer 20 may be a well known type, for example an IBM PC Model AT and the various measurements referred to with reference to Fig. 3 can be typed into the computer by use of a standard keyboard associated therewith for recording of the data on the diskette 22. The existing or foreign head and lip movements on the film are measured by the operator viewing the frames from the film or from the screen projection of a video tape. The head and lip movements will be compared to the sound movements previously described and will be used to control the alteration of the graphic frames, as will hereinafter be more fully described. Like the lip movements of the new language referred to previously, the existing lip movements are measured to include the same measurements as in Fig. 3, namely upper height, lower height, inner width, and outer width. In addition the head movement may be measured by the X, Y coordinates of the center of the mouth and change in head tilt. Like the new language movements measurements can be limited to frames in which movements change. While all frames may be treated, a practical application of the present invention utilizes only a small number of frames as compared to the total frames in the film. As best seen in Fig. 2 there is a film projector 46 containing the cinematic work which projects an image onto a screen 44 on a frame by frame basis under control of a signal from a computer 48. The image on the screen 44 is picked up by a video camera 42 and transmitted to an image processor 50. The image processor redisplays the image onto a monitor 52 having a cursor 54. The monitor thus views the image on a frame by frame basis, each frame appearing as a frozen or still picture. The image processor 50 is a known piece of equipment and which may be a Model 1633 made by Digital Graphic Systems, Mountainview, California and is sold under the trademark CAT and is sometimes referred to as a CAT Model 1633 digital image processor. This image processor receives an analog signal from the video camera 42, converts the signal to digital form and stores the signal therein on a frame by frame basis. The signals from the image processor are then retransmitted to a monitor 52 which receives the image of each frame sixty times per second at which provides a still or frozen frame for viewing and for corrective work. Thus, the image processor is capable, among other things, of digitizing a video signal, storing the signal as an array of light intensities picture elements or pixels in digital memory, and displaying the light intensities on a television monitor, and superimposing a flashing cursor at any specified location of X and Y on a video monitor display. The operator advances frames by operating the projector 46 through a signal from the computer 48 to display a frame onto the screen 44 for pick up by the video camera 42. In this regard it should be noted that in lieu of the camera 42 the cinematic work may be on a video tape in which case transmission to the image processor can be on a frame by frame basis from the videotape. The operator, by the execution of commands to the computer, commands digitizing and display of a frame on the monitor 52. The operator then causes the cursor 54 to be displayed and moved to selected key points hereinafter described on the frame. The measurements can be simplified by devoting selected keys on the computer keyboard and for a special command key to be used to identify the data to be stored. Data constituting the lip movements for the foreign film is stored in a diskette 56 which receives its data from the computer 48. The measurements 26a, 28a, 30a, 32a of the original lip movements on the film can be converted from the screen coordinate X, Y locations to a percent opening by measuring and comparing each movement to the maximum distance encountered for the actor appearing in the film. Fig. 4 shows the measurements of lip configuration for the actor on the film at one frame thereof. The measurements from the various frames may be converted from the screen coordinate X, Y locations to percent open for the particular actor on the film. The cursor 54 may be used to make the various measurements in Fig. 4 upon command, in accordance with conventional techniques for operating computers. Figs. 5 and 6 illustrate graphically and diagrammatically a comparison or match up of the new language lip movements to those existing on the film. In this manner a frame of the existing work may be paired off with a suitable frame of the lip movements taken for the new actor 8 so as to reduce the amount of adjusting of the existing lips. As seen in Fig. 5 data relating to the lip movement of the original language and appearing on diskette 56 is sent into computer 60 along with data for the new or second language 22. Thus, the two groups of data on the diskette 22, 56 are introduced into the programmed computer 60 to produce a diskette 62 constituting data that cooperates with data for standard curves hereafter described to produce a display of lip movements corresponding to the second or new language. The operator compares the number of frames made of the lips of the actor 8 as compared to the number of existing frames of foreign graphics. The operator compares the counts and calculates the adjustment necessary based on the circumstances. For example, if the second language sound will require 300 frames and the section of the film contains 400 frames the operator may decide to 1 drop the first 100 frames of the work, 2 drop the last 100 frames of the existing work, 3 drop 1 out of every 4 out of the existing work, etc. In close up scenes where correction is most important the operator may vary the adjustment based on both head and lip movements. To aid in the selection or pairing off of frames the computer is programmed to plot out a graphic such as that shown in Fig. 6A. The plot is percent mouth open versus frame number, and it will be seen that graphs 70 and 72 may for example relate to relative percentage of mouth open of the actor 8 for the curve 70 and the same data on the curve 72 for the actor in the film. For purposes of cutting down the amount of corrections it may be desirable to shift the point 76 to coincide with the point 74 and shift the point 80 to correspond with the point 78. As the computer permits the graphs 70, 72 to be shifted relative to one another to vertically align point 74 with point 76 and point 78 with point 80, as shown in Fig. 6B, the operator can then select the frames to be paired for purposes of adjusting the lip movements on the film. Before introducing the data relative to the lip movement measurements shown in Figs. 3 and 4, the operator identifies and defines control points for standard curves to characterize the actor in the section of film being processed. While the new and original lip movement measurements will be used to control the amount of alteration of each frame the standard facial curves will control the location of the alterations. Only a small number of control points need be defined to characterize the actors face in the film for resynchronization to the new sound. For this purpose selection is made of a minimum of two frames for standardizing a section of the film. One frame shows the mouth fully open and the other frame shows the mouth fully closed. Additional frames may be selected if the head position warrants. The standard curves shown in Fig. 7 include nose blend 92, open upper lip 94, centerline 96, open lower lip 98, closed jaw 100, open jaw 102 and neck blend 104. Two additional curves, closed upper lip and closed lower lip are not illustrated in Fig. 7 since they normally coincide with the centerline curve 96. The standard curves are defined by measuring and transcribing the X, Y coordinates of operator selected control points shown for example in Fig. 8 with respect to the open upper lip curve 94. The same procedure is followed with respect to the other curves. Normally, control points for the lip curves include a blend point at the cheeks 1a, 7a, the corners 2a, 6a the center 4a and one or two points on either side of the center end corner 3a, 5a. Control points for the nose blend and neck blend are arbitrary and normally bound the alteration area. Control points for the jaw curves follow the corresponding lower lip curves. The operator can measure the X, Y coordinates of the standard curve control points in a manner similar to measuring the head and lip movements earlier described. Thus, the film may be mounted in a telecine arrangement that includes the hardware 42 54. An appropriate frame of the film for standardization is encountered and the operator commands digitizing into the image processor 50 and display on the video monitor 52. The operator commands movement of the cursor 54 and the storage of the point coordinates by striking appropriate keys on the keyboard of the computer 48. Consequently, the X, Y coordinates for each control point is located at an actual X, Y location with reference to the location of the center point X 0, Y 0 of the mouth. All the data are fed into the computer 48 on a point by point, curve by curve basis. This allows each curve to be located for frame to frame movement in altering the individual frames. With the hereinafter defined algorithms and programming for the computer there is now in the process being described sufficient data for altering the original film to provide a new section of film or video tape to be combined with the new sound that is recorded on the recorder 12. The hardware used may be that shown at 42 54 of Fig. 2 with the addition of a single frame by frame recording camera. Alternatively, the hardware may take the form shown in Fig. 9 in which the film is in video tape form and is being transmitted from a video tape recorder 82 to the image processor 16a. The computer 60a, video monitor 52a and the image processor 16a function as previously described. A recording camera 80 may record on a frame by frame basis the images on the monitor 52a. The recording camera may be a film camera or a video camera with accompanying video cassette recorder. As previously described the telecine 42 46 or VCR arrangement 82 under control of the digital computer 60a converts each film frame into a video signal which is digitized, stored and redisplayed by the digital image processor 16a. In addition to digitizing, storing and redisplaying the film frame the digital image processor 16a also sends and receives light intensity information to and from the computer 60a. More particularly, the operation of the image processor 16a and the digital computer 60a are such that the image processor accepts an X, Y coordinate from the computer sends back the numeric value Corresponding to the light intensity at that coordinate location. Moreover, the image processor can replace the light intensity at a given coordinate location with a new value sent from the digital computer. Consequently, any particular point at an X, Y location on a working curve of the original lips Fig. 4 can be made to shift or move to the new location identified by a corresponding point on the new lip form Fig. 3 . Since the foregoing is done with respect to all points on the lip curves the various points on the lip curves in Fig. 4 will be shifted to correspond to the lip curves of Fig. 3 for providing new lip movements to correspond with the new sound. The computer program and the arrangement is such that the amount of shifting is controlled by reference to a pair of standard curves of Fig. 7, more particularly the two standard curves between which the particular X, Y point is located. As determined by an algorithm uniquely applied to the present process repeated replacements of light intensities are made over the facial area pixels between nose and neck to modify the image so that when redisplayed on the monitor the actors mouth appears to have the shape required by the sound. The modified frame displayed on the monitor 52a is recorded by a camera 80 or recorded directly upon video tape by a video tape recorder. The alteration process is repeated on a frame by frame basis until the entire dialog portion of the film is rerecorded. The algorithms utilized in the present invention are capable of translation into instructions and then entered, stored and executed by the computer. As previously pointed out, these algorithms combine standard curve information or data with new lip movement data and present head and lip movement data on the film. The algorithms include 1 interpolating the frame data for movement information, 2 constructing working curves from the standard curves, 3 finding curve intercepts, 4 point by point replacement, and 5 filling in the inner mouth areas. Frame data for width, height, head movement and X 0, Y 0, mouth center are interpolated for movement information. In order to reduce operator effort in connection with previously described measurements, such measurements were made only on frames in which movement changed. Movements for intermediate frames can be interpolated by a straight line or linear interpolation. For example, a frame one quarter between a closed frame and a full opened mouth frame could be assumed to be one quarter open. However, it has been determined empirically that lip and head movements tend to be non linear. The interpolation algorithm used herein combines linear and quadratic components. It calculates an intermediate value V, in three equations as follows The heights and widths are combined with standard curves to construct working curves which represent the actual curves for the mouth regions involved. As previously described, standard curves were defined by the operator for open and closed upper lip, lower lip, and jaw. Working curves approximating the before and after upper lip, lower lip, and jaw are calculated by interpolating corresponding open and closed standard curve control points by the original foreign and desired new language heights and widths. For example, if the desired new language upper height is 0.5 i.e., 50 open , then each control point of the upper lip would have X, Y coordinates exactly 0.5 i.e., 50 between the corresponding control points of the Standard open upper lip and the standard closed upper lip. The before and after working curves for lips and jaws supplement the standard curves for the nose blend, centerline, and neck blend shown in Fig. 7. Although working and standard curves are defined by a limited number of control points, intermediate points or intercepts between control points can be calculated by interpolation. Although a linear interpolation gives a fair approximation, empirically we have determined that a so called cubic spline interpolation gives a closer approximation to normal lips curves. Cubic spline interpolation is a standard mathematical technique detailed in, for example, Applied Numerical Analysis, 1980, pages 474 488, Addison Wesley Publishing Co., Reading, Mass, U.S.A. Cubic spline interpolation equations are hereinafter shown in the computer program included as part of this specification and appearing under the heading CALCULATE CUBIC COEFF S. The curve intercepts determined by cubic interpolation are used to find vertical coordinates for point by point replacement. Point by point replacement is the central algorithm in alteration. All facial points between the nose and neck blend curves are considered for replacement. The point by point replacement is made in Fig. 9 by a digital computer 60a commanding a digital image processor 16a to send intensity information to the digital computer from source coordinates X , Y and to receive back that value as the new intensity information for a destination point at coordinates X, Y. The major task in the algorithm is the calculation of each destination point X, Y considered for replacement and from that, the calculation of the source point coordinates, X , Y , for intensity information. One way to calculate the destination coordinate values for x is to start with X 0 at the center of the mouth. Then set X 1, X 2, X 3,...until X the X of the first nose blend point. Then set X 1, X 2, X 3,...until X the X of the last nose blend point. This gives all possible values of X for replacement. Then for each X calculate Y values between Y1 and Y2 as follows The starting Y1 ordinate can be calculated as the cubic spline Y intercept of X with the nose blend curve. The ending value Y2 can be calculated as the cubic spline Y intercept of X with the neck blend curve. Intermediate values of Y can be calculated by successively subtracting one, Y nose intercept, nose intercept 1, nose intercept 2...until Y intercepts the neck blend. To calculate the source vertical ordinate, Y1 , calculate Y1,Y2,Y1 and Y2 as follows Calculate Y1 as the Y intercept of the blend or working after curve above Y Y2 as the Y intercept of the blend or working after curve below Y Y1 as the intercept of the blend or before curve corresponding to Y1 and Y2 as the intercept of the blend or working before curve corresponding to Y2. Next calculate the Y coordinate between Y1 and Y2 by linear interpolation To recapitulate the intensity of every point in the lower face is replaced by the intensity from another point based on a the X,Y coordinates of the point to be replaced, b the standard blend curves, c working curves based on the before and after heights, and horizontal adjustment from before and after widths. The difference between the replaced point X,Y and source X ,Y is decreased to zero at the blend curves at the nose, center and neck as well as blend points in the cheeks. This gradual decrease to zero rsults in an invisible seam between change and unchanged areas of the face. The order in which points are replaced is arbitrary. However, data storage requirements in the computer are reduced if lips are stretched and widened toward the center, shrunk and pursed from the center. When a mouth is stretched from closed to open, points within the mouth may need intensity information from a previous frame. For instance, tooth configurations may need to be restored. Intensity information from a range of points from a digitized full open mouth are sent from the digital image processor 16a to and stored in the host computer 60a memory. When a subsequent frame is digitized the host computer can send some of the point intensities, as determined by the program, for replacement at corresponding locations in the newly opened mouth. Such corresponding locations are calculated by referring all points to the center of the mouth. Transfer is limited to operator specified left and right maximum distances from center. Only points between the after or new language upper and lower lip curves are replaced. After all frames in a sequence are digitized, altered, and recorded on film or video tape, the altered graphic frames may be combined with the new language sound from recorder to complete the section of film. The combining may be carried out, for example, by conventional techniques for adding a sound track to a film.