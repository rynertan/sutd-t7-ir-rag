# SEMICONDUCTOR MEMORY DEVICE

## Claims
Halbleiterspeichervorrichtung mit

## Description
The present invention relates to a semiconductor memory device having an error correction function. A redundant redundancy technique is widely known which improves the yield of semiconductor memory devices. In the redundant technique, a redundant memory cell array storing correct data is added to a regular memory cell array, and when a defective memory cell is selected to be read, a redundant memory cell is actually read in place of the defective memory cell, so that the correct data can be read. However, this redundant technique can be applied only to previously determined defective memory cells. That is, once defective memory cells are determined, other defective read data caused by hard errors or soft errors after the determination of the defective memory cells can not be corrected. An increase in the capacity of a dynamic type memory device causes increased occurrence of soft errors due to α rays. Whether the data read from the memory is correct or incorrect can be determined by means of parity checking. However, although the presence of an error bit may be determined by the parity checking, the position address of the error bit cannot be determined, and accordingly, error correction cannot be performed. To determine the error bit and to make it correctable, an improved parity checking technique employing a parity checking two dimensional virtual matrix has conventionally been incorporated into a conventional semiconductor memory device see, for example, Patent Publication FR A 2 502 377, Inventor Junzo Yamada et al., applicant NTT. This conventional semiconductor memory device employing a parity checking two dimensional virtual matrix, however, can correct only a single bit error, as later described in more detail, and since the redundant technique is not employed, it provides a low yield. It is desirable for the redundant technique to be combined with the improved parity checking technique so as to be able not only to correct the previously determined hard errors but also to correct soft errors or hard errors caused after the determination of the previously determined hard errors. However, since the parity checking two dimensional virtual matrix has a predetermined logic for outputting data in response to a selected memory cell, it is impossible to simply replace a defective column with the redundant column. Therefore, unless a great number of circuit elements for preventing the previously determined defective hard errors from entering the two dimensional virtual matrix are used, it is difficult to combine the redundant technique with the improved parity checking technique. According to the present invention, there is provided a semiconductor memory device comprising The object of the present invention is to provide a semiconductor memory device in which the redundant technique and the two dimensional parity checking technique are combined, whereby not only previously determined hard error s along a predetermined bit column line but also other soft and hard errors occurring after the occurrence of previously determined hard errors can be corrected, and This is achieved by adding a relatively simple circuit. Reference is made, by way of example, to the accompanying drawings, wherein Before describing the embodiments of the present invention, a conventional semiconductor memory device employing a parity checking two dimensional virtual matrix is described with reference to Fig. 1. In the Figure, MCA is a memory cell array in which a number of dynamic type memory cells MC are arranged in a matrix fashion, wherein there are provided a number of Simultaneously with the above mentioned read out operation, a selector SEL virtually or logically rearranges the data of all PCA is a parity cell array including parity cells each storing a correct vertical parity or a correct horizontal parity. The correct parities have been previously written into the parity cells during the writing of data into all of the memory cells MC in the memory cell array MCA. In the construction of the parity cell array PCA, there are A comparator CMP compares the vertical parity output from the vertical parity generator VPG with the correct vertical parity output from the vertical parity cell VPC The error correction function by means of the above described H V matrix is effective not only for a soft error due to α rays but also for a hard error caused by a hard defect of a memory cell or for a bit line defect. However, there is a disadvantage in the above described H V matrix that the correctable error is only one bit in the memory cells belonging to a common horizontal or vertical parity group. That is, an error can be corrected only when a single bit in any H V parity check data group in the above mentioned H V matrix is an error. To correct a plurality of hard errors, a redundancy technique for remedy of the hard errors, for improving the yield, is publicly known. In a redundant construction in which a row redundancy, i.e., a redundant word line, is provided to replace a defective word line, the conventional technique can be combined with the redundant technique without any difficulty, whereby, hard defects along a predetermined defective word line can be remedied by the redundancy technique, and a soft error or a hard error caused after the determination of the defective word line can be realized by means of the two dimensional parity checking using the above mentioned H V matrix. However, it is difficult to combine the construction of a column bit line redundancy with the above described two dimensional parity checking. When only the conventional column redundant technique is used, the switching from the defective column to the redundant column could be done merely by controlling the switching of the coupling to the data bus lines from the regular column defective column to the redundant column. However, to simply combine the two dimensional parity checking with the column redundancy, the logic of the switching from the regular column the memory cells connected to the selected bit line , which must be expressed in a number of H V matrixes, to the redundant column, becomes too complex. That is, to effect the switching to the redundant column and to also effect the two dimensional parity checking using the H V matrix, a defective column data must be inhibited from mixing with a column data group from which a parity is to be taken, and the defective column data must be replaced by the redundant column data. Since the location of the generation of the defective column is indefinite, the correspondence between the redundant column and the H V matrix is difficult to establish without assembling a switching control circuit, thus disadvantageously needing a great number of circuit elements to realize this very complex logic. According to the present invention, however, the combination of the two dimensional parity checking with the column redundancy can be realized by employing a relatively simple circuit. The embodiments of the present invention are now described in the following. Figure 3 is a circuit diagram illustrating an embodiment of the present invention, in which the same portions as those in Fig. 1 are provided with the same symbols. In Fig. 3, in addition to the memory cell array MCA, the data selector SEL, the multiplexer MPX, the parity cell array PCA, the vertical parity generator VPG, the horizontal parity generator HPG, the comparator CMP, and the EOR gate G₁ , which are included in the conventional device shown in Fig. 1, the semiconductor memory device of this embodiment shown in Fig. 3 further includes a redundant cell array RCA redundant column having an output connected to inputs of inhibit circuits IC₂ and IC₃ the outputs of the inhibit circuits IC₂ and IC₃ and the outputs of the horizontal and vertical parity generators HPG and VPG are respectively input to EOR gates G₂ and G₃ inhibit circuits IC₀ and IC₁ are inserted between the data selector SEL and the horizontal and vertical parity generators HPG and VPG a switching circuit SW for switching between the output of the redundant cell array RCA and the data bus DBUS is connected between the data bus DBUS and an input of the EOR gate G₁ and, these inhibit circuits IC₀ through IC₃ and the switching circuit SW are controlled by an inhibit control circuit CTL. In the redundant cell array RCA, the same number Figure 4 shows an example of a basic circuit for constituting the inhibit circuits IC₀ through IC₃. The inhibit circuits IC₂ and IC₃ are respectively formed by one set of the basic circuit the inhibit circuit IC₀ is formed by In the following, assume that the memory cell MC The reading operation of the semiconductor memory device shown in Fig. 3 is described with reference to Figs. 2, 3, and 4. As is apparent from the foregoing description, according to the first embodiment, parity checking can be carried out and correct data can be read not only when the redundant memory cell is accessed in place of the previously determined defective memory cell, but also when another memory cell is accessed which may have a soft or a hard error produced after the determination of the defective bit line. Figure 6 is a circuit diagram showing another embodiment of the present invention in which a hard defect in the parity cell array PCA can be remedied. In the first embodiment shown in Fig. 3, the case where a memory cell MC is replaced by a redundant memory cell RMC was shown. In the second embodiment shown in Fig. 6, this concept is further expanded so that not only a defective memory cell MC but also a defective parity cell connected to the same defective bit line can be replaced by the redundant memory cell. Practically, an inhibit circuit IC₄ for the horizontal parity cells HPC and an inhibit circuit IC₅ for the vertical parity cells VPC are added, the outputs of which, and the outputs of the parity generators HPG and VPG, are, at first, input to the EOR gates G₂ and G₃. The additional inhibit circuits IC₄ and IC₅ are respectively controlled by additional parity inhibit signals PIS A modified inhibit control circuit CTL Figure 7 is a circuit diagram illustrating an example of the modified inhibit control circuit CTL By this constitution, the parity inhibit signal PIS Referring back to Fig. 6, the operation of the semiconductor memory device according to the second embodiment is described in the following. From the foregoing description, it will be apparent that, according to the present invention, in a semiconductor memory device having a function of parity checking by employing an H V matrix, since previously determined hard defects can be replaced by redundant memory cells, the parity checking function can be advantageously used for a soft error or a hard error occurring after the determination of the previously determined hard defects. Further, the yield of the semiconductor memory device having a function of parity checking with an H V matrix can be improved by employing a redundant memory cell array. Still further, the redundant technique and the parity checking technique using an H V matrix can be combined by adding a relatively simple circuit. As explained above, an embodiment of the present invention can provide a semiconductor memory device comprising an error correcting circuit employing a virtual two dimensional matrix for correcting read data, and a redundant memory cell to replace a defective memory cell, wherein when the selected memory cell has a previously determined hard error, the selected memory cell is replaced by the redundant memory cell, and when the selected memory cell has a soft error or a hard error occurring after the determination of the previously determined hard error, the read data is corrected by the error correcting circuit. The embodiment of the present invention provides a semiconductor memory device having an error correction function, which device can process both a soft error and a hard error by adding an error correction code ECC and redundant bits.