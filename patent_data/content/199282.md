# INTERPOLATIVE D A CONVERTER

## Claims
Interpolativer Digital Analog Wandler, umfassend

## Description
The present invention relates to an interpolative digital to analog D A converter, and more particularly to a D A converter by which the digital signal of signals sampled at a sampling frequency several times higher than the Nyquist rate of the signals is converted into an analog signal. Especially, it relates to a D A converter for a voice band signal etc. which is well suited for implementation as a semiconductor integrated circuit. As one system of a D A converter of high precision for handling voice signals, there has been known an oversampling type D A converter which is, in principle, capable of reducing the number of analog circuit elements and mitigating precisions to be required of constituent elements and which is well suited to be implemented by a semiconductor integrated circuit. However, as described in Report of the Institute of Electronics and Communication Engineering in Japan CS83 198 , National Conference Record No. 659, 1984 Communications etc., the oversampling type D A converter in a prior art needs a sampling frequency higher than several MHz in order to attain a desired S N signal to noise ratio characteristic e. g., 90 dB for an evaluation band of 4 kHz , so that high speed operations are required of an operational amplifier, an analog switch etc. Moreover, since a difference PCM pulse code modulation signal is used as a digital signal being an input to a D A converter, an analog integrator is necessitated on the output side of the D A converter, and the analog integrator causes spike noise and an offset voltage to worsen the S N ratio, so that a result contradictory to the original purpose of improving the S N ratio is produced. The principal object of the present invention is to provide an interpolative digital to analog converter which affords a high S N ratio in spite of a comparatively low sampling frequency. In particular, it is to provide a digital to analog converter which develops little noise ascribable to a gradient overload in spite of a low sampling frequency. In order to accomplish the object, the present invention reduces quantum noise due to the mitigation of bit precisions by utilizing a noise shaping technique a method by which the frequency components of quantum noise are redestributed into a high frequency region employed in an oversampling type A D converter and prevents a gradient overload from arising by altering the variation width of a feedback signal on the basis of the sum of the difference between a last sampled input signal and the feedback signal and the integrated result of such differences. The above mentioned and other features and objects of this invention will become more apparent by reference to the following description taken in conjunction with the accompanying drawings. Fig. 1 is a diagram showing the arrangement of an embodiment of an interpolative D A converter according to the present invention. Referring to the figure, the difference δ between a digital input signal x The feature of the embodiment is that the output of the arithmetic circuit or integrator circuit 1 2 is quantized by the comparator 3. Quantization levels in this case is smaller in number than those of the input x It is accordingly possible to solve the problem of a gradient overload which is involved when the sampling frequency of the input x Now, the arrangement and operation of the embodiment in Fig. 1 will be described more in detail. The operation of the embodiment will be explained assuming for the sake of brevity that the input signal x Fig. 2 shows the practicable arrangement of the interpolative D A converter in Fig. 1, in which a single adder 1 is used in time sharing fashion as adders constituting the arithmetic circuits 1 1 to 1 4 in Fig. 1. The timing chart of timing signals ₁ ₄ and ψ₁, ψ₂ for use in the embodiment of Fig. 2 is shown in Fig. 3. The signals ₁ ₄ are obtained by dividing clock pulses of 512 kHz in four, and those ψ₁ and ψ₂ are clock pulses of 512 kHz not overlapping each other. In Fig. 2, each of selectors 6 1 to 6 3 is constructed of 16 bits, and it is so operated that when the timing signal applied to a terminal S is logic level 1 , an input to a terminal B is selected and is delivered to a terminal Y, whereas when the timing signal is logic level 0 , an input to a terminal A is selected and is delivered to the terminal Y. In addition, each of the register 2 1 and a register 2 3 is constructed of 16 bits, and the register 2 2 is constructed of 9 bits. These registers all have their outputs changed by the trailing edges of the clock pulses ₁ ₄ and hold the output statuses. While the registers 2 1 and 2 2 correspond to those in Fig. 1, the register 2 3 serves for making it possible to use the adder 1 in time sharing fashion. The operation of the present embodiment will now be explained. Here, the signal format of internal calculations is based on two s complements. First, at the timing ₁, the difference δ x At the timing ₂, the selectors 6 2 and 6 3 select the inputs of their terminals A. Therefore, the terminal A of the adder 1 is supplied with the output of the register 2 3, and the terminal B thereof is supplied with the output of the register 2 1, namely, the integral value of the differences δ up to the last sampled input x The added value ε δ thus obtained is stored in the register 2 1 again. As a result, the integral of the differences up to the input sample x Subsequently, the value of the register 2 3 is decided by the comparator 3 as shown in Fig. 4, and a coefficient for updating the feedback signal q Fig. 4 shows an example of arrangement of the comparator 3. Though the input ε δ is a signal of 16 bits, the least bits D₉ D₁₅ are discarded because the comparison operation is, in other words, a quantization operation. As a result, in terms of a decimal number with a decimal point assumed at the ninth bit, a plus value which is at least 0 and less than 1 becomes 0, and a plus value which is at least 1 and less than 2 becomes 1. Besides, minus values are respectively rounded in the directions of increasing absolute values. Next, all the bits D₀ D₈ are inverted in order to simplify the calculation of the difference δ as stated before, and a carry C To sum up the above operations, the output of the comparator 3 is such that the absolute value of ε δ is taken and is rounded up, whereupon the sign is inverted. The output of the integrating arithmetic circuit 1 4 in Fig. 1 under the state under which the input signal is of a low frequency and the feedback signal is following it up favorably, changes only at the LSB at the utmost. Therefore, the absolute value of ε δ is not greater than 1. With the operations, even when the input signal has become of a comparatively high frequency and the follow up property of the feedback signal has worsened to bring ε δ into N times, the output of the comparator 3 becomes N times to permit a quick follow up response. Fig. 5 is a truth table showing the above operations of the comparator. Subsequently, at the timing ₄, the selector 6 1 selects the input of the terminal A, and the selectors 6 2 and 6 3 select the inputs of the terminals B. Therefore, the adder 1 adds the output of the comparator 3 and the content of the register 2 2 and stores the sum in the register 2 2 again. Owing to this operation, the integral calculation of the arithmetic circuit 1 4 in Fig. 1 has been executed. Fig. 6 shows an example arrangement of the D A converter 4 illustrated in Figs. 1 and 2. First, the signal in the two s complement format is converted into a signal having a sign and an absolute value. As a method for the conversion, it is common to take the exclusive OR between all the bits Q₁ Q₈ except the sign bit Q₀ and the sign and to add 1 when the result is minus. However, in order to simplify the circuit arrangement, the operation of adding 1 for the minus sum is replaced here with a measure in which a plus offset voltage corresponding to ½LSB is applied to the D A converter for the plus sum and a minus offset voltage corresponding to ½LSB is applied thereto for the minus sum as will be described later. The D A converter of the present embodiment is constructed of the charge redistribution type which employs the combination of capacitors and resistors C arrays 11 1 to 11 6 and R strings 12 1, ..., 12 9 . Among them, the capacitances of the C arrays correspond to the upper 5 bits Q₁ Q₅ of the input signal bits Q Now, the operation of the D A converter will be explained concerning a case where a sign signal is plus. At the timing ψ₁ in Fig. 3, the upper and lower electrodes of all the C arrays are simultaneously grounded through switches 15 1, 15 3, 15 5, ... and 15 13 by selectors 14 1 and 14 2, to discharge charges in all the capacitors C. Subsequently, after the integral calculation 1 4 in Figs. 1 and 2 has ended, the upper electrodes of the capacitors are rendered free potentials at the timing ψ₄, while at the same time the lower electrodes of the capacitors corresponding to the bits becoming 1 among the bits Q₁ Q₅ are rendered the reference voltage V On the other hand, in case of a minus sign, at the timing ψ₁, the upper electrodes of the capacitors are grounded, and the lower electrodes of the capacitors corresponding to the bits becoming 1 among the bits q₁ q₈ are connected to the reference voltage V Owing to the above operations, the plus and minus D A conversions can be performed with only one reference voltage. The output signal of the D A conversion is delivered as a D A conversion waveform smoothed through a sample and hold circuit and a filter circuit which are exemplified in Fig. 7. Shown in Fig. 8 is the signal 1 kHz to noise 0 4 kHz power ratio characteristic of an interpolative D A converter fabricated in conformity with the system and arrangement according to the present invention thus far described. As described above in detail, according to the present invention, a favorable D A conversion characteristic is attained even when signals are sampled at a frequency of or below ¼ of that in the prior art. Therefore, the characteristics of analog circuit elements can be sharply mitigated. In particular, a D A converter circuit which can be integrated on an identical chip with a logic LSI for digital signal processing, or the like can be realized with ease.