# FIRE SENSOR APPARATUS

## Claims
Ein Brandmeldegerät mit einem physikalische Größen messenden Sensor 1, 3 zur Umwandlung der mit einem Brand in Verbindung stehenden physikalischen Größe wie Rauch, Hitze oder Licht in digitale elektrische Signale, Mitteln 6, 7, 8, 9 zur Speicherung der gemessenen physikalischen Größen und Mitteln 7, 9 zur Gewinnung akkumulierter Vergangenheitswerte aus den gemessenen physikalischen Größen, einem Mittel 8 zur Festsetzung einer Sollempfindlichkeit zu dem jeweiligen Zeitpunkt auf der Grundlage der akkumulierten Vergangenheitswerte, einem Mittel S4 zum Vergleich eines aus der festgesetzten Sollempfindlichkeit abgeleiteten Referenzwertes mit den augenblicklich eingelesenen physikalischen Größen und einem Mittel 10 zur Ausgabe eines Brandalarmsignals in Abhängigkeit von den Ergebnissen dieses Vergleichs, dadurch gekennzeichnet, daß die Sollempfindlichkeit als Standardwert als ein Brandunterscheidungsniveau gesetzt ist, wenn keine gemessenen physikalischen Größen von Phänomenen, die einem Brandphänomen ähnlich sind Rauschanteile , vorhanden sind, und andererseits als ein Branddetektionsniveau gesetzt ist, wenn bekannte Rauschanteile vorhanden sind, wobei ein Mittelwert des Rauschanteils in getrennten Zeitabschnitten oder in getrennten Zeitabschnitten der Wochentage auf der Grundlage der akkumulierten Vergangenheitsdaten erhalten wird und der Referenzwert zur Erkennung eines Brandes in solchen Zeitabschnitten durch Addition des Mittelwertes des Rauschanteils zu dem Standardwert erzeugt wird.

## Description
The present invention relates to a fire sensing apparatus as defined in the preambel of claim 1. Environmental conditions at the side of installing a fire sensing means is different according to time period, day of the week or the seasons. In considering this matter in terms of a normal room of an office, where in contrast to the daytime where people are going in and out causing dust to float in the room, at night there is little dust floating in the room because there is no one in the room. Also, even during the same day, during these times when many people go in and out, such as opening hours, closing hours, lunch time etc. the amount of floating dust is naturally increased compared with times other than these. Further, whereas there is much floating dust in commuting areas during normal work periods from Mondays to Saturdays, the amount of floating dust is remarkably decreased on Sundays because the coming and going of people are few except at weekend resorts. If, as is conventional, a smoke type fire sensing means such as an ionization type or a light scattering type operable, for example, at 10 smoke density is installed in such a commuting area, this sensing means will operate at a smoke density of about 10 because there is little floating dust at night or on Sundays in the area, but on the contrary the fire sensing means will actually operate for a smoke density of 10 down to a few because there is so much floating dust in the daytime from Monday through Saturday that this amount of floating dust is equivalent to a few of smoke density, and therefore the smoke density for operating the fire sensing means in the daytime is different from that in the nigthtime. Moreover, when considering seasonal room temperatures, in the summer period, the room temperature is kept at about 25 C by coolers operating in the daytime, but the room temperature rises up to about 30 C when the coolers are stopped at night, and in the winter, the room temperature is kept at about 20 C by heaters operating in the daytime, but lowers to mearly 0 C when the heaters are stopped at night. In cases where a fixed temperature type fire sensing means operating at 70 C is set up in such a room, this fire sensing means will operate after an increase of room temperature of about 40 C on a summer night, but an increase of about 70 C is necessary on a winter night. Thus, regarding a conventional fire sensing means having a fixed fire detection sensitivity, because of the environmental conditions which vary according to time period, day of the week and seasons of the place of installation, its relative fire detecting sensitivity varies from time to time, and it is not able to detect a fire at a continuously constant sensitivity, and consequently, false alarms, delayed alarms or failure alarms will occur. This holds true even for fire sensing means for catching gas, light etc. which are generated besides smoke and heat in case of a fire. Moreover, there is also a conventional fire sensing means having 2 or 3 measuring levels which is used by switching said levels. In this case, however, there are very many problems such as the following. A receiver having a timer is set to a previously scheduled time period such as daytime and nighttime, and set so as to continuously keep the sensitivity by automatically switching the sensitivity with a command signal from the receiver. However, there are very many problems such as even if the sensitivity is previously set for the variation in the environment in which the fire sensing means is to be installed, the best sensitivity level is not always obtained, and when the intended use of the place of installation or the partitioning of the room is changed or when there is remarkable environmental variations such as the seasons and the like, the setting of the sensitivity level must be modified each time. Another fire sensing system described in EP A 0 036 276 consist of a central station connected with many groups of fire sensors arranged in different supervisory areas, which sensors are powered by the central station and send the sensor alarm signales to the central station. In order to control the sensitivity of all fire sensors the central station is equipped with a ROM which stores a predetermined pattern of day and night human activities in a supervisory area as a pattern of the sensor sensitivity change with time, and a program is provided to control the pattern so that the sensor can be prevented from producing a false alarm. On the part of the sensor, a sensitivity change control means is arranged to change the sensor sensitivity level in accordance with the sensitivity change command from the central station. All fire sensors receive the same sensitivity change commands and have the same sensitivity level. None of the fire sensor has an individual sensitivity level. A further disadvantage is that the sensitivity change pattern is predetermined for each supervisory area. Therefore, any alteration to the supervisory area or change of occupancy of the supervisory area if made after installation of the system is not precisely reflected upon the fire sensor sensitivity unless the ROM is replaced by another ROM including a new sensitivity pattern. Another disadvantage is that the central station becomes large in size because the sensitivity change pattern for each of the supervicory areas has to be stored in advance. The invention has the object to avoid the disadvantages of the prior art. Each of the sensors installed in the supervisory areas has a built in microcomputer to detect fire at constant sensitivity level at all times without being influenced by change in environmental conditions as caused at every moment due to air conditioning or wheather or seasons change and in consideration of day and night human activities. The sensitivity level of each sensor is for all these conditions every time optimum. This is achieved in each sensor by accumulating the data of measured physical quantities which accumulated data are renewed with the latest data. Each of the fire sensors has an individual sensitivity level of the latest date. The object of the invention is performed by the futures of the characterising portion of claim 1. Enbodiments of the invention will be described with reference of the drawings In the figures, 1 is a sensor portion, 2 is a sample hold circuit, 3 is an A D converter, 4 is a clock portion, 5 is a CPU, 6, 7 are Roms, 8,9 are RAMs, 10 is a signal generating circuit, 15, is a resistance for dividing voltage, 16 is a multiplexer, 12 is a digital comparator, 13 is a latch, RAM 1 RAM 9, ROM 1 are memories. Fig. 1 is a block diagram ilustrating the basic construction of a fire sensing means according to the present invention. In Fig. 1, the construction of the fire sensing means currently on the market can be employed, and therefore, only a sensor portion 1 of the fire sensing means and an amplifier 1 for properly amplifying its output are described in this figure. In Fig. 1, 1 is a sensor portion for producing an analog output by means of detecting phenomena of a fire such as heat, smoke, light or gas or the phenomena of a fire and temperature change or change in the amount of dust, 1 is an amplifier for properly amplifying the output from the sensor, 2 is a sample hold circuit by which the analog output as the output value of the amplifier 1 is sampled and held at predetermined time intervals, for example, every 2 seconds, 3 is an A D converter which converts said sample held analog signal to a digital signal to be read by CPU 5, 4 is a clock portion, 5 is a CPU which is the main portion of a microcomputer, 6 9 are respectively a 1st through a 4th memory, and 10 is a signal generating circuit for outputting a fire signal under control of CPU 5. Here the allocation of the four memories is explained as one embodiment. The 1st memory 6 and the 2nd memory 7 consist of ROMs. Control programs are stored in the 1st memory 6, and a fire recognition level when there is no noise component, or a temporary reference level at the starting time point, are stored in the 2nd memory as the standard value together with the time for storing the data and the time for updating the reference value. Also, the 3rd memory 8 and the 4th memory 9 consist of RAMs, and they are respectively employed as temporary storing memories. The 3rd memory 8 is employed as a memory for storing a reference value which is the fire recognizing level, and the 4th memory 9 is employed as a memory for storing the data classified by a day of the week and time, the storing locations thereof being shown in Fig. 3. Next, Fig. 2 is a flow chart for explaining the operation of Fig. 1. When a source voltage is provided to a fire sensing means through some power lines or signal and power lines from a receiver or a transmitter, the fire sensing means having a built in microcomputer starts its function. CPU 5 starts the operation according to the steps shown in Fig. 2 by means of control programs in the 1st memory 6. In the 1st step S1, CPU 5 clears the contents of the 3rd memory 8 and of the 4th memory 9, and sets the initial values of the registers and the like in CPU 5. Next, in the 2nd step S2, the standard value is read out of the 2nd memory 7, and this standard value is stored as the reference value into the 3rd memory 8 for the reference value. By means of this process, the initial reference value of the fire sensing means, namely the initial fire detecting level, is determined. Besides, in case that this fire sensing means is a smoke type one and its sensor portion 1 consists of an ionization type one or a light scattering type one, the standard value is set at 10 so that the fire sensing means determines a fire if, for example, it is a situation where there is 0 dust and 10 smoke. Moreover, in the 3rd step S3, CPU 5 reads the output data of the sensor 1, so CPU 5 sends a holding instruction to a sample hold circuit 2 for the purpose, and the sample hold circuit 2 samples and holds the output of the sensor 1 according to this holding instruction, and then the hold signal is outputted to CPU 5 after the completion of the holding operation. Next, CPU 5 outputs the converting instruction to an A D converter 3, and according to this instruction, the A D converter 3 converts the analog output signal of the sensor portion 1 being held in the sample hold circuit 2 to a digital signal, and then the conversion completion signal is outputted to CPU 5 after the completion of the converting operation. According to the application of the conversion completion signal, CPU 5 reads the output data of the sensor portion 1 being converted to the digital signal from the A D converter 3. Furthermore, in the 4th step S4, CPU reads the reference value from the 3rd memory 8, and compares this reference value with the output data previously read in said 3rd step S3 to determine whether a fire has occurred or not. In case the data is the reference value, the step shifts to the 5th step S5 in a fire condition, and in case of data is the reference value, the step shifts to the 6th step S6 by determining that it is a normal condition. Thus, in case of shifting to the 5th step, CPU 5 outputs the fire signal transmitting instruction to a signal generating circuit 10, and the signal generating circuit 10 outputs the fire signal to a receiver, a transmitter and so on. Also, when shifting to the 6th step S6, CPU 5 reads the day of the week, time and so on from a clock portion 4 to determine whether or not that time matches the data storing time stored in the 2nd memory 7. If by chance that time matches, in the 7th step S7, CPU 5 stores the output data of the sensor portion 1 read in the 3rd step S3 into a predetermined location of the 4th memory 9 according to the data of the day of the week and time read in the 6th step S6. Fig. 3 shows an example of storing in the 4th memory 9, which is made up so that the data for 4 weeks can be stored every 2 hours of each day of the week. If the current time is 3 o clock on a Monday, the data of the sensor portion 1 is stored into the 1st week zone of the Monday, 3 o clock region. At this time, if this storing region is entirely filled up from the 1st week zone to the 4th week zone, the data in the 4th week zone is cleared, and all the data in the 1st week zone through the 3rd week zone is shifted by one week zone, and then the latest data is stored into the 1st week zone. The updating of the data is carried out by this process. Continuously, in the 8th step S8, CPU 5 reads the day of the week and time from the clock portion 4, and distinguishes whether that time has reached the time for updating the reference value stored in the 2nd memory 7. The times for updating the reference value, for example, the even numbered hours every 2 hours, are stored in the 2nd memory 7. Namely, switching of the sensitivity is carried out at the even numbered time so that computing is performed on the basis of the data at 1 o clock during the interval of 0 2 o clock and on the basis of the data at 3 o clock during the interval of 2 4 o clock. Consequently, when the time for updating the reference value arrives, CPU 5 reads from the 4th memory 9 the accumulated data in the past corresponding to the data of the week and time read in the 8th step S8, and computes the latest reference value. For example, if it is 4 o clock on Monday, the data of the past 4 weeks is read out of the 5 o clock, Monday memory region in the 4th memory 9, and then the average value during the 4 weeks is computed according to the 4 weeks of data read out. This average value can be obtained, if necessary, by means of a simple average or a weighted average, and this computed result becomes the average value of the noise component during 4 weeks in the past. Next, the standard value is read out of the 2nd memory 7, and the reference value for distinguishing fire in the corresponding time period can be obtained by adding the average value to this standard value. Finally, in the 10th step S10, the CPU 5 stores the previously described reference value obtained in the former 9th step S9 into the 3rd memory 8 as the latest reference value, and returns to the former 3rd step. The operation is performed by means of such a loop as described above. Moreover, if the power supply from the power line or the signal power line is interrupted, CPU 5 stops its operation, and consequently the function of the fire sensing means is stopped. In the description above, although the reference value to be initially stored into the 3rd memory 8 was set to be the standard value for example, 10 which is the fire sensing level when the noise component is zero, it is also able to determine the initial set value comprizing the noise component being expected beforehand for example, 12 that differs from the standard value, and then this initial set value may also be made to be stored into the 3rd memory 8. Also, in case the sensor portion 1 is a temperature sensor, for example, 70 C can be selected as the initial set value and 50 C as the standard value. Furthermore, the time for storing the data can be made to be the same time as that for updating the reference value. Moreover, as the average value, besides a simple average or a weighted average, an average may be obtained by excluding the maximum and minimum data from the accumulated data for the average value and the average may also be obtained by adding the simple average value or the weighted average value to a value α times the difference between the maximum value and the minimum value constant α 0 . Next, Fig. 4 is the constructional diagram of another embodiment, and the portions corresponding to those of Fig. 1 are shown with the same signs. In this case, when the power source is turned on, the operation of the fire sensing means is started by the control program stored in ROM 1 and the set sensitivity for the fire sensing means is stored into a RAM. Namely, since the upper limit set value, the initial reference set value and the lower limit set value are produced by the divided voltage of resistance 15, CPU 5 serially switches the inputs to the multiplexer 16, and these analog signals are respectively converted to digital signals by means of the A D converter 3, and then they are respectively stored into RAM 1, RAM 2 and RAM 3. Also, the memory content of RAM 8 storing the accumulated data is entirely cleared, and also the memory contents of RAM 4, RAM 5 and RAM 6 respectively storing the maximum value, the minimum value and the average value are cleared. Upon the completion of the setting and clearing of these memories, the sensing means starts to read the output from the sensor portion 1 at the predetermined intervals. To continue the description further, the output from the sensor portion 1 is amplified through an amplifier, and the output value is held by the sample and hold circuit 2. This output is converted from an analog signal to a digital signal through the multiplexer 16 which switches the set values described before. The conversion being completed, a conversion completion signal is sent to CPU 5. CPU 5 receives the digital signal from the A D converter 3 as the data, and inputs the data to the temporary holding memory RAM 9. Still more, in this case, it is assumed that CPU 5 employs 10 memories including 9 RAMs, RAM 1 RAM 9, and 1 ROM 1. CPU 5 reads the current time and the day of the week from the clock portion 4, and reads the data, as data 8, at the address corresponding to the current time and the day of the week of the memory RAM 8 for the accumulated data. If there is no accumulated data in the data 8, the initial reference set value is sent to the digital comparator 12 as the signal from RAM 2. In case that there is accumulated data in the data 8, the uppper limit value and the lower limit value of the operation level are respectively read out of RAM 1 and RAM 3 as data 1 and data 3. And also, the maximum value and the minimum value of the environmental noise level are respectively read from RAM 4 and RAM 5 as data 4 and data 5. And in case of data 4 data 5, the initial reference set value is sent as the signal to the digital comparator 12 from RAM 2. On the other hand, in case data 4 data 5, at first, the ratio between the permissible range of the operating level determined by the upper limit value data 1 and the lower limit value data 3 of the operating level, and the maximum noise level based on the maximum value data 4 and the minimum value data 5 of the accumulated environmental noise is computed by means of Then, CPU 5 provides the data 11 to the digital comparator 12 as the signal. On the other hand, since the output of the A D converter 3 is latched and also held to be constant during the processing time by CPU 5, the digital comparator 12 compares the sizes of numbers at this time. In case that the data of the A D converter 3 is larger than the data 11 which is the computed output of CPU 5, the output of the digital comparator 12 shifts from the level H to the level L, thereby the latch circuit 13 operates to hold the level L. Still more, the latch circuit 13 may be considered to be a switching circuit, and the buzzer 14 to be a receiver, and in this case, the buzzer 14 is sounded to tell of an abnormal condition. Since the output of the digital comparator 12 varied from level H to level L, CPU 5 determines that the operating level is exceeded, the data averaging and the data accumulating are not processed, but the data reading from the sensor portion 1 continues. When the reset switch RSW is turned on, the latch circuit 13 is reset to release the latching operation. Still more, if the output of the A D converter 3 becomes less than the sensitivity level, the output of the digital comparator 12 returns to level H, so CPU 5 commences the conventional processing in the memory. When the digital comparator 12 does not change remaining in the H level, CPU 5 determines that the operating level has not been attained, and the data in RAM 9 storing the current data is applied to the averaging memory RAM 7, CPU 5 determines whether or not it is time to totalize the data in the time period according to the data from the clock portion 4, and if it is the totalizing time, data 7 is produced by averaging the data in RAM 7, the data then being read out at the predetermined address of RAM 2 in which the past accumulated data corresponding to the time and the day of the week of the current time point has been entered. And then, these data 8 and data 7 are averaged at a certain weighted ratio, for example at the ratio of 1 2, and this result is stored into the corresponding address of RAM 8 as the latest accumulated data only when that said result does not exceed the lower limit value stored in RAM 3. If it does exceed, the data of RAM 3 is stored. Then, after the examination of all the data in RAM 8, the maximum value and the minimum value are respectively stored into RAM 4 and RAM 5. Still further, the control programs, the initial set value, the data totalizing times and so on are stored into ROM 1. In this way, as time passes, since the contents of the accumulated past data are changed, and the maximum value and the minimum value of the environmental noise are varied, the sensitivity level can be appropriately modified for each day of the week and each time period in response to the environment in which the sensing means is installed. Further, Fig. 5 shows the memory map for CPU 5 in Fig. 4. Also, Fig. 6 is the main flowchart of the employed software, Figs. 7a 7g are flowcharts of the subroutines Fig. 7a is an example of an initial setting program, Fig. 7b is an example of a sensor input reading program, Fig. 7c is an example of a time reading program, Fig. 7d is an example of a fire operating program, Fig. 7e is an example of a fire restoring program, Fig. 7f is an example of a program for computing the set sensitivity, Fig. 7g is an example of a program for updating the accumulated past data. Finally, Fig. 8 shows examples of the set level with the passage of time where Fig. a shows the case of a conventional sensing means, and Fig. b shows the case of the embodiment in Fig. 4. From the description above, by means of the fire sensing means according to the present invention, the set sensitivity at the current time is determined on the basis of the stored accumulated past data of the environmental noise where the fire sensing means is installed, and therefore, when the environmental noise varies according to time, the sensitivity is made to be dull if the noise level is high and the sensitivity is made to be high if the noise level is low, so that its own sensitivity is outomatically regulated, and therefore the appropriate fire detection sensitivity can always be maintained by eliminating the influences of the seasons, the surrounding temperature and so on.