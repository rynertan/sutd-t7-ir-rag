# SYSTEM FOR CONTROLLING THE SPEED OF A SERVO MOTOR

## Claims
Servomotor Geschwindigkeitsregelungssystem für einen eine mechanische Last antreibenden Servomotor 5 umfassend

## Description
This invention relates to a system for controlling the velocity of a servomotor used for example, but not necessarily, in a machine tool, an industrial robot and the like. When subjecting the velocity of a servomotor to feedback control, it is necessary to sense the actual velocity of the motor. An example of conventional means for sensing actual velocity is a rotary encoder for sensing position. The rotary encoder is adapted to generate from several thousand to 20,000 pulses per revolution of the motor, the frequency of these output pulses being proportional to the rotational velocity of the motor. With a rotary encoder, however, the spacing between adjacent pulses becomes very wide and the pulses become discrete in nature, especially when the motor rotates at a low velocity. When these pulses are used as motor rotation information, irregular rotation is the result. Thus, when it is attempted to employ a rotary encoder used for sensing position as means for sensing velocity, velocity resolution is poor in comparison with an analog sensor. For this reason, highly precise, smooth velocity control cannot be carried out. In addition to the known servomotor velocity control systems employing a rotary encoder to sense actual velocity, there are also known servomotor velocity control systems employing an estimating unit in the form of an observer. Such systems are disclosed for example in the journal Regelungstechnik, vol. 26, no. 11, Nov. 1978, page 350, Fig. 2, and also in DE A 2 802 224. A document which discloses the use of both a rotary encoder and an observer is Denki Gakkai Kenkyukai Shiryo IP 82 36, pp 21 28, published on 8th October 1982 wherein is disclosed a servomotor velocity control system provided with an observer estimating the velocity on the basis of the voltage of the motor and the position information of a rotary encoder. According to the present invention, there is provided a servomotor velocity control system for a servomotor driving a mechanical load, comprising arithmetic means for calculating a torque command signal for application to the servomotor in dependence upon a velocity command signal and a fed back velocity value, the torque command signal being influenced by the output signal of an estimating unit coupled with the servomotor, wherein a rotary encoder is mounted on the servomotor for delivering position information, and the estimating unit estimates said velocity value, as its output signal, based on position information from the rotary encoder, motor current of the servomotor, and a current indicating load torque, which current is calculated by the estimating unit. The present invention provides a servomotor velocity control system, in which when velocity is estimated by an estimating unit based on position information from a rotary encoder mounted on a servomotor, load torque, which is a cause of a steady state estimating error, is estimated at the same time to enable smooth, highly precise velocity control. The servomotor velocity control system of the invention obtains the estimated value of velocity upon taking load torque, which is a cause of a steady state estimating error, into account. This eliminates or reduces the shortcoming of the prior art employing a rotary encoder alone for velocity measurement, wherein the pulses from the rotary encoder become discrete when the servomotor is rotating at low velocity. The present invention makes it possible to obtain a suitably interpolated value of estimated velocity and to control velocity in a highly accurate manner. Fig. 1 is a block diagram of a velocity control system according to the invention, Fig. 2 a is a view for describing a motor current loop processing level, Fig. 2 b is a view for describing a velocity processing level, Fig. 3 is a flowchart illustrating observer processing at a motor current loop level, and Fig. 4 is a flowchart illustrating velocity loop processing. The present invention will now be described in detail based on an embodiment illustrated in the drawings. Fig. 1 is a block diagram of a velocity control system according to the present invention. Numerals 1 through 3 denote arithmetic units, 4 an estimating unit, namely an observer, and 5 a servomotor. V The operation of the velocity control system according to the invention will now be described. First, the arithmetic unit 1 produces an output indicative of the difference between the velocity command Vc and an estimated value V and of velocity, described below. The output signal is integrated and then applied to the arithmetic unit 2. The result of multiplying the estimated value V of velocity, described below, by the feedback gain k₂ is applied to the arithmetic unit 2, which outputs the difference between its two input signals as the torque command U, by which the motor 5 is controlled. The velocity of the motor 5 is outputted as V, and position ϑ is sensed by a rotary encoder. The information indicative of the position ϑ includes the results of adding the current I In the present invention, the estimated value of velocity is obtained by using the estimating unit, namely the observer 4. At this time the load torque, which is a cause of a steady state estimating error, is estimated simultaneously. Specifically, the position information ϑ, which takes into account the motor current I and the current I Let us describe this point in detail. If an identity observer is constructed for the motor current I, motor velocity V, position ϑ and current I What are actually sensed and applied to the estimating unit, namely the observer 4, are the motor current I and position ϑ. An identity observer for digital processing is as follows where T is a sampling period and λ₁, λ₂, λ₃ are observer poles, which are decided by the number of convergence steps necessary. In order to process the above by a microprocessor, the observer is implemented by the following algorithm Fig. 2 is a view useful in describing information processing for obtaining the predicted velocity V and. Fig. 2 a is for describing the processing level j of a motor current loop, and Fig. 2 b is for describing a velocity processing level. The observer 4 is equipped with a hardware counter for integrating a number of pulses Fig. 3 illustrates a flowchart of processing performed by the observer at the motor current loop processing level. Fig. 4 illustrates a flowchart of velocity loop processing. First, with regard to the motor current loop, the observer 4 reads in position information Next, in velocity loop processing as indicated by the flowchart of Fig. 4, the observer 4 first reads in velocity commands V Thus, according to the present embodiment, the estimating unit 4 obtains the estimated value V and of velocity based on the position signal from the rotary encoder, which signal is inclusive of the current I Though the present invention has been described based on the illustrated embodiment, the invention is not limited solely to the embodiment but can be modified in various ways in accordance with the scope of the claims. As set forth above, the present invention makes possible highly precise velocity control even at a low servomotor velocity. The invention is particularly well suited to velocity control of servomotors for operating a machine tool bed or industrial robot, which require to be controlled in a precise manner.