# DIGITAL SIGNAL TRANSMITTING SYSTEM

## Claims
Übertragungssystem für digitale Signale, das aus Wörtern zusammengesetzte Rahmen überträgt, wobei jedes Wort zumindest aus Synchronisiersignalen, Servicebitsignalen und Informationssignalen zusammen mit Fehlerprüfkodes zusammengesetzt ist, mit folgenden Baugruppen

## Description
The following concerns a transmitting system and a receiving system for digital signals. Such systems are used, for example, in wire or cable television systems having many television receivers as terminals. A transmission system using a cable television network is described by Y. Kojima et al. in IEEE Transactions on Consumer Electronics, Vol. CE 30, No. 3, August 1984, pages 462 466 under the title A New Digital Audio and Data Transmission System Using the CATV Network . The system is arranged to transmit frames of a composite digital signal including frame synchronizing signals, service bit signals and information signals. Each frame designated as super frame in the mentioned article has 256 words designated as frames in the mentioned article , each word comprising 8 synchronizing bits, 4 service bits and 156 data bits, i.e. a sum of 168 bits. The related digital signal receiving system is arranged to receive such frames. DE A 31 26 880 describes a digital signal transmitting system, especially for satellite broadcast, which is arranged to transmit words designated as main frames Hauptrahmen of 320 bits each, and each comprising a synchronizing signal, service bit signals and information signals. The service bits of a predetermined number of words are collected to build a unit of service bits which is called a subframe. This unity has the same structure as a word main frame . All subframes have the same structure. It is an object of the present inventions to provide a transmitting system and a receiving system for digital signal, said systems having a high flexibility concerning the purposes to be performed by the service bit signals. The digital transmitting system according to the present invention is arranged to provide service bit signals in one of a plurality of predetermined service bit formats within each frame. The digital signal receiveing system of the present invention is arranged to evaluate different predetermined service bit formats which are received in unities of a frame. By providing different formats of service bit signals, each format extending over one frame of the composite digital signal, it is possible to change the service bit information with each frame. One of a plurality of new features of such systems is that it is possible to address a large number of terminals, for example one million terminals, at high speed. Additionally it is possible to transmit a descrambling key code to each terminal together with the address number of that terminal. Informations concerning a terminal number, a group number and a tier level can be transmitted independently from each other. It is of special advantage to transmit a unique service bit format each frame, said format indicating a terminal number, a group number and or a tier level. Other formats may define details of information related to these values. When transmitting a scrambled key format, it is possible to change the scrambling key code in short intervals if desired, and to inform each terminal on the changed code. The above, and other objects, features and advantages of the present invention, will become apparent from the following detailed description taken in conjunction with the attached drawings. Referring to the drawings in detail, the signal or data format used in accordance with this invention will be first described with reference to Figs. 1 to 6. As shown in Figs. 1A and 1B, in such data format, each word is formed of 168 bits and comprises a word synchronizing signal Word Sync , for example, of 8 bits, a service bit signal portion SB formed of 4 bits SB₁ to SB₄, a data portion DATA of 128 bits providing 4 channels of data with each channel being formed of 32 bits , and an error check code ECC of 28 bits with the error check code for each of the 4 channels being formed of 7 bits . As shown in Fig. 1B, in the data portion of 128 bits and the error check code ECC of each word, the data DATA and error check code ECC of each channel are respectively re arranged at every bit, that is, the data and error check codes for the several channels are subjected to so called bit interleaving processing. Fig. 2 shows that, in a data format of a frame of a digital signal used in accordance with this invention, each frame is formed of 256 words, with each word having the data format shown in Figs. 1A and 1B. As shown more particularly in Fig. 2, in each frame, the first word is formed of a frame sync signal Frame Sync , service bits SB, data DATA and an error check code ECC, and the second word is formed of a word sync signal Word Sync 1 , service bits SB, data and an error check code ECC. In like manner, a third word is formed of a word sync signal Word Sync 2 , service bits SB, data and an error check code ECC. Similarly, the last or 256th word is formed of a word sync signal Word Sync 255 , service bits SB, data DATA and an error check code ECC. In this connection, the service bits portion of 4 bits assigned to each word aggregates 1024 bits per frame. In other words, there are 256 of each of the service bits SB₁ to SB₄ in each frame. Therefore, in accordance with this invention, there are 256 of each of the service bits SB₁ to SB₄ available to transmit control data for each television receiver or terminal unit, as will be further described later. Five kinds of frame formats in which the service bits SB are used to transmit control data are shown in Figs. 3A to 3E. More particularly, a unique service format USF is shown in Fig. 3A, a group service format GSF is shown in Fig. 3B, a channel service format CSF is shown in Fig. 3C, an all service format ASF is shown in Fig. 3D, and a scrambling key code format SKF is sown in Fig. 3E. In each of Figs. 3A to 3E, the legend Header refers to a portion of the format which identifies the kind of the respective format and, in each of Figs. 3A,3B,3D and 3E, the legend Command refers to the portion of the format by which a television receiver is commanded to operate. In Figs. 3A and 3B, the legend Group No. refers to the number of a group of receivers having a common characteristic, such as, the area in which the television receivers are situated, or the occupations of the subscribers, or the like. In Fig. 3A, the legend Terminal No. refers to the address number assigned to a particular television receiver. In Figs. 3A and 3C, the legend Tier Level refers to the condition of the contract for the respective subscriber or television receiver. For example, if the Tier Level of the contract is below a predetermined level, the television receiver covered by such contract will be able to receive a broadcast or transmitted signal which is being transmitted on a data channel, such as, a music broadcasting channel, identified in the portion of the format indicated by the legend Channel No. on Fig. 3C. Finally, in Fig. 3E, the legend Scramble Key Code identifies a portion of the respective format in which will appear scramble key data, for example, data representing an initial value of an M sequence code used for descrambling data, as hereinafter described. Of course, in each of Figs. 3A to 3E, the legend ECC designates an error check code. The Command indicated on Figs. 3A, 3B,3D and 3E, may be any one of the commands shown on Fig. 4, that is, a command Emergency , to start emergency broadcasting a command Announce , to announce broadcasting, a command FAX to start facsimile reception , or a command DATA to start the loading of data . As indicated on Fig. 5, during the first or an odd numbered frame, the formats ASF Fig. 3D , GSF Fig. 3B , CSF Fig. 3C and SKF Fig. 3E are delivered alternately, while, during the second or even numbered frame, the format USF Fig. 3A is delivered alone. The manner in which the unique service format USF of Fig. 3A is assigned to each television receiver in a memory is illustrated in Figs. 6A to 6D. Thus, for example, when the Terminal No. identifying a television receiver is expressed as 00 in the lower or two least significant bits of a binary code expression, the unique service format of Fig. 6A is assigned to that receiver in the memory for transmission on a service bit SB₁. Similarly, when the Terminal No. is expressed as 01 , the unique service format shown in Fig. 6B is assigned to the respective receiver in the memory for transmission on a service bit SB₂ when the Terminal No. is 10 , the unique service format shown in Fig. 6C is assigned to the memory for transmission on service bit SB₃ and, when the Terminal No. is 11 , the unique service format shown in Fig. 6D is assigned to the memory for transmission on service bit SB₄. It is of course to be noted that the four unique service formats USF illustrated on Figs. 6A to 6D, respectively, are different in their contents with the exception of the headers thereof which merely identify the formats as being of the USF type. In each of Figs. 6A to 6D, the reference letter N indicates an address in the memory, and the reference letter L indicates the length of the respective unique service format. The manner in which control data for controlling a receiver are added to the service bits will be described separately for the transmitter and the receiver. As will be further described later, at the transmitter, there are provided five memories, for example, memories 17 On the other hand, at the receiver side, only that one of the service bits SB₁ to SB₄ corresponding to the address number Terminal No. of the receiver is input thereto. More particularly, when the lower 2 bits of the address number of the receiver are 00 , only the service bit SB₁ is input thereto. Similarly, when the lower 2 bits of the address are 01 , only the service bit SB₂ is input, when they are 10 , only the service bit SB₃ is input and when they are 11 , only the service bit SB₄ is input to the reciever. Such service bit corresponding to the address number of the receiver is input thereto within one frame period in synchronism with the frame sync signal. At such time, since the service bit is transmitted in the serial format, the sampling of data and the error checking of data can easily be carried out by utilizing the serial port of a microcomputer or microprocessor constituting a controller at the receiver side. Of the service bits sampled in the one frame period, the data portion, with the exception of the start bit and stop bit, is produced and its data format is as shown in the respective one of Figs. 3A to 3E. In other words, the data sampled in a frame period will be in accordance with one of the formats shown in Figs. 3A to 3E. As earlier noted with reference to Fig. 5, the unique service format USF and the other service formats GSF,CSF,ASF and SKF are alternately transmitted and these formats are discriminated from one another by the header that is inserted in the start portion of each format. Next, a description will be given of the signal processing that is carried out when each format is received. In the case when the unique service format USF shown in Fig. 3A is received, a receiver having an address number coincident with that specified by the Terminal No. of the format USF memorizes the group number specified by the Group No. and the level specified by the Tier Level and executes the processing specified by the Command . When the group service format GSF shown in Fig. 3B is received, all receivers belonging to the specified Group No. carry out the signal processing specified by the Command . In other words, the receivers in which there has been stored the group number specified by the unique service format USF and which is coincident with the group number specified by the group service format GSF carry out the signal processing specified by the Command . When the channel service format CSF is received, the tier level of the data channel music broadcasting and so on to be transmitted by the system embodying this invention is specified in all the receivers. Service for the user is commenced only when the tier level of the channel selected by the user coincides with the tier level specified by the unique service format USF and which has been stored therein. In the case of the all service format ASF , the processing corresponding to the specified command is carried out regardless of the Terminal No. In the case of the scramble key format SKF , the data is descrambled by the specified scramble key code. It is to be noted that the above described scramble key format SKF may be transmitted as a part of the all service format ASF . Referring now to Fig. 7A, it will be seen that, in the transmitting side of a system according to the invention, analog information or data, for example, constituting a stereo music signal, is supplied to input terminals 1 and 2. Analog information or data comprised of broadcast communications and announcements is supplied to input terminals 3 and 4. Facsimile information or data is supplied to an input terminal 5, and digital information or data, such as, that constituting game software and the like, is supplied to an input terminal 6. The analog data from input terminals 1 to 4 are supplied to, and converted to digital signals by, analog to digital converters hereinafter simply A D converters 7 to 10, respectively. The respective digital signals are applied to a multiplexer 12, while the facsimile signal from input terminal 5 is also supplied through a facsimile interface circuit 11 to multiplexer 12. The digital data from input terminal 6 is supplied as is to multiplexer 12. In multiplexer 12, the input signals are distributed into respective individual channels and subjected to signal processings, such as, the addition of error check codes, bit interleaving and so on and then delivered therefrom. The output signal from multiplexer 12 is supplied to one input terminal of a multiplier 13 and therein multiplied with an M sequence code signal supplied to another input terminal of multiplier 13 from an M sequence code oscillator 14. Thus, the output signal from multiplexer 12 is scrambled. If More specifically, during a period in which the frame synchronizing pulse is supplied from terminal LP to load terminal L of shift register 14 The output pulse of seven cycles, such as, 1110100 , produced from the M sequence code oscillator 14 is multiplied with the output of multiplexer 12 so that the multiplier 13 produces data scrambled by the M sequence code. The data and error check code thus scrambled is supplied to a sync SB service bit generator 15 in which the synchronizing signal and the service bits are added to the scrambled data and error check code. At this time, under the control of a controller 16 which may be a microcomputer or microprocessor, outputs from memories 17 The output signal from generator 15, that is, the signal having the synchronizing signal and the service bits inserted into the data, is supplied through a binary transversal filter 20 to an amplitude A M modulator 21. The filter 20 is used as an equalizer for matching the frequency characteristics of the whole transmitting receiving system, thereby to remove inter symbol interference. In A M modulator 21, the carrier from an oscillator 22 is modulated by the output signal from filter 20. Accordingly, modulator 21 produces, at its output, an intermediate frequency signal and this signal is supplied through a vestigial side band filter 23 to a mixing circuit 24. In mixing circuit 24, the intermediate frequency signal is mixed with the local oscillation frequency signal from a local oscillating circuit 25 and is thereby frequency converted. Thus, there is produced, at the output side of mixing circuit 24, a signal indicative of a difference between the local oscillation signal and the intermediate frequency signal. The local oscillation frequency of local oscillating circuit 25 is set higher than a transmitting frequency of a desired channel by the value of the intermediate frequency. Accordingly, the transmission channel is determined by selected the local oscillation frequency. The output signal from mixing circuit 24 is delivered through a band pass filter 26 to an output terminal 27 and the signal developed at the output terminal 27 is transmitted to a so called head end not shown of the cable or CATV system. The signal from the head end is transmitted through a CATV transmission line not shown to the receiving side. As shown on Fig. 8, the signal transmitted through the CATV transmission line is supplied through an input terminal 31 at the receiving side to a front end 32 in which it is amplified and then converted to an intermediate frequency signal of a predetermined frequency. This intermediate frequency signal is supplied to an AM detector, for example, a PLL phase locked loop detector 33, which then demodulates a base band signal. Although the detector may be of the type of Am detector that is normally used in a standard television system, it is preferable to use the mentioned PLL detector 33 in order to avoid any waveform distortion. A part of the output signal from PLL detector 33 is supplied to an AGC automatic gain control circuit 34 which applies an automatic gain control signal to front end 32. The output from the PLL detector 33 is supplied to a data recovery circuit 35 in which, on the basis of a clock signal reproduced from the output of the PLL detector 33 by a clock recovery circuit 36, the level of the input signal to circuit 35 is discriminated by the center level of an eye pattern to thereby produce digital data. The data thus produced or recovered in circuit 35 is supplied to a succeeding sync SB separator 37 in which the synchronizing signal and the service bits are separated from the data and supplied to a controller 38. The controller 38 which is desirably a microprocessor or microcomputer is adapted to carry out various control operations in synchronism with the synchronizing signal and the control data added to the service bit is stored through the controller 38 in a memory 39. The data output from the sync SB separator 37 is supplied to one input terminal of a multiplier 40 and multiplied in the latter by an M sequence code signal supplied to the other input terminal of multiplier 40 from an M sequence code oscillator 41 which may be similar to M sequence code oscillator 14 of Fig. 7B. By reason of the foregoing, the data is descrambled and delivered from multiplier 40. In M sequence code oscillator 41, by changing the initial value of the M sequence code under the control of controller 38, such initial value is set in frame synchronism with the transmitter side. The data from multiplier 40 is supplied to a de multiplexer 42 in which it is subjected to signal processing, such as, rearrangement of data bit deinterleaving , error correction and so on. The digital signals from de multiplexer 42 are supplied through switches 43 and 44 to digital to analog D A converters 45 and 46, respectively, in which they are converted from digital to analog signals and then delivered to output terminals 47 and 48, respectively. When switch 43 is changed over from its fixed contact On the other hand, if a facsimile signal is obtained from de multiplexer 42, such facsimile signal is delivered through a facsimile interface circuit 49 to an output terminal 50. Similarly, digital data, such as game software and so on, is directly delivered from de multiplexer 42 to an output terminal 51. In the system according to this invention as set forth above, since the digital data to be transmitted is bit interleaved and multiplied with the M sequence code signal to thereby be scrambled, and the initial value of the M sequence code signal is changed constantly from time to time, the digital signal transmitting system is simple in circuit arrangement and descrambling is possible only when the receiving side is synchronized with the transmitting side so that digital signal transmission of very high security becomes possible. Further, since the content of the service bit format is changed at every frame cycle, the scrambling can be effected at high speed. Furthermore, since the descramble key data scramble key format is serially transmitted by utilizing the service bit, such data can be descrambled with ease and at high speed in the receiving side. In addition, since the scramble key data is always transmitted with a cycle shorter than that of the individual data, such as unique service format and so on, the changed scramble key data can be reset immediately.