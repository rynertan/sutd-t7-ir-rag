# CONTROLLER FOR MULTIDEGREE OF FREEDOM NONLINEAR MECHANICAL SYSTEM

## Claims
Steuerung zur Ausführung einer einem adaptiven Modell folgenden Steuerung für ein nichtlineares System 18 52 mit mehreren Freiheitsgraden, welches durch eine Differentialgleichung q ter Ordnung beschrieben werden kann, und mit Antriebsquellen für jeden seiner Freiheitsgrade, mit

## Description
The present invention relates to a controller for multidegree of freedom nonlinear mechanical system such as an articulated manipulator that can be described by a nonlinear equation of motion, in particular, to a coantroller which enables a control to be accomplished by carrying out nonlinear compensation in an adaptive manner. As the systems for controlling a multidegree of freedom nonlinear mechanical system there are known exclusively the following two systems as described in Introduction to Robotics Mechanics and Control , by J.J. Craig Addison Wesley, 1986. In the first of the two which is shown in Fig. 1, a closed loop control system is set up for each degree of freedom 12 1, 12 2, ..., and 12 n, by completely neglecting the nonlinearity or the interference between the degrees of freedom of the multidegree of freedom nonlinear mechanical system 10. Then, the system is controlled linearly by inserting, for example, PID controllers 14 1, 14 2, ..., and 14 n corresponding to respective closed loops. In this system, however, it is difficult theoretically, too, to guarantee the stability of the system over the entire range of operation of the multidegree of freedom nonlinear mechanical system 10. That is, the operation of the system will become nonstable in the nonlinear region of operation, though it is stable in the neighborhood of the region of linear operation. In particular, when the mechanical system is put to a high speed operation, there arises a problem that a deterioration in the control performance is inevitable due to the influences of the nonlinear forces and the interference between the degrees of freedom of the system. Now, in the other system of control shown in Fig.2, the parameters for the multidegree of freedom nonlinear mechanical system 10 are fixed to certain values by assuming that they are all known. Then, a nonlinear compensation is provided based on the results of computation of the nonlinear and interferential forces calculated at a nonlinear compensation unit 16 from the knowledge on the position and the velocity of the system. However, according to this system, a difficulty exists in that all of the parameters for the multidegree of freedom nonlinear mechanical system 10 have to be known. Namely, among the parameters for the mechanical system there are included those that vary with position, velocity, and time such that it is practically impossible to identify them precisely. Therefore, when there occur errors and variations in the parameters, stability of operation by this system becomes also difficult to guarantee, leading to the problem that its control performance is aggravated excessively. In the article from Automatica Vol. 10 pp 483 494 by I.D. Landan and B. Courtiol Design of Multivariable Adaptive Model Following Control Systems Pergamon Press, 1974, an adaptive control system is described which includes a reference model section, an adaptation mechanism and calculation means in accordance with the preamble of Claim 1. An object of the present invention is to provide a control device for a multidegree of freedom nonlinear mechanical system whose stability is guarantied over the entire range of operation of the system. Another object of the present invention is to provide a control device for a multidegree of freedom nonlinear mechanical system which is capable of adaptively determining the compensating input for compensating for the nonlinear terms in the equations of motion in accordance with the adaptation law that takes advantage of the characteristics of the mechanical system. Another object of the present invention is to provide a control device for a multidegree of freedom nonlinear mechanical system which is capable of automatically correcting the compensating input even when the parameters for the multidegree of freedom nonlinear mechanical system are unknown or time varying. The objects of the invention are solved by a controller for carrying out adaptive model following control for a non linear mechanical system with multiple degrees of freedom that can be described by a q th degree differential equation and with driving sources for each of its degree of freedom, including With a construction described in the above, it aims at bringing the output of the mechanical system and the output of the reference model to a coincidence in the course of time. These and other objects, features and advantages of the present invention will be mor apparent from the following description of the preferred embodiments, taken in conjunction with the accompanying drawings. Referring to Fig. 3, there is shown a controller for controlling a multidegree of freedom nonlinear mechanical system 18 by adaptively following the model, with reference numeral 20. The controller for multidegree of freedom nonlinear mechanical system 20 includes a reference model section 22 which has a stable built in reference model that is determined by the designer of the control system, a position sensor 24, a velocity sensor 26, and an acceleration sensor 28 which detect the position x₁ velocity x₂, and acceleration x 2, respectively, for each degree of freedom of the real mechanical system 18, an adaptor 30 which computes the various kinds of time varying parameters of the mechanical system for determining nonlinear compensating input, a noninterference computation section 32 which computes a compensating input U The stabilizer 30 determines the time varying parameters a and ii o , a and ij k , and b and i k for the real mechanical system 18 based on the difference signals for the internal states between the mechanical system 18 and the reference model, an input sigual U applied to the control system, and the position signal x₁, the velocity signal x₂, and the acceleration signal x ₂ that are input, in order to output the results to the noninterference computation section 32, the nonlinear force computation section 34, and the inertial term gain computation section 36. The noninterference computation section 32 receives the position signal x₁, the velocity signal x₂, and the acceleration signal x ₂, as well as the settled parameters a and ij k from the adaptor 30, and outputs a compensating input u Next, concrete operation of each element of the controller will be described. The real mechanical system 18 has a driving source for each degree of freedom, and its operation can be represented by the following equation of motion as shown also in Fig. 4a. In Eq. 1 , where x₁ and x₂ represent the position and the velocity, respectively. Further, J x and F x are respectively nxn and nxl matrices that may be represented by the following equations. Here, a ij o ... , b i l , ... , b i Pi 1 i, j n are unknown or time varying parameters, and J ij o x , ... , F i l x , ... , F i Pi x 1 i, j n are nonlinear bounded known functions that do not contain unknown parameters. u represents an n x l input vector which is applied to the real mechanical system 18, and O and I represent n x n zero matrix and unit matrix, respectively. Further, there hold the relations a ii o J ii o x 0 and a ii o 0 for arbitrary i and x on physical grounds. Next, the reference model section 22 includes a reference model which is represented by the following equation. In the above equation, and U is a new vector input that will be applied to the controller after the construction of the control system. Further, K₁ and K₂ are matrices that are selected to make the reference model stable that may be represented, for instance, by The adaptor 30 carries out the computation of the parameters for the real mechanical system 18 according to the following expressions, by using the position signal x₁, the velocity signal x₂, and the acceleration signal x ₂ for each degree of freedom that are detected by the position sensor 24, the velocity sensor 26, and the acceleration sensor 28, respectively, the position deviation signal and the velocity deviation signal for each degree of freedom between the reference model 22 and the real mechanical system 18 that are detected by the subtractors 40 and 42, the above mentioned nonlinear functions J ij o x , ... , F i l x , ... , F i Pi x 1 i, j n , the matrices K₁ and K₂, and the input signal U . In the above equations, the constants a and ii o 0 , a and ij k 0 , and b and i k 0 may be given arbitrary values. Moreover, it is assumed that C ij k 0 and C i k 0, and a 2 x l vector d The noninterference computation section 32 computes the compensating input u where it is set that The nonlinear force computation section 34 computes the input u Then, the output u The inertial term gain computation section 36 computes the gain G The output G The stabilizer 38 computes a stabilizing input u In a controller for multidegree of freedom nonlinear mechanical system constructed as in the foregoing, the position and the velocity of the real mechanical system tend to coincide in the course of the time with the position and the velocity of the reference model, so that there will be accomplished effects that have been mentioned earlier. Next, referring to Fig. 5, another embodiment of the controller for multidegree of freedom nonlinear mechanical system that is in accordance with the present invention is shown with reference numeral 50. The controller 50 is for controlling a multidegree of freedom nonlinear mechanical system 52 by adaptively following the model. The controller 50 includes a reference model section 54 which has a built in stable reference model that is determined by the designer of the control system, a position sensor 56, a velocity sensor 58, and an acceleration sensor 60 which detect the position signal x₁, the velocity signal x₂, and the acceleration signal x ₂, respectively, for each degree of freedom of the real mechanical system 52, an adaptor 62 which computes the various time varying parameters of the real mechanical system 52 for determining the nonlinear compensating inputs, a nonlinear force computation section 64 which computes an input u The adaptor 62 receives the difference signals between the internal states of the mechanical system 52 and the reference model 54, an input signal that is applied to the control system, and the position signal x₁, the velocity signal x₂, and the acceleration signal x ₂, to determine the time varying parameters a and Next, concrete operation of each element in the second embodiment of the present invention will be described. The real mechanical system 52 shown in Fig. 5 possesses a driving source for each degree of freedom, and can be represented by the following equation of motion. In the above equation, J x and F x are matrices that are nonlinear in x but are linear in the parameters. Moreover, it will be assumed that there exist interdependent relationship among the parameters. Namely, the following forms will be assumed for the above functions. In these equations, a In addition, it will be assumed that the range of existence of all of the uncertain parameters a Moreover, it will be assumed also that the statesx ,x Next, the reference model section 54 possesses a reference model that can be represented by the following equation. where , U is a new vector input after the control system is constructed, and k₁ and k₂ are constants chosen so as to make the reference model stable. In this controller, the response of the real mechanical system 52 is arranged to become coincident with the response of the reference model 54. The adaptor 62 computes the parameters a and In the above equation, Z in Eq. 19 and in the expression for M that appear in Eq. 16 . Moreover, matrix P is the positive definite symmetric solution of Lyapunov equation and matrix D is defined by In the above, it should be noted that the matrix D is chosen to make the transfer function which shows the existence of λ that assures the boundedness of all of the signals in the system, enabling the actual computation of the values to be determined. The noninterference computation section 66 computes the input u The nonlinear force computation section 64 computes input u Then, the output u The stabilizer 68 computes the stabilizing input u Then, the output of the stabilizer 68 is multiplied by at the coefficient multiplier 69 and is introduced to an adder 72 together with the output of the subtractor 70. The output of the adder 72 is input along with the input U to the control system 50 to an adder 74, and the output of the adder 74 is introduced to the real mechanical system 52 as an input u . In summary, in the controller for a multidegree of freedom nonlinear mechanical system in accordance with the present invention, the position and velocity of the real mechanical system tend to coincide with the position and velocity of the reference model, so that it is possible to achieve the effects mentioned earlier. Moreover, in the second embodiment there is obtained an added advantage that the construction of the control circuit can be simplified.