# INFORMATION RECORDING AND REPRODUCING APPARATUS

## Claims
Gerät zur Aufzeichnung und Wiedergabe von Information, enthaltend eine optische Platte 1 , die eine Anzahl von Sektoren aufweist, von denen jeder Sektor einen Sektoridentifikationsabschnitt ID mit darin aufgezeichneten Adressdaten und einen Datenfeldabschnitt DF zum Aufzeichnen von Daten hat, und eine Einrichtung 2 zum Aufzeichnen und Wiedergeben von Daten in dem Sektor der optischen Platte, weiterhin enthaltend eine Einrichtung 3, 5, 8 zum Erfassen eines fehlerhaften Sektors, der einen Fehler in dem Sektoridentifikationsabschnitt ID und oder dem Daten feldabschnitt DF aufweist, eine Einrichtung 2 zum Aufzeichnen eines von den Daten verschiedenen ersten Signals 107 in dem Datenfeldabschnitt DF des Sektors, eine Einrichtung 10 zum Überschreiben eines zweiten Signals 108 in dem Sektoridentifikationsabschnitt ID, das einen Lesefehler der Adressinformation bewirkt, und eine Einrichtung 11 zum Erfassen des in dem Datenfeld DF des Sektors aufgezeichneten ersten Signals, wobei das erste Signal in dem Datenfeldabschnitt DF eines fehlerhaften Sektors aufgezeichnet ist, in dessen Sektoridentifikations abschnitt das zweite Signal überlappend aufgezeichnet ist,

## Description
The present invention relates to an information recording and reproducing apparatus for recording and or reproducing information in a recording medium including an information recording region divided into a plurality of sectors, in which if a sector is defective, information will be recorded in a replacement sector and a signal for identifying the defective sector will be also recorded. A conventional information recording and reproducing apparatus is disclosed in Japanese Patent Publication Laid Open No. 203634 83 in which whether a recorded piece of information is acceptable or not is determined, and if it is determined as defective, a flag is recorded at the back area of the defective sector. Also, Japanese Patent Publication Laid Open No. 113509 84 discloses a disc apparatus in which a defective sector is replaced. Fig. 13 shows a sector format for these conventional discs with identification flags F1 and F2 for a defective sector. A sector includes a sector identification section ID, a data field section DF and flags F1 and F2 for recording the information as to whether the data field DF is usable or not. Fig. 13 a shows an example of recording the flag F1 immediately after the sector identification section ID, and Fig. 13 b shows an example of recording the flag F2 at the back area of the data field DF. The flag F1 or F2 is recorded to indicate whether a particular sector is usable or not as a result of a DRAW direct read after write check effected in the data recording in the data field DF or a read verify check after such a recording. In another method, whether a particular data field DF is acceptable or not is checked in advance, and the result of such a check is recorded as the flag F1 or F2. The former method is used with an optical disc of write once type and the latter method finds an application in an optical or magnetic disc of re writable reversible type. In Fig. 13 a , if the result of a DRAW check indicates an uncorrectable error detected in a recorded data, the flag 1 is written in the next disc rotation. In the case of Fig. 13 b , on the other hand, the flag F2 is written immediately after data recording. The processing speed is higher in Fig. 13 b . At the time of data reproduction, the involved data is abandoned upon detection of the flag F1 or F2. The configuration described above, however, poses the problem of a lower reliability in detecting the flag F1 or F2 with respect to recording media such as optical disc which may be often suffered from many defects such as foreign particles in the substrate, a flaw in the disc surface or dust on a preformatted track. Further, if the recording area of these flags is enlarged for securing the effect of these flags to detect such a defect of the recording medium, the storage capacity of the recording medium is undesirably reduced. In JP A 57 53844 is disclosed an optical disc including sectors which each have an ID section and a data field. By means of a disc inspecting device, defective sectors are detected. If a defect exists, a specific area of the ID section and the data field is erased and a defective sector mark is written into the data field. The information then is written again into another sector instead of the defective sector. Accordingly, it is the object of the present invention to provide an information recording and reproducing apparatus which enables in data recording or reproducing operation a real time and highly reliable detection of a defective sector with respect to its sector identification section ID as well as a data field section DE thereby making it possible to replace the defective sector within a shorter time. According to the present invention as set out in claim 1, there is provided an information recording aid reproducing apparatus, wherein in the event that a read error occurs in the identification data of the sector identification section ID of a sector, or the data field DF includes a dropout exceeding a predetermined reference level, or in the event with an erasable recording medium that a data error exceeding a predetermined amount is detected by recording a test data and reading the same by a read verify check, then the particular sector is discriminated as defective, so that a first signal is caused to be written in the data field DF in the particular sector and subsequently a second signal is caused to be overwritten in the identification section ID thereof. Any sector thus written with the first and second signals will hereinafter be called a defect mark bearing sector. In the case of access to a defect mark bearing sector in data recording operation, a read error of the identification data never fails to occur since the second signal is overwritten in the identification section ID. As a result, the particular sector cannot be detected, so that the laser beam from the optical head passes the identification section ID and reproduces the data field DF. The first signal recorded in the data field DF is thus reproduced. Upon detection of the first signal, the data in this sector is recorded in a replacement sector area. The replacement sector area includes a replacement sector arranged in the same track as the defective sector and a replacement track disposed at a predetermined place of the disc for relieving the replacement sector of an over flow. The first signal has a positional address data for the replacement sector. In the case of access to a defect mark bearing sector in data reading operation, a read error of the identification data occurs since the second signal is overwritten in the identification section ID. For this reason, the particular sector fails to be detected, and the laser beam from the optical head passes the identification section ID and reproduces the data field DF. As a consequence, the first signal recorded in the data field DF is reproduced. By the detection of this first signal, it is detected that the data is recorded not in the particular sector but in the replacement sector, and the position of the replacement sector is found out by the first signal to enable reading the replacement sector. In this way, a defective sector can be detected in real time in data recording or reproduction, and therefore the replacement of a defective sector is accomplished in a minimal time. A block diagram of an information recording and reproducing apparatus according to an embodiment of the present invention is shown in Fig. 1. In Fig. 1, reference numeral 1 designates an optical disc having preformatted tracks including a plurality of sectors. Numeral 2 designates a drive unit for retrieving a predetermined track of the optical disc 1 and focussing the laser beam of the optical head on the track thus searched for in order for accomplishing a focus tracking servo function precisely following the track for signal recording and reproduction. Numeral 3 designates a microcomputer CPU for controlling systematic operations such as generating a track seek command to the drive section 2, recording and reproducing in a desired sector, writing the first and second signals, detecting the first signal, and replacing a sector. Numeral 4 designates a data modulator for adding to input data 100 an error correction code such as Reed Solomon Code and performing a digital modulation such as MFM modulation or 2, 7 RLLC run length limited code modulation in order to produce a modulated signal matching the recording reproduction characteristics of the recording medium of the optical disc 1. Numeral 5 designates a data demodulator for reproducing the clock pulse from the reproduction signal 103 at a PLO phase locked loop oscillator , fetching the reproduced signal 103 into a shift register and converting the output of the shift register at a combinational circuit thereby to demodulate the data. The data modulator of 2, 7 RLLC and the data demodulator are disclosed in U.S. Patent No. 4,115,768 issued on September 19, 1978. Numeral 6 designates an address read section for reading a track address and a sector address from the sector identification section ID recorded with identification information such as a track address, sector address and CRCC code cyclic redundancy check code for error check, and performing an error check by CRCC. Numeral 7 designates a sector address comparator for comparing an object or target address data 101 from the CPU 3 with a read address 102 of the address read section 6 and detecting the position of the laser beam on the track for detection of a dropout and data recording and reproduction. Numeral 8 designates a dropout detector for converting the reproduced signal 103 reproduced by the drive unit 2 from the optical disc 1 into a binary data by a predetermined clipping level such as at 50 of the amplitude of the signal 103 reproduced from the sector identification section ID and detecting a dropout exceeding the clipping level. Numeral 9 designates a first signal generator for generating to the drive unit 2 a first signal in response to a first signal write command 105 from the CPU 3, numeral 10 a second signal generator for generating to the drive unit 2 a second signal in response to a second signal write command 106 from the CPU 3, numeral 11 a first signal detector for detecting the first signal recorded in the data field section and notifying the CPU 3, and numeral 12 an error corrector for correcting any error that occurs in the data reproduced from the disc 1 and demodulated in the data demodulator 5. Numeral 100 designates an input data from a host CPU not shown to be recorded in the optical disc, numeral 101 a target address data of a sector where the input data is to be recorded and reproduced, numeral 102 an address signal read out from optical disc 1 by the drive unit 2, numeral 103 the signal reproduced from the optical disc 1 by the drive unit 2, numeral 104 the dropout detection signal, numeral 105 the first signal write command, numeral 106 the second signal write command. Numeral 107 the first signal, numeral 108 the second signal, numeral 109 the modulated data signal, numeral 110 a write sector gate for ordering the signal write operation of the data modulator 4, numeral 111 the first signal detection signal, numeral 112 a read sector gate for ordering the signal read operation of the data demodulator 5, numeral 113 an output data read out from the target sector to be transferred to the host CPU, and numeral 114 an error flag for indicating an occurrence of a 1 symbol error or a 2 symbol error led out of the error correction code of the data demodulated from the reproduced signal 103 by the data demodulator 5. Fig. 2 shows signal waveforms for explaining the recording operation of the first signal 107 and the second signal 108 in attaching a defect mark to a defective sector. Fig. 2 a shows the reproduced signal 103. Sectors SO, S1, S2 each includes a sector identification section ID, a data field section DF and a gap between the sector identification section ID and the data field section DF. A dropout DO exists in the sector S1. An embodiment of the sector identification section ID is shown in Fig. 4. The relationship between the sector identification section ID and the position of the second signal 108 recorded is shown in Fig. 4. Fig. 4 a shows the sector identification section ID, in which SM designates a sector mark indicating the beginning of the sector, PR a preamble for reproducing a clock of the sector identification section ID, AM an address mark for indicating the start of the identification data, TA a track address data, SA a sector address data, CRCC a CRCC code for error detection, and PO a postamble for facilitating the reproduction of the identification data similar to the preamble. The writing position of second signal 108 is shown in Fig. 4 b . An embodiment of the flowchart for marking a defect sector of an optical disc of write once type is shown in Fig. 3. The operation of the information recording and reproducing apparatus embodied as explained above will be described below. First, explanation will be made of the operation for attaching a defect sector mark for checking whether any selected sector is defective or not before recording of the optical disc 1. Fig. 2 is a diagram showing the manner in which the first signal 107 and the second signal 108 are written in the case where the sector S1 has a dropout DO and is defective. Fig. 2 a shows a signal waveform of the reproduced signal 103 of the optical disc 1 having a dropout DO Fig. 2 b an exemplified waveform of the first signal 107 Fig. 2 c an enlarged signal waveform of the first signal 107 illustrated in Fig. 2 b Fig. 2 d a signal waveform of another example of the first signal 107 Fig. 2 e an exemplified waveform of the second signal 108 Fig. 2 f an enlarged signal waveform of the second signal 108 illustrated in Fig. 2 e Fig. 2 g another exemplified waveform of the second signal 108, and Fig. 2 h a signal waveform of the reproduced signal 103 with a defect mark attached. As shown in Fig. 2 c or 2 d , the first signal has three pulse trains recorded therein in order that a dropout, if any, may be detected accurately in the optical disc 1. In Figs. 2 c , 2 f and 2 g , symbols M, S and RF designate a mark signal, a space signal and an RF radio frequency signal respectively. Figs. 2 f and 2 g are diagrams showing enlarged waveforms of the second signal 108 illustrated in Fig. 2 e Fig. 2 f showing an RF signal of almost the same frequency as that of the signal waveform of the sector identification section ID, and Fig. 2 g a signal of the same configuration as the first signal 107. As shown in Fig. 4 b , the signal 108 is written overlapped on at least one of the address mark AM, track address TA, sector address SA and the error check CRCC of the sector identification section ID, thereby causing an address read failure at the address read section 6 and a CRCC error. The pulse duration of the mark M and space S is sufficiently long as compared with the maximum dot length of the data modulation signal 109 of the data field section DF thereby to assure detection of the first signal as described later with reference to Fig. 9. Fig. 5 shows a block diagram of the first signal generator 9. In Fig. 5, numeral 13 designates a decoder for decoding the first signal write command 105, numeral 14 a serial asynchronous data receiver and transmitter SART such as MC6850 of Motorola, numeral 15 a baud rate generator for producing clock pulse, numeral 16 an inverter, numeral 17 a NAND gate, numeral 18 an AND gate, numeral 115 an output signal of the SART 14, numeral 116 an RF signal, numeral 117 an output signal of the NAND gate 17, and numeral 118 a first signal enable signal. Fig. 6 is a diagram showing signal waveforms produced at various parts in Fig. 5, the first signal write command 105 is decoded at the decoder 13, and sets the data for setting the mark M and space S of the first signal in the SART 14. Then, upon actuation of the SART 14, the first signal enable signal 118 is produced from the decoder 13. By doing so, the output signal 115 of the SART 14 is gated with the RF signal 116 at the AND gate 18 to produce the first signal 107. The second signal generator 10 is capable of generating the first signal shown in Fig. 2 f from the RF signal 116 and the first signal enable signal 118 shown in Fig. 5. Also, the signal shown in Fig. 2 g is also capable of being generated on the basis of the data set in the SART 14 in the same configuration as Fig. 5. Now, the data recording operation will be explained. Fig. 7 is a flowchart for recording data in the optical disc bearing a defect mark. Fig. 8 is a diagram showing the recording of a replacement sector in place of a sector bearing a defect mark. The data recording operation will be explained with reference to Fig. 7. Fig. 8 shows signal waveforms with data recorded as shown in Fig. 2. Fig. 8 a shows the signal 103 reproduced from the optical disc 1 by the drive unit 2, Fig. 8 b the first signal detection signal 111, Fig. 8 c the write sector gate 110, and Fig. 8 d the data modulation signal 109. In Fig. 8, the sectors SO, S2 and S3 are normal sectors, and the sector S1 is a sector bearing a defect mark. Since the second signal 108 is written in overwriting manner in the sector identification section ID of the sector S1, the address read section 6 fails to detect the sector identification section ID, so that the laser beam of the drive unit 2 passes the sector identification section ID and the first signal detector 11 detects the first signal 107 recorded in the data field DF. As a result, the data D2 is recorded in the replacement sector Sr in place of the sector S1 of the same track. A series of these operations are performed during the first rotation of the optical disc 1, followed by the second rotation thereof during which the data D3 and D4 are recorded in the sectors S2 and S3, thus accomplishing the replacement sector recording within a minimum operation time. Fig. 9 is a block diagram of the first signal detector 11. Fig. 10 shows signal waveforms produced in various parts of Fig. 9. In Fig. 9, numeral 19 designates a monostable multivibrator of retrigger type, numeral 20 an AND gate, numeral 21 a SART similar to the part 14, and numeral 22 a baud rate generator similar to the part 15. Numeral 119 designates an output of the monostable multivibrator of retrigger type 19, numeral 120 the first signal detection enable signal, and numeral 121 an output of the AND gate. The operation of the first signal detector 11 shown in the block diagram of Fig. 9 will be explained below with reference to the signal waveforms illustrated in Fig. 10. The reproduced signal 103 shown in Fig. 10 a is applied to the monostable multivibrator of retrigger type 19 where the envelope thereof is detected by the monostable multivibrator of retrigger type 19 in the manner shown by the output 119 of Fig. 10 b . The first signal detection enable signal 120 designates a second signal recording area of the data field section DF in order to improve the detection accuracy. The output 119 of the monostable multivibrator of retrigger type 19 is gated at the AND gate 20 so that the signal 121 shown in Fig. 10 d is applied to the SART 21. The signal 121, like the asynchronous communication interface, is applied as a serial signal to the SART 21, and read by being sampled by a clock pulse from the baud rate generator 22. As shown in Fig. 10 d , the leading mark M and the last space S function as a start bit St and a stop bit Sp for the SART 21. The combination of the mark M and space S held between the start bit St and stop bit Sp permits the recording of replacement data such as a sector address of the replacement sector. Fig. 11 shows an embodiment of the data read flowchart for reading the data recorded in the optical disc having a sector bearing a defect mark. The operation of reading the data recorded in the optical disc bearing the defect mark will be explained below. As seen from the foregoing description of the data reading operation, the position of a replacement sector is identified immediately from the sector bearing a defect mark, and therefore a high speed data reading operation is made possible. Fig. 12 shows an embodiment of the flowchart for attaching a defect mark in the optical disc of rewritable type. The attaching will be explained below with reference to Fig. 12. As explained above, in the optical disc of rewritable type, a more accurate sector check than in the optical disc of write once type is possible by the check of an error flag at the time of recording and reproduction of test data. As will be apparent from the foregoing description, according to the present invention, by attaching a defect mark to a sector having such a defect as a dropout in the sector identification section ID or data field section DF thereof, the sector replacing process is possible within a minimal time without waiting for rotation unnecessarily at the time of data recording or reproduction, so that any sector with a defect mark can be detected with high reliability and a simple configuration. In view of the fact that the first and second signals are recorded overlapped with the data field, the information recording and reproduction apparatus according to the present invention can reduce the loss of the storage capacity of the optical disc in comparison with that according to the conventional method using a flag. The foregoing explanation has been made on an optical disc. Nevetheless, the present invention is applicable with equal effects to magnetic discs or the like and is not limited to them. Further, although the embodiment described above has the second signal indicating that the sector identification section ID is not detected, it is also possible to use a second signal indicating that the first signal is recorded in the data field.