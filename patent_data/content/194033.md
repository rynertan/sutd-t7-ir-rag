# ANGLE MODULATED WAVEFORM SYNTHESIZER

## Claims
Vorrichtung zur Synthesierung einer winkelmodulierten Wellenform V t unter Verwendung einer numerischen Synthesetechnik, gekennzeichnet durch

## Description
The present invention relates in general to digital waveform synthesizers and in particular to a waveform synthesizer for generating angle modulated waveforms. Digital waveform synthesizers of the prior art typically generate a sequential set of digital data representing the desired waveform. This data is applied to a digital to analog D A converter which then produces the synthesized analog waveform of voltage magnitude varying according to the magnitude of the applied digital data. A typical such waveform synthesizer employs an offset register, an accumulator and a random access memory RAM wherein data representing one period of the selected waveform completely fills all RAM locations. When the RAM address is sequentially updated in selected incremental steps, the data appearing at the output terminals of the RAM varies in proportion to the magnitude of the desired synthesized analog waveform. The frequency of output waveform variation is directly proportional to both the address step size and the address update rate i.e. system clock frequency , and inversely proportional to the RAM length. The address step size is stored in the offset register and is accumulated by the accumulator, which provides the incremental RAM addresses. While digital waveform synthesizers of the prior art are well adapted for digitally synthesizing waveforms oscillating according to a single frequency, they are not well adapted for synthesizing angle e.g. phase or frequency modulated waveforms. Phase and frequency modulated waveforms oscillate according to two independant frequencies, a higher carrier frequency and a lower modulating frequency. In order to produce a phase or frequency modulated waveform, two digital waveform synthesizers, driving associated D A converters, could he used with one synthesizing a waveform of the carrier frequency and with another synthesizing a waveform of the modulating frequency. The two analog waveforms thus synthesized could then applied to a conventional analog phase or frequency modulating circuit to produce the angle modulated waveform. This method therefore uses two D A converters and a conventional analog modulating circuits. The extra D A converter and the analog modulating circuit can be expensive and can take up a comparatively large amount of space in an equipment chassis. It would be advantageous if data representing a frequency or phase modulated waveform could be sythesized entirely by digital means such that only a single D A converter is needed to generate the analog waveform equivalent and such that no analog modulating circuit is required. Examples of a prior art synthesizer are disclosed in EPO 078 588A1 Hewlett Packard and in US 8 392 354 Dunne . According to one aspect of the present invention, a first and a second digital waveform synthesizer are interconnected by a modulation control circuit. A first waveform synthesizer comprises a first offset register, a first accumulator and a first RAM, while a second waveform synthesizer comprises a second offset register, and second accumulator, and a second RAM. The data stored by each accumulator is used to address the associated RAM, and the first and second RAMs are programmed with data representing one period of the selected modulator and carrier waveforms respectively. A selected modulator waveform frequency parameter, stored in the first offset register, is applied to the input of the first accumulator such that each time the accumulator is strobed by a system clock pulse, the accumulator adds this parameter to the number currently stored by the first accumulator. The current address of the first RAM is thereby incremented by the amount of the selected modulator waveform frequency parameter such that the output of the first RAM varies as a periodic function of the number of clock pulses and the magnitude of the modulator waveform frequency parameter. The time varying output of the first digital waveform synthesizer is applied to the input of the modulation control circuit. The output of the modulation control circuit, a selected transfer function of the periodic input, is summed with a selected carrier waveform frequency parameter stored in the second offset register, and applied to the input of the second accumulator. A number stored by the second accumulator is thus incremented by this time varying sum each time the second accumulator is strobed by a system clock pulse. The stored second accumulator number addresses the second RAM such that the data output of the second RAM is a periodic function of the current carrier waveform frequency parameter, while angle modulated according to the modulator waveform frequency parameter. According to another aspect of the invention, the transfer function associated with the modulation control circuit may be selected such that the output of the modulation control circuit at any given time is proportional to the sum of the last two clocked outputs of the first waveform synthesizer. This causes the magnitude of the data output of the second digital waveform synthesizer to oscillate at a carrier waveform frequency proportional to the carrier waveform frequency parameter, while frequency modulated in proportion to the modulator waveform frequency parameter. According to another aspect of the invention, the transfer function associated with the modulation control circuit may alternately be selected such that the output of the modulation control circuit at any given time is proportional to the difference between the last two clocked outputs of the first digital waveform synthesizer. This causes the magnitude of the second digital waveform synthesizer output data to oscillate at a carrier waveform frequency proportional to the carrier waveform frequency parameter, while being phase modulated in proportion to the modulator waveform frequency parameter. According to a still further aspect of the invention, the output of the second digital waveform synthesizer is converted into an analog waveform of magnitude which varies in time according to the magnitude of the input data, with such waveform being subsequently smoothed by a filtering circuit. It is accordingly an object of the invention to provide a new and improved method and apparatus for producing angle modulated waveforms wherein the carrier and modulator waveform frequencies phase and frequency constants and modulating and carrier waveform types are all controlled by applied digital data. It is another object of the invention to provide a new and improved method and apparatus for producing an angle modulated waveform wherein the angle modulation may be selectively of the phase or frequency modulation type. The subject matter of the present invention is particularly pointed out and distinctly claimed in the concluding portion of this specification. However, both the organization and method of operation, together with further advantages and objects of the present invention, may best be understood by reference to the following description taken in connection with accompanying drawings wherein like reference characters refer to like elements. FIG. 1 is a block diagram of an angle modulated waveform synthesizer according to the present invention. Referring to FIG. 1, an angle modulated waveform synthesizer 10, illustrated in block diagram form, is adapted to generate a sequence of digital data v n of magnitude which varies with the number n of regular system clock CLK pulses such that when the v n data is converted to analog quantities of proportional magnitude by a D A converter 12, and subsequently smoothed by filtering circuit 14, a resulting waveform v t appearing at output terminal 16 is an angle modulated periodic waveform. The angle modulated waveform synthesizer 10 comprises a first digital waveform synthesizer 18 and a second digital waveform synthesizer 20 inter connected by a modulation control circuit 22. First digital waveform synthesizer 18 comprises first offset register 24, first accumulator 26 and first RAM 28. A selected binary modulator waveform frequency parameter M Second digital waveform synthesizer 20, similar to first digital waveform synthesizer 18 comprises second offset register 34, second accumulator 36 and second RAM 38. A selected binary carrier frequency parameter M Prior to circuit operation, first RAM 28 is loaded with data such that, as it is sequentially addressed by unit steps M Modulation control circuit 22 comprises summing circuit 44, multiplier circuit 48, deviation parameter register 50, delay register 52, and arithmetic logic unit ALU 56. The output x n of digital waveform synthesizer 18 on bus 32 is multiplied by multiplier 48 with a binary deviation constant K stored in deviation parameter register 50 with the result appearing on bus 58 connected to both an input of delay register 52 and an A input of ALU 56. Delay register 52 stores the last data Kx n 1 appearing on bus 58 at the time of the last CLK pulse and places the stored data on bus 64, attached to a B input of ALU 56. The stored data is replaced with the current data on bus 58 at the end of each CLK cycle. Depending on the sense of FM PM control input 62 of ALU 56, the output y n of ALU 56 on line 46 is equal either to the sum of the A and B inputs or to the difference between the A and B inputs. Therefore Since y n varies with respect to n, y n will have a modulating effect on v n and v t . An angle modulated periodic function may be of the form Assuming, by way of example, that and for phase modulated sine waves, If the number stored by first accumulator 26 is initially set to 0 by an applied RESET pulse, then the output of first accumulator 26 on bus 30 after n CLK pulses is nM y n and M If second RAM 38 is loaded such that or equivalently The angular carrier frequency, w From 6 for frequency modulated waveforms, the approximation being the trapezoidal rule of numerical integration, and from 7 for phase modulated waveforms Combining 9 and 10 , for frequency modulated waveforms Noting that the deviation value K is an offset value similar to M Substituting t nΔt into 13 and 5 , letting From equations 9 and 11 , for phase modulated waveforms, Substituting equation 5 into equation 16 and letting Equations 15 and 17 are of the proper form for frequency and phase modulated waveforms as indicated by equations 1 and 2 . Thus in order to generate a waveform of the form of equation 15 or 17 it is necessary to store in register 24 the number, Additionally, if a frequency modulated waveform according to the equation 15 is to be synthesized, it is necessary to store in register 50 the number Alternatively, if a phase modulated waveform according to equation 17 is to be synthesized, it is necessary to store in register 50 the number In either case, the time between successive clock pulse leading edges should be set at Δt. In the preferred embodiment, as described hereinabove, both the carrier and modulating functions associated with v t were in the form of sine waves. However, frequency or phase modulated waveforms oscillating according to any combination of periodic carrier or modulating functions of the form