# SAMPLING BRIDGE

## Claims
Abtast und Halteschaltung der Gattung mit einem Haltekondensator C

## Description
The present invention relates in general to waveform sampling circuits and in particular to a bridge type sample and hold circuit for high frequency operation. Sample and hold circuits typically charge a capacitor to the current magnitude of a sampled voltage waveform signal during a sampling interval and then disconnect the capacitor from the signal during a holding interval. The voltage stored on the capacitor is then typically converted by an analog to digital converter to a corresponding digital value which may be stored by a memory device such as a random access memory. A set of such stored digital values obtained at various points during a sampled waveform cycle comprises a digital approximation of the analog waveform and has many uses. One commonly used sample and hold circuit is the sampling bridge circuit of FIG. 1. The circuit includes a Schottky diode bridge comprising two diodes CR1 and CR2 having anodes connected to node A, and two other diodes CR3 and CR4 having cathodes connected to node B. The cathode of diode CR1 is connected to the anode of diode CR3 at node C and the cathode of diode CR2 is connected to the anode of diode CR4 at node D. A voltage waveform to be sampled, Vi, is applied as an input to the diode bridge at node C while the sampled output voltage Vo appears at node D. The output voltage Vo charges holding capacitor Chold. A first strobe current source IS1 is applied to node A while a second strobe current source IS2 is applied to node B. A clamping diode D1 connects node A to ground with the cathode of diode D1 being applied to node A, while another clamping diode D2 connects node B to ground with the cathode of diode D2 being grounded. During a holding interval, when the input waveform Vi is not being sampled, the strobe current sources IS1 and IS2 are directed such that diodes CR1 CR4 are reverse biased, thereby disassociating Vo from Vi. Diodes D1 and D2 are both forward biased and clamp the strobe signal voltages VS1 and VS2 at nodes A and B to one diode forward bias voltage drop below and above ground respectively. To initiate a sampling interval, the directions of IS1 and IS2 are reversed such that diodes CR1 CR4 are forward biased, coupling Vo to Vi and allowing Chold to charge to the current magnitude of Vi. When strobe currents IS1 and IS2 are reversed once again, the reverse biased bridge diodes CR1 CR4 uncouple Vo from Vi such that the value Vi at the moment of strobe reversal remains on Chold. Diodes CR1 CR4 all have inherent parallel capacitance. When the output signal Vo at node D is not centered between the voltages VS1 and VS2 at nodes A and B i.e. when Vi is not at ground at the moment a holding interval begins, the strobe reversal pumps unequal amounts of charging current through diodes CR2 and CR4. Charge is removed or added to Chold to make up the difference, causing the sampled voltage on Chold to decrease or increase just after the sampling strobe ends and introducing an error into the sampled voltage. Because the diode capacitance as a function of voltage is non linear, this strobe feedthrough error is nonlinear with respect to the deviation of magnitude of Vi at the moment of sampling from ground. As this strobe feedthrough effect is inversely proportional to Chold, it precludes reducing Chold to increase bandwidth or to shorten acquistion time, thus limiting the strobing frequency. FIG. 2 is a signal diagram depicting the behavior of Vi, VS1, VS2 and Vo of FIG. 1 during sample and hold intervals and illustrates the strobe feedthrough error in Vo. The inherent capacitances of CR1 CR4 also allow some coupling of Vi to Vo during a holding interval, causing changes in the voltage held by Chold as Vi deviates from the last sampled value. This blowby error is more pronounced as the Vi signal frequency increases. Thus the input signal Vi bandwidth of the circuit of FIG. 1 and the strobe signal switching frequency are limited by the capacitance associated with the bridge diodes. A prior art improvement to the bridge sample and hold circuit is shown in FIG. 3. In this circuit, strobe feedthrough is reduced by coupling clamping diodes D1 and D2 to Vo through a buffer B1. Circuit output Vout is taken at the output of buffer B1. This arrangement ensures that Vo is centered between VS1 and VS2 at the moment of strobe reversal so that no change in the charge on Chold is necessary to balance current flow in D1 and D2 immediately after strobe reversal. However, while the circuit of FIG. 3 reduces strobe feedthrough in comparison to the circuit of FIG. 1, it increases blowby error since the inherent capacitances associated with D1 and D2 in FIG. 2 now increase the coupling of Vi to Vout during a holding interval. Also, delay in buffer B1 causes this feedthrough compensation to be imperfect, with error increasing as input frequency increases. What is needed and would be useful is a sample and hold circuit wherein strobe feedthrough is minimized without increasing signal blowby. Examples of prior art sample and hold circuits are disclosed in U.S. Patent 4,518,921 corresponding to Japanese Patent 59 095732 and U.S. Patent No. 4308468. According to the present invention, there is provided a sample and hold circuit of the type having a holding capacitor and a first diode bridge switch having an input node coupled to receive an input voltage signal, an output node coupled to the holding capacitor, and a first pair of control nodes coupled to respective current sources to receive a control current that couples the input voltage signal to the holding capacitor when the control current is of one phase and decouples the input voltage signal from the holding capacitor when the control current is of the opposite phase, the sample and hold circuit having a compensating circuit, characterized by It is accordingly an object of the invention to provide a new and improved sample and hold circuit wherein strobe feedthrough is minimized without increasing signal blowby. The subject matter of the present invention is particularly pointed out and distinctly claimed in the concluding portion of this specification. However, both the organization and method of operation, together with further advantages and objects thereof, may best be understood by reference to the following description taken in connection with accompanying drawings wherein like reference characters refer to like elements. Referring to FIG. 4, a sample and hold circuit 10, depicted in schematic diagram form, is adapted to charge a holding capacitor Chold to the current voltage magnitude of an applied sampled voltage signal Vi when Schottky diodes CR1 CR4 of sampling bridge 12 are forward biased by applied strobe currents IS1 and IS2 during a sampling interval. When strobe currents IS1 and IS2 are reversed, diodes CP1 CP4 are reverse biased, substantially uncoupling the test voltage signal Vi from the holding capacitor Chold thereby initiating a holding interval. Thus during the holding period the voltage Vo across Chold remains at the sampled magnitude of Vi at the moment IS1 and IS2 are reversed. The anodes of diodes CR1 and CR2 are joined at node A of sampling bridge 12 while the cathodes of diodes CR3 and CR4 are joined at node B. The cathode of diode CR1 is connected to the anode of diode CR3 at node C while the cathode of diode CR2 is connected to the anode of diode CR4 at node D. Current source 14 supplies strobe current IS1 into node A to forward bias diodes CR1 CR4 during a sampling interval and draws current from node A to reverse bias diodes CR1 CR4 during a holding interval. Current source 16 draws strobe current IS2 from node B during a sampling interval and supplies current to node B during a holding interval. The maximum voltage VS2 developed at node B is limited to one diode forward bias voltage drop above ground by a clamping Schottky diode D2 having its anode connected to node A and its cathode grounded. Similarly the mimimum voltage drop developed at node A is limited to one diode forward bias voltage drop below ground by clamping Schottky diode D1 having its cathode connected to node A and its anode grounded. During a sampling interval, when diodes CR1 CR4 are forward biased, the rise of sampled voltage Vi above ground is limited to two forward bias diode voltage drops by diode CR3 in series with clamped diode D2. The fall of Vi below ground is limited to two forward bias diode voltage drops by diode CR1 in series with diode D1. Therefore, sampling bridge 10 is intended for use with input voltages Vi varying not more than two diode voltage drops about ground. In other embodiments of the invention, however, diodes D1 and D2 may each be replaced by a number of diodes in series, thereby extending the permissible range of Vi. It is assumed for purposes of illustration, that the forward bias voltage drops Vd associated with all diodes of circuit 10 are equal. During a sampling interval both diodes CR2 and CR4 are forward biased and have a voltage drop of Vd from anode to cathode. The voltage VS1 appearing at node A will be Vo Vd and the voltage VS2 at node B will be Vo Vd. If the strobe currents IS1 and IS2 are reversed to initiate a holding interval, node A voltage VS1 will fall to Vd while node B voltage VS2 will rise to Vd as limited by clamping diodes D1 and D2. Thus the total voltage change at node A following strobe current reversal is Vo 2Vd while the total voltage change at node B is Vo 2Vd. Diodes CR3 and CR4 have inherent capacitances which lose or gain charge when the voltages at nodes A and B change. If output voltage Vo at node D happens to be at ground level i.e. Vo 0 then the voltage rise at node A will equal the voltage fall at node B and the voltage change across diodes CR3 and CR4 will both equal 2Vd. If the inherent capacitance of diodes CR3 and CR4 are approximately equal, the rate at which charging current passes through CR3 and CR4 will be equal and no charging current will pass between Chold and node D. If, however, Vin is some value other than 0 at the moment IS1 and IS2 are reversed, then the resulting voltage drops across CR3 and CR4 will be unequal and total charge supplied to CR3 thereafter will differ from the charge supplied to CR4. This difference in charge results in a net charge flow into or out of bridge 12 at node D. In the prior art this net charge flow is supplied from the holding capacitor Chold. If Vo is initially at a voltage level higher than ground, CR2 requires more charge than supplied by CR4 and the difference is accounted for by a net charge flow out of Chold, thereby reducing output voltage Vo. If Vo is initially below ground level, then CR2 requires less charge than supplied by CR4 and the difference is diverted into Chold, increasing the charge stored by Chold along with output voltage Vo. Thus when Vo is not at ground level at the end of a sampling period, the value of Vo changes in the direction of ground during the holding period and a strobe feedthrough error is introduced into the sample voltage Vo. The amount of this strobe feedthrough error varies nonlinearly with the initial value of Vo making it difficult for circuits using this sampled voltage to calibrate out the error. In the present invention, a compensating bridge 20 is provided to produce a net output charging current to Chold which is of equal magnitude but of reverse phase to the net output charging current of bridge 12. The output of bridge 20 is connected to the output of bridge 12 so that any charging current flowing in or out of bridge 12 due to strobe feedthrough, tending to decrease or increase the charge on Chold, is offset by an equal and opposite strobe feedthrough charging current from bridge 20. Referring to FIG. 5, a preferred embodiment of sample and hold circuit 10 includes compensating bridge 20 depicted in more detailed circuit diagram form. Compensating bridge 20 comprises Schottky diodes CR1 CR4 , D1 and D2 connected to nodes A D in the same fashion that the corresponding diodes of bridge 12 are connected to nodes A D. The diodes of bridge 20 are selected to match the forward bias voltage drop and inherent capacitance characteristics of the corresponding diodes of bridge 12. This matching is most easily arranged if bridges 12 and 20 are implemented on the same integrated circuit chip. An input voltage Vi, of equal magnitude and opposite phase to sampled voltage Vi, is applied to node C of bridge 20. Such an opposite phase voltage is typically available as an inverted output when Vi is a non inverted output of a differential amplifier not shown . A second holding capacitor C hold is connected between ground and node D . A first strobe current I1 is applied to node A of bridge 20 while a second strobe current 12 is applied to node B of bridge 20. During sampling and holding intervals these strobe currents are of the same magnitude and phase as corresponding strobe currents I1 and I2 of sampling bridge 12. The negative side of a DC voltage source V7 is connected to node A while the positive side of source V7 is connected to the cathode of a diode CR7. The anode of diode CR7 is applied to output node D of bridge 12. Similarly, a voltage source V8 and a diode CR8 link node B of bridge 20 to node D of bridge 12. Voltage sources V7 and V8 are sized to ensure that diodes CR7 and CR8 do not conduct significantly in the forward direction at input signal V1 extremes. During a sampling interval, the strobe currents IS1 and IS2 applied to compensating bridge 20 forward bias diodes CR1 CR4 and reverse bias diodes D1 and D2 in the same way strobe currents IS2 and IS2 affect the corresponding diodes of sampling bridge 12. Prior to strobe current reversal to initiate a holding period, the voltage at node A is Vi Vd while the voltage at B is Vi Vd. After strobe reversal the voltage at node A is Vd while the voltage at node B is Vd. The voltage Vo held at node D of bridge 12 by capacitor Chold immediately before and after strobe reversal is the sampled voltage Vi. Thus the change in voltage across diode CR7 as a result of strobe reversal is Vi 2Vd, drawing a charge flow into CR7 from node B. The same voltage change occurs across diode CR4 of sampling bridge 12 driving charge out of CR4 and into node D. If the inherent capacitances of diodes CR4 and CR7 are the same, then during a holding period the charge entering node D from CR4 nearly equals the charge leaving node D to CR7. There is slightly less charge through the compensating diodes because they need to have reverse bias set by V7, V8 etc . This can be improved by oversizing the compensating diodes. Similarly, if the inherent capacitance of CR8 is equal to that of CR2, the voltage change across CR8 due to strobe reversal is equal to the voltage change across CR2 and is directed such that the charge drawn from node D by CR2 nearly equals the charge supplied to node D by CR8. Thus the charges flowing through node D between bridges 12 and 20 cancel one another and there is no net change to the charge on Chold as a result of strobe feedthrough. One additional advantage to the circuit of FIG. 5 is its ability to reduce signal blowby error. During a holding interval, charging currents passing through CR2 and CR4 are offset by charging currents of equal magnitude but opposite phase passing through CR7 and CR8 so that the charge on Chold is not affected by signal blowby from either bridge. An improvement to the circuit of FIG. 5 is shown in FIG. 6. In the circuit of FIG. 6, voltage source V5 and diode CR5 couple node A of bridge 12 to node D of bridge 20 while voltage source V6 and diode CR6 couple node B of bridge 12 to node D of bridge 20. Diodes CR5 and CR6 compensate for imbalances in charging current passing through diodes CR2 and CR4 following strobe current reversal at the start of a holding interval in the same way that diodes CR7 and CR8 compensate for imbalances in charging current passing through CR2 and CR4 such that the charge on capacitor C hold remains constant. The voltage output Vo at node D of compensating bridge 20 will be equal in magnitude but opposite in polarity to the output Vo at node D of bridge 12. Node D is connected to the input of a buffer 22 while node D is connected to the input of another buffer 24. The outputs of buffers 22 and 24 are applied to the inverting and non inverting inputs of a differential amplifier 26 which generates the sampling bridge output voltage Vout. The circuit of FIG. 6 has a number of advantages over that of FIG. 5. Use of the differential output voltages Vo and Vo to drive amplifier 26 improves the circuit output signal to noise ratio and common mode rejection. The differential arrangement of FIG. 6 also reduces output voltage droop due to reduction in charge on the storage capacitor resulting from finite output stage amplifier input impedance. These drops in capacitor voltage appear as a common mode signal which is rejected by differential amplifier 26. The voltage source V7 of FIGs. 5 and 6 can be simulated in a variety of ways. Two such methods are shown in FIGs. 7A and 7B, depicting alternative versions of a portion of the circuits of either FIGs. 5 or 6. In FIG. 7A, a resistor R1 links diode CR7 to node A of compensating bridge 20. A current source 32 supplies current to the node F between CR7 and node A sufficient to produce a voltage Vc Vd Vo at node F larger than the maximum obtainable value of Vo at node D. This ensures diode CR7 remains off during both holding and sampling intervals. In FIG. 7B, PN junction diode D3 is placed between CR7 and node A . A current source 32 supplies current to node F between CR7 and D3. Diode D3 is forward biased ensuring node F is one forward voltage drop above node A. This is sufficient to ensure diode CR7 remains reverse biased. Voltage sources V5, V6 and V8 of FIGS. 5 and 6 may be simulated in a similar fashion. Thus in either the preferred or alternative embodiments of the present invention, a compensating bridge having capacitive coupling characteristics matching those of the sampling bridge produces holding capacitor charging currents which are of equal magnitude but opposite phase to charging currents generated by the sampling bridge. In the preferred embodiment, the reverse phase charging currents are produced by applying a reverse phase input signal to the compensating bridge and then applying strobe current to the compensating bridge in phase with the sampling bridge. In the alternative embodiment, the reverse phase charging currents are generated by applying an in phase input signal and a reverse phase strobe current to the compensating bridge. Both the preferred and alternative embodiments of the sample and hold circuit allow high frequency circuit operation without substantial strobe feedthrough error. The preferred embodiment further minimizes errors due to signal blowby.