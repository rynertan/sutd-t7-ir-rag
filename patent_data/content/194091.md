# A PROGRAMMABLE LOGIC DEVICE WITH LIMITED SENSE CURRENTS

## Claims
Programmierbare logische Schaltung, aufweisend mehrere Eingangsleitungen 117, 127 , mehrere Produkttermleitungen 140 und ein Feld von Speicherzellen 100, 110, 120, 130 , jeweils mit vorbestimmten der Eingangsleitungen und der Produkttermleitungen verknüpft und dazu ausgelegt, Stromfluß von den Prodükttermleitungen selektiv freizugeben, wobei jede Zelle ein Speicherelement 102 und ein Zellenselektionselement 101 umfaßt, und mehrere Leseeinrichtungen 150 , eine jeweils mit einer jeweiligen der Produkttermleitungen verknüpft und dazu ausgelegt, den Zustand von selektierten der Speicherzellen, die mit diesem Produktterm verknüpft sind, zu lesen

## Description
The present invention relates to improvements in programmable logic devices PLDs . The architecture of the typical PLD allows the buffered input signals to pass directly into the programmable AND array or matrix of the device. For example, a PLD may have sixteen input signals making up thirty two possible input lines, since each input signal normanly has true and complement signals associated therewith going to the AND array. Each AND array comprises a plurality of memory cells or switches, arranged in an array the AND array of rows and columns or product terms . The input signals drive respective rows of the array, and the respective product terms are connected to sense amplifiers, an OR gate array and other output logic circuitry as is known to those skilled in the art. The state of a particular array cell determines whether or not the respective row input signal is coupled onto the corresponding product term line for that memory cell. The memory cells each typically comprise a select transistor which is turned on when the corresponding row input signal is active. If the cell memory unit a fuse switch or other memory device such as a floating gate field effect transistor is conductive, the input signal will be coupled onto the product term. The applicant has recently developed a PLD employing electrically erasable, floating gate, field effect transistors as the memory or sense element of the cells of the AND array. Such floating gate transistors have been employed in the past for electrically erasable, programmable memories EEPROMs . In a typical EEPROM memory, the select transistor for a particular cell is formed by the intersection of a polysilicon input line and the product term active area. The polysilicon acts as the gate electrode of the select transistor, with the source and drain formed by N type implanted dopant in the active area. During processing of the PLD, the N type dopant laterally diffuses beneath the polysilicon gate. This lateral diffusion forms an overlap region associated with the gate. This capacitance is often referred to as Miller capacitance. We have appreciated that a characteristic of PLDs is the relatively high cell currents that may be drawn through a particular product term when serial of the row lines are selected and the memory cells associated with those row lines are conductive. In the PLD configuration recently developed by the applicant, separate sense amplifiers are provided for each product term, and function as current sensing voltage sources. The advantage of this sense amplifier is its high speed. In order to provide the required high speed, the sense amplifiers are very sensitive, and are activated by relatively small input voltage swings. The amplifiers function in an analogous manner to a voltage source which can source a high current level to maintain the voltage level. The sense amplifer sources current to ground through the memory cells which are turned on. Thus, for an array with 32 rows of cells arranged in columns or product terms, when many cells are turned on the sense amplifier for a particular product term may be sourcing many times the current required for a single cell. For example, each programmed cell may be capable of sinking 50µA each, and it is possible although not probable that one half of the cells in a 2048 cell array could be on, sinking 50µA each for a total of 51.2 mA of cell current. The high current flow leads to excessive power dissipation and chip failure rates, and is unnecessary because current flow through only one cell of a product term is really needed for sense amplifier operation. From IEEE Journal of Solid State Circuits, Volume SC 16, No. 5, October 1981, pages 570 577, New York, USA R.A. Wood et al. An Electrically Alterable PLA for Fast Turnaround Time VLS1 Development Hardware , a programmable logic device is known having a plurality of input lines, a plurality of product term lines, and an array of memory cells each comprising a cell selection device in series with a memory device, see Figures 4 and 9 of the paper. The input lines are connected to respective ones of the cell selection devices and the product term lines are connected to respective ones of the cell memory devices. The device includes a plurality of amplifiers connected respectively to individual product term lines, and sensing the outputs of selected ones of the memory cells. The present invention is defined in the appended claims 1 and 18 to which reference should now be made. Advantageous features of the invention are defined in the dependent claims. In a preferred embodiment of the invention, to be described in more detail below, a PLD is provided in which a current limiter is associated with each product term, and is adapted to limit the current flow through each product term to a predetermined maximum level, typically about the maximum current level which may be passed through one conductive memory cell. Preferably the sense transistors for each cell are disposed between the sense amplifier and select transistor, thereby isolating the overlap or Miller capacitance when the cell is in the erased state. Typically only a few of the sense transistors are programmed to the conductive state and most are erased nonconductive . In this configuration, many rows or input lines may toggle without coupling switching noise onto the product term. Separate product term ground lines are employed for each product term. In this preferred embodiment, therefore, the product term sense amplifiers of a PLD are isolated from row switching noise, substantially reducing the produce term switching noise, and at the same time the sense currents are limited while enabling the provision of very high input to output signal speeds. These and other features and advantages of the present invention will become more apparent from the following detailed description of an exemplary embodiment thereof, as illustrated in the accompanying drawings, in which The following description is presented to enable any person skilled in the art to make and use the invention, and is provided in the context of a particular application and its requirements. Various modifications to the preferred embodiment will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments and applications. Thus, the present invention is not intended to be limited to the embodiment shown, but is to be accorded the widest scope consistent with the principles and novel features disclosed herein. Figure 1 is a cross sectional view of the memory cell employed in the PLD. The cell comprises a select transistor and a floating gate transistor as the sense or memory transistor. The floating gate device is adapted to employ the Fowler Nordheim tunnelling effect to remove or augment charge stored on the floating gate to place the sense transistor in either the enhancement or depletion mode. To allow Fowler Nordheim tunnelling to take place, the floating gate region 55 is separated from the drain region, N region 52, by a very thin 100 Angstrom layer of oxide. The sense transistor has a source region 53. The select transistor is formed by a polysilicon region 51, separated from the N regions 52,54 by an oxide layer. The polysilicon region 51 comprises the gate electrode of the select transistor, with the source and drain comprising the N regions 52,54 formed by N type dopant implanted in the active area. During processing of the PLD, the N type dopant laterally diffuses beneath the polysilicon gate region, forming an overlap region D. The overlap region creates a Miller capacitance between the gate and drain of the select transistor. The charge storing capacity of the Miller capacitance leads to switching noise as the select transistor is turned on and off. In accordance with an embodiment of this invention the memory cell comprises means for limiting the noise which is coupled onto the product terms resulting from toggling of the input lines. Figure 2 illustrates two cells 10,20 of a PLD array. In correspondence with the conventional electrically erasable memory configuration, in each of these cells the sense transistors M2 the floating gate device shown in Figure 2 is disposed between the respective cell select transistor M1 and the product term 30. Input lines 1,2 drive each of the select transistor gates for each cell in rows 11 and 21. A typical AND array may have 32 input row lines and 64 product terms columns . Each of input lines 1,2 for rows 11 and 21 drive the select gates of each of the 64 cells arranged in the respective row. As the status of the input is toggled during normal circuit operation, the select transistors will switch on and off. The respective Miller capacitances C The sense transistors are disposed between the select transistors and the respective product term line 30. When the sense transistor is erased, i.e., in the nonconductive state, the select transistor is isolated from the product term line, the isolation of the erased sense transistor prevents switching noise from being coupled onto the product term line. If the sense transistor is conductive, there is no switching noise isolation for that particular cell. Yet, because more sense transistors are typically erased than are programmed to the conductive state, substantial isolation from noise coupling isolation is provided by the configuration illustrated in Figure 2. In order to implement this configuration, in the preferred embodiment, separate cell interrogation read and programming write lines are employed, since the select transistor now resides on the ground side of the matrix cell. The ground line now becomes the write path, requiring that each product term have a separate ground connection product term ground 35 . During programming, the ground connection is removed, and the programming data is placed on the individual product term ground lines and at the MCG. node, connected to the gates of the sense transistors. Thus, if a selected cell is to be programmed to the enhancement mode, a high programming voltage typically 20 volts is applied to the MCG node, and the product term ground line is pulled to ground. Conversely, if the cell is to be programmed to the depletion mode, the MCG node is grounded, and the product term ground line is pulled up to the high programming voltage level. The select gate of the desired row in the product term is brought high, allowing data to be programmed into the cell. In the normal mode of operation, the programming circuits are isolated from the product term ground, and a connection is made to ground. Figure 3 illustrates four cells 100,110,120,130 of a product term 140 in a PLD array employing the invention. As described above, each product term 140 or column is provided with a separate product term ground line 145. The sense transistors 102,112,122,132 of the four cells are distributed between the respective select transistors 101,111,121, 131 and the product term 140. The input of sense amplifier 150 is connected to the product term 140. Current limiter 155 connects the product term ground line 155 to ground. Input line 117 is connected to input driver 118, which produces a true signal 115 and complement signal 114. True signal 115 drives the gate 113 of select transistor 111 cell 110 . Complement signal 114 drives the gate 103 of select transistor 101 cell 100 . In a similar fashion, input line 127 is coupled to input driver 128, which produces a true signal 135 and complement signal 134. True signal 135 drives the gate 133 of select transistor 131 cell 130 . Complement signal 134 drives the gate 123 of select transistor 121 cell 120 . The elements shown in Figure 3 are replicated to form an exemplary AND array of 2048 cells, arranged in 32 rows and 64 product terms. Each product term has associated with its product term a sense amplifier and with its product term ground a current limiter element. Programming data is presented to the array by a shift register latch SRL comprising a plurality of stages a representative stage 160 is shown in Figure 3. In the preferred embodiment, the SRL comprises one stage per product term. Thus, the programming data is clocked into the SRL stages, and for the product term 140 shown in Figure 4, is present at node 163. During a device edit mode, the To program a selected cell, the gate of the select transistor is pulled to 20 volts by the row decoder, the MCG node is grounded, and the data at node 163 is high. With both transistors 161,166 turned on with respective high PGM 5 volts and PROGRAM 20 volts signals, the pull up circuit 165 pulls up line 145 to 20 volts minus V When the PLD is in the normal user mode, Sense amplifier 150 provides a two state output signal, in dependence on the status of the memory cells in the respective product line. From Figure 3, it is apparent that each of the sense transistors 102,112,122,132 are coupled in parallel through the respective select transistors 101,111, 121,131 between the product term 140 and the product term ground 145. If all sense transistors are erased, i.e., nonconductive when interrogated by an interrogation voltage on line MCG driving the gates of the sense transistors, then no current will flow between the product term 140 and its ground line 145. If one or more of the selected sense transistors is programmed to the conductive state, then one or more current paths is provided between the product term 140 and ground line 145. A schematic drawing of an illustrative sense amplifier 150 employed in the preferred embodiment is shown in Figure 4. The amplifier 150 comprises a single ended current sensing amplifier. The product term line 140 is connected to the input of the amplifier 150, whose front end comprises a bias circuit. Transistors 208,213 and 215 cooperate to set the product term bias on line 140 at about 1 volt equivalent to one transistor threshold voltage drop V The sense currents may be as low as 5 microamps, with an input voltage swing on the product term in the 25 millivolt range. Transistor 210 acts as a load or leaker to hold the product term potential down for more capacitive coupling immunity and stability. Transistors 218,220 form a push pull configuration that drives the inverter 221 comprising N MOS transistor 222 and transistor 225. Node 219 will be at 1V During the sensing of a programmed memory cell i.e., with a floating gate device programmed to the depletion mode so that it conducts with the nominal interrogation voltage, the product term potential is directly coupled through an active select transistor and conductive floating gate device to ground. Current will flow from the amplifier through the product term 140, a select transistor, a sense transistor, and the product term ground line to ground. This charge flow weakens the drive on transistors 215 and 220, allowing the depletion transistor 213 to increase the drive on transistor 218. The N MOS inverter 221 pulls down, i.e., transistor 225 turns on, pulling node 224 down, amplifying the signal further. The following CMOS inverter provides further gain of sense amplifier output 240. During the sensing of an erased memory nonconductive cell, the product term 140 is pulled high to its quiescent operating point, which increases the drive to transistors 215 and 220. With the gates of transistors 215 and 220 driven high, the gate of transistor 218 is pulled low by inverter 241. Transistor 220 pulls down the gate of transistor 225, turning it off. Under these conditions, transistor 222 pulls up the gates of transistors 230 and 228 turning on transistor 230 and turning off transistor 228. Thus, node 240, the sense amplifier output, is low. It will be appreciated that, as the number of conductive cells in the product term increases, so will the cell current drawn through the sense amplifier 150. The essential feature of the invention is the provision of current limiting means 155 to limit the cell current drawn by the sense amplifier 150. A simplified schematic drawing of the current limit circuitry is shown in Figure 5. The current limiter comprises control logic circuitry 250 and a plurality of current limit elements 280, one for each product term ground in the array. The control logic circuitry 250 is adapted to enable the current limit elements only during specific PLD operational modes. It is desired to provide current limiting operation during the PLD normal user mode, and to disable current limiting operation and decouple the product term ground line from ground while programming the memory cells, or during a logic test mode. The respective current limited elements are controlled by the control logic output signal ASGB at node 282. To disable current limiter operation, node 282 is grounded, turning off transistor 280. This will occur when transistor 262 and either transistor 255 or 260 is conductive. The state of transistor 255 is controlled by the P The current limiter operates as a current mirror, controlled by the current flowing through transistor 266, biasing the gates of the respective N channel pull down transistors 280 acting as the current limit elements. The preferred embodiment has been designed to limit the cell current of 16 programmed cells to about 120 microamps per product term. In operation, when the current limiter is active, node 282 is biased just above twice the transistor threshold turn on voltage V The drain 281 of the current limit transistor 280 is connected to the product term ground line 145. With its gate at 2V A simplified equivalent circuit of the product term, the conductive cells on the product term and the current limiter is shown in Figure 6. The memory cells of Figure 3 are shown in Figure 6 as effective resistances, whose impedances will depend on the respective cell state. Thus, cells 100,110,120 and 130 form a parallel network coupling the product term 140 to product term ground 145. Sense amplifier 150 is coupled to the product term 140. The current limiter element 280 Figure 6 connects the product term ground line 145 to ground. As described above, the amplifier 150 comprises a voltage source which will source current through conductive memory cells. The impedance of a conductive cell is nominally low, while the impedance of a nonconductive cell is nominally quite high. Depending on variables such as process tolerances and the like, the actual cell impedances may be higher or lower than predicted. Thus, the effective impedance from the sense amplifier to ground through the cells current limiter element is variable, since the number of cells and their individual impedances which are conductive at any given time is variable. As the effective impedance between the product term 140 and product term ground 145 changes, so does the cell current drawn through the sense amplifier, since the sense amplifier is configured as a voltage source. As the impedance goes down and the current flow increases, the drain 281 of the transistor 280 biases upwardly to a threshold level, at which point the sense amplifier will stop delivering more current. The current limiting operation of the transistor follows from the following relationship describing the current flow through an MOS device where Of these parameters, V Figure 7 is a simplified graph illustrating the relationship between I The control logic 250 is adapted to turn off the current limit transistors during programming of the memory cells of the array, and during logic testing. This allows the memory cell nodes to float with respect to the current limit elements. With the current limiter in operation, the maximum current flow through the current limiter elements is about the maximum current which may be passed through one programmed cell. For an array with 32 programmable cells, driven by true and compliment signals of 16 inputs lines, in parallel with a series device the current limiter , at any given time 16 cells will be selected. Without the current limiter, the maximum cell current through the sense amplifier for one product term may possibly amount to about 0.8mA. With the illustrated current limiter, only about 50 to 100 microamperes flow for each product term, a very substantial reduction. There has been described a novel circuit for limiting product term current in a PLD. It is understood that the above described embodiment is merely illustrative of the many possible specific embodiments which can represent principles of the present invention. Numerous and varied other arrangements can readily be devised in accordance with these principles by those skilled in the art.