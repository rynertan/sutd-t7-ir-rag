# Method and apparatus for electrically determining pipe inside diameter.

## Abstract
A method and apparatus is disclosed for electrically measuring the inside diameter of a metallic pipe such as oil or gas well casing. The transimpedance of two coaxial coils within the pipe is determined and then resolved into its inphase and quadrature components. The magnitudes of these two components are used to generate a corrected measurement output. A signal representative of the inside diameter of the pipe is generated in response to the corrected measurement output and may be recorded as a function of travel distance in the pipe. The generation of the corrected measurement output may also comprise the simultaneous solution of two non linear equations which express the magnitudes of the inphase and quadrature components as functions of a₁, the inside radius of the pipe, and τ, a factor proportional to the ratio of the permeability to the conductivity of the pipe.

## Claims
WHAT IS CLAIMED IS 1. Apparatus for measuring the inside diameter of a metallic pipe comprising a support member transmitter means including a transmitter coil disposed on said support member for generating an a.c. transmitter current and receiver means including a receiver coil disposed on said support member a distance from said transmitter coil for producing a receiver voltage in response to said transmitter current when the transmitter and receiver coils are disposed within such a pipe and characterized by means responsive to said receiver means and said transmitter means for generating an impedance signal proportional to the ratio of said receiver voltage to said transmitter current means for resolving said impedance signal into its quadrature component, ImZ, and its irphase component, ReZ means responsive to said ImZ and ReZ components for generating a corrected measurement output and means responsive to said corrected measurement output for generating a signal representative of the inside diameter of the pipe. 2. The apparatus of claim 1 characterized in that said corrected measurement output generating means comprises means for linearly combining said ImZ and ReZ components to generate a corrected measurement output having a lessened sensitivity to the permeability and conductivity of metallic objects. 3. The apparatus of claim 2 characterized in that said means for linearly combining comprises subtraction means for generating a difference signal indicative of the difference between said ImZ andReZ components. 4. The apparatus of any one of claims 1 3 characterized in that said means for generating said inside diameter of the pipe signal comprises means for filtering said corrected measurement output. 5. The apparatus of claim 3 characterized in that said means for generating a signal indicative of the inside diameter of the pipe includes means for storing numerical indications of the inside diameter of said pipe as a function of said difference signal, and means for addressing said storing means with said difference signal to generate an inside diameter signal proportional to the inside diameter of said pipe. 6. The apparatus of claim 1 characterized in that said corrected measurement output generating means comprises means for filtering saidImZ and ReZ components based on a model for the respective components which expresses each component as a non linear combination of at least two characteristics of said metallic pipe. 7. The apparatus of claim 6 characterized in that said filtering means comprises means for simultaneously solving two non linear equations which tress said ImZ component and said ReZ component as functions of al and T, where al represents the inside radius of the pipe and T is a factor proportional to the ratio of the permeability of the pipe to the conductivity of the pipe. 8. The apparatus of any one of claims 1, 6 or 7 characterized by means responsive to said corrected measurement output for generating a signal indicative of the ratio of permeability to conductivity of the pipe. 9. The apparatus of any one of claims 1 8 wherein said apparatus comprises a well logging apparatus said metallic pipe comprises a wellbore casing said support member is adapted for traversing the well bore casing said transmitter and receiver coils are coaxially disposed on said support member and said transmitter and receiver means are connected to surface instrumentation via a wireline cable and further comprising means for moving said support member axially within the pipe and means for recording said signal representative of the inside diameter of the pipe as a function of distance along the pipe and characterized in that the frequency of said ac. transmitter current is about 65 KHz. 10. A method for measuring the inside diameter of a metallic pipe comprising, generating an impedance signal between two coaxial coils within said pipe, where the inpedance is the ratio between the current exciting a transmitter coil and the voltage induced in a receiver coil, resolving the impendance signal into its vector components including a quadrature impedance signal and an phase impedance signal, generating a difference signal, A Z, propdrtional to the difference in magnitudes of said quadrature impedince signal and said phase impedance signal generating an inside diameter signal representative of the inside diameter of the pipe in response to at least said difference signals Z. 11. The method of claim 10 characterized in that said step of generating an inside diameter signal comprises simultaneously solving two non linear equations which express the magnitudes of said quadrature impedance signal and said inphase impedance signal as functions of al and T , where al represents the inside radius of the pipe and T is a factor proportional to the ratio of the permeability of the pipe to the conductivity of the pipe. 12. The method of claim 1l characterized in that said step of simultaneously solving two equations camprises a estimating al, the inside radius of the pipe, by assuming T 0, b using the estimated al to determine T from the second equation, c using the new T value in the first equation to determine an improved estimate of al, and d repeating steps b and c until values for T and a1 converge. 13. The method of any one of claims 10 12 further comprising the steps of moving the transmitter coil and the receiver coil as a unit axially within the pipe, and recording said inside diameter signal as a function of distance along the pipet and characterized by recording a signal proportional to the ratio of permeability to conductivity as a function of distance along the pipe.

## Description
Title METHOD AND APPARATUS FOR ELECTRICALLY DETERMINING PIPE INSIDE DIAMETER BACKGROUND OF THE INVENTIONField of the Invention This invention relates generally to a method and apparatus for electromagnetically measuring the inside diameter of a cylindrical structure and particularly relates to an electronic inside pipe caliper. More particularly, the invention relates to a method and apparatus for logging the inside diameter of oil and gas well tubular members, e.g., casing.Description of the Prior Art It is frequently necessary to measure the inside diameter of a pipe. This is particularly true of the casing of an oil well or of a string of tubing disposed within an oil well, for example, to extract oil or gas from the well. Such metallic pipes are buried in the ground and, therefore, are not accessible for measurement. Both the inside and the outside of such metallic pipes is subject to corrosion damage. The corrosion may be caused by injected fluids or by corrosive fluids within the ground. Besides, the pipe may be subjected to internal wear from the rods of pumps or from wear due to wire lines which may be sent into the well. Also, wear may be caused by drilling or fishing operations utilizing a drill pipe. Measuring the damage of a pipe due to corrosion or wear is important in order to apply protective measures or to repair or replace the pipe when appropriate. Of course, it should be realized that the internal diameter of the pipe in an oil well may vary due to permissible deviations of the wall thickness and of the nominal pipe diameter. Because there is a real need to determine the inside diameter of buried metallic pipes, various instruments have been developed in the past for this purpose. Most of these instruments utilize mechanical feelers which are urged by spring means against the inner wall of the pipe. When one of the feelers is deflected due to the existence of pits, cracks, and other effects of corrosion or erosion of the pipe, an electric signal may be generated which is utilized to record such deviation. This may, for example, be effected by associating a magnet with the feelers. The magnet is rotated sequentially past the various feelers so that a deflection of the feeler changes the magnetic reluctance of the magnetic path which, in turn, induces an electrical signal that can be recorded.Alternatively, a potentiometer may be associated with a feeler for generating a signal proportional to the deflection of the feeler. Some of these mechanical feeler calipers, utilize two sets of feelers, one for measuring the maximum penetration of the feeler, while the other continuously measures the average penetration of the feelers. However, a pipe caliper of the type having mechanical feelers has a number of disadvantages. For example, such an instrument cannot detect longitudinal splits or cracks of the pipe. The pipe may be covered with paraffin, scale or other non metallic material which may cover up faults in the pipe. The feeler, of course, cannot distinguish between a metallic pipe and non metallic material which may cover the pipe. Therefore, certain pits covered by hardened hydrocarbons and the like cannot be detected. Finally, each of the many feelers may scratch the pipe or scratch off the protective coating of the pipe. Even if the pipe has not been covered with a protective coating, the scratches caused by the feelers may initiate further corrosion. Consequently, the mechanical feeler type instrument may cause change to the pipe inside diameter it is intended to measure. U.S. Patent 3,417,325 issued to McCullough and Stroud discloses a purely electrical caliper for determining the inside diameter of a metallic pipe in which a transmitter coil and receiver coil are supported on a cylindrical housing of a sonde adapted for movement through oil well casings and the like. The transmitter is excited with a.c.current of the order of 10 to 50 kilocycles per second. The voltage induced in the receiver coil is taken as a measure of the average inside diameter of the pipe being measured. It has been found in practice, however, that the apparatus disclosed in U.S. Patent 3,417,325 yields erroneous results where either the conductivity, or permeability or both conductivity and permeability of the pipe being measured vary. In actual oil field practice the conductivity of steel tubular gops varies from a range of 2.6 x 106mhos meter to 7.8 x 106mhos meter. Also, as is well known, the permeability of oil field tubular goods varies significantly due to the mechanical shocks, heat treating, etc. to which the goods are subjected. Thus, it is an object of this invention to provide an inside pipe caliper which operates on electrical principles which will overcome the disadvantages of prior instruments. Another object of the invention is to provide an inside pipe caliper which generates a signal representative of the inside diameter of the pipe which is substantially insensitive to variations of conductivity and permeability of the pipe. Another object of this invention is to provide well logging apparatus for logging borehole casing or tubing which yields an accurate log of the inside diameter of the casing versus depth, regardless of variations of casing conductivity or permeability. SUMMARY OF THE INVENTION The objects, features and advantages of the invention are the result of providing two coaxial coils within the pipe including a transmitter coil in which is generated an a.c. exciting current, and a receiver coil disposed a longitudinal distance from the transmitter coil for producing an induced voltage in response to the transmitter current. A circuit is provided to generate an impedance signal proportional to the ratio of the receiver voltage to the transmitter current. The impedance signal is resolved into its vector components including a quadrature impedance signal and an irphase impedance signal. According to one aspect of the invention, means responsive to the quadrature and the inphase impendance signals are provided to generate a corrected measurement output. This corrected measurement output is used to generate a signal representative of the inside diameter of the pipe. According to another aspect of the invention, means are provided for linearly combining the quadrature and the inyhase impedance signals to generate a corrected measurement output having a lessened sensitivity to the permeability and conductivity of metallic objects. According to yet another aspect of the invention, means are provided for simultaneously solving two non linear equations which express the quadrature and inphase impedance signals as functions of al, the inside radius of the pipe, and T , a parameter proportional to the ratio of the permeability of the pipe to the conductivity of the pipe. According to another aspect of the invention there is provided an iterative computing method for simultaneously solving the two equations by first assuming that T is equal to zero, then determining an estimate of al from the first equation, determining T from the second equation, using the new T value in the first equation to determine a new value of al and repeating the method until convergence is achieved. BRIEF nEscRIpTION OF THE DRAWINGS The invention, as well as additional objects and advantages thereof will best be understood from the following description when read in connection with the accompanying drawings, in which Figure 1 schematically illustrates the downhole apparatus and surface instrumentation for a tubular goods caliper according to the invention Figure 2 illustrates a theoretical model of transmitter and receiver coils for measuring the inside diameter of a metallic tubular member Figure 3 illustrates electronic apparatus suitable for performing the measurement according to the invention Figures 4A and 4B illustrate the error correcting efficiency according to one form of the invention and Figure 5 illustrates the effect of first and second order corrections for pipes of varying inside diameters as a function of the ratio of permeability to conductivity of the pipes. DESCRIPTION OF THE INVENTION Figure 1 shows schematically an electrical caliper tool 10 constructed in accordance with the invention. The tool 10 determines the inside diameter of tubular members, shown illustratively as casing 20 of borehole 16. The tool includes a downhole sonde 12, downhole electronic cartridge 13, and surface eguipment 14. The sonde 12 is adapted to be suspended in and movable through the tubular member or casing 20 by an armored cable, or wireline 18. The well bore 16 has a casing 20 having an inside diameter which the tool 10 is designed to measure as a function of well depth as the tool is raised or lowered within the casing 20. The wireline or cable 18 may be a single conductor referred to as mono cable or multi conductor which may be a heptacable having seven conductors . The surface equipment 14 communicates with the sonde 12 via the cable 18 for the purposes of controlling the position o the sonde 12 within the casing 20 and for receiving, processing, displaying, and recording signals transmitted from the sonde 12. A cable following mechanical transducer 22 and linkage 23 provides position signals indicative of the depth of the sonde 12 in the well bore 16. Typically, the transducer 22 takes the form of a calibrated pressure wheel urged against the wire line 18 and generates electrical pulses as the wheel rotates due to travel of the sonde 12 within the casing. The down hole tool comprises a sonde 12, an electronic cartridge section 13, a pair of centralizers 27a, 27b, a tip or nose member 28 and a cable head adapter 30. The down hole tool is connected to the cable 18 via the cable head adapter 30. The sonde 12 contains caliper coils 50, 60 for making electromagnetic measurements as a function of depth of the sonde in the casing. A signal is generated which is proportional to casing inside diameter. Other signals are generated which are representative of the ratio of casing permeability to casing conductivity. Before specific apparatus is described which reside in electronic cartridge 13 or surface apparatus 14, reference is made to Figure 2 for an exposition of the theoretical basis of the invention. Figure 2 shows a theoretical model of two coaxial coils 50, 60 separated from one another by a longitudinal distanceL, both coils disposed coaxially within pipe or casing 20.The pipe inside radius is represented by as, its outside radius by a2. The radius of receiver coil 60 is represented by b2 the radius of transmitter coil 50 is represented by bl. The electrical properties of medium 1 inside the pipe are 1,ii1,a1, the permittivity, the permeability and the conductivity of the medium. Likewise, the properties of the pipe are represented by E2rD2ra2 Using Figure 2 as the basis for application ofMaxwell s equations, it can be shown that Z V J 1 where Z represents the impedance ratio of the coils 60,50, and V represents the voltage induced in receiver coil 60 in response to current J flowing in coil 50.The impedanceZ can be written as Z Z0 Zp 2 where Z0 is that part of the impedance caused by direct coupling between transmitter and receiver coils and p is that part of the impedance caused by the effect of the pipe 20. It can be shown thatEMI7.1 whereEMI7.2 and where I1, K1, I0, K0, are Bessel functions.Equation 4 can be expanded using equation 5 for r and equation 6 for T, Zp Z1 Z2 Z3 ... 7 EMI7.3 Where the conductivity of the pipe is large,EMI8.1 The measured impedance between the coils, Zmeas has real and imaginary quadrature parts, Zmeas ReZmeas i ImZmeas 10 Thus, for small T, T2 is very small and Z3 0,ReZmeas iImZmeas i Z1 Z0 ReA2 iImZ2 ReZmeas ReZ2 ImZ2 because from 9 T has equal real and quadrature parts.Therefore,EMI8.2 Eguation 12 indicates that Z ReZmeas ImZmeas 2w 0b2 ZINT0 ZINT1 13 where the coils 50 and 60 are of the same diameter b, the medium 1 permeability is that of free space 0 andEMI8.3 When T from equation 9 is not small enough to ignore, it can be shown thatEMI9.1 where a1 represents the inside radius of the pipe, b represents the radius of the transmitter and receiver coils,L is the distance between the transmitter coil and the receiver coil,I1 b is a modified Bessel function of the first kind, K1 a1 is a modified Bessel function of the second kind, I0 a1 is a modified Bessel function of the first kind, is a variable of integration, 0 is the permeability of free space, 2 f, is the radian frequency of the a.c.transmitter current, is is the relative permeability of the pipe being measured, and is the conductivity o the pipe being measured. Thus, from equations 13 and 14 an accurate determination of a1, the inside radius of the pipe 20, can be made by measuring the impedance between the coils, resolving the impedance into its quadrature imaginary and inphase real components, taking the difference between those components and determining a1 which satisfies equation 14. Advantageously, equation 14 may be precomputed for various aZ values as a function of a 1 A polynomial may be fitted to the functional relationship between al and bZ, or al f Z . 23 The polynomial may be stored in the memory of a digital computer disposed in surface instrumentation 14, so that asAZ is measured as a function of depth in the well 16, a1 may be easily determined. Alternatively, equation 13 , may be predetermined over a range of values of AZ and a1 to produce a table of values which may be stored in a digital memory in surface instrumentation 14. The digital memory may then be addressed with a measured AZ value to generate a signal a1 representative of the inside diameter of the pipe. Where T is not small enough to neglect, equations 15 and 16 through 22 may be solved by first obtaining an initial estimate of al, the internal radius of the pipe, by assuming T O. Next, using the initial estimates of al, ZINT2, ZINT3, ZINT4, and ZINTS are evaluated it is assumed T is sufficiently small to. ignore higher order factors in the expansion .Then, T from equationEMI11.1 of equation 15 is determined. The new value is used in the equation EMI12.1 of equation 15. The steps outlined above are repeated until values forT and al converge, that is until change is sufficiently small from one iteration to the next. Figure 3 illustrates the electronic circuitry necessary to implement the invention. Caliper coils 50,60 are shown schematically within casing 20. Transmitter coil 50 is excited by means of a 65.5kHz crystal oscillator via summing amplifier 101 and driver amplifier 102. In order to insure that a constant current excites transmitter coil 50, a current sensing resistor provides an output to sensing amplifier 104 proportional to the current through transmitter coil 50. The output of sensing amplifier 104 is applied to rectifier 105 where a rectified error signal is applied to a differential error amplifier 106 for comparison with a reference signal. The error signal from error amplifier 106 is fed back to summing amplifier 101, completing the feedback constant current circuit. The signal from current sensing resistor 103 is applied to phase locked loop oscillator 110 which generates reference signals in quadrature e.g. 90 out of phase with the transmitter current, on lead 111 and inphase .g., 1800 out of phase with transmitter current on lead 112. The current reference signal is also applied to switch network 120. A ground signal on lead 116 is additionally applied to switch network 120. Through switch network 120 it is possible to apply not only the received voltage on leads 115 to phase sensitive detector 130, but also a current signal on 113 and a ground signal 116, thereby providing react means to calibrate the phase sensitive detector PSD 130 system for misalignment and drifts with temperature and time.The signal from switch network 120 is applied to PSD 130 via differential amplifier 121 and band pass filter 122 having a band pass frequency substantially the same as that of oscillator 100. The output of the PSD 130 is applied to a low pass filter 131, the output of which during logging operations is alternately the inphase and quadrature components of the voltage signal indicated in coil 60 measured with respect to the phase of the current driving transmitter coil 50. Switch S is alternately connected to leads 111, 112 many times each second thereby producing many output readings each second, effectively insuring that for each depth location that coils 50, 60 are measuring, several outputs of the phase and quadrature components are available for further processing as described previously to generate an inside diameter measurement and a T measurement indicative of the ratio of pipe permeability to conductivity. The circuitry of Figure 3 is preferably disposed in electronic cartridge 13, but may alternatively partially or totally reside in surface instrumentation, except input and output leads to coils 50 and 60. Preferably signals from the phase sensitive detector 130 are applied to surface instrumentation circuits 14 by means of telemetry circuits downhole and demodulation circuits uphole similar to that shown in U.S. Patent No. 4,292,588 issued to Smith and incorporated herein. Coils 50 and 60 may be shielded in a conventional manner so as to prevent electric field coupling where logging is occurring in a salt water filled environment. Well logs of casing inside diameter are effected through the apparatus shown in Figures 1 and 3 and the processing steps outlined above are preferably carried out in surface instrumentation 14. Logs are generated by correlating the depth signals of the coils 50, 60 through the use of measurement wheel 22 schematically shown connected to surface instrumentation 15, well known in the well logging art. A recorder 100 is provided for producing logs of casing inside diameter versus depth of the coils 50,60. The parameter t proportional to the permeability conductivity ratio may also be recorded as a function of logging depth. Figures 4A and 4B illustrate the efficacy of the invention in producing measurements of the inside diameter of tubular goods having wide variations in conductivity.Figure 4A shows that significant errors result in the apparent inside diameter of pipe for tubular brass, stainless steel, aluminum and other ferrous pipes having different permeability conductivity ratios. The results ofFigure 4A were generated in the prior known way of estimating inside diameter purely on the basis of the magnitude of received voltage of receiver coil 60. Figure 43 shows that by providing the. corrections indicated by equations 13 and 14 above, errors to the estimate of pipe inside diameter are significantly reduced. Figure 5 illustrates the error expected in the measurement using the first order correction of equations 13 and 14 and the second order correction of equations 15 through 22. The error curves are presented as a function of , of the tube under investigation and shows curves of casing inside diameters of 4,5,6, and 7 inches. It is seen that substantial reduction in casing inside diameter errors are achieved for large la ratios. Although the invention has been described in its preferred form with a certain degree of particularity, the present disclosure has been made only by way of example.Changes in the details and implementation of the preferred embodiment will be apparent without departing from the spirit and the scope of the invention. Even though the invention is described specifically for the casing inside diameter measurement of casings in down hole oil or gas wells, the invention could find ready application for the inside diameter measurement of any pipe for which access to the inside is the only practical measurement. The invention described herein could find ready application for the measurement of oil and gas pipe lines for example.