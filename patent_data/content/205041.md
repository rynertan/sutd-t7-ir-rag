# Method and apparatus for vehicle speed control

## Claims
Verfahren zum Steuern eines Fahrzeuges mit einer Brennkraftmaschine, einem Beschleunigungspedal 26 , einem Drosselventil 24 und einer auf das Steuersignal S

## Description
This invention relates to a method and apparatus for controlling the speed of travelling of an automobile vehicle as indicated in the first parts of independent claims 1 and 5 respectively. Such a method and apparatus are known from EP A 0 071 702. US A 4 190 026 discloses a method and apparatus for maintaining an automobile at a preselected command speed. The apparatus includes a first comparator which produces a first error signal proportional to an error between actual and command values of automobile speed. The first error signal is applied to an amplifier to control the throttle valve position in a manner to maintain the automobile at the command signal. For the purpose of eliminating the tendency towards hunting, which results in fluctuations of throttle valve position around the command speed, a second comparator is interposed between the first comparator and the amplifier. Second comparator receives another input from an intake air flow sensor and produces a second error signal proportional to an error between the first error signal and the sensor signal from the intake air flow sensor. However, this known apparatus cannot be readily transferred from one type of automobile to another having different running characteristics without requiring changes in various circuit parameters, for example the gain of the amplifier. GB A 2 141 269 discloses a vehicle speed control apparatus for maintaining a vehicle at a target speed. The apparatus includes a deviation detecting circuit which produces an error signal proportional to an error between the actual vehicle speed value and the vehicle speed target value fed from a memory. The error signal is fed to a signal processing circuit where the amount of fuel to be injected is controlled in PID control mode in accordance with the error signal. The PID control constants used in the signal processing circuit are derived from a setting device which determines the PID control constants from a relationship stored in the read only memory. The relationship, which defines these PID control constants as a function of vehicle speed and engine load, is set and cannot be varied to compensate for changes in the running characteristics in the vehicle. DE A 29 21 214 discloses a vehicle speed control apparatus for controlling a vehicle at a target speed. The apparatus includes a comparator which produces an error signal proportional to an error between actual and command values of vehicle speed. The error signal is used to control an adjusting device for changing the position of the throttle valve. The position of the adjusting device is monitored to change the characteristic of operation of the adjusting device from one to another in order to stabilize the vehicle speed control. However, these characteristics of operation of the adjusting device are set and cannot be varied to compensate for changes in the running characteristics in the vehicle. In order to improve the control characteristic of the vehicle speed automatic control apparatus, it is required to increase the speed of response to occurrence of a deviation between the demand and actual vehicle speeds and also to minimize the tendency toward hunting which results in repeated deviation of the vehicle travelling speed from the demand value in a short time. It is understood, of course, that the control characteristic is greatly dependent on the vehicle running characteristic which differs from one vehicle type to another. Therefore, it is the object of the invention to provide a vehicle speed control method and apparatus applicable commonly in various types of vehicle without any degradation in control stability and response speed. This object is achieved by the subject matters of independent claims 1 and 5 respectively. The present invention will be described in greater detail by reference to the following description taken in connection with the accompanying drawings, in which With reference to the drawings and in particular to Fig. 1, there is shown a schematic block diagram of an automotive vehicle speed control apparatus embodying the present invention. In Fig. 1, the reference numeral 24 designates a variable positionable throttle valve which is mounted as for rotation with a throttle shaft within an air induction passage for controlling the flow of air to the engine so as to adjust the speed of rotation of the engine. The throttle valve 24 is moved selectively by an accelerator pedal 26 or a throttle valve actuator 22. In a manual control mode, the accelerator pedal 26 is drivingly associated with the throttle valve 24 to move the throttle valve with the movement of the accelerator pedal. In an automatic control mode, the throttle valve actuator 22 is drivingly associated with the throttle valve 24 to move the throttle valve in a manner to maintain the automotive vehicle at a constant travelling speed. The throttle valve actuator 22 is electrically controlled and it determines the setting of the throttle valve 24 which in turn, determines the amount of air admitted to the engine. A throttle valve position sensor 28 generates a signal V2 corresponding to the degree of opening of the throttle valve 28. The throttle valve position sensor 28 may include a potentiometer which has a wiper arm drivingly connected to the throttle shaft for generating a voltage signal corresponding to the degree of opening of the throttle valve 24. A vehicle speed sensor 20 generates a signal V1 corresponding to the speed of travelling of the automotive vehicle. The sensor signals V1 and V2 are applied to a control circuit 16. The control circuit 16 is powered from a standard vehicle battery 10 through a series circuit of an ignition switch 12 and a power switch 14. The control circuit 16 receives a set signal S from a set signal generator. The set signal generator may include a set switch 18 which is manually closed to supply current from the vehicle battery 10 so as to change the set signal S from a logic 0 level to a logic 1 level. The control circuit 16 operates in an automatic control mode to maintain the automotive vehicle at a demand or target travelling speed when the set signal S is at the logic 1 level. The control circuit 16 also receives a reset signal R from a reset signal generator. The reset signal generator changes the reset signal R from a logic 0 level to a logic 1 level when the accelerator pedal 26 is released or depressed. The reset signal generator may include a brake switch which is responsive to the application of braking to the vehicle to close to supply current from the vehicle battery 10 so as to change the reset signal R from the logic 0 level to the logic 1 level. The brake switch is effective to detect when the accelerator pedal is released. The control circuit 16 changes its operation from the automatic control mode to the manual control mode when the reset signal R changes to the logic 1 level. In the manual control mode, where the throttle valve 24 is moved in response to movement of the accelerator pedal 26, the control circuit 16 samples actual values of vehicle travelling speed and throttle valve position at time intervals to determine a running characteristic which defines throttle valve position in relation to vehicle travelling speed. In the automatic control mode, the control circuit 16 produces a control signal Sc to the throttle valve actuator 22 for controlling the position of the throttle valve 24 in a manner to maintain the automotive vehicle at a demand travelling speed. For this purpose, the control circuit determines a value corresponding to the control signal from the determined running characteristic in accordance with a demand value for vehicle travelling speed. The control circuit 16 may employ an LSI circuit large scale integrated circuit forming therein a digital computer which shall be regarded as including an analog to digital converter, a central processing unit, a memory, a timer, and a digital to analog converter. The analog to digital converter receives the analog signal V2 from the throttle valve position sensor 28 and converts it into a corresponding digital signal for application to the central processing unit. The memory contains the program for operating the central processing unit and further contains appropriate data in look up tables used in calculating appropriate values for the position of the throttle valve 24. The look up table may be obtained experimentally or derived empirically. The central processing unit may be programmed in a known manner to interpolate between the data at different entry points if desired. Control words specifying a desired throttle valve position are periodically transferred by the central processing unit to the digital to analog converter. The digital to analog converter converts the transferred information into analog form and applies a control signal to the throttle actuator 22 for controlling the position of the throttle valve 24. Fig. 2 is a flow diagram of the programming of the digital computer used in the control circuit 16. The computer program is entered at the point 202 when the power switch 14 is turned on to apply power to the control circuit 16. At the point 204 in the program, the control circuit components are initialized. This initializer routine includes placing the throttle valve actuator 22 out of operation and resetting a flag F to zero. At the point 206, a determination is as to whether or not the flag F is zero. If the answer to this question is yes , then the program proceeds to another determination point 208. This determination is as to whether or not the set signal S is at the logic 0 level. If the answer to this question is yes , then it means that the set switch 18 is open and the program proceeds to the point 210. At the point 210 in the program, the signals V1 and V2 are read into the computer memory. At the point 212, the central processing unit determines a running characteristic from the sampled values for vehicle speed and throttle valve position, the running characteristic defining throttle valve position as a function of vehicle travelling speed. At the point 214, the central processing unit analizes the determined running characteristic to determine constants K1 and K2 used in calculating a value corresponding to the control signal Sc. Following this, the program returns to the point 206. As long as the set switch 18 remains open to operate the control circuit 16 in the manual control mode, these routines are repeated to sample the actual values for vehicle travelling speed and throttle valve position at time intervals and use the sampled data so as to determine a running characteristic or a relationship which defines throttle valve position in relation to vehicle travelling speed. This running characteristic is analyzed to determine constants K1 and K2 used in calculating a value corresponding to the control signal Sc. To operate the control circuit 16 in the automatic control mode so as to maintain the automotive vehicle at a demand speed set by the depression of the accelerator pedal 26, he may close the set switch 18. This operation causes a change of the set signal S from the logic 0 level to the logic 1 level. Consequently, the program proceeds from the point 208 to the point 216 where the flag F is set to 1. At the point 218 in the program, the signal V1 is sampled and read, as a vehicle travelling speed demand value Vo, into the computer memory. Following this, the program proceeds to the point 220 where a determination is made as to whether or not the reset signal R is at the logic 1 level. If the answer to this question is no , then the program proceeds to the point 222 where the signal V1 is read, as a vehicle travelling speed actual value V, into the computer memory. At the point 224 in the program, the central processing unit calculates a deviation between the demand and actual values of vehicle travelling speed. At the point 226, the central processing unit calculates a value corresponding to the control signal SC required to bring the throttle valve 24 to a new setting so as to adjust the speed of rotation of the engine in a direction zeroing the deviation ΔV. The value is calculated as where ΔV is the calculated deviation and K1 and K2 are constants calculated at the point 214 in the program. It is to be understood that the constant K1 corresponds to the proportional gain of an integral plus proportional control circuit IP control circuit and the constant K2 corresponds to the integral gain thereof. At the point 228 in the program, the calculated new setting information is transferred to the digital to analog converter which thereby produces a control signal Sc to the throttle valve actuator 22 for moving the throttle valve 22 to the new setting so as to reduce the deviation ΔV to zero. Following this, the program returns to the point 206. Since the flag F has been set at 1 at the point 216 in the previous program execution cycle, the program proceeds from the point 206 to the point 220. The program proceeds through the points 222, 224, 226 and 228 repetitively at time intervals to provide feedback control of the vehicle travelling speed to the demand value Vo. To change the control circuit 16 from the automatic control mode to the manual control mode, the operator may depress the brake pedal or the accelerator pedal 26. This operation causes a change of the reset signal R from the logic 0 level to the logic 1 level. As a result, the program proceeds from the point 220 to the point 230 where the operation of the throttle valve actuator 22 is released. This releasing operation permits movement of the throttle valve 24 with movement of the accelerator pedal 26. At the point 232 in the program, the flag F is reset to zero. Following this, the program returns to the point 210. The vehicle travelling speed is adjusted under proportional plus integral control using proportional and integral gains determined from a running characteristic detected from actual values of throttle valve position and vehicle travelling speed sampled during vehicle travelling. It is, therefore, possible to use the vehicle speed control method and apparatus commonly for various types of vehicle without any degradation in control stability and response speed. In addition, since the running characteristic is determined from latest values of throttle valve position and vehicle travelling speed sampled just before the control circuit is changed into the automatic control mode, the control accuracy is independent of transmission gear ratio and or loaded weight changes. Although the control signal is derived from a deviation between demand and actual values of vehicle travelling speed under proportional plus integral control, it is to be noted that the control signal may be derived from a higher level calculation. In addition, although the control circuit determines the constants for use in calculating a value corresponding to the control signal Sc from a running characteristic derived from values of vehicle travelling speed and throttle valve position sampled in a manual control mode, it is to be noted that the control circuit may be arranged to perform the operation of determining the constants in an automatic control mode. While a preferred embodiment of the invention has been shown and described, various other embodiments and modifications thereof will be apparent to those skilled in the art, and will fall within the scope of this invention as defined in the following claims.