# ERROR CORRECTION APPARATUS USING A VITERBI DECODER

## Claims
Fehlerkorrekturvorrichtung mit einer Quelle von Wegmaßen 71 74, 81 84 , die entsprechend mit Zuständen in einem vorgegebenen Zeitschlitz eines Viterbi Gitterdiagramms verbunden und aufeinanderfolgend als Reaktion auf neue Wegmaße fortgeschrieben wurden Zweigmaß Generatoren 20 28 , um aufeinanderfolgend ein Zweigmaß als Reaktion auf Eingangsfaltungscode Daten zu erzeugen und mehrere Summen von Zweigmaßen zur Verfügung zu stellen, die von den Zuständen der vorgegebenen Zeitschlitze abweichen einer Addiereinrichtung 301 304, 401 404, 501 504, 601 604 , die mit der Quelle und den Zweigmaß Generatoren verbunden ist, um die fortgeschriebenen Wegmaße mit einer entsprechenden zweigmaßsumme zu addieren und zweite Summen zur Verfügung zu stellen einer ersten Komparatoreinrichtung 305, 306, 505, 506 , die mit der Addiereinrichtung verbunden ist, um zwischen den zweiten Summen zu vergleichen und mehrere erste Steuersignale zur Verfügung zu stellen, von denen jedes die höchste der zweiten Summen darstellt einer ersten Auswahleinrichtung 307, 308, 407, 408, 507, 508, 607, 608 , die mit der ersten Komparatoreinrichtung verbunden ist, um die höchsten zweiten Summen als Reaktion auf die ersten Steuersignale auszuwählen und mit einer Wegspeichereinrichtung 100, 101 , die mit der ersten Komparatoreinrichtung verbunden ist, um Daten zu speichern, die die Wege kennzeichnen, die den Summen zugeordnet sind, welche als Reaktion auf die ersten Steuersignale ausgewählt wurden

## Description
The present invention relates to an error correction apparatus for use in digital transmission systems, and in particular to a high speed error correction apparatus for decoding received convolutional code bits using the Viterbi decoding algorithm. Error correction is used in the sense that the decoded bits have been optionally decoded so as largely to nullify the effect of bit errors in the redundant bit stream which is actually transmitted. Recent advances in digital techniques in telecommunications have brought about numerous proposals and new systems for correcting errors introduced in transmission facilities, particularly satellite communications. The Viterbi decoding algorithm has been employed in these proposed systems and highly evaluated because of its practical utility. The Viterbi decoding algorithm involves interactive operations of sequential selection of one of two metric paths that remerge at a node in the decoder s trellis diagram by detecting the greater of accumulated metric values so that the selected path is taken as one having a maximum likelihood. Metric values, also referred to as metrics, are a measure of the distance of a selected code word from a received code word. Prior art error correction apparatus using the Viterbi decoding algorithm repeats the operations of add, compare and select on each time slot which corresponds to the period of a single bit or a single code word. However, the time taken to effect the add operation imposes limitations on the operating speed of the system, making it unsuitable for high speed data processing. With the current CMOS integrated circuit technology the maximum operating speed does not exceed 10 Mb sec. An object of the present invention is to provide an error correction apparatus that eliminates the prior art problem by reducing the time involved with adding operations. The invention is defined in claim 1 below, to which reference should now be made. The present invention will be described in further detail with reference to the accompanying drawings, in which Before undertaking the detailed description, it is appropriate to describe a convolutional encoder having a constraint length K 3, an output code symbol v 2, and a coding rate r 1 2. In Fig. 1, the convolutional encoder comprises a three stage shift register 1 having stages K₁, K₂ and K₃, two modulo 2 adders v₁ and v₂ and a commutator 2. A sequence of information bits is applied to terminal 3 and delivered as the code symbol output from terminal 4. The modulo 2 adder v₁ has two inputs which are connected to the K₁ and K₃ shift register stages and modulo 2 adder v₂ has three inputs connected to all the shift register stages. The outputs of modulo 2 adders are alternately coupled to the output terminal 4 by commutator 2. The state of the convolutional encoder is the contents of the first two shift register stages K₁ and K₂ which are given in nodes S The Viterbi decoder is a maximum likelihood decoder whose algorithm is to calculate the likelihood of each of the two paths entering a given state or node and eliminates from further consideration all but the most likely path that leads to that state. After each decoding operation only one path remains leading to each state. The decoder then proceeds one level deeper into the trellis and repeats the process, leaving four paths at each trellis depth, or time slot. An error correction apparatus incorporating the Viterbi decoding algorithm comprises a path metric detector that converts the received code word to a metric path metric Z The adder 6a of ACS circuit 5a reads the previous path metric M₁ Figs. 4A to 4C are block diagrams of an embodiment of the ACS circuit of the present invention. The add compare select circuit of the present invention reduces the decoding time by providing additions involved with two consecutive time slots in a single operation. For example, a new path metric for node S₁ Specifically, in Fig. 4A, a received bit stream of convolutional code bits is transformed into sequences of code bits P and Q. The code bit P is applied to serial parallel shift registers 20 and 22 and code bit Q to serial parallel shift registers 21 and 23. Shift registers 20 23 are clocked by a frequency divider 24 at one half the system clock, with shift registers 22 and 23 being clocked through inverter 25 in opposite phase to shift registers 20 and 21. The parallel outputs of shift registers 20 and 21 are applied to parallel parallel shift register 26 for proper timing with the parallel outputs of shift registers 22 and 23. A branch metric calculator 27 of any of conventional designs calculates the branch metric for odd and even numbered bits from the parallel data received from shift registers 26, 22 and 23, the output of the branch metric calculator being applied to an adder 28. Adder 28 produces a plurality of groups of branch metric sums, each summing branch metrics of two sequential time slots t j and t j 1 . The first group consists of four branch metric sums Z₁₁ The branch metric sums are transmitted on conductors 31 34, 41 44, 51 54 and 61 64 to an add compare select circuit according to the present invention shown in Figs. 4B and 4C. This ACS circuit generally comprises a pair of identical parts which are respectively shown in Figs. 4B and 4C. The first part is subdivided into first and second ACS units generally shown at 30 and 40, respectively, in Fig. 4B. The first ACS unit 30 derives a path metric for node S₁ The first ACS unit 30 comprises adders 301, 302, 303 and 304, first comparators 305 and 306, first selectors 307 and 308, second comparator 309 and a second selector 310. Adder 301 reads the path metric M₁ Similarly, adder 303 reads the path metric M₂ The control signals from comparators 305 and 306 are further applied to a path memory control unit 100 to control the path memory 101 with respect to nodes S₁ The two highest metric sums are compared in comparator 309 and the highest of these sums is selected and passed through second selector 310 to a metric memory 81 of node S₁ The second ACS unit 40 comprises adders 401, 402, 403 and 404, first selectors 407 and 408, comparator 409 and selector 410. Adder 401 reads the path metric M₁ The third ACS unit 50, shown in Fig. 4C, is identical in construction to the first ACS unit 30. The functions of adders 501 and 502 are similar to those of adders 301 and 302 with the exception that they receive path metric sums Z₁₂ The control signals from comparators 505 and 506 are further applied to path memory control unit 100 to control the path memory 101 with respect to nodes S₂ The fourth ACS unit 60 is identical to the second ACS unit 40. The functions of adders 601 and 602 are similar to those of adders 401 and 402 with the exception that they receive path metric sums Z₁₂ The time τ required to complete the above described operations is given as follows Summarizing the operation of the present invention, the error correcting apparatus comprises a source 71 74, 81 84 of path metrics associated respectively with states S₁, S₂, S₃, S₄ in a given time slot t j 1 of a Viterbi trellis diagram, the path metrics M First adder means 301 304, 501 504 is coupled to the source and to the branch metric generating means for adding the updated path metrics to a respective one of the branch metric sums to provide a pair of second sums and second adder means 401 404, 601 604 is coupled to the source and the branch metric generating means for adding the updated path metrics to a respective one of the branch metric sums to provide a pair of third sums. The second and third sums have common branches entering an intermediate time slot state of the trellis diagram and individual branches diverging from the intermediate time slot state to the states of the later time slot. First comparing means 305, 306, 505, 506 is coupled to the first adder means for comparing the second sums of each pair to provide a plurality of first control signals each representing the highest of the compared second sums and the highest of the third sums. First selecting means 307, 308, 407, 408, 507, 508, 607, 608 is coupled to the first comparing means 305, 306, 505, 506 for selecting the highest second sums and selecting the highest third sums in response to the first control signals. Second comparing means 309, 409, 509, 609 is coupled to the first selecting means 307, 308, 407, 408, 507, 508, 607, 608 for comparing the selected second sums to provide a plurality of second control signals each representing the highest of the selected highest second sums and comparing the selected third sums to provide a plurality of third control signals each representing the highest of the selected highest third sums. Further provided is a second selecting means 310, 410, 510, 610 coupled to the second comparing means 309, 409, 509, 609 for selecting the highest selected second sums in response to the second control signals for generating first new path metrics and selecting the highest selected third sums in response to the third control signals for generating second new path metrics, the first and second new path metrics being applied to the source for updating previous path metrics. Storage means 100, 101 is coupled to the first and second comparing means for storing data indicating the paths associated with the sums selected in response to the first, second and third control signals. It will be seen from the foregoing that the maximum bit rate can be further increased by simultaneously processing the metrics on three or more consecutive time slots. The foregoing description shows only preferred embodiments of the present invention. Various modifications are apparent to those skilled in the art without departing from the the present invention which is only limited by the appended claims. Therefore, the embodiments shown and described are only illustrative, not restrictive.