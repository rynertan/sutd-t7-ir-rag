# Automatic vending machine.

## Abstract
Described is an automatic vending machine with a microcomputer to control it for serving plural kinds of commodities prepared from plural kinds of material. A value proportional to the quantity of the commodity to be served and component ratios between the plural materials to be fed are supplied as control inputs to the microcomputer. A list of numerical data is stored in the microcomputer. The micro computer calculates a set of values of necessary material feed durations according to the supplied control inputs and the stored numerical data. A control device of the vending machine performs to feed the plural materials for those respective calculated durations, so that a commodity is prepared from the fed materials and then served.

## Claims
CLAIMS 1. An automatic vending machine with a microcomputer to control it for serving plural kinds of commodities prepared from plural kinds of materials, CHARACTERIZED in that a value proportional to the quantity of the commodity to be served and component ratios between the plural materials to be fed are supplied as control inputs to the microcomputer a list of numerical data is stored in the microcomputer the microcomputer calculates a set of values of necessary material feed durations according to the supplied control inputs and the stored numerical data and a control device of the vending machine performs to feed the plural materials for those respective calculated durations, so that a commodity is prepared from the fed materials and then served. 2. The machine as set forth in claim 1, CHARACTERIZED in that additional commands to change the quantity of the commodity to be served and a signal to represent the size of a container to serve the commodity are also supplied as control inputs to microcomputer. 3. The machine as set forth in claim 1 or 2, wherein more than two kinds of materials are used to prepare a commodity, and CHARACTERIZED in that the duration required for feeding one of the materials is determined by subtracting two short time intervals from the sum of the calculated durations for feeding the other two of the materials. 4. The machine as set forth in claim 3, wherein one of the materials is sirup and other two of them are carbonated water and plain cold water, and CHARACTERIZED in that the two short time intervals are put before and after the duration of feeding the sirup, to serve for good mixing of the materials.

## Description
Automatic vending machineDETAILED DESCRIPTION OF THE INVENTION This invention relates to an automatic vending machine with a microcomputer used as a control for serving plural kinds of commodities prepared from plural kinds of materials, and specifically relates to the provision of an economical system wherein a smaller amount of control input information to the microcomputer can suffice for preparation of materials for a variety of commodities. As a concrete example, let us take a case of vending Cocacola , a well known carbonated beverage.For that beverage, the materials are carbonated water, plain cold water and sirup. They are mixed under certain conditions and served. The conditions are, customarily, predetermined values of the carbonation rate and theBrix index. The carbonation rate is the ratio in quantity between carbonated water and plain cold water to be mixed. The Brix index is another ratio between the quantity of carbonated water plus plain cold water and the quantity of sirup to be mixed. By predetermining both the ratios, all the component ratios can be given.Customarily, in order to feed the materials in respective quantities at the predetermined ratios, operation involves predetermining the setting of ratios among the durations of periods of feeding the materials. Further, in an actual automatic vending machine, its control must have the material feed ratio control function, together with other various functions, to detect, check and guide deposited coins, to supply cups of beverages, and to serve ice if required.Preferably, a microcomputer of the vending machine should serve for all such various functions. In some known vending machines, a sequencer with a disc assembly is used for those control functions, wherein adjusting positions of discs in the sequencer serves to adjust the durations of feeding the materials. In a vending machine of large capability for serving a greater variety of commodities, however, a disc type sequencer cannot satisfy a requirement for the great variety of control and adjusting performances, while being of economical manufacture. So, an electronic control with a microcomputer is used generally for such a purpose, instead. Either when using the disc type sequencer or the microcomputer, the control performance takes place mainly by adjusting the durations of operations such as operations of feeding materials. That is because directly detecting and controlling feed quantities of materials is expensive due to its requiring costly sensors and, in the case of the microcomputer, also a complicated control program, while duration control is rather easy and simple. Therefore, devices to supply the materials such as sirup, carbonated water and cold water should be provided with mechanisms to keep respective material feed quantities constant per unit period, and to have the ratios between those feed quantities per unit period adjustable by some mechanical means, in general.Such adjustment of feed quantities for a unit of vend, in the case of a microcomputer , may be done in a manner whereby on off operations of external contacts supply control information, in response to which the microcomputer directly regulates the material feed durations. That control, even for serving a single kind of a commodity, when it is a beverage, often requires the material feed durations to be variable, in order to change a serving quantity i.e. change the size of the cup of beverage, and to change an ice supply. So, to serve various kinds of beverages in various component ratios, the microcomputer must be supplied with a great many varieties of input signals, and it is necessary to change the settings of operating durations of various parts of control or computing equipment whenever the serving quantity for a cup or the component ratios are to be varied. Such requirements for the equipment and its operation result in increasing costs of manufacture and maintenance. That is the drawback of the usual technique. The present invention is intended to eliminate the above drawback, and to provide an automatic vending machine with a microcomputer to control it, for serving plural kinds of commodities inclusive of beverages or the like prepared from plural kinds of materials, by dispensing with operations of separately setting the respective material feed durations in order to set component ratios but supplying the microcomputer with other kinds of control inputs such as the values ofBrix index and carbonation rate that indicate the component ratios for the materials thus minimizing the variety of microcomputer control inputs, to simplify the configuration of the input circuit supplying the control inputs, with a minimized manufacturing cost of the control system of the vending machine, with its adequate applicability to operations to change a serving quantity of a cup of beverage, and with minimized costs for maintenance of parts for setting of the control system or the like. Such objects of the invention, related to an automatic vending machine with a microcomputer to control it for serving plural kinds of commodities prepared from plural kinds of materials, are attained in that a value proportional to the quantity of the commodity to be served, component ratios between the plural materials to be fed, commands if any to change the quantity of the commodity to be served, and a signal representing the size of a cup or container to serve the commodity, are supplied as control inputs to the microcomputer, a list of numerical data is stored in the microcomputer, the microcomputer works out a set of values of necessary material feed durations for a unit of vend according to the above supplied control inputs and the stored numerical data list, and a control of the vending machine performs to feed the plural materials for those worked out respective durations and then a commodity is prepared from the fed materials and served. The commands to change the quantity of the commodity to be served are, for example, those specifying whether the commodity should be served with or without ice. The following description will be read in conjunction with the attached drawings, in which Fig. 1 is an example of an operating chart of feeding the materials according to the technique of the invention,Fig. 2 is a flow chart showing an embodiment of such a duration calculating process according to the invention. Lines from left to right indicate the elapse of time.A first duration TA is the duration of an operation to feed, for a unit of vend, a first material, which is carbonated water here. A second duration TB is the duration for feeding a second material, which is plain cold water. A third duration TC is the duration for feeding a third material, which is sirup.The third duration TC has a length close to the sum of the lengths of the first and second durations TA and TB, but they are so arranged that the third duration TC begins later, by a certain interval Tf, than the beginning of the first duration TA more exactly, than the earlier of the respective beginnings of the two durations TA and TB , and is ended earlier, by another certain interval Tg, than the end of the second duration TB more exactly, than the later of the respective ends of the two durations TA and TB . Such arrangement in respect of duration is intended for good mixing of sirup with carbonated and cold water, in view of the physical property of sirup. The lengths of the durations TA, TB and TC are worked out in the microcomputer, according to a certain process. In the invention, the lengths of the durations TA, TB and TC themselves are not control inputs, but they are calculated in the microcomputer, which is supplied with smaller numbers of control inputs of other kinds. Fig. 2 is a flow chart showing an embodiment of such a duration calculating process of the invention. In this embodiment, it is provided that the Brix index, which gives the ratio between TC and TA plus TB here, may not be optional for customers buying the commodities, but the carbonation rate, which gives the ratio betweenTA and TB here, should be optional other optional factors are several kinds of commodities, two kinds of cup sizes, and supply with or without ice. The microcomputer is provided with a memory, in which a list of numerical data is stored beforehand. The list indicates a variety of lengths of time LT corresponding to combinations of designative digital indexes DDI and cup sizes. The designative digital indexes serve to communicate information indicating the kinds of commodities. If they are to be carried by signals of four bits in binary code, the number of such digital indexes should not be more than 16, and then they may be a set of indexes from No. 0 through No. 15, for example.Values of those lengths of time LT are used to give a duration consisting of the first and second material feed durations TA and TB, as mentioned later. Such lenghts of time are naturally within a certain appropriate range. In most cases, accuracy to two decimal digits e.g. x.x sec. is required for representation of such duration. The stored data in the memory are of course changeable when required.Such data to be stored as to those lengths of time may be as follows, for example EMI6.1 tb Designative SEP digital SEP Duration SEP LT SEP in SEP second tb SEP index SEP DDI tb SEP for SEP a SEP large SEP cup SEP for SEP a SEP small SEP cup SEP for SEP a SEP small SEP cup SEP tb SEP 0 SEP 3.0 SEP 2.0 tb SEP 1 SEP 3.1 SEP 2.1 tb SEP 2 SEP 3.2 SEP 2.2 tb SEP 3 SEP 3.3 SEP 2.3 tb SEP 4 SEP 3.4 SEP 2.4 tb SEP 5 SEP 3.5 SEP 2.5 tb SEP 6 SEP 3.6 SEP 2.6 tb SEP 7 SEP 3.7 SEP 2.7 tb SEP 15 SEP .4.5 SEP 3.5 tb Here, the number of varieties of cup sizes is two, which can be represented by signals of one bit in binary code. Also stored in the memory of the microcomputer are some other data, for changing the carbonation rate to a selected value. In general, providing a range of selection of about 8 kinds of changeable values of the carbonation rate is adequate for a usual vending machine.So, signals to communicate such selection to the microcomputer can be of 3 bits in binary code, produced for example by three digital switches. A memory region for storing data in respect of this rate is fairly small. Now, when a customer has selected a commodity, by manipulating a certain mechanism of the vending machine, it produces a signal carrying one designative digital index DDI, which is supplied to the microcomputer. Also, the customer selects one of the two cup sizes, by manipulating another certain mechanism, which produces another signal to be supplied to the microcomputer. Then, the microcomputer reads out, from the memory, one of the time lenghts LT determined by the digital index DDI and the cup size. Top to 3rd block in Fig. 2 . The readout value of the length of time LT represents a length comprising the sum of the first and second durations TA and TB necessary for serving the selected commodity. The customer further selects whether the commodity is to be served with or without ice 4th block in Fig. 2 .In case of the ice supply being required, the summed quantity of water, i.e. the sum of carbonated water and plain cold water quantities to be supplied, should be reduced by an amount corresponding to the amount or mass of the ice, and therefore the above read out length of time LT is reduced by the proportion corresponding to that amount 5th block in Fig. 2 . In this embodiment, this reduction is set as a predetermined length of time, i.e. it is provided that the quantity of ice supplied for a cup is a certain constant one. If no ice supply is required, the above read out value of the length of time LT is passed to the successive steps, as it is. The next step 6th block in Fig. 2 is reading out the selection of values of the carbonation rate i.e. the ratio betweenTA and TB . One of such values is read out from the memory according to the signal communicating its selection.Now, both the values of LT i.e. TA TB, and of carbonation rate i.e. TA TB have been given. So, the values of TA andTB can both be worked out t7th block in Fig. 2 . Then, a value of the third duration TC of feeding the other material, i.e. sirup, can be calculated by TC TAsTB Tf Tg. Here, Tf and T are predetermined time g intervals to be put before and after the duration TC in order to have good mixing of sirup, as mentioned. Such calculations of the material feed durations TA, and T are such easy ones as can be surely performed B C by an ordinary microcomputer. Thus, in the embodiment, the control inputs to the microcomputer consist of signals of 8 bits in total in binary code, except the signal to indicate the requirement for supply with or without ice 4 bits for communicating the designative digital index to represent the kinds of commodities 1 bit for indicating cup sizes and 3 bits for selection of carbonation ratio. This means a very great reduction in the number of bits of control input signals, as compared with conventional techniques an example of which will be read later .The manufacturing cost of control equipment using a microcomputer is substantially dependent on the extent of complexity of the control input circuit to the microcomputer rather than on the cost of the microcomputer itself . Therefore, it can be clearly found that the invention greatly contributes producing economical equipment of the kind. In the above embodiment, changing the value of theBrix index is to be done by varying the opening of a valve, so it is not part of the automatic functions of control by the microcomputer. And strictly speaking, the value of the Brix index may vary a little with changes in the values of the sum of the durations TA and TB, since the intervals Tf and Tg remain unvaried.In particular, changing the condition of supply with or without ice can cause an appreciable change in the summed duration TA TB, and therefore the Brix index.In practice, however, the summed duration TA TB is incomparably longer than the sum of those time intervalsTf and Tg, so that the above variation in Brix index does not substantially affect the quality of the beverage to be served. The variation therein is in practice allowable. Also, if a wider variety in selection of the carbonation rate than its 8 kinds mentioned above is required, it can be covered, in most cases, by using signals of 4 bits in binary code to communicate the selection, so that it does not mean so significant an increase in the microcomputer memory inputs nor its capacity. For the purpose of comparison of the number of bits required for control input signals, an example of conventional techniques will be read below. Suppose that values of those material feed durations TA, TB and TC have to be set by some means outside of a microcomputer and then supplied to it as control inputs, and that accuracy to two decimal digits is also required for representing them. Information of two decimal digits such as x.x sec requires 8 bits in binary code.For the three material feed durations TA, TB and Tc, the number of bits required is trebled. Also, the options of cup sizes and supply with or without ice are to be communicated as control inputs to the microcomputer. Thus, the required number of bits of signals is 3 x 8 for each of 4 situations, i.e. for each situation of large or small cup size, with or without ice supply. That is 3 x 8 x 4 96 bits in total in binary code, though it is a simple arithmetical operation in the microcomputer. Such a large number of signals in the microcomputer input circuit results in a very large number of input signal setting elements, causing the equipment to be very expensive. On the contrary, in such a case, the invention requires only 9 bits of input signals inclusive of the signal for communicating whether to serve with or without ice as above mentioned. That is a remarkable improvement. As to a actual circuit around the microcomputer to be used in the invention, an example of that can be similar to that shown in Fig. 5 with Fig. 5a of our parallel EPC application No ..... filed on the same day representativets file No. 81 8717 EPC .