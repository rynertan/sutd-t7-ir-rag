# VIDEO SIGNAL PROCESSING SYSTEM

## Claims
Videosignal Aufbereitungssystem zur Verarbeitung von zusammengesetzten Videosignalen mit einem Farbsignalanteil, wobei Videosignale in einem abgetasteten Datenformat als bei regelmäßig wiederkehrenden Phasen des Farbsignalanteils abgetastete Videosignal Samples erscheinen, mit einer Quelle 12 von Abtasttaktsignalen 4F

## Description
This invention relates to a video signal processing systems and more particularly to such system employing apparatus for converting video samples synchronized to a first e.g., burst locked clock to video samples synchronized to a second e.g., horizontal sync locked clock. Digital video signal processing systems such as digital TV receivers typically convert analog video signals to digital samples with a sampling clock which is synchronous with the burst component of the video signal. Having the sampling clock, and therefore the digital video samples, synchronous with burst facilitates demodulation of the color component of composite video and color signal processing. It is desirable for certain receiver enhancements such as double rate scan progressive scan to have the samples phase locked to the line frequency. For standard NTSC signals, the burst locked sampling clock is also synchronized to the line frequency. However, burst locked digital video samples of non standard signals and PAL video signals are not locked to the line frequency. Thus, there is a need for apparatus to translate or convert burst locked digital video samples to line locked samples. In making the translation, a correspondence between sample phase and line locked clock phase must be maintained if conventional digital color decoding apparatus is to be utilized. US Patent US A 4,109,276 discloses video synchronizer apparatus in which analog video information is converted to digital form utilizing sampling clock signals locked to the burst component of an internal video signal source, written into a memory under control of said internal source burst locked clock signals, and subsequently read out of the memory under control of other clock signals locked to the burst component of a non synchronous external reference source. The present invention is concerned with the conversion of composite video signal samples developed with the use of burst locked sampling clock signals to otherwise locked samples, utilizing a memory into which composite video signal samples are written under control of the burst locked sampling clock signals and from which the video signal samples are read out under the control of otherwise locked clock signals, wherein sample clock digital codes representative of respective sampling phases are stored with the video signal samples in the memory so as to facilitate subsequent processing of the color component of the stored composite video signals. According to the present invention a video signal processing system for processing composite video signals including a color component, wherein video signals appear in sampled data format as video signal samples sampled at regularly recurring phases of said color component, comprising a source of sample clock signals which are synchronous with said video signal samples, is characterized by a converter for converting said video signal samples synchronized to said sample clock signals to video signal samples synchronized to processing clock signals, this converter comprising means coupled to said source of sample clock signals for providing sample clock digital codes corresponding to respective sampling phases of said video samples a source of processing clock signals asynchronous with said sample clock signals and synchronous with a synchronizing component included in said video signals and memory means having an input port for receiving said video signal samples and said sample clock digital codes, for storing said video signal samples and respective associated digital codes synchronously with said sample clock signals, and for reading said stored video signal samples and associated digital codes synchronously with said processing clock signals, wherein said storing and reading operations occur concurrently. In the accompanying drawings FIGURE 1 shows a portion of a color burst reference signal BURST and the relationship of a phase locked, four times subcarrier clock 4F Color burst corresponds to a B Y color difference signal and one of the sampling points occurs at the peak of burst. The nextmost three successive sampling points occur at 90 phase intervals. As is known by digital TV system designers, these latter three sampling points correspond to R Y , B Y and R Y color difference samples respectively. Having samples successively corresponding to B Y , R Y , B Y and R Y samples permits separation of the quadrature components of digital chrominance signal by demultiplexing the interleaved samples. Alternatively, quadrature component separation and demodulation may be achieved by selecting only two of each sequence of four interleaved samples. For example, a demultiplexer which selects only the R Y samples and the B Y samples and produces them on respective output ports yields demodulated R Y and B Y color difference signals. The R Y In a digital TV system which samples signal with a burst locked clock and then processes the samples with a line locked clock which is asynchronous with the burst locked clock there is little or no phase coherence between the sample phases and the processing clock phases. In general, this is of no consequence in processing the luminance component of video signals. However, it precludes, for example, the simplified demodulation of the chrominance component of video signals. However, the processing circuitry which operates with the asynchronous clock can, in general, be organized with conventional color signal processing circuitry if the samples are provided with sample clock phase information or if the burst clock to asynchronous clock conversion apparatus provides sample phase to clock phase coherence. Hereafter the asynchronous clock will be referred to as the line locked clock. FIGURE 2 illustrates a portion of a video signal processing system which converts analog video signal to pulse code modulated PCM binary format synchronously with sampling clock signals phase locked to color burst and processes the PCM codewords in synchronism with clock signals phase locked to e.g. the horizontal synchronization component of the video signal. In this system the sampling clock phase is encoded. Clock phase codewords are concatenated with the PCM video sample codewords for use by the system to relate sample phase to the processing system clock phase. In the following figures, narrow arrows generally indicate single conductor connections unless depicted with a slash and a number adjacent the slash to indicate that number of parallel connections. Wide arrows designate multiwire busses. In FIGURE 2, baseband composite video signal from e.g. a tuner detector is applied at terminal 10 to the analog input terminal of analog to digital converter ADC 11. ADC 11 responsive to a sampling clock from a burst locked clock generator 12 produces PCM representations of the analog signal applied to its input. The PCM samples from ADC 11 occur at four times color subcarrier rate and are phase locked to the subcarrier such that samples of the chroma component of the composite video occur in e.g. repeating interleaved sequences R Y Samples from ADC 11 are applied to the burst locked clock generator 12, which develops the 4 times subcarrier sampling clock 4F The three clock signals generated by clock generator 12 are applied to a sample clock phase encoder 13. Phase encoder 13 develops binary codewords corresponding to the phase of the current sampling clock cycle. For example, sampling clock binary codes corresponding to samples taken along the B Y , R Y , B Y and R Y signal axis may comprise the codewords 00, 01, 10 and 11 respectively. This correspondence is indicated in FIGURE 1. FIGURE 3 illustrates in block diagram form one embodiment of the burst locked clock generator 12 and a logic schematic diagram of the clock phase encoder 13. The burst locked clock generator is of known design. In FIGURE 3, the ADC is part of the phase locked loop and, therefore, the phase detector is a binary device. It will be readily appreciated that the phase locked loop may be arranged to be responsive to the analog signal at terminal 10. The clock phase encoder shown in FIGURE 3 is one example of circuitry which may be employed for this function. The AND and OR gates of phase encoder 13 reduce the 4F Note that the F Referring again to FIGURE 2, PCM samples from ADC 11 are applied to a buffer memory 17 which effects conversion of the burst locked samples to the line locked sample rate. Buffer memory 17 is one of the class of memory systems generically known as a first in first out or FIFO memory. An example of a FIFO for use in the FIGURE 2 circuit will be described hereinafter with reference to FIGURE 7. Buffer memory 17 is capable of writing data into storage locations at one rate and simultaneously reading data from storage locations at a second rate asynchronous to the first rate. Write address counter 15, responsive to the 4F Read address codewords, developed in a read address counter 16, are applied to a read address input port R A of buffer memory 17. Responsive to the read address codewords, buffer memory 17 outputs the concatenated PCM video clock phase codewords at a rate synchronous with the generation of the read address codewords. The read address counter develops the read address codewords responsive to a clock signal 4F Alternatively, the sample rate from ADC 11 may be transcoded to a lower rate before applying the samples to the buffer memory 17. The new lower sample rate F The line locked clock generator 14 responds to the horizontal synchronizing components of the analog composite video signal at terminal 10 to develop a clock signal 4F Clock generator 14 also develops a reset signal, R, which periodically resets the address counters 15 and 16 and the buffer memory 17. The frequency of the reset pulses depends upon the expected frequency difference between clocks 4F Video samples from buffer memory 17 are applied to the video signal processing circuitry 18 wherein they are synchronously processed at the 4F Except for color signal processing, digital video signal processing is generally insensitive to the phase of the sampling clock. The color signal processing is also insensitive to clock phase except for separation and demodulation of the quadrature related color difference signals. FIGURE 4 illustrates a color difference signal separator and demodulator which may be included in the digital video signal processor 18 of FIGURE 2. In FIGURE 4 concatenated samples from buffer memory 17, on bus 19, are segregated into video samples which are applied to a digital bandpass filter 25 and into sample clock phase codes which are applied to a delay element 27. The digital bandpass filter 25 may be a finite impulse response filter arranged to pass the portion of the frequency spectrum occupied by the chrominance component of composite video signal to the substantial exclusion of the luminance component. Bandpass filter 25 is sequenced by the 4F Chrominance samples from filter 25 are clocked into latch 26 by the 4F Delay element 27 coupled between bus 19 and decoder 28 provides compensating delay to properly align the control signals from decoder 28 with the samples provided by latch 26. The illustrated decoder 28 is arranged to recognize the sampling clock phase codewords illustrated in FIGURE 1. In particular, the R Y and B Y sample phase codes are respectively 01 and 10. AND gate 34 outputs a logic one only when the logic states applied to its two input terminals is a 01 code and AND gate 33 outputs a logic one only when the logic states on its two input terminals is a 10 code. The output terminals of AND gates 33 and 34 are respectively coupled via AND gates 31 and 32 to the clock input terminals of latches 30 and 29. A 4F If separation but not demodulation of the color difference signals is desired, the sample clock phases may be encoded with a single bit codeword corresponding to the logic states of the 2F FIGURE 5 is an alternative arrangement of the FIGURE 2 clock conversion system for use with a comb filter. Elements of FIGURE 5 designated with the same numerals as the FIGURE 2 elements perform like functions. Comb filters require samples which occur in precise line sequences. In general, the response of a comb filter will be deleteriously affected if samples are dropped due to a clock rate conversion process. Therefore, comb filtering should occur ahead of the clock rate conversion. However, if the memory 17 is reset on a line by line basis so that particular samples are aligned line to line, a comb filter may be positioned after the memory. The comb filter provides separated chrominance and luminance signals requiring that the buffer memory 17 which follows the comb filter contain parallel memory sections to accommodate the two signals. The parallel memories may, however, be controlled in parallel by the same write and read address codes. The construction of clock phase encoder 13 depends on the particular comb filter arrangement employed. If the chrominance signal produced by comb filter 20 is in phase with the chrominance component of composite video applied to the input port of comb filter 20, clock phase encoder 13 will be identical to clock phase encoder 13. Alternatively, if comb filter 20 produces a chrominance signal which is, e.g. 180 out of phase with the input chrominance component, encoder 13 must be arranged to accommodate the difference. For example, the encoder may be arranged to generate the codewords 11, 00, 01 and 10 for the input sample phases R Y , B Y , R Y and B Y respectively, to compensate for the 180 phase difference. FIGURE 6 is a further embodiment wherein samples output by the buffer memory are appropriately phased with the processing clock 4F In FIGURE 6, the line locked clock generator 14 is configured to produce the additional clock signals 2F In FIGURE 6, the sample phase and 4F A table of correction values programmed into ROM 51 is shown for all combinations of sample and clock phase codes. This table assumes that buffer memory 17 contains eight memory locations designated zero through seven. The write address codes from address counter 15 and the read address codes from counter 16 continuously recycle through the address values zero to seven. Thus, if the phase of the line locked clock 4F ROM 51 may be programmed with alternative correction values. For example, the correction values may be selected to always increase the read address codeword when the phase of the 4F Preferably, ROM 51 will be conditioned to correct the read addresses during video signal intervals when no video information is present, i.e. during horizontal blanking periods. This may be accomplished by generating an appropriate enable signal in clock generator 14 and applying it to an enable input to ROM 51. In this instance, the same correction value will be applied to all read addresses between occurrences of the enabling signal. Note that the enabling signal may be at a rate different from the reset control applied to the address counters. It will be readily appreciated that address corrections may be applied to the write address codewords from counter 15 rather than to read address codewords from counter 16, or a combination of corrections to both the read and write codewords. In addition, address correction may be effected by selectively inhibiting or augmenting the clock pulses input to the read and or write address counters. An alternative arrangement of the FIGURE 6 system wherein the buffer memory capacity is an integral multiple of the number of sampling phases may have the sampling clock phase codes applied directly from encoder 13 to the address input of ROM 51. This is indicated by the bus 54 drawn with dashed lines. A further embodiment, where it is desired to convert burst locked samples of a standard PAL video signal to line locked samples wherein the line locked clock 4F FIGURE 7 is an illustrative example of a buffer memory for use in the aforedescribed systems. This memory is a parallel in parallel out FIFO memory. In the figure, input samples available on the DATA IN bus are applied in parallel to the data input ports, D, of latches 102 109. Respective input samples are loaded in succession into respective latches 102 109 responsive to latching signals from decoder 101 which input enables one latch per sample period. For monotonically increasing write address values, decoder 101 successively enables each of the latches and then recycles back to the first latch, etc. The output ports of latches 102 109 are connected in parallel to the output port DATA OUT. The respective latch output ports are three state outputs so that only the latch 102 109 receiving an output enable pulse provides data to the DATA OUT port. The latches 102 109 are output enabled responsive to the one of eight decoder 100, one per sample period. Decoder 110 sequences through the respective latches responsive to binary read address values provided by the read address counter 111. Decoders 101 and 110 may be of the type exemplified by the MSI integrated circuit SN74LS138. Latches 102 109 may be of the type exemplified by the MSI integrated circuit SN74LS374. It is noted that the SN74LS374 is an eight bit device however, if more data bits are required, additional devices may be paralleled with each of the latches 102 109 to accommodate the additional data bits.