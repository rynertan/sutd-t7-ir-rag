# ROBOT CONTROL SYSTEM.

## Abstract
In order to hold an object for example, a work piece at a point P₂ by the movable portion of a robot, a robot control unit RBC composed of a micro computer reads out the position control data V₂, R₂, Z₂, ϑ₂ of the point P₂ and feeds the data to a pulse distributing circuit PDC . An axis servo circuit SVC receives the distributed pulses and drives axis motors MR, MZ, Mϑ so as to move the robot to the point P₂. When signals WDS₁, WDS₂ indicating the passing of the robot are generated from detecting sensors, the robot control unit calculates the coordinates of the center of the work in comparison with the coordinates of the present position of the robot and feeds the obtained correction data to the pulse distributing circuit so as to correct the action of the robot.

## Claims
What is claimed is 1 In a robot control system wherein a robot is operated in accordance with teaching data, a robot control system characterized in that a detecting sensor is disposed on a moving part of the robot or in the vicinity of a path along which the robot moves, that on the basis of a detection signal generated by said detecting sensor and indicating passage of the robot, actual position coordinate values of the robot at the time of the passage are compared with predetermined reference coordinate values so as to obtain compensating data for the teaching data, and that the robot operation is compensated on the basis of said compensating data. 2 A robot control system as defined in Claim 1, characterized in that the teaching data is partly substitued by said compensating data. 3 A robot control system as defined in Claim 1, characterized in that said detecting sensor includes a light emitting element, and a light receiving element which receives a light beam of said light emitting element.

## Description
DESCRIPTION ROBOT CONTROL SYSTEM Technical Field The present invention relates to a robot control system, and more particularly to a robot control system in which a workpiece or the like can be gripped correctly even when it is not located at a proper position. Background Art In a playback type industiral robot, serving operations are taught by the use of a teaching box, and the taught contents hereinbelow, termed robot command data are stored in a memory within a control unit, in advance. Each time a service request is received from fhebmachine tool side, the series of robot command data are successively read out so as to repeatedly perform the service operations for the machine tool. The robot command data consist of information on the points at which the services are to be performed, operating speeds, and service codes for instructing the controls of a hand at the points, the exchange of signals with the machine tool slide, etc. In general, the teaching is carried out in the order of 1 setting a memory address at which the robot command data is to be stored. 2 positioning by jog feed manual feed , 3 setting the positional information and speed command value of the point, and 4 setting the robot service code. By repeating the sequence of Items 1 to 4 , the series of robot motions for the machine tool are taught.Thus, the operations so proceed that the hand of the robot is moved from the current position PO to the first point P1, that it is subsequently moved to the point P2, where the workpiece is located, to grip the workpiece, and that is it thereafter moved toward the predetermined position P3 while gripping the workpiece. The speeds of movement to the respective points Pi, P2 and P3 and the data corresponding to the positional coordinates of the respective points are stored in the data memory of the robot controller. The hand of the industrial robot is provided at its front end with a gripper for gripping the workpiece.It grips the workpiece WK by means of the gripper, and carries the workpiece to a different position via a predetermined path specified by the teaching data. If, whenever the workpiece gripper repeats the above operations,the gripping center thereof comes to a prescribed position with respect to the workpiece, it can stably grip the workpiece. However, in such a case where a large number of worlcpieces are piled up by manual labor, they are not always located at correct position, and their centers are not always aligned exactly. In this case, as regards workpieces of light weight, even when the center of the workpiece and the gripping center of the gripper disagree to some extent, the workpiece is fittingly gripped by fingers because the former moves when grasped by the latter.On the other hand, as regards workpieces of heavy weight, the workpiece cannot be moved by the gripping force of the gripper. Eventually, the gripper cannot grip the workpiece perfectly and might drop it. When positioning chuck faces, etc. of which a high positioning accuracy is required, an error may occur in which improper machining is performed because the predetermined accuracy is not achieved. Disclosure of the Invention The present invention has for its object to provide a robot control system in which even when the position of a workpiece, for example, deviates to some extent, the workpiece can be properly gripped by compensating teaching data. Concretely, in a robot control system wherein a robot is operated in accordance with teaching data, in moving the movable part of the robot toward the object of robot motion for example, the operation.of gripping workpiece , a detecting sensor is disposed on the movable part of the robot or in the vicinity of a path along which the robot moves, the coordinate values of the actual position of the robot are confirmed on the basis of a detection signal which is delivered by the detecting sensor upon sensing the object of the robot motion, these coordinate values and predetermined reference coordinate values taught are subjected to comparative calculations by an arithmetic unit and items of compensation data which are expressed as the resulting differences between the actual position coordinate values and the reference coordinate values are supplied as compensation signals for the robot motion, whereby the movable part of the robot can be reliably moved to the central position of the object of the robot motion. Moreover, in a case where similar robot motions are to be repeated, the compensation data obtained by the calculations in one motion is substituted for the teaching data in a robot controller, whereby the second and succeeding robot motions can be carried out more smoothly. Brief Description of the Drawings Figure 1 is an explanatory view for describing robot motion, Figure 2 is an explanatory view for describing robot command data teaching data , Figure 3 is a front view of an industrial robot, Figure 4 is a perspective view of a workpiece gripper, Figure 5 is an explanatory view of the owrkpiece gripper, Figure 6 shows explanatory views for describing the sequence of gripping a workpiece according to the present invention, Figure 7 is a flow diagram, and Figure 8 is a block diagram for realizing the present invention. Best Node for Carrying Out the Invention In order to describe the present invention in greater detail, an embodiment of the present invention will now be described with reference to the drawings. Figure 1 illustrates robot motion. Let it be supposed that the hand HD of a robot lying at any position P is moved along a path of points PO fizz P1 yP2 iP3 0 and grips a workpiece WK at the point P2 in accordance 2 with robot command data. Then, the teaching data becomes as indicated in Figure 2 in which Rit Zi, Ei denote the coordinates of the respective points Pi i 1, 2, 3 , Vi denotes the speed of the movement from Pi 1 to Pi, and Soo denotes a service code for gripping the workpiece.The teaching data is composed of point data PD1, PD2, PD3 at the respective points P1, P2, P3 ..., and is stored in a data memory within a robot controller. Using the robot controller of such type, the present invention provides a robot control system in which, even when the workpiece or the like can be gripped precisely even when it is not located at a proper position. Figure 3 is a front view showing an industrial robot to which the robot control system according to the present invention is applied. Preferring to the figure, numeral 1 designates a base, numeral 2 a robot body, numeral 3 a. threaded rod for moving the robot body 2 in the vertical direction, numeral 4 a motor for rotating the threaded rod 3, numeral 5 each guide bar for guiding the vertical movement of the robot body. 2, numeral 6 a turntable for rotating the robot body 2, and numeral 7 an arm which extends and shortens in the longitudinal direction thereof.Numeral 8 designates a wrist mechanism, and numeral 9 a workpiece gripper. As clearly shown in Figure 4, the workpiece gripper 9 is provided at its front end with two fingers 10 and 11, which are guided by two guide rods 12 and 13 to come closer to or further away from each other, thereby to grip or release a workpiece. In addition, outer frames 14 and 15 are respectively disposed outside the fingers 10 and 11. Two light emitting elements 16a and 17a are disposed inside the front end of the outer frame 14, while two light receiving elements 16b and 17b are disposed inside the front end of the outer frame 15. The elements 16a, 16b 17a, 17b constitute a workpiece detecting sensor. The light emitting elements 16a and 17a are provided with lens mechanisms. Light emitted from the light emitting element 16a is condensed by the lens mechanism into a fine beam which reaches the light receiving element 16b, while light emitted from the light emitting element 17a is condensed by the lens mechanism into a fine beam which reaches the light receiving element 17b. As illustrated in Figure 5, the light beams 16c and 17c emergent from he respective light emitting elements 16a and 17a intersect on the gripping center line y of the workpiece gripper 9 in a manner to define an angle 6 therebetween. Now, a compensating sequence in which the gripper 9 properly grips a positionally deviated workpiece will be described in accordance with Figures 6 and 7. Figure 6 a illustrates the situation in which the gripper 9 approaches the workpiece 18 at a speed v along the gripping center line y as the center of the workpiece 18 and the gripping center line y of the workpiece gripper 9 deviate. When the gripper 9 has come close to the workpiece 18 on the basis of the teaching data, the light beams from the light emitting elements 16a and 17a are blocked by the workpiece 18 as illustrated in Figure 6 b . The blocking of the light beams 16c and 17c is immediately detected by the light receiving elements 16b and 17b, and detection signals are provided. When both the light beams 16c and 17c have been blocked, whether or or not the actual position P R , Z , 8 of the robot aaaa coincides with a predetermined reference point P Rr, Zr, r is decided by the robot controller. When they are coincident, the gripper 9 is moved as it stands, without compensating the teaching data.The position of the reference point Pr is the gripping center position robot position at the time when both the light beams from the light emitting elements 16a and 17a have been blocked by the workpiece 18 in the case where the workpiece is located at the correct position. On the other hand, when the actual position Pa and the reference point Pr are not coincident Figure 6 b , the coordinates of the center of the workpiece are calculated. Now, let the y axis be the gripping center line of the workpiece 18, and the x axis be a straight line which is perpendicular to the y axis, which intersects the y axis at the intersection point of the two light beams 16c and 17c and which is contained in the gripping plane of the fingers. Further, let t denote the period of time from the blocking of one light beam until the blocking of the other light beam by the gripper 9 moving at the speed v, and let R denote the radius of the workpiece. Then, the coordinates of the center P of the workpiece w 18 become EMI8.1 The coordinates x, y of Equations 1 and 2 are transformed into the cylindrical coordinate system, whereupon the coordinates Rw, Zw 6 of the workpiece w w center PW are evaluated. Subsequently, the incremental values AR, AZ and A6 between the actual position P R , Z , e of the a a a z robot and the central position P R , Z , 6 of the w w w workpiece are calculated, and they are set in a pulse distributor so as to distribute pulses. Thus, the gripping center the robot position is brought into position at the workpiece center Pw Figure 6 c . When the gripping center and the workpiece center have coincided, the fingers 10 and 11 are shut to grip the workpiece 18 Figure 6 d . When the workpiece 18 has been gripped as described above, the next item of teaching data is read out, and the gripper is moved to a predetermined command point. In a case where a plurality of workpieces 18 are stacked, calculating the workpiece center each time is dispensed with in such a manner that, when the workpiece center coordinates have been calculated, they are substituted for the teaching data. Figure 8 is a block diagram for performing the present invention. Referring to the figure, RBC designates a robot controller constructed of a microcomputer, which includes a data memory for storing the robot command data the teaching data , a memory for a control program that controls the processing described before, a processor, etc.PDC indicates a known pulse distribution circuit,APR an actual position register which counts up down the distributed pulses R , Z and 6 of the respective p p p axes in accordance with the signs thereof and then stores the actual position of the robot, namely, the actual position R Zat Oa of the gripping center, SVC servo circuitry for the respective axes, and MR, MZ and M6 driving motors for the R , Z and 0axes. WDS1 and WDS2 denote the workpiece detection signals which are generated by the workpiece detecting sensor mounted on the movable part of the robot. Now,in case of moving the gripper from the point P1 to the point P2 shown in Figure 1, the robot controllerRBC reads out the position control data V2, R2, Z2 and 62 contained in the point data PD2 Figure 2 from the data memory and delivers them to the pulse distribution circuit PDC. When the pulse distribution has thus been executed to generate the distributed pulses Rp, Z p and Op, the motors MR, MZ and M6 of the respective axes rotate, and the gripper moves toward the point P2 the workpiece .Simultaneously therewith, the distributed pulses Rp, Zp and p are counted reversibly by the actual position register APR in accordance with the moving direction.When the gripper continues to move toward the workpiece, both the light beams 16c and 17c Figure 5 are blocked by the workpiece, and the workpiece detection signals WDS1 and WDS2 are generated. Upon the generation of the workpiece detection signals WDS1 and WDS2, the robot controller RBC is interrupted and executes compensation processing in accordance with a flow diagram shown in Figure 7. The incremental values AR, AZ and A6 are delivered to the pulse distribution circuit PDC anew on the basis of the compensation processing, with the result that the gripper has its movement compensated to be positioned at the workpiece center. While the present invention has been described above in detail in connection with the embodiments, it is not restricted to these embodiments. For example, the detecting sensor may be one of another type. Moreover, the detecting sensor can be installed, not only on the movable part such as the arm, wrist or hand, but also in the vicinity of the path along which the robot moves. Industrial Applicability As set forth above, according to the present invention, even when, in a case where a playback type industrial robot performs repeated services for a machine tool, the position of the object to be services for example, a workpiece involves a deviation relative to a position previously taught in a controller for the robot, the centeral position of a robot hand can be reliably brought into coincidence with the central position of the workpiece by compensating for the deviation. Therefore, proper robot motions, i.e., operations of gripping the workpiece, chucking the workpiece, etc. are permitted. As a results manual services for a large number of machine tools can be substituted by a robot or robots, and labor saving and job rationalization to cope with a rise in personnel expenses can be effected.