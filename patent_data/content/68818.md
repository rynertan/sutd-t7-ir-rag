# Method and apparatus for controlling an electric discharge machine.

## Abstract
A method of controlling an electric discharge machine wherein discharge is caused across and electrode EP and a workpiece with a voltage applied thereacross and wherein the relative movement between the electrode EP and the work piece is controlled so as to subject the workpiece to electric discharge machining, comprising the step of inserting retrac tion control information into numerical control command infor mation 101 in advance and storing in memory 102b the re traction control information included in the numerical control command information 101 , after said numerical control com mand information 101 is read, the step of controlling the elec trode EP and or the workpiece for relative forward move ment on the basis of machining control information included in the read numerical control command information 101 , and the step of reading the stored retraction control information from the memory 102b in response to a retraction control command and controlling the electrode EP and or the work piece for relative backward movement on the basis of the read retraction control information.

## Claims
uvvu Claims 1. A method of controlling an electric discharge machine wherein an electric discharge is caused across an electrode and a workpiece with a voltage applied thereacross and wherein relative movement between the electrode and the workpiece is controlled so as to subject the workpiece to electric discharge machining, comprising the step of reading numerical control command information from a storage medium which stores said information, the step of storing, in a memory, retraction control information included in the read numerical control command information, lor the step of controlling said electrode and baid workpiece for relative forward movement on the basis of machining control information included in said read numerical control command information, and the step of reading the stored retraction control information from said memory in response to a retraction control command and controlling said elec lor trode andAsaid workpiece for relative backward movement on the basis of the read retraction control information. 2. A method of controlling an electric discharge machine as defined in claim 1, comprising the step of bringing said electrode and said workpiece into relative forward movement again on the basis of said retraction control information after the backward movement step. 3. A method of controlling an electric discharge 2 machine as defined inclair tor wherein the backward movement step is performed in a period during which a shorting signal indicative of a shorting across said workpiece and said electrode is generated. 4. Apparatus for controlling an electric discharge when the machine is in use machine wherein an electric discharge is caused across an electrode and a workpiece with a voltage applied thereacross and wherein drive means for relatively moving the electrode and the workpiece is numerically controlled in accordance with received numerical control command information, said apparatus comprising read control means for reading the numerical control command information from a storage medium, a memory for storing therein retraction control information included in the read numerical control command information, and processing means for delivering a forward movement command to said drive means on the basis of machining control information included in said read numerical control information, to cause said drive means to bring said electrode and said workpiece into relative forward movement for electric discharge machining, and also for reading said retraction control information out of said memory in response to a retraction control command and delivering a backward movement command to said drive means on the basis of said retraction control information, to cause said drive means to bring said electrode and said workpiece in to relative backward movement. 5. Apparatus as defined in claim 4 wherein said processing means is operable to bring said electrode and said workpiece into relative forward movement again on the basis of said retraction control information after said relative backward movement. 6. Apparatus as defined in claim 4 or 5, and comprising a shorting detector for initiating said relative backward movement in response to a shorting across said workpiece and said electrode.

## Description
METHOD AND APPARATUS FOR CONTROLLING ANT ELECTRIC DISCHARGE MACHINE The present invention relates to a method and apparatus for controlling an electric discharge machine.More particularly, it relates to a method and apparatus for controlling an electric discharge machine well suited an for application to the retraction control of electrode. Electric discharge machines include a wire cut electric discharge machine wherein a wire electrode is moved relative to a workpiece along a commanded path, also thereby to perform electric discharge machining, and an electric discharge machine wherein an electrode of a predetermined shape, located near a workpiece, is moved in a cutting direction advancing direction and an electric discharge is caused across the electrode and the workpiece, thereby to subject the workpiece to machining in the same shape as that of the electrode. Figure 1 is a schematic explanatory view of the latter although the invention is applicable to the fonrer type of machine also.type ofelectric discharge machine, An electrode EP serving as a punch is supported by a spindle SP, and is fed for machin downward ing i.e., advanced in the direction of the arrow by a servomotor, not shown. A voltage is applied by a power source PS across the electrode EP and a workpiece WK, which is to be machined into a die. Accordingly, when the elec trode EP is advanced while a minute gap is maintained between the workpiece WK and the electrode EP, the work piece WK is machined into a shape similar to that of the electrode EP. An enlarged bore of desired size can be readily machined in the workpiece WK by controlling, e.g., the energy of the machining pulses If necessary, the machining operation is carried out while the electrode EP is being moved in eccentric fashion, whereby an enlarged bore of any desired dimensions can be machined. In such an electric discharge machine, when the electrode has come into contact with the workpiece or when debris is to be removed, the electrode must be retracted along the machined path. To this end, all the conventional electric discharge machines have a retraction control function. In the conventional electric discharge machines, however, the retraction conditions such as retraction speed, retractable limit and a speed for advancing the electrode again after the retraction, are set as parameters by use of a manual data input device MDI , a keyboard or the like when any machining condition has changed. Each time retraction control is required, the parameters are read to carry out the control. In this regard, the retraction conditions differ depending upon the material and shape of the workpiece, machining conditions, etc. Therefore, when the retraction speed, the retractable limit etc are fixed at certain values, they cannot meet changes in the material and shape of the workpiece or in the machining in conditions.Accordingly, it is inevitable electric discharge machining to set the retraction conditions through the external operation of the keys, the MDI or the like each time there is a change in any of the conditions, such as the shape of the workpiece, the machining conditions, etc. Such operations are very troublesome and diminish machining efficiency. According to a first aspect of the present invention there is provided a method of controlling an electric discharge machine wherein an electric discharge is caused across an electrode and a workpiece with a voltage applied there across and wherein relative movement between the electrode and the workpiece is controlled so as to subject the workpiece to electric discharge machining, comprising the step of reading numerical control information from a storage medium which stores said information, the step of storing, in a memory, retraction control information included in the read numerical control command information, the step of controlling said electrode and or said workpiece for relative forward movement on the basis of machining control information included in said read numerical control command information, and the step of reading the stored retraction control information from said memory in response to a retraction control command and controlling said electrode and or said workpiece for relative backward movement on the basis of the read retraction control information. According to a second aspect of the present invention there is provided apparatus for controlling an electric discharge machine wherein when the machine is in use an electric discharge is caused across an electrode and a workpiece with a voltage applied thereacross and wherein drive means for relatively moving the electrode and the workpiece is numerically controlled in accordance with received numerical control command information, said apparatus comprising read control means for reading the numerical control command information from a storage medium, a memory for storing therein retraction control information included in the read numerical control command information, and processing means for delivering a forward movement command to said drive means on the basis of machining control information included in said read numerical control information, to cause said drive means to bring said electrode and said workpiece into relative forward movement for electric discharge machining, and also for reading said retraction control information out of said memory in response to a retraction control command and delivering a backward movement command to said drive means on the basis of said retraction control information, to cause said drive means to bring said electrode and said workpiece in to relative backward movement. An example and embodiment of the present invention may provide a method and apparatus for controlling an electric discharge machine, wherein it is not necessary to specially and manually enter retraction conditions for each electric discharge machining operation. An example and embodiment of the present invention may provide a method and apparatus for controlling an electric discharge machine, wherein it is not necessary to specially enter retraction conditions other than the numerical control command information, the retraction control information being inserted into the numerical control command information which includes machining control information. An example and embodiment of the present invention may provide a method and apparatus for controlling an electric discharge machine for improving machining efficiency. For a better understanding of the invention and to show how it may be put into effect reference will now be made by way of example to the accompanying drawings in which Figure 1 is a schematic explanatory view of an electric discharge machine to which the present invention is applied Figure 2 and Figures 3 a and 3 b are diagrams for expialning cases where retraction conditions change and Figure 4 is a block diagram showing an embodiment of the present invention. example and Hereunder, an embodiment of the present invention will be described in detail with reference to the drawings. Figure 2 and Figures 3 a and 3 b are diagrams for explaining cases where retraction conditions change depending upon machining conditions. Figure 2 illustrates the relationship between a speed Vf, at which an electrode EP in Figure 1 is moved forward or advanced again after retraction, and the position of the electrode. In the figure, BS indicates a backward movement or retraction starting position, and BE a retraction end position. In general, in order to shorten machining time and to prevent the recurrence of a short circuit between the electrode and a workpiece, the forward speed soVf is so controlled as to move the electrode at a high speed VH up to a certain position CP and thereafter at a low speed VL. The values of the speeds VH and VL and the position CP of the shift from VH to VL differ depending upon the currently prevailing machining conditions. In addition, as shown in the machining state diagrams ofFigures 3 a and 3 b , the retractable limit of the electrode EP must sometimes be changed depending upon the depth of cut Z1 of the electrode. More specifically, in a case where debris is to be removed, when the depth of cut is small as shown in Figure 3 a , the debris can be removed easily even if the gap between the electrode EP and the workpiece WK is small because of a small retraction distance. In contrast, when the depth of cut is great as shown inFigure 3 b , the debris cannot be removed unless a large gap is provided by retraction over a large distance. Moreover, it is dangerous to set a retractable limit, as in the case of the deep cut illustrated in Figure 3 b for a case where the cut is shallow, as illustrated inFigure 3 a . The reason is as follows. Electric discharge machining takes place in a working fluid, which is oil in many cases. If, in the case of the shallow cut, the electrode can retreat the same distance as in the case of the deep cut, it might rise above the surface of the working fluid. This can pose the danger of fire. As thus far described with reference to Figure 2 and Figures 3 a and 3 b , unless the retraction conditions are changed depending upon the machining conditions, the desired object cannot be attained or a hazardous condition arises. Moreover, changing the retraction conditions manually is troublesome as stated before. In the present invention, therefore, the retraction conditions such as retraction speed and retractable limits are included in numerical control NC command information and are issued as commands. Figure 4 is a circuit block diagram of an embodiment for realizing the method of controlling an electric discharge machine according to the present invention. Referring to the figure, numeral 101 designates a tape for numerical control NC , namely a paper tape in which NC command information for numerically controlling an electric discharge machine is punched. The NC command information include a ordinary numerical information for the positional control of an electrode, namely information indicating the shape to be machined, b speed information indicating speeds at which machining operations are to be carried out and c auxiliary function instructions, etc., to be delivered to the machine side, and, in addition, d retraction control information indicating how the retraction control is to be made. As stated before, the retraction conditions depend upon the material and shape of the workpiece, the machining conditions, etc.Therefore, retraction speeds, retractable limits, high and low speeds for re advancing the electrode, etc. are punched in theNC tape 101 as the retraction control information in consideration of such machining conditions, etc. Numeral 102 designates a processing unit, which comprises a read control circuit 102a, a retraction memory 102b for storing the retraction control information from among the NC command information, and a processing circuit 102c constructed of a microcbmputer for executing positional control processing, retraction control processing, etc. of the electric discharge machine. The retraction control information read from the NC tape 101 is stored in the retraction memory 102b, while such items of information as the information regarding positional control of the electrode and the auxiliary function instructions are directly fed into the processing circuit 102c.The processing circuit 102c decodes the applied information, whereupon it delivers, e.g., M, S and T function instructions to the machine side through a heavy current switchboard and a move command Zc to a pulse distributor 103 in the succeeding stage. The pulse distributor 103 executes well known pulse distribution computations on the basis of the move command Zc, and generates distributed pulses Ps at a frequency corresponding to a commanded speed. Numeral 104 designates a known accelerator decelerator circuit which generates a train of pulses Pi by rectilinearly accelerating the pulse rate of the train of distributed pulses Ps at the occurrence of this pulse train and rectilinearly decelerating the same at the end thereof.Numeral 105 indicates a D.C. motor by which the electrodeEP is fed for machining. A pulse coder 106 generates one feedback pulse FP each time the D.C. motor 105 rotates by a predetermined amount. An error calculating and storing unit 107 is constructed of, for example, a reversible counter, and stores the difference Er between the number of the input pulses Pi received from the accelerator decelerator circuit 104 and that of the feedback pulsesFP. This error calculating and storing unit may be constructed, as shown in the figure, of an arithmetic circuit 107a for calculating the difference Er between the numbers of the pulses Pi and FP, and an error register 107b for storing the error Er.More specifically, assuming that the D.C. motor 105 is rotating in the forward direction, the error calculating and storing unit 107 operates in such a manner that each time the input pulse Pi is generated, it is counted up by means of the arithmetic circuit 107a, while each time the feedback pulse FP is generated, the content is counted down, and that the difference Er between the number of the input pulses and the feedback pulses is stored in the error register 107b. Numeral 108 denotes a digital to analog converter for generating an analog voltage proportional to the content digital value of the error register 107b, and numeral 109 a speed control circuit. The operation of the embodiment in Figure 4 will now be described. When the information read from the NC tape 101 by the read control circuit 102a is electrode machining feed information, such as move control information in the Z axial direction, the processing circuit 102c supplies the pulse distributor 103 with the move command Zc, on the basis of which the pulse distributor 103 executes the pulse distribution computation and provides the distributed pulses Ps.Upon receiving the distributed pulses Ps, the accelerator decelerator circuit 104 accelerates and decelerates the pulse rate thereof and applies the train of command pulsesPi to the error calculating and storing unit 107. Thus, the content of the error register 107b becomes non zero, so that the digital to analog converter 108 provides a voltage and the motor 105 is driven by the speed control circuit 109 so as to move the electrode EP. When the motor 105 has rotated by a predetermined amount, the feedback pulse FP is generated by the pulse coder 106 and is applied to the error calculating and storing unit 107. In this manner, the difference Er between the number of the command pulses Pi and that of the feedback pulses FP is stored in the error register 107b. Thenceforth, the electrode EP is servo controlled with the difference Er maintained at a constant value in a steady state until it is fed for machining to a desired position. While the electrode EP is being fed for machining, a shorting detector, not shown, monitors the contact between the electrode EP and the workpiece WK in the form of the conduction current across them. When the electrode EP has contacted the workpiece WK, the shorting detector provides a shorting signal Ss. This shorting signal Ss is entered as a retraction control command, and the processing circuit 102c immediately starts executing retraction control processing on the basis of a retraction control program stored in a built in program memory. That is, the processing circuit 102c reads a retractable limit, a retraction speed, high and low re advance speeds, high and low speed changeover positions, etc. stored in the retraction memory 102b.In addition, a backward movement command is prepared in the processing circuit 102c and fed into the pulse distributor 103 in order that the electrode EP may move at the aforementioned retraction speed along an already cut path and in the direction opposite to that of the cutting direction. As a result, the electrode EP starts its retraction at the set retraction speed. Meantime, the shorting signalSs vanishes. Then, the backward movement is stopped, and the electrode EP is advanced at the high speed VH to the set position where the speed is changed over, and subsequently at the low speed VL to a predetermined position.Then, retraction control processing ends. After such processing, electric discharge machining is restarted on the basis of a positional command and a speed command issued before the generation of the shorting signal.Herein, in a case where the electrode EP attempts to continue retracting beyond the retractable limit in a case where the shorting signal Ss does not vanish even when the electrode has retreated a distance set by the retr√ßactable limit , retraction is stopped, and alarm information is issued to inform the operator that the shorted state still exists. As described above in detail, according to the present invention, retraction conditions are entered into anNC tape or the like along with machining control information for an electrode, so that even when any of the machining conditions has changed, retraction conditions need not be separately set through an MDI or a keyboard on each occasion. That is, according to the present invention, the optimum retraction information for the various machining conditions is entered in the NC tape beforehand, so that the setting operations are dispensed with and optimum retraction control performed, whereby electric discharge machining of good efficiency is ensured. When the MDI, the keyboard or the like is additionally provided so that retraction conditions can also be set and entered therewith, retraction control can be effected even for retraction conditions which are not punched in the NC tape. It is also possible to punch retraction conditions in a plurality of desired portions of the NC tape. For example, as explained in connection with Figure 3 a and 3 b , the retractable limit must be changed in cases where the depth of cut is not greater than a reference depth Zr and where it is greater than the same. In such case, by way of example, a first retractable limit can be set in the beginning of the NC tape, and a second retractable limit in a suitable portion of the NC tape where the depth Zr is exceeded. In general terms, there has been disclosed a method of controlling an electric discharge machine wherein discharge is caused across an electrode EP and a work piece with a voltage applied thereacross and wherein the relative movement between the electrode EP and the workpiece is controlled so as to subject the workpiece to electric discharge machining, comprising the step of inserting retraction control information into numerical control command information 101 in advance and storing in memory 102b the retraction control information included in the numerical control command information 101 , after said numerical control command information lOi is read, the step of controlling the electrode EP and or the workpiece for relative forward movement on the basis of machining control information included in the read numerical control command information 101 , and the step of reading the stored retraction control information from the memory 102b in response to a retraction control command and controlling the electrode EP and or the workpiece for relative backward movement on the basis of the read retraction control information.