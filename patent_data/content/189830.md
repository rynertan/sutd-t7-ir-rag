# ELECTRONIC CASH REGISTER WITH PRE SETTABLE MODIFICATION OPERATION

## Abstract
This electronic cash register includes a means for counting the current time, a means for maintaining a management table in which is stored management data information such as data regarding unit numbers and prices and data relating to messages to be printed on receipts to be given to the customer, a means for storing modification data for the management data stored in the management table and also for storing the associated implementation time therefor, a means for inputting the modification data and the implementation time therefor, and a means for modifying the management data stored in the management table according to the modification data when the implementation time for implementing such modification data has arrived, as determined by the time counting means. Thereby, data for modification of the management data can be input in advance and such modifications can be implemented automatically when the appropriate time arrives. Thereby mental and physical strain on the operator of the electronic cash register are avoided, and the problem of implementing a large number of modifications of management data in a short time is also obviated.

## Claims
1. An electronic cash register, comprising

## Description
The present invention relates to the field of electronic cash registers, and more specifically relates to an electronic cash register which maintains a data table for storing data relating to items to be sold, messages to be displayed on receipts, and so on, and in general for determining and controlling the action of the cash register. A conventional electronic cash register often has an internally stored management table for storing data relating to the operation of the cash register, such as item codes and unit prices for the various items that are being sold by the outlet owning the cash register, messages to be printed on receipts issued by the cash register, and so on. And such a conventional electronic cash register usually has the capability of providing instantaneous changing of the data in this management table, typically by the user pressing an INPUT key and then keying in the new data as modification data. Thus, for example, if the price of a particular item is different in the afternoon from what it is in the morning, it has been necessary for the user, at noon, to input the modification data for altering the unit price. Similarly, if a message to be printed on receipts issued by the electronic cash register is desired to be Good Morning in the morning and is desired to be Have A Nice Day in the afternoon, then it has been necessary for the user to input modification data to change such a message, just at the stroke of high noon. This is often very inconvenient, because at the time that the price or other data should be inputted into the electronic cash register as modification data, typically the user may be busy doing something else. Further, quite often, the data relating to a large number of items is required to be modified all at the same time, as for example when the prices of many drinks in a bar are required to be diminished at the start of Happy Hour and to be increased at the end thereof, along perhaps with some cheery message to be printed on the receipts during such a Happy Hour , and this can consume quite a time, and further the physical and psychological strain upon the operator of the electronic cash register at such a time can be very burdensome. In some cases, business is required to be suspended while the alterations to the management data are inputted by the operator of the electronic cash register but in many situations such interruption of business is not practicable or expedient. Therefore, in the past, it could happen that all modifications that are required to be performed to the management table data at a particular time are not able to be properly performed at that time, due especially to the excessive time required for carrying out all the modifications when the number of modifications is extremely large. Accordingly, it is the primary object of the present invention to provide an electronic cash register, which avoids the above described problems. It is a further object of the present invention to provide such an electronic cash register, which allows inputting of modification data ahead of the time at which said modification data are to take effect upon system operation. It is a further object of the present invention to provide such an electronic cash register, which after thus advance inputting of modification data, at the time that it is desired that the modification data should take effect, implements said modification data automatically. It is a yet further object of the present invention to provide such an electronic cash register, which is. It is a yet further object of the present invention to provide such an electronic cash register, which reduces the burden upon the operator of price and other operational modifications. It is a yet further object of the present invention to provide such an electronic cash register, which makes the process of inputting and implementing modification data easy and convenient. It is a yet further object of the present invention to provide such an electronic cash register, which reduces the risk that all modification data which is scheduled to be implemented at a particular time should not be properly implemented at said particular time. It is a yet further object of the present invention to provide such an electronic cash register, which eliminates any requirement for cessation of business during inputting of modification data for changing operational mode at a particular time. It is a yet further object of the present invention to provide such an electronic cash register, which does not require any concentrated or intensive period of data modification, when at a particular time operational parameters are to be altered. According to the present invention, these and other objects are accomplished by an electronic cash register, comprising a means for counting the current time a means for maintaining a management table in which is stored management data information a means for storing modification data for said management data stored in said management table and also for storing the associated implementation time therefor means for inputting said modification data and said implementation time therefor and a means for modifying said management data stored in said management table according to said modification data when said implementation time for implementing such modification data has arrived, as determined by said time counting means and alternatively by an electronic cash register having an unit item management table for storing unit item management data such as a unit item code, a unit price, and a unit item name and so on for each unit item, and a data management table for managing a system management table for determining the action of the electronic cash register such as messages printed on receipts, whereby the unit item management data may be modified to desired data by data input from an input key, comprising a clock means for counting the current time a modification data storage means for storing the modification data for the management data according to the input from the input key and the time of such modification and a means for modifying the management data according to modification data which is stored in association with certain time of modification stored in the modification data storage means when the time of modification stored in the modification data storage means is substantially equal to the current time as counted by the clock means. According to the present invention as defined above, this invention allows inputting, in advance, the modification time, i.e. the time at which the modification of the data is desired to be executed, as well as the modification data, as the modification data arises, eliminating the need to input all the data at the exact time when the modification is required and relieving the psycological and physical burden on the operator of the electronic cash register, since the modification will be automatically carried out at the appropriate set time for modification. And, since concentrated inputting of such modification data in a hurry is not required, even when there are a large number of modifications to be made, it is prevented that the modification of the unit item management data for part of the unit items be not done in time due to excessive requirements for inputting time. Thus, greater efficiency in operation is attained. The present invention will now be shown and described with regard to the preferred embodiment thereof, and with reference to the illustrative drawings, which however should not be considered as limitative of the present invention in any way, since the scope of the present invention is to be considered as being delimited solely by the accompanying claims, rather than by any particular features of the disclosed embodiment or of the drawings. In these drawings The present invention will now be described with reference to the preferred embodiment thereof. Fig. 1 shows a block diagram of the control unit of said preferred embodiment. In this figure, the reference numeral 1 denotes a CPU central processing unit incorporating a ROM read only memory for storing its operational program. This CPU 1 is operationally connected to a data input device 2 which incorporates input keys for inputting data and operation information such as the unit numbers of items sold to a customer a clock device 3 which keeps track of the current time a display device 4 for displaying to the user information dispatched from the CPU 1 such as unit prices of purchased items a print device 5 for putting receipts and the like for customers and so on a first store 6 which holds a data management table, including a unit item management table for storing unit item management data such as unit item codes, unit prices and unit item names, and a system management table which determines the overall action of the system and a second store 7, which is for storing modification data and data modification time data, as inputted via the data input device 2. In more detail, this second store 7 comprises a storage device 70, which will be referred to as the mail box hereinafter, for storing the modification data for the data in the first store 6, said modification data having been inputted via the data input device 2, and further comprises another storage device 71, which will be referred to as the time table hereinafter, for storing the time of modifying said data in said first store 6 according to said modification data stored in said mailbox 70. Fig. 2 shows an exemplary layout for the input keys incorporated in the data input device 2 and presented to the user. A key switch 10 is for setting the operational mode of the electronic cash register to any one of a program mode, a registration mode, and a report outputting mode. A section key 11 can be set to designate any one of, exemplarily, five sections such as sections of a department store such as a furniture section, a hardware section, a grocery section, and so on. A ten key pad 12 is used for inputting the PLU code merchandise code and the sales value for each sale to a customer. A function key set 13 includes a PLU key 13a for PLU code registration, a time key 13b for use in inputting modification data, a recognition key 13c, a subtotal key 13d for obtaining a subtotal, and a cash sales key 13e for use at the time of each sale. Fig. 3 shows the internal structure of the data management table, which includes the unit item management table and the system management table, stored in the first store 6 of Fig. 1 as described above. This data management table includes a unit item management table, an operator management table, a function management table and a data buffer. The unit item management table has parts for storing the unit item code, the unit price, the unit item name, the total sales of the unit item and the number of sales for each unit item. For instance, with respect to the topmost unit item in the illustrative figure, which has the unit code of 0000001 , it is shown that its unit price is 500 , its unit item name is socks , its total sales are 49053 and the number of sales is 90 . The system management table has an area for storing the management data which determines the system action for each management number. For instance, 0001 refers to and determines a message to be printed on each receipt made for a customer on the print device 5, and refers to a message Thanks come again , while 0025 likewise refers to the message Service Is Our Business . The data buffer temporarily stores the data inputted from the keys and comprises registers BTIME for storing the modification time data or the time at which modifications are to be executed, BID for storing process recognition data which will be described hereinafter, BPLU for storing the unit item codes or the PLU codes, and BN for storing numeral placement data. Figure 4 shows the structure of the mail box MB, i.e. of the modification store 70 shown in Figure 1. This mail box 70 comprises, for each item, a storage area for a time table number, a process recognition number, modification data, and a process completion flag. The time table number is for providing a link with storage data, which is described hereinafter, stored in a time table TT shown in Figure 5. The first digit of the process recognition number indicates the table to be modified, 0 meaning the unit item management table and 1 meaning the system management table. And, the second digit indicates the item to be modified, 1 meaning the unit price while 2 means the unit item name and 3 means the system management data. The first data in the modification data is the unit item code or the management number, and the next data is the data for the item to be modified, of a type corresponding to the second digit of the process recognition number. As for the process completion flag, 0 means that the process is not yet completed, while 1 means that the process has been completed. Figure 5 shows the structure of the time table TT, i.e. of the modification time store 71 shown in Figure 1. This time table 70 comprises, for each item, storage registers for a timetable number, process timing information, and a process completion flag. The timetable number is for providing a link with storage data stored in the mail box MB shown in Figure 4. The process timing information is the time of modification including date and time of the modification data inputted from the input keys. As far as the process completion flag is concerned, 0 means that the process is not yet completed, while 1 means that the process has been completed. In the data structures of the mail box MB and the time table TT as described above, which are given as a concrete example only and are not intended to be limitative of the present invention, the first data item in the mail box MB means that the unit item name of the merchandise having the unit item code of 0000001 is to be changed into socks when, as indicated in the timetable No. 1 of the time table TT, the time has reached thirty minutes past eleven o clock am, December 20th, 1986. And the second data item in the mail box MB means that the unit price of the merchandise having the unit item code of 0009850 is to be changed into 1300 when, as indicated in the timetable No. 2 of the time table TT, the time has reached ten o clock am, December 25th, 1986. Further , the third data item in the mail box MB means that the message on the receipts given to customers is to be changed into Happy New Year when, as indicated in the timetable No. 3 of the time table TT, the time has reached zero am on January 1st, 1987. In each case, when the modification of the unit item management data has been executed, the process completion flags of the main box MB and time table TT are changed from 0 to 1 . Figure 6 shows an example of the key input sequence for inputting modification data and the time of modification. In this example, it is supposed that the unit price of the merchandise having the unit item code of 1230 is to be changed into 225 at thirty minutes past eleven o clock, December 20th, 1986. As for the data inputted by this key sequence, the numeral placement data preceding the time at which the time key 13b is pressed, i.e. the time for modification execution time data , is temporarily stored in the data buffer BTIME, and the numeral placement data entered before the recognize key 13c is pressed, i.e. the process recognition number, is temporarily stored in the data buffer BID. The numeral placement data which is entered before the PLU key 13a is pressed, i.e. the unit item code or the management code, is temporarily stored in the data buffer BPLU. Subsequently, after the possible input of alteration data, on the operation of the subtotal key 13d, the temporary data of the data buffer BTIME is set up in a vacant area of the time table TT and the process completion flag at that position is set to 0 , followed by setting up of the table number of this item of the time table TT which has just been set up, along with the data stored in the data buffers BID, BPLU and BN, in a vacant area of the mail box MB. At the same time the process completion flag at that position is set to 0 . Now, the action of this electronic cash register will be described, with reference to Figs. 7 and 8. Fig. 7 is a flow chart illustrating the action of inputting modification data and the time that the modification is to be implemented. From the start, in the decision step n1, a decision is made as to whether a key input has been made, or not. If the answer is NO, then the flow of control loops back to the step n1 again but if the answer is YES, then control passes next to the step n2. In the decision step n2, a decision is made as to whether the key is a numerical key inputting a digit, or not. If the answer is NO, then the flow of control passes next to the decision step n4 but if the answer is YES, then control passes next to the step n3. In this step n3, this keyed in data is placed in the data buffer BN, and then the flow of control loops back to the step n1 again. On the other hand, if the keyed in data is non numerical, then it may be one of the special keys shown in Fig. 2, i.e. the time key 13b, the recognize key 13c, the PLU key 13a, or the subtotal key 13d. What type of key has pressed is decided by the daisychained decision steps n4, n5, n6, and n7 if the key which was pressed is decided to be none of the above, then the flow of control passes out of Fig. 7 to the right, to another part of the program for the CPU 1, not particularly shown, which deals with other matters not relevant to the present invention. If, in the decision step n4, it is decided that the key pressed was in fact the time key 13b, then the flow of control passes to the decision step n8, in which a decision is made as to whether any data has yet been placed in the data buffer BN, or not. If the answer is NO, then this is an error, so the flow of control is transferred to an error routine, not particularly discussed herein but if the answer is YES, then control passes next to the step n9. In this step n9, the numerical data in the buffer BN is transferred to the data buffer BTIME, and then the flow of control passes to the step n23, to be explained later. Further, if, in the decision step n5, it is decided that the key pressed was in fact the recognize key 13c, then the flow of control passes to the decision step n10, in which a decision is made as to whether any time data has yet been placed in the data buffer BTIME, or not. If the answer is NO, then this is an error, so the flow of control is transferred to another error routine but if the answer is YES, then control passes next to the decision step n11. In this decision step n11, a decision is made as to whether any data has yet been placed in the data buffer BN, or not. If the answer is NO, then the flow of control passes next to an error routine but if the answer is YES, then control passes next to the step n12. In this step n12, the numerical data in the buffer BN is transferred to the data buffer BID, and then as before the flow of control passes to the step n23, to be explained later. Further, if, in the decision step n6, it is decided that the key pressed was in fact the PLU key 13a, then the flow of control passes to the decision step n13, in which a decision is made as to whether any recognition input has yet occurred, or not. If the answer is NO, then this is an error, so the flow of control is transferred to an error routine but if the answer is YES, then control passes next to the decision step n14. In this decision step n14, as before, a decision is made as to whether any data has yet been placed in the data buffer BN, or not. If the answer is NO, then the flow of control passes next to an error routine but if the answer is YES, then control passes next to the step n15. In this step n15, the numerical data in the buffer BN is transferred to the data buffer BPLU, and then as before the flow of control passes to the step n23, to be explained later. Further, if, in the decision step n7, it is decided that the key pressed was in fact the subtotal key 13d, then the flow of control passes to the decision step n16, in which a decision is made as to whether any PLU input has yet occurred, or not. If the answer is NO, then the flow of control passes next to the other program portion mentioned above, not particularly shown but if the answer is YES, then control passes next to the decision step n19. In this decision step n19, as before, a decision is made as to whether any data has yet been placed in the data buffer BN, or not. If the answer is NO, then the flow of control passes next to an error routine but if the answer is YES, then control passes next to the step n20. In this step n20, the numerical data in the buffer BTIME is transferred to vacant area for a new item in the timetable TT in store, and also the process completion flag is set to the 0 value and then the flow of control passes to the step n21. In this step n21, in a vacant area for a new item in the mailbox MB, the address of this new timetable item is set and also the values of the buffer registers BID, BPLU, and BN are copied into this new mailbox item, and its process completion flag is set to the 0 state and then the flow of control passes to the step n22, in which the buffer registers BTIME, BID, and BPLU are cleared. Then, the flow of control passes to the step n23. In this step n23, to which also the flow of control passes from the steps n9, n12, and n15 as explained above, the buffer register BN is cleared, and lastly the flow of control returns to the step n1 again, to loop round while keys are being pressed. Thus it is seen that, according to the flow of this routine, by executing a key input sequence as shown in Fig. 6 and according to the above described action, it is possible to store modification data and the time for implementation of said modification data for the management data which are to be modified, both in the mailbox MB and also in the timetable TT. Although in the figures the mailbox MB and also in the timetable TT are both shown to be implemented as arrays, in fact some advantages will accrue to implementing them as list structures, and this is to be considered as within the purview of the present invention. In Fig. 8, there is shown the flow chart of an interrupt routine which is triggered, in normal conditions, by the event that a timer associated with the clock device 3 of Fig. 1 reaches a certain timed value for example this interrupt routine may be run every fifteen minutes of operation of the electronic cash register. After the start, in the step n30, the current time is read out by the CPU 1 from the clock device 3. Next, in the step n31, the time table TT is searched for data which are associated with a time before this current time and whose process completion flag still has the value 0 . Next, in the decision step n32, a decision is made as to whether such a data item has been found, or not. If no such item has been found, then the flow of control passes next to the end of this routine, to exit without doing anything particular but, if such an item in fact exists, then the flow of control passes next to the step n33. In this step n33, the mailbox MB is searched, using the timetable number of this data item as a key. If the fact there is any data item in said mailbox MB with the same time table number and whose process completion flag still has the value 0 , then this information is used to update the management data table DT of Fig. 3 appropriately as explained hereinabove. If there should exist a plurality of such data items, they are all processed in this manner, and then the flow of control passes to the step n34. In this step n34, for each data item processed, the process completion flag or flags of such data item in the timetable TT and the mailbox MB are both set to now have the value 1 . If there should exist a plurality of such data items, they are all processed in this manner, and finally, when they are all properly processed and no more remain, the flow of control passes out of the end of this routine. In this method of searching the timetable TT in the step 31 above, what was searched for was data whose set up time in the timetable TT was before the current time. But, if the time interrupt routine of Fig. 8 in fact is to be executed, exemplarily, every fifteen minutes, then the step n31 amounts to checking if the time of modification for the management data is equal to the current time, or not, with an accuracy of fifteen minutes. Therefore, as a matter of course, the shorter are the intervals between execution of the Fig. 8 interrupt routine, the higher does the accuracy of modification implementation become. Thus, it is seen that, according to the present invention it is possible to input, in advance, the modification time, i.e. the time at which the modification of the data is desired to be executed, as well as the modification data, as the modification data arises, thus eliminating the need to input all the data at the exact time when the modification is required and relieving the psychological and physical burden on the operator of the electronic cash register, since the modification will be automatically carried out at the appropriate set time for modification. And, since concentrated inputting of such modification data in a hurry is not required, even when there are a large number of modifications to be made, it is prevented that the modification of the unit item management data for part of the unit items be not done in time due to excessive requirements for inputting time. Although the present invention has been shown and described in terms of the preferred embodiment thereof, and with reference to the appended drawings, it should not be considered as being particularly limited thereby. The details of any particular embodiment, or of the drawings, could be varied without, in many cases, departing from the ambit of the present invention. For example, although the shown preferred embodiment uses a CPU which is incorporated in a digital computer means, this is not essential to the present invention, and other possibilities exist. Accordingly, the scope of the present invention is to be considered as being delimited, not by any particular perhaps entirely fortuitous details of the disclosed preferred embodiment, or of the drawings, but solely by the legitimate and properly interpreted scope of the accompanying claims, which follow.