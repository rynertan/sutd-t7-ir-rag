# Switch configured communication network.

## Abstract
A switch configurable communication network among many users A to E , comprising forwarding units 12 which individually present a communication tree with their ports as terminal nodes, and a cross point switch 10 for connec ting one user to another, for connecting users to a forward ing unit, and for connecting one forwarding unit to another, whereby the cross point switch can configure two users in point to point communication, and can form modular tree subnetworks among the users by using the forwarding units.

## Claims
CLAIMS 1. A switch configurable communication network for a plurality of users, comprising at least one forwarding unit 12 , said forwarding unit having a plurality of ports and for warding a message received on one port to all other ports message links a, a each separately connected at one end either to one of said ports of said forwarding unit or to one of said users and switching means io connected to all other ends of said message links for selectively inter connecting said message links, whereby two users can be joined in point to point com munication, and a plurality of users can be joined in a subnetwork through a forwarding unit. 2. A network as recited in Claim 1, wherein each said forwarding unit comprises a communica tion tree with its ports as terminal nodes. 3. A network as recited in Claim 2, wherein said switching means is a cross point switch. 4. A network as recited in an preceding claim, wherein said links are uni directional links paired as input links to output links from said users and said forwarding units, each said input link being connected to an input section of a port and each said output link being connected to an output section of a port of said users and said forwarding units. 5. A network as recited in claim 4, wherein each said forwarding unit forwards a message received on an input section to all output sections except the one paired with the input section on which said message is received. 6. A network as recited in claim 5, further comprising means associated with each user for controlling the setting of the interconnections in said switching means.

## Description
SWITCH CONFIGURED COMMUNICATION NETWORK DESCRIPTION Technical FieldThis invention relates to switches for communication systems. In particular, it relates to a switching system which reconfigures a point topoint communication system to subnetworks within the system. Background of the InventionA multi user communication system must allow for communication or transmission of information from any user to any other user connected to the system. Present day communication systems are typically divided into two types, local networks and line switching systems. A local network involves a communication path that is shared by all the users. Such a shared communication path could be a bus or a ring. The bandwidth of the communication path is shared between the users and the path is time division multiplexed to the requirements of the separate users. In the simplest case of a short bus, only a single user can transmit data onto the bus at any particular time. The other users must wait their time for access to the bus. Various protocols exist for assigning access to the bus to the various users. An access token may be passed from user to user and only the user having the token is allowed access. Alternatively, the central controller may poll all the users to determine which users are currently requesting access to the shared path.Based upon the poll, the controller then assigns access to one of the users based upon one of several priority schemes. In a collision detection system, a user transmits onto the bus at will. A separate circuit is provided to determine if two users are simultaneously using the bus, that is, to detect a collision of message packets, and then to have the two users retransmit their messages without the possibility of collision.A ring is a communication bus that closes upon itself to form a ring. The data flow is unidirectional and consists of packets of information transmitted from one user to the next user on the ring. Each user determines if the message should be retransmitted back onto the ring to yet further users. Because rings typically involve long transmission lengths, it is possible to have multiple messages on different points of the ring at the same time. However, the bandwidth at any point of the ring is still shared between the users because any user must wait for a vacancy in the ring to transmit its own data.Local networks suffer several disadvantages. The problem of shared bandwidth has already been discussed. The basic problem is that only one message can be on the network at any one time.Multiple parallel buses can be provided to increase the total bandwidth of the shared communication paths. Such a system is described inJapanese Patent application 54 124551 for rings.However, such a system means that one user may be simultaneously receiving messages from two transmitting users so that additional buffering and timing controls are required. A very high speed bus can be used for increased bandwidth. However, such a high speed bus requires that every device attached to the bus must be capable of operating at that bandwidth, even if its own data rates are considerably lower. In any case, the bandwidths g buses are limited to the technology available. Rings have the advantage of minimizing the effective bandwidth reduction due to propagation times on a linear bus. However, a ring requires a fairly elaborate interface between the user and the ring. Universal protocols must be obeyed by all members of the ring.It appears necessary to always provide a centralized controller, or at least a master user, for a local network to either allocate access to the shared communication path or to insure that one malfunctioning user does not incapacitate the entire network.The second type of communication system is line switching for point to point communication, best exemplified by a cross point switch. If the system is full duplex, each user has one input line and one output line connected to the cross point switch. The cross point switch can connect the communication lines of any user to any other user. Once the cross points have been set, the two users are in direct communication. If m users are connected by a m x m full duplex cross point switch, m simultaneous connections can be made between various users. As a result, bandwidth is not shared between the users and the total bandwidth of the system is m times the bandwidth of the separate lines, 2m for a fullduplex system.Line switching is very effective for the transmission of very long messages, as is evidenced by its common use in the telephone system. However, if there are a large number of short messages, the set up time for the crosspoint and the propagation times can severely reduce the effective data rate of the system.Thus it is seen that the local networks and line switching systems have different advantages and drawbacks, which are more and less important depending upon the type of user and the type of communication that the user is engaged in. If two groups of users predominantly communicate within their respective groups in short messages but occasionally have long messages to users in the other group, two rings or other networks can be set up for the two groups with switching provided between the groups. Such a system is disclosed byInose et al. in U.S. Patent 3,694,580 and by Favre et al in a technical article entitled Pseudo switch for Physically Shared Networks appearing in the IBM Technical Disclosure Bulletin, volume 19, number 8, January 1977 at pages 30823089.Alternatively, multiple serial transmission lines may be connected into a single ring system, as disclosed by Dapst et al in U.S. PatentNo. 4,417,242.A different approach is to use a distribution switch common to all users to set up a ring that passes from user to user through the distribution switch. Such a system is described both byPeterson in U.S. Patent 4,255,741 and by Cantwell in U.S. Patent 4,393,497. Both these disclosures appear to allow for the addition and removal of users from the loop, but both are distinctly ring systems that suffer the drawback of a shared bandwidth despite the use of a distribution switch.All of the described prior art involve relatively rigid communication systems, with fixed operational parameters. However, a communication system such as is required for a large computer has dynamically changing requirements depending upon the task currently being performed by the individual users. At one time, a user may beOperating in relative isolation from the rest of the system. At other times, the user may need to send frequent short messages. At still other times the user may be required to transmit large blocks of data to another user. Each of these states puts different demands upon the communication system and it is impossible to optimize the system for such widely varying requirements, particularly if the requirements are task specific. Summarv of the InventionAccordingly, it is an object of this invention to provide a communication system that can be optimized for both long messages and short messages.It is a further object of this invention to provide a communication system that offers high bandwidth capacity and short connection times.It is a further object of this invention to provide a communication system that combines the advantages of a local network with a line switching system.It is another object of this invention to provide a communication system that is flexible to changing requirements of its users.The invention can be summarized as a communication system comprising switching means, such as a cross point switch, for selectively interconnecting multiple users. The invention further includes one or more forwarding units that are also selectively connected through the switch to the users. The forwarding units set up switching trees for the broadcast of information between all the users connected to the forwarding unit. The forwarding unit can have modular structure to allow the addition of further users to the tree broadcast system. Thereby, the users can either be line switched for point to point communication or can be connected to the forwarding unit to dynamically form local subnetworks. Brief Description of the DrawingsFig. 1 is a block diagram of the switching system of the invention.Fig. 2 is a schematic diagram of a bi directional tree communication system.Fig. 3 is a block diagram of an embodiment of the switching system of this invention.Fig. 4 is a schematic diagram of a cross point switch usable as a node in this invention.Fig. 5 is an optical switch, functionally equivalent to Fig. 4. Fig. 6 is a block diagram of a modular embodiment of this invention, andFig. 7 is a tree structure relevant to Fig. 6. Detailed Description of the Preferred EmbodimentsThe design of a switch configured communication network of the present invention is schematically illustrated in Fig. 1. Five different user A, B,C, D and E are illustrated. Each user is connected to a cross point switch 10 by a full duplex communication link. For instance, user A transmits messages over serial output link a and receives messages over serial input link a . Likewise, serial output links b, c, d and e and serial input links b , c , d , and e are provided for the other respective user B, C, D and E. The cross point switch 10 selectively interconnects any two of the users for point to point communication. Multiple point to point paths can be established through the cross point switch.Although Fig. 1 implies that the cross point switch 10 is a full duplex one sided switch, in fact, the switch can be two sided and need not be full duplex for the purposes of this invention.Cross point switches and switching systems are well known and what has been described up to this point is conventional but suffers from the previously described drawbacks of line switching systems. However, the invention further includes a forwarding unit 12 which is linked to the cross point switch 10 by a number of full duplex links. The links consists of pairs of input and output links, g1, gl t g21 g2 t etc. Fig. 1 illustrates six duplex links between the forwarding unit 12 and the cross point switch 10. The cross point switch 10 treats the links to the forwarding unit 12 in the same manner as the links to the users A E. That is, the cross point switch 10 can not only interconnect the duplex links to the users A E but can also connect a user link to any of the duplex links to the forwarding unit 12.Furthermore, the cross point switch 10 can connect two links to the forwarding unit 12, for example, connecting gl and g1, to g2 and g2 . Any number of the links from the forwarding unit 12 may at a particular time be somehow connected through the cross point switch. However, in the embodiments to be described, the cross point switch 10 does not provide fan in and fan out so that only non branching paths through the cross point switch 10 are provided.The purpose of the forwarding unit 12 is to set up tree communication networks among the users A E.The form of the tree system is determined by the connections of the links through the cross point switch 10. A tree communication system is defined as a system in which there are multiple nodes and that one and only one communication path exist between any one node and any other node within the system. A bi directional tree is illustrated in Fig. 2, in which there are seven nodes 20, 22, 24, 26, 28, 30 and 32. The general tree structure is described in an article by the inventor entitled, AddressIndependent Routing in Local Networks appearing in the IBM Journal of Research and Development inSeptember 1983. The nodes are linked by pairs of uni directional lines forming bi directional links. It is seen in the illustrated structure that every node can communicate with every other node, possibly through one or more intermediate nodes. However, additional links, such as between nodes 28 and 30 or between nodes 20 and 30 would violate the tree structure.Terminal nodes 24, 28, 30 and 32 are at the end of the tree and have only a single input line and a single output line while the intermediate nodes 20, 22 and 26 have two or more input links and output links of equal number. In the broadcast mode, whenever a node transmits a message, every other node receives the message. Thus the intermediate nodes 20, 22 and 26 must forward all messages that they have received. In order that messages not be continuously retransmitted, the terminal nodes 24, 28, 30 and 32 do not forward any messages but only transmit their own messages. An access token can be used to control access to the tree system. The token is transferred from one terminal node currently holding the token to another specific terminal node. The identifica tion of the terminal node about to gain the token must accompany the token since all nodes receive the token message but only the identified node is granted the token.There are two types of operation of the illustrated bi directional tree of Fig. 2 of interest for this invention. In type II operation, all messages are transmitted up to a root node 20 which then retransmits the message down to all the other nodes. Type II opearation has two disadvantages. Each node must know where the root node 20 is located in order to differentiate messages being sent from a terminal node up to the root node 20 from messages being sent down from the root node 20 to the terminal nodes. For instance, if the terminal node 32 originates a message, in the transmission to the root node 20 the intermediate node 26 forwards the message to the root node 20 but not toward the other terminal node 30. However, when the root node 20 has retransmitted or forwarded the message, the intermediate node 26 forwards the message to both terminal nodes 30 and 32. Another disadvantage is obvious from the previous description, that is, some intermediate nodes receive the message twice and the originating terminal node receives back its own message. In type III operation, each node forwards a received message in every direction except in the direction from which the message was received.This rule encompasses the terminal nodes as well.In type III operation, therefore, each node operates with the same protocol, regardless of whether it is a terminal, an intermediate or a root node, which really has no meaning in type III operation.This flexibility more easily allows the modular assembly of a tree, as will be described later.It is also seen that in type III operation duplicate messages are not passed through any of the nodes of the tree. Also, as will be described later, type III nodes are easily fabricated with simple circuitry.One of the simplest embodiments of the invention is illustrated in Fig. 3 in which a forwarding unit 34 consists of a single node 36, which will be called a super node because it is directly connected to all the links entering the forwarding unit 34. If the users A, B and C wish to to be connected together in a tree subnetwork, the cross point switch 10 is instructed to connect the user links to links to the forwarding unit 34, for instance a is connected with gl, a with g1 , b with g2, etc. The forwarding unit 34 is statically configured so that any of its links are connected to the super node 36. As a result, the cross point switch 10 and the forwarding unit 34 form a communication tree with the users A, B and C as terminal nodes.Although it would be possible for only two users to be connected to the forwarding unit 34, such a configurati . is unnec essary because two users could mol . easily be directly connected through the ross point switch 10.The tree subnetwork is not limited to the users A,B and C. If instead the users A, B and D wish to form a subnetwork, the switch 10 could have connected user D instead of user C onto the links g3 and g3, to the forwarding unit 34. It is also possible that the super node 36 can operate with unused links g4 and g4 . Then if the usersA, B and C have already formed a subnetwork, user D could join the subnetwork by having the cross point switch 10 connect its links d and d to unused links g4 and g4 of the forwarding unit 34. It is to be understood that, at the same time that the illustrated users are forming the subnetworks through the forwarding unit 34, additional users may be in point to point communication through the same cross point switch 10.Thus as the requirements of the individual user dynamically change, a user may be in point topoint communication with one other user or may alternatively create a subnetwork or join an already existing subnetwork of multiple users.The switching system of this invention can advantageously be controlled by control messages sent by the users to the cross point switch on the same lines that are subsequently used for data transmission through the switch. Such a type of control by a message header is disclosed bySpringer et al in U.S. Patent 4,191,941.The forwarding unit 34 can be implemented with a cross point switch 40, shown in Fig. 4, having fan out. The cross point switch 40 has four input lines g1, g4, and four output lines g1 g4. Each input line is associated with an output line as a full duplex link as illustrated in Fig. 3. For example, gl is associated with gl The crosspoint switch 40 has the potential of coupling the signals on any input line onto any and possibly all output lines. However, the connections are made such that an input line is coupled to all the output lines except the one to which it is associated. For example, the input line g1 is coupled only onto the output lines g21 g3 and g4 with cross points 42, 44 and 46.All the required cross points are illustrated in Fig. 4.It is important that the cross points couple signals from the input lines to the output lines but not vice versa. This can be accomplished passively with diodes or actively by amplifiers.As a result of the configuration of cross points shown in Fig. 4, an incoming signal is forwarded in all directions except in the direction from which the signal came. Although multiple layers of cross point switches have been used for telephone systems, such as disclosed by Hwang in U.S. Patent 4,338,638, these have been used for point to poi communication rather than networks and do not provide a statically configured cross point switch similar to a forwarding unit. Typically, also, a communication path must pass through all layers rather than avoiding the forwarding units for simple connections.The forwarding unit can also be realized optically, which is important because serial links are likely to be in the form of fiber optics.Such an optical forwarding unit is illustrated inFig. 5 and consists of detectors 50 receiving the optical signals on the individual optical input lines g1 gg . The optical signals are directed into an optical routing function 52 and by means of optical components such as beam splitters and mirrors, an input signal is coupled onto all the output lines except for the one output line associated with the input line. The output signals are then transmitted by optical emitters 54 onto the optical output links gl g4. With the super node forwarding unit 34 of Fig. 3, it is theoretically possible to satisfy any switching system. However, there are several disadvantages of the super node approach. First of all, it is envisioned that several hundred users are attached to the system. If all the users are to join the subnetwork, the size of the node, of which Figs. 4 and 5 provide examples, must correspond to this very large number of users even though typically only a few users are forming a subnetwork. The forwarding unit, as a result, becomes unnecessarily large and complex. Furthermore, if one input to a super node is driving a very large number of outputs there is a fan out problem. Digital electronics are typically designed so that one driver can drive a fairly small number of outputs, for example five outputs which would be a fan out of 5. If the fan out exceeds this number, additional layers of drivers must be provided. Beyond the obvious complexity of multiple layers of drivers, each layer introduces its own time delay.Thus, a large super node is both complex and slow.Furthermore, with a large number of users, the users are likely to want to form multiple subnetworks. Additional subnetworks can be provided by attaching additional forwarding units 34 to the cross point switch 10. However, if each super node is designed to accommodate the maximum number of users, there results a great overdesign.Therefore, the present invention can be advantageously used with forwarding units that are modular in design so that they can be used either separately to form multiple simple networks or they can be combined into larger subnetworks. A modular design for a switch configured network is illustrated in Fig. 6 in which the cross point switch 10 is connected to users A, B, C, D and E by the previously described full duplex links a, a , b, b etc. Three equivalent forwarding units 60, 62 and 64 are provided, each with three input links and three output links. Five users and three forwarding units are chosen just for sake of an example. The forwarding units 60, 62 and 64 can be used by means of the cross point switch 10 to form subnetworks of the users A E.The forwarding units 60 64 are themselves statically configured and the communication paths through them are determined by their input and output links.Users A, B and C can form a subnetwork if the users A and B are joined to a node G1 in forwarding unit 60 and the forwarding unit 60 and the user C are joined to a node G2 in the forwarding unit 62, as illustrated for the resultant tree structure in Fig. 7. It should be further noted that the users A and B could have first formed their own subnetwork using the forwarding unit 60 and then the second node G2 could have been subsequently established by the user C without disturbing the already existing subnetwork between the users A and B. Furthermore, the user D could join the subnetwork of users A, B and C by being connected to the forwarding unit 62. Alternatively, the subnetwork could be extended further by connecting the forwarding unit 64 to the forwarding unit 62 already in the subnetwork.The size of the subnetwork is only limited by the number of forwarding units and their fan out capability, which is directly related to the number of links into the forwarding unit. Of course, the forwarding units 60 and 62 could be separately used to form two subnetworks with a maximum of three users attached to each. Thus the modular switching unit of Fig. 6 provides for growth and flexibility in the subnetworks between the users.Of course, as previously mentioned, at the same time that the forwarding units 60 64 are being used to form subnetworks, the users A E can be joined in point to point communication directly through the cross point switch 10.The use of additional forwarding units results in multi layered structure for the forwarding units.Additional layers can be added to the tree structure as additional users require access to the subnetwork. Furthermore, separate subnetworks can be set up which subsequently can be joined into a larger subnetwork for communication between the two previous subnetworks. The larger subnetwork can then be broken back down into its two component subnetworks when the inter subnetwork communication is no longer required. Favre et al, in the previously cited article, disclose cross point switches at nodes that can set up either intra network or inter network links. However, they require a controllable cross point switch at each configurable node.It should be obvious that the individual forwarding units may have a more complex structure than a super node. Each forwarding unit may have its own tree structure, for instance as illustrated in Fig. 7, with the intermediate nodes G1 and G2 being formed in a single forwarding unit. Although the communication switch previously descibed has envisioned the use of a cross point switch with a fan out of one so that the crosspoint switch connects one input link to only one output link, such a restriction is not necessary for the invention. If the cross point switch can provide fan out, such a cross point switch can act as one or more intermediate nodes connecting three or more users or forwarding units. Such a structure is consistent with the tree architecture. The forwarding units are nonetheless useful in conjunction with a cross point switch with fan out because of their ability to form a modular subnetwork and because of the typically limited fan out available with fast, compact electronics.Furthermore, other types of switches besides cross point switches can be used with the invention as long as they are consistent with the tree architecture.