# ELECTRICAL ISOLATION CIRCUIT

## Claims
Isolierschaltkreis für das Schaffen einer elektrischen Isolierung für ein eingehendes impulsbreitenmoduliertes Signal, das eine Vorderflanke und eine Hinterflanke aufweist, wobei der Eingangsimpuls eine willkürliche Impulsbreite aufweisen kann, wobei der Schaltkreis eine erste Vorrichtung 18 für das Empfangen des Eingangssignals aufweist, und für die Verwendung lediglich des Eingangssignals zur Erzeugung eines ersten Impulssignals mit einer Vorderflanke, die zeitlich nah bei der Vorderflanke des Eingangssignals ist, und eines zweiten Signals mit einer Vorderflanke, die zeitlich nah bei der Hinterflanke des Eingangsignals ist, wobei mit der ersten Vorrichtung 18 die ersten und zweiten Impulssignale mit im wesentlichen gleichen Intervallen gegenüber dem Empfang der Vorder und Hinterflanke des Eingangsignals erzeugbar sind und eine Isoliervorrichtung 16 mit einem Eingang aufweist, der mit der ersten Vorrichtung 18 verbunden ist und einen einzigen Lichtsender 90 für das Aussenden von Lichtsignalen ansprechend auf die ersten und zweiten Impulssignale und eine lichtempfindliche Einrichtung 26B aufweist, die optisch mit dem Lichtsender 90 für den Empfang der ausgesendeten Lichtsignale und für die Erzeugung von ersten und zweiten isolierten Signalen gekoppelt ist wobei die Dauer zwischen der Vorderflanke der ersten und zweiten isolierten Signale genau die Impulsbreite des Eingangssignals wiedergibt.

## Description
The present invention relates to electrical isolation circuits and in particular an isolation circuit which utilises at least two signals to represent the signal to be isolated. Isolation circuits have utilised many different isolation devices, such as electromagnetic coils and optical couplers. Electromagnetic coils have been used mainly to isolate analog signals by coupling the entire analog signal. Optical couplers generally have a light emitting device coupled to a photo sensitive device and have been used to couple digital pulses by techniques including optical coupling of the entire pulse. Optical couplers have also been used to isolate analog signals by measuring received light intensity and by converting analog signals to pulse width modulated, pulse amplitude modulated, and pulse frequency modulated digital signals where the entire signal is coupled through the optical coupler. Coupling an entire pulse through an optical coupler requires that the light emitting device and photo sensitive device have substantially equal, time stable and sharply defined turn on and turn off time characteristics. US A 3590250 discloses the transmission of a pulse width modulated signal across an opto isolator. In this arrangement a single channel is used but no recognition is given to the effect of the characteristics of opto isolators. In an article by M. Seifart and K. Barenthin Nachrichtentechnik Electronik, vol 27, no. 6 1977, pages 246 248 Berlin an arrangement is disclosed to overcome the effect of the different turn on and turn off characteristics of opto isolators. In this arrangement a pulse width modulated signal is generated synchronously with a clock signal and two opto isolators are required. The pulse width modulated signal and the clock signal are transmitted across separate opto isolators and the pulse width modulated signal is reconstructed synchronously using the clock signal. JP A 52 72502 discloses a digital code transmission system which uses an optical fibre as a single optical channel for the transmission of serial binary code. In this arrangement edge pulses are produced which are representative of the leading and trailing edges of the binary coded pulses. These edge pulses comprise either two or one pulses respectively, and are produced synchronously with clock pulses. Both JP A 52 72502 and the article by Seifart and Barenthin disclose arrangements which rely on a clock to synchronise the pulses transmitted across one or more opto isolators. These arrangements are thus limited in the accuracy with which they can transmit and maintain pulse widths. In both cases the resolution or accuracy of the widths of the transmitted pulses is limited by the clock frequency. The present invention provides an isolator circuit for providing electrical isolation for an input pulse width modulated signal which has a leading edge and a trailing edge where the input pulse can have any arbitrary pulse width, the circuit comprising first means for receiving the input signal, and using only the input signal to provide a first pulse signal having a leading edge proximate in time to the leading edge of said input signal, and a second signal having a leading edge proximate in time to the trailing edge of said input signal, said first means being operative to provide said first and second pulse signals at substantially equal intervals from receiving the leading and trailing edges of said input signal and isolation means having an input coupled to the first means and comprising a single light emitter for emitting light signals in response to said first and second pulse signals, and light responsive means optically coupled to the light emitter for receiving the emitted light signals and providing first and second isolated signals wherein the duration between the leading edge of the first and second isolated signals accurately represents the pulse width of the input signal. In a preferred embodiment, the input signal is a sine wave wherein the leading edge corresponds to the sine wave having a first predetermined level with a positive slope and the trailing edge corresponds to the sine wave having a second predetermined level with a negative slope. It is desirable that the isolation means utilised have fast and repeatable turn on times and response characteristics suitable for distinguishing between the first and second signals. Use of a single isolation device ensures that the turn on times in response to the first and second signals are substantially equal, thus increasing the accuracy of the isolator circuit. One advantage of the present invention is derived from converting the input signal into two signals representative of the leading and trailing edges respectively. This takes advantage of relatively stable turn on times of isolation devices and places less importance on turn off times which are usually different than turn on times causing distortion of the width of the input signal in devices transmitting an entire pulse. While turn on and turn off times may vary with time and temperature, the turn on time of the isolation device will still be substantially equal relative to immediate successive first and second signals, while the turn off time remains stable enough to distinguish between the first and second signal pulse widths thus maintaining high accuracy over time. Examples of the invention will now be described with reference to the drawings, in which An embodiment of the present invention is represented in block diagram form of a circuit 8 in FIG. 1. An input signal indicated at 10 is provided by an input circuit 11. Input signal 10 preferably comprises a pulse width modulated square wave signal representative of a signal from a sensor, such as an industrial standard 4 to 20 milliampere signal. Input signal 10 has a leading edge 12 and a trailing edge 14. Input signal 10 is provided along a line 16 to a first means 18, also referred to as signal generator 18. Signal generator 18 receives input signal 10 and provides a first signal 19 on a line 20 and a second signal 21 on a line 22 which are representative of leading edge 12 and trailing edge 14 of input signal 10 respectively. The first signal 19 and second signal 21 are preferably electrical pulses having different pulse widths to distinguish between leading edge 12 and trailing edge 14 of input signal 10. Signal generator 18 provides the first and second signals at substantially equal intervals from receiving the leading edge 12 and the trailing edge 14. Lines 20 and 22 are coupled by a line 23 to an input 24 of an isolation means 26, also referred to as isolator 26. Isolator 26 is a photo diode package which provides electrical isolation at its output 29 from its input 24. Isolator 26 thus provides distinctive first and second isolated signals 27 and 28 on a line 30 which are electrically isolated from and representative of the first and second signals 19 and 21. First and second isolated signals 27 and 28 are coupled to a suitable output means 32 also referred to as output circuit 32 for processing to provide for example a 1 to 5 volt dc signal representative of the input signal 10. In further preferred embodiments, output means 32 comprises a visual indication device such as a voltmeter. In a further preferred embodiment, input signal 10 comprises a sine wave which has a leading edge corresponding to a predetermined level at which the sine wave has a positive slope and a trailing edge corresponding to a predetermined level at which the sine wave has a negative slope. First and second signals 19 and 21 are then representative of the frequency or the amplitude of the sine wave input signal dependent upon the levels chosen, as desired. A detailed schematic diagram of circuit 8 indicated in FIGS. 2A and 2B on separate sheets is numbered consistently with FIG. 1. Input circuit 11 in FIG. 2A comprises a pair of input terminals 40, 42. Input terminal 40 receives a field input signal such as a 4 to 20 milliampere signal from a sensor. The field input signal is provided through an input impedance 44 and back through terminal 42. The field input signal is also provided through a resistor 45 which is coupled to terminal 40 to a first input 46 of a buffer amplifier 47. In further preferred embodiments, the field input signal comprises a voltage or frequency signal for which isolation is desired. Buffer amplifier 47 provides a buffered field signal along a line 48 to a first input 50 of a comparator amplifier 52. A ramp generator 54 provides a ramp signal along a line 56 through a buffer amplifier 58 through a resistor 59 along a line 60 to a second input 64 of comparator amplifier 52. Comparator amplifier 52 provides a square wave alternately having a high level and a low level at its output 66. When the ramp signal at a second input 64 attains an amplitude proximate to the amplitude of the buffered field signal at first input 50, the square wave at output 66 changes level. Output 66 is also coupled through a resistor 63 to second input 64 of comparator amplifier 52. The ramp generator starts a new ramp each time the ramp signal reaches a predetermined maximum level thus again causing a change in level of the square wave. The square wave has a width representative of the field input signal at terminal 40. Output 66 is coupled by a line 68 to a squaring device 71. Squaring device 71 provides input signal 10 having precisely defined leading and trailing edges 12 and 14. The time between the leading and trailing edges 12 and 14 is representative of the field input signal at terminal 40. Line 16 carries input signal 10 through a resistor 72 to a second input 73 of buffer amplifier 47 for stabilization of the square wave at output 66. Second input 73 of buffer amplifier 47 is also coupled to line 48 through a capacitor 74. Line 16 is also coupled to signal generator 18 which comprises a first one shot 75 and a second one shot 76. First one shot 75 is configured in a conventional manner to provide first signal 19 on line 20 upon detection of leading edge 12 of input signal 10. Second one shot 76 is similarly configured to provide second signal 21 on line 22 upon detection of trailing edge 14 of input signal 10. The first signal 19 and second signal 21 preferably are pulses and are distinguishable as by having different durations and respective leading and trailing edges. The first signal 19 preferably has a duration distinguishably longer than the duration of second signal 21. First one shot 75 and second one shot 76 are preferably matched one shots such that the time between first one shot 75 receiving the leading edge 12 of input signal 10 and providing first signal 19, and the time between second one shot 76 receiving the trailing edge 14 of input signal 10 and providing second signal 21 are substantially equal so that the time between the leading edges of first and second signals 19 and 21 accurately represents the input signal 10 pulse width. To preserve this time relationship between the first and second signals 19 and 21, lines 20 and 22 are preferably of equal length and have consistent signal propagation characteristics. Line 20 is coupled to line 23 through a resistor 77, and line 22 is coupled to line 23 through a resistor 79. A transistor 78 has a base 80 coupled to line 23 and has a collector 82 and an emitter 84. Emitter 84 is coupled to input terminal 42 by a line 86. Base 80 is coupled to line 86 through a resistor 87. A light emitting means 90, also referred to as light emitting diode 90 and a resistor 92 are series coupled between a source V1 and collector 82 of transistor 78. First signal 19 or second signal 21, when received at base 80 of transistor 78, cause a conductive path between source V1 and emitter 84 which forward biases light emitting diode 90 which then emits a light signal represented by arrows 94 having a substantially constant intensity and duration substantially equal to the duration of the first signal 19 or the second signal 21. Light is defined as including electromagnetic radiation in the infrared, visible and ultraviolet portions of the spectrum. First and second signals 19 and 21 preferably have amplitude and transient characteristics which cause transistor 78 to be conductive from collector 82 to emitter 84 at substantially equal times to preserve the time relationship between the first and second signals 19 and 21. A single light emitting diode 90 is used such that the emitted light preserves the time relationship between first and second signals 19 and 21 as thermal drift effects on the time relationship are substantially eliminated. Use of two light emitting diodes invites different turn on times due to turn on time dependence on environmental parameters such as temperature, as well as specification tolerances for a given lot of light emitting diodes which can adversely affect the time relationship between first and second signals 19 and 21. A light responsive means 100, also referred to as a photo diode 100 in FIG. 2B is optically coupled to light emitting diode 90 to receive the light signals indicated again by arrows 92. Isolator 26 is shown partially in FIG. 2A and partially in FIG. 2B and comprises light emitting diode 90 and photo diode 100. Isolator 26 in FIG. 2A is coupled to the remaining portion of isolator 26 in FIG. 2B by coupling broken lines 26A and 26B in FIG. 2A to corresponding broken lines 26A and 26B in FIG. 2B. Use of a single photo diode as opposed to separate photo diodes further preserves the time relationship between the first and second signals 19 and 21. Photo diode 100 is reverse bias coupled between a source V2 and a first transistor 101 at its base 102. Transistor 101 also has a collector 103 coupled to source V2 and an emitter 104 coupled to a second transistor 105 at its base 106. Transistor 105 has an emitter 107 coupled to source V2 through a capacitor 108 and has a collector 109 coupled to source V2 through a resistor 110. When photo diode 100 receives the light signals, it conducts thus turning on transistors 101 and 105 and provides the first and second isolated signals 27 and 28 at isolator output 29 which is coupled to collector 109 of transistor 105. The first and second isolated signals 27 and 28 are preferably negative going pulses of substantially the same duration and time relationship as first and second signals 19 and 21 respectively with corresponding leading and trailing edges. A line 114 is coupled to emitter 107 of transistor 105 and serves as a ground which is electrically isolated from terminal 42 and field ground. Isolator output 29 is coupled by line 30 to a first one shot 116 which on receiving the leading edges of the first and second isolated signals 27 and 28 provides a first pulse of a predetermined duration having a leading and trailing edge along a line 118 to a second one shot 120. Line 30 is also coupled to both inputs of an inverter 122 which has an output coupled by a line 124 to a first input 125 of a nand gate 126. A second input 127 of nand gate 126 is coupled by a line 128 to the output of second one shot 120. Second one shot 120 provides a second pulse of predetermined length along line 128 to nand gate 126 and is triggered by the trailing edge of the first pulse from first one shot 116. Nand gate 126 is coupled to both inputs of an inverter 130 by a line 132. The output of inverter 122 is also coupled by line 124 to a flipflop 140. Thus the first and second isolated signals on line 30 are inverted by inverter 122 and trigger flipflop 140 on their respective leading edges. Flipflop 140 then provides a pulse width modulated output signal on line 142 as a function of the first and second isolated signals 27 and 28. The output of inverter 130 is coupled to flipflop 140 by a line 144 to reset flipflop 140 when flipflop 140 is in an incorrect state with respect to the leading edges of first and second isolated signals on line 124. The durations of the first and second pulses provided by first and second one shots 116 and 120 are such that if flipflop 140 is being triggered to wrong states by first or second isolated signal 27, 28, such as on startup of circuit 8, nand gate 126 and inverter 130 will cause flipflop 140 to be reset and thenceforth be triggered to correct states. The pulse width modulated output signal from flipflop 140 on line 142 has the same pulse width as input signal 10 and is electrically isolated therefrom. A squaring device 146 is coupled to line 142 and squares the edges of the pulse width modulated output signal on a line 152. The pulse width modulated output signal on line 152 has an amplitude with respect to isolated ground on line 114 which is consistent with the predetermined maximum amplitude of the ramp generated by ramp generator 54. A low pass filter 150 is coupled to squaring device 146 by a line 152. Filter 150 comprises a first resistor 154 coupled between line 152 and a second resistor 156. A capacitor 158 is coupled between isolated ground 114 and first and second resistors 154, 156. The end of resistor 156 not directly coupled to resistor 154 is coupled through a resistor 158 to a first input 160 of an amplifier 162. Amplifier 162 provides the dc voltage signal at its output on line 164 representative of input signal 10. First input 160 of amplifier 162 is also coupled to isolated ground 114 through a capacitor 166. The output of amplifier 162 is coupled to a second input of amplifier 162 through a resistor 168. The output of amplifier 162 is also coupled through a capacitor 170 to a junction 172 between resistors 156 and 158. Filter 150 is preferably a 3 pole low pass filter to smooth the pulse width modulated output signal to provide the voltage signal on a line 164, preferably a 1 to 5 volt dc signal which is representative and substantially equal to the field input signal across input impedance 44. A partial parts list of the preferred embodiment of FIGS. 2A and 2B comprises An idealized timing diagram of the preferred operation of output circuit 32 is represented in FIG. 3, traces a through h. Signals appearing at the circled letters a through h on FIGS. 2A and 2B correspond to the traces of FIG. 3. The input signal 10 on line 16 is represented in trace a. Trace a shows the input signal 10 on line 16 as a pulse width modulated signal having a leading edge indicated at t1 and a trailing edge indicated at t2. Trace b represents the first and second isolated signals 27 and 28 on line 30 as a series of inverted pulses. Leading edges of input signal 10 in trace a, such as at t1 correspond to first isolated signal 27 which comprises pulses of longer duration than second isolated signal 28 which comprises pulses in trace b representing the trailing edges of input signal 10 in trace a. First isolated signal 27 should not be longer than the pulse width of input signal 10, and second isolated signal 28 should not be longer than the time between pulses of input signal 10. Trace c shows a series of first pulses from first one shot 116 which is triggered by leading edges of the first and second isolated signals 27 and 28 of trace b. Trace d represents a series of second pulses from second one shot 120 which is triggered by the trailing edges of the first pulses of first one shot 116 in trace c. The first pulses of trace c have a selected duration longer than the duration of the second pulses in trace d, the sum of the first pulse duration and the second pulse duration preferably being less than the time between pulses of input signal 10 in trace a. Trace e represents inverted first and second isolated signals 27 and 28 on line 124 which is preferably an inversion of trace b. Trace f represents the AND logical condition of the second pulse from second one shot 120, trace d and the inverted first and second isolated signals, trace e, and is used to reset flipflop 140 such as during startup of the circuit as indicated by a time frame tsu on traces g and h. Trace g represents the output signal on line 142 and as can be seen, at time t1 circuit 8 is turned on and at time t3, the logical AND of trace d and trace e is true so flipflop 140 is reset. In normal operation, flipflop 140 changes state as indicated in trace g upon receipt of leading edges of the signal in trace e, as indicated at t4, t5, t6 through ti. Trace h is simply the pulse width modulated output signal on line 152, an inversion of trace g. The first pulses g and h are representative of the startup time of the circuit indicated by time frame tsu. The total time t2 t1 between leading and trailing edges of trace a should be greater than the sum of the pulse durations in trace b which are representative of the leading and trailing edges in trace a. In a further preferred embodiment of the present invention, the first and second signals 19 and 21, and corresponding first and second isolated signals 27 and 28 are equal duration pulses whose amplitude distinguishes between leading edge 12 and trailing edge 14 of input signal 10. The advantage of representing the leading and trailing edges by two distinctive signals to utilize turn on time stability of isolation devices such as optical, electromagnetic or mechanical isolation devices is obtained so long as the signals have distinguishable characteristics representative of the leading and trailing edges respectively of input signal 10. Low cost and simple circuitry is used to implement the present invention because great accuracy of turn off times of isolator 26 is not required nor do widths of the signals need to be precisely measured. In a further preferred embodiment in FIG. 4, a pulse width modulated input signal on a line 316 is coupled to a first edge triggered monostable vibrator 320 and a second edge triggered monostable vibrator 326 which output on lines 330 and 332 respectively a first pulse and a second pulse corresponding to the leading and trailing edges of the input signal respectively. The first pulse is preferably of shorter duration than the second pulse. Lines 330 and 332 are coupled to a logical OR gate 336 for squaring the edges of and combining the first and second pulses on a line 340. Line 340 is coupled through a current limit resistor 344 and through a light emitting diode 348 to a first ground 350. Light emitting diode 348 provides light in response to the first and second pulses, preferably with a minimum delay which is equal relative to the first and second pulses. The light is received by the base of a photo transistor 360 having a collector 362 coupled through a resistor 364 to a voltage V and an emitter 368 coupled to a second ground 370 isolated from first ground 350. On receipt of the light from diode 348, the first and second pulses are inversely reproduced at collector 362. Collector 362 is coupled by a line 372 to a Schmitt trigger 374 for squaring the edges and inverting the first and second pulses. Trigger 374 provides the first and second pulses on a line 378 which are of the same polarity as the pulses on line 340 and are electrically isolated therefrom. A pulse discriminator 380 is coupled to line 378 and set such that the second pulse triggers a reset signal at the discriminator 380 output on a line 382. Line 378 is also coupled to a flipflop 386 having an output on a line 390. The leading edges of the first and second pulses cause the flipflop output to change state, while the reset signal on line 382 causes the flipflop to be reset during the second pulse, thus distinctly identifying the second pulse. Thus, a pulse width modulated output signal responsive to the first and second pulses on line 378 and the reset signal on line 382 is provided on line 390 electrically isolated from and preferably having an equal pulse width as the pulse width of the input signal on line 316.