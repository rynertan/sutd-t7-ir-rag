# METHOD FOR ADJUSTING A TIME DELAY

## Claims
Verfahren zur Anpassung einer Zeitverzögerung eines Signales an ein Bezugsereignis, welches folgende Schritte umfaßt

## Description
The present invention relates in general to digital logic test equipment and more particularly to a method and apparatus for inputting data for adjustment of test signal timing relationships. To test a digital circuit it is often useful to apply several digital test signals to a number of points in the circuit, each test signal changing state in a specified sequence and at a specified time with respect to a reference clock cycle. In the prior art, signal pattern generators capable of providing these timed test signal patterns were preprogrammed to provide the proper signal patterns and timing by an operator inputting numerical pattern and timing data. Usually digital circuit manufacturers provide test signal timing data graphically in the form of timing diagrams. Therefore, prior to programming a signal pattern generator to reproduce the test signals, an operator must first convert the graphical timing data of the timing diagrams into numerical timing data and then input that numerical data into the pattern generator. This conversion process takes time and is subject to error. An example of such prior art is disclosed in ELECTRONIC DESIGN, 15th October 1981, Flexible Pattern Generation Aids Logic Analysis Palmquist and Pettet . It is known to provide graphical displays of test and response signals. See, e.g., ELECTRONIC DESIGN, 15th November 1984, p.p. 307 to 316. Aspects of the invention are set out in the accompanying claims. According to one embodiment of the invention, a timing chart depicting the timing relations of a number of test signals to be generated by a signal pattern generator is displayed on a cathode ray tube CRT controlled by a microprocessor. Using a keyboard input to the microprocessor, an operator may then rearrange the displayed timing chart to match test signal timing charts published by manufacturers of equipment to be tested. When the displayed timing chart is appropriately adjusted, the microprocessor programs the signal pattern generator to generate test signals timed according to the information displayed by the timing chart. Preferably, the operator modifies the timing of each signal on the chart by selectively pressing increment and decrement keys on the keyboard which causes the timing of the signal relative to a reference cycle to be advanced or retarded. Thus an operator is able to input test signal timing data to a signal pattern generator by reproducing a manufacturer s test signal timing chart for a device to be tested without requiring him to first convert the graphically represented data of a timing chart into its numerical equivalents. An arrangement embodying the invention will now be described by way of example with reference to the accompanying drawings. Referring to FIG. 1, a signal pattern generator 10, depicted in block diagram form, is adapted to generate a set of digital test signals to be applied to device under test 12. The digital test signals change state in specified sequences with each state change of each test signal occurring at a specified time during a reference clock cycle. Signal pattern generator 10 has a pattern memory 14, a set of probe pods 16, a microprocessor system 18, a display terminal 20 and a keyboard 22. The random access pattern memory 14 stores data words with each bit of each word controlling the state of a digital test signal to be applied to device under test 12. The data words are written into pattern memory 14 by microprocessor system 18 which controls pattern memory 14 read and write operations through data, address and control lines connected thereto. In the preferred embodiment microprocessor system 18 incorporates an Intel 8088 microprocessor and includes an operating system capable of running a Pascal language program. Probe pods 16 transmit test signals to device under test 12 over parallel test lines channels 26, the signal state of each channel changing in response to a change in state of a separate bit of the data received by probe pods 16 from the pattern memory 14. Probe pods 16 include programmable delay circuits, one per channel, such that a change in state of any channel line 26 in response to a change in state of a corresponding bit of the data from pattern memory 14 may be delayed by an adjustable amount. The amount of delay for each channel is controlled by timing data generated by microprocessor 18 and applied to each probe pod 16 over data lines 28. FIG. 2 is a block diagram of an embodiment of one probe pod 16 of FIG. 1. Each probe pod comprises a pod clock delay circuit including a two step tapped delay line 30 having a five nS delay for each step. The two taps from delay line 30 and the CLK signal are applied to three inputs of a multiplexer 32. The multiplexer 32 selectively couples one of its inputs to its output such that its output, designated the pod clock PCLK, changes state either five nS before 5 , at the same time 0 , or five nS after 5 an arbitrary reference point in the system clock. The switching state of multiplexer 32 is controlled by two data bits stored in register 34. Register 34 is previously loaded by serial data transmitted from microprocessor system 18 over timing data line 28 to shift register 36. The low order bits of the timing data include the appropriate data to be stored in a register of the pod while the high order bits of the timing data comprise the address of the register to receive the data. The high order bits are applied to decoder 38 which energizes an output line connected to a write control input of register 34, if the register is being addressed, thereby causing the register to store the low order bit data. The PCLK output of pod multiplexer 32 is applied in common to eight channel timing circuits. Only the channel 0 timing circuit, comprising delay line 40, multiplexer 42, flip flop 44, register 46, and buffer 48, is shown in detail in FIG. 2, the other channel timing circuits being similar in detail to the channel 0 timing circuit. The PCLK signal is applied to the input of a ten step tapped delay line 40 with each step delaying the PCLK signal by 1 nS. The ten taps of the delay line, along with the PCLK signal, are applied to inputs of a channel 0 multiplexer 42. The eleven multiplexer 42 inputs are designated as 5 to 5 nS in steps of 1 nS in reference to some arbitrary point in the PCLK signal. A channel clock CCLK output of multiplexer 42 is applied to a clock input of D type flip flop 44. The switching state of the channel 0 multiplexer 42 is determined by data stored in register 46, also loaded in the same fashion as register 34 by timing data transmitted from the microprocessor system 18 through shift register 36. Register 46 is also input enabled by a signal from decoder 38. One line, DATA 0, of a set of eight data lines 24 from pattern memory 14 to the pod 16 is applied to the D input of flip flop 44 such that the state of a Q output of flip flop 44 changes to match the state of the DATA 0 line whenever the flip flop 44 clock input is strobed by a signal from the channel 0 multiplexer 42. The Q output, applied through buffer 48 to the device under test 12, has one test signal CHO of test lines 26 applied to device under test 12. Assuming the system timing cycle reference point occurs 10 nS after the system clock CLK changes state, the state of CHO can change at the system reference point if multiplexer 32 is set such that PCLK changes state 5 nS after CLK changes state i.e. the 0 tap of delay line 30 is selected while multiplexer 42 is set such that the CCLK signal changes state 5 nS after PCLK changes state i.e. the 0 tap of delay line 40 is selected . The relative timing of the CHO state changes, with respect to the system reference timing point, can be adjusted from 10 to 10 nS by appropriately setting the switching positions of the pod and channel multiplexers 32 and 42. For instance a 10 nS setting, indicating that the CCLK changes state 10 nS before the system reference point, is obtained by setting pod multiplexer 32 such that PCLK is advanced by 5 nS i.e., by selecting the 5 input and setting the channel multiplexer 42 such that the CCLK signal is also advanced by 5 nS i.e., the 5 input . FIG. 3 depicts a menu to be displayed on display terminal 20 of FIG. 1 when an operator wishes to alter the relative timing of one or more of the test signal channel outputs. The display shows in field 50 a reference pod number, and in this case probe pod 4A has been selected. In field 52 one channel of the reference pod is selected as a reference channel. In this case channel 0 of pod 4A is selected. In field 54 the delay time of the reference channel, the sum of the associated pod multiplexer 32 and channel multiplexer 42 delay tap selections, ranging from 10 to 10 nS, is displayed. In this case the pod 4A multiplexer 32 has selected its 5 nS tap input while the channel 0 multiplexer 42 of pod 4A has also selected its 1 nS tap input such that the net delay of channel 0 is 6 nS. Field 56 is a graphical display of the state change timing of the reference channel timing signal with respect to the system reference timing point. The relative position of the state change indication, from 10 to 10 nS, matches the delay time in field 54, 6 nS. In field 58 a probe pod whose timing is to be modified, in this case pod 3A, is selected. In field 60 the pod clock PCLK timing, being the pod multiplexer 32 setting 5, 0 or 5 nS of the selected pod, is displayed. In field 62 the relative timing of each channel of the selected pod, including the sum of the associated pod and channel multiplexer tap selections of each channel, is displayed. In field 64 the same information is displayed graphically. An operator can select any of fields 50, 52, 58, 60 or 62 by using a set of cursor control keys on keyboard 22 of FIG. 1 to locate a cursor not shown under the selected field. Once a field is selected, the data in the field may be modified by using various other keys on the keyboard 22. Initially an operator might select a reference pod by selecting field 50 and, using alphanumeric keys on the keyboard, type in the designation of the selected pod. Then he can select the reference channel by selecting field 52 and pressing a channel select key on the keyboard which causes the channel designation in field 52 to increment each time it is pressed, reverting to the 0 channel when the key is pressed while CH 7 appears. The displays in fields 54 and 56 are automatically updated to match the current delay time settings associated with the reference channel when a new reference channel is selected. The operator may then change the relative timing of any channel by first using the cursor key to select field 58 and then using alphanumeric keys to type in the designation of a selected pod. The pod clock setting for the selected pod can be changed by using the cursor keys to select field 60 and then by repeatedly pressing an increment key or a decrement key on keyboard 22 to shift the pod clock setting to 5, 0 or 5 nS. The delay times shown in 62 and 64 automatically change to suit when the pod clock setting is altered. For instance, if the pod clock is initially set at 5 nS, and the channel multiplexer for channel 4 is initially set to 1 nS then the delay times in fields 62 and 64 will indicate 4 nS. If the pod clock time in field 60 is then changed to 5 nS, then the delay time associated with CH 4 displayed in fields 62 and 64 will change to indicate 6 nS. The delay times displayed in fields 62 and 64 for all other channels of the pod will also shift by 10 nS when the pod clock delay is shifted by 10 nS. Finally, the operator may set the timing of each channel of the pod by using the cursor keys to select the appropriate one of fields 62 and then using the increment and decrement keys to change the delay time settings indicated in the field. The delay time display increases by 1 nS each time the increment key is pressed and decreases by 1 nS each time the decrement key is selected. The graphical representation in field 64 also changes at the same time to match the numeric indication in field 62. With the pod clock selected at 5 nS, the channel delay times for the pod can range from 10 to 0 nS in steps of 1 nS. With the pod clock selected at 0 nS, the channel delay times can range from 5 to 5 nS. And with the pod clock set at 5 nS, the channel delay times can range from 0 to 10 nS. Whenever the delay time associated with the selected reference channel is changed, the delay times associated with all other channels of all pods change automatically by a like amount. Also by changing the selected reference channel, by modifying fields 50 or 52, the displayed delay times of all other channels will change by a like amount if the delay time of the new reference channel differs from the delay time of the previous reference channel. Use of a reference channel allows the operator to change the timing of all channels by the same amount by changing the timing of the reference channel. Once the pattern memory 14 of FIG. 1 has been loaded with the appropriate pattern data and once the delay times of all channels are adjusted as desired, the operator can initiate signal generation by pressing a start key on the keyboard 22. The appropriate data for setting the multiplexers in each pod to match the displayed timing charts is then transmitted over line 28 to the data registers 34 and 46 in each pod. When each multiplexer has been properly set, the microprocessor begins a test operation, initiating a series of pattern memory read cycles causing pattern memory 14 to transmit a series of selected data words to the probe pods 16 which then transmit the time delayed test signals to device under test 12. FIG. 4 is a flow chart for a software program for microprocessor system 18 controlling operator input of timing data. Once the menu of FIG. 3 is on the screen of display terminal 22, the cursor begins under field 50. If the cursor is currently under field 50, indicating the reference pod number, or under field 50, indicating a currently displayed pod number, block 70 of the flow chart directs program flow to block 72 where the program waits for 2 keys to be pressed. If two keys are pressed, program flow is directed to block 74 which determines if one of the keys pressed was either a cursor key or the start key. If a cursor control key or the start key was pressed, program flow is directed to block 75 where the cursor is relocated to the next field to the right, field 52, if the right move cursor control key was pressed, or to the next lower field, field 60, if the downward cursor key was pressed. Program flow is then directed to block 92. If other than a cursor or the start key was pressed, block 74 directs program flow to block 76 where the new two digit data keyed in is checked to see if it indicates a valid pod number. If not, block 78 generates an error message and program flow is directed back to block 72. If the new pod number typed in is a valid pod number then program flow passes from block 76 to block 80 where the new number is displayed in field 50 or field 58, depending on the currently selected field. Program flow then passes to block 82. If field 50 is selected then block 82 directs program flow to block 84 where the display of fields 54 and 56 is updated and then to block 86 where the display of fields 62 and 64 is updated to account for the new reference channel. If field 58 is currently selected, program flow is directed by block 82 to block 88 where the pod clock display of field 60 is updated and then to block 90 where the display of fields 62 and 64 is updated to display the channel timing for the newly selected pod. From block 86 or block 90 program flow then passes back to block 72. Once field 52 has been selected, and program flow reaches block 92, it is directed to block 94 where the program waits for a key to be pressed. When a keyboard key is pressed, program operation passes to block 96 which determines if a cursor key or the start key was selected. If so, block 96 directs the program to block 97 where the cursor is appropriately relocated on the screen if a cursor key was operated and then to block 106. If other than a cursor key or the start key was pressed, block 96 directs program flow to block 98 which determines if the select key was pressed. If not, flow is directed to block 100, which generates an error message, and then back to block 94 to wait for another key to be pressed. However if the select key was pressed, then program flow passes from block 98 to block 102 where the channel number is incremented in field 52 and the delay time displayed in fields 54 and 56 is updated to display the current delay time for the new reference channel. Program flow then passes to block 104 where the timing data and charts in fields 62 and 64 are modified to account for any difference between the delay times associated with the new and old reference channels. From block 104 program flow reverts back to block 94. Once field 60 has been selected, and the program has reached block 106, block 108 is entered where the program again waits for a keyboard key to be pressed and then the program passes to block 110. If a cursor key or the start key is pressed then block 110 directs the program to block 111, where the cursor is appropriately relocated on the screen, and then on to block 126. If other than a cursor key was pressed, block 110 directs program flow to block 112 which in turn redirects flow to block 114 if other than an increment or decrement key was pressed. Block 114 generates an error message and then passes program operation back to block 108. If an increment or a decrement key was pressed, block 112 directs program operation to block 116. In block 116, the program checks to see if the current pod clock setting 5, 0 or 5 nS for the selected pod is already at its upper or lower limit. If the increment key was pressed with the pod clock setting already at 5 nS, or if the decrement key was pressed with the pod clock setting already at 5 nS, then the setting remains unchanged and the program returns to block 108 to wait for another key. Otherwise program flow is directed to block 118 where the pod clock delay time displayed in field 60 is increased or decreased by 5 nS according to whether the increment or decrement key was pressed. Then in block 120 the program determines whether the currently selected pod in field 58 is the same as the reference pod at field 50. If not, then block 124 is entered where the appropriate channel delay times in fields 62 and 64 are updated to account for the new pod clock setting. If the reference channel pod clock was changed, block 120 passes the program to block 122 where the displays in fields 54 and 56 are updated to reflect the new reference delay time. From block 122 program flow passes to block 124 where fields 62 and 64 are updated to change the delay times of all channels by an amount equal to the change in the reference channel. From block 124 the program returns to block 108. Once field 62 has been selected, and program flow has reached block 126, it is directed to block 128 where the program again waits for a keyboard key to be pressed. When a key is pressed block 128 directs the program to block 130. If a cursor key or the start key is pressed then block 130 directs program operation to block 131 where the cursor is appropriately relocated on the screen, and then on to block 146. If other than a cursor or start key was pressed, block 130 directs the program to block 132 which redirects flow to block 134 if other than an increment or decrement key was pressed. Block 134 generates an error message and then passes program operation back to block 128. If an increment or a decrement key was pressed then block 132 direct program operation to block 136. In block 136 the program checks to see if the channel mutliplexer setting 5 to 5 nS for the selected channel or field 62 is already at its upper or lower limit. If the increment key was pressed with the channel multiplexer setting already at 5, or if the decrement key was pressed with the setting already at 5, then the setting remains unchanged and the program returns to block 128. Otherwise program flow is directed to block 138 where the channel delay time displayed in fields 62 and 64 is increased or decreased by 1 nS according to whether the increment or decrement key was pressed. Next in block 140 the program determines whether the currently selected pod in field 58 is the same as the reference pod of field 50. If not, then program flow passes back to block 128 with no further display changes. If the reference channel delay time has been changed, block 140 passes program flow to block 142 where the reference channel delay times displayed in fields 54 and 56 are modified. Then in block 144 the delay times of all channels displayed in fields 62 and 64 are adjusted to account for the new reference channel delay time. From block 144 the program returns back to block 128. If the last key pressed in blocks 72, 94, 108 or 128 was a start key, then the program passes through blocks 92, 106 and 126 to block 146. Block 146 directs program flow to block 148 where the timing data for controlling the switching positions of all of the multiplexers in the pods 16 is determined from the delay time data entered into field 60 for each pod clock and into fields 62 for each channel of each pod. Then block 150 initiates the signal pattern generating operation. When the signal generating operation is complete, block 150 directs return to block 152 where other fields in the menu not shown may be accessed and then to block 154 where other functions of the signal generator are performed. These other functions may include the loading of data into the pattern memory, the specification of the order in which the data stored in the pattern memory is to be read, and the setting of system clock rate. These other functions of the signal generator are not new and are not further detailed herein. Thus the operator can change the timing delays associated with the test signals generated by the signal generator by changing a graphical display of the timing data to match a similar graphical depiction of test signals as may be specified by a manufacturer of equipment to be tested. It is not necessary that he input numerical delay times in order to change that display. Rather the operator selects the appropriate channel and then uses an increment or a decrement key to change the displayed channel time delay until it appears to be graphically the same as the manufacturer s test signal specification chart. This permits quicker adjustment of the delay times and helps reduce errors in setting those times by providing immediate, graphical feedback to the operator of the changes he has made in signal timing. While a preferred embodiment of the present invention has been shown and described, it will be apparent to those skilled in the art that many changes and modifications may be made without departing from the invention in its broader aspects. For instance, the graphical timing data input method of the present invention could be used in conjunction with any apparatus requiring the adjustment of relative timing of a signal event and is not limited to use in conjunction with a signal generator as described herein. Also other means could be provided to allow the operator to modify the signal timing display other than increment and decrement keys. For instance in an alternative embodiment the operator could place a cursor in a selected place on one of the channel timing displays in field 64 by operating the cursor keys. When the cursor is located under a selected delay time 10 to 10 , a select key could be pressed causing the timing delay to change to the selected delay time.