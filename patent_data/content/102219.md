# Acceleration deceleration device for numerical controller.

## Abstract
An acceleration deceleration device for a numerical controller is provided with interpolating means for periodically obtaining a minute displacement in each axis from a separately calculated minute displacement in a tangential direction. The acceleration or deceleration is carried out for a minute displacement after interpolation. Delays are successively stored in the form of interpolated minute segments and a minute displacement in a tangential direction separately calculated from a delay in the tangential direction is proportionally distributed for each minute section, thereby to obtain an output minute displacement in each axis.

## Claims
CLAIMS 1. An acceleration deceleration device for a numerical controller which is provided with interpolating means for periodicaily obtaining a minute displacement of a workptece or cutter in each axis from a separately calculated minute displacement thereof in a tangential direction, comprising minute dtsplacement storage means for successively storing minute displacements in each axis direction and in a tangential direction interpolated by interpolating means for periodically obtaining minute displacements in each axis direction from separately calculated minute displacements in the tangential direction tangential minute output displacement computing means for computing a minute output displacement SO in the tangential direction by performing acceleration or deceleration on the basis of the minute displacement in the tangential direction through the use of a predetermined acceleration deceleration algorithm and output means for successively taking out the minute displacements in each axis direction from the minute displacement storage means and distributing and outputting to each axis the minute displacement in each axis direction in accordance with the ratio between the corresponding minute displacement in the tangential direction stored in the minute displacement storage means and the minute output displacement SO computed by the tangential minute displacement computing means. 2. An acceleration deceleration device according to claim 1, wherein the output means comprisis output constant specifying means for specifying minute displacements for output among the minute displacements in each axis direction and in the tangential direction stored in the minute displacement sorage means, specifying the specified minute displacements as proportional constants for computing minute output displacements and modifying the minute displacements for output and the proportional constants to the minute displacements input immediately after them when the minute output dispiacement SO is not equal to zero but the specified tangential minute displacement for output is zero first output means which is selected when the tangential minute displacement for output is smaller than the minute output displacement SO, for outputting to the respecti axes all the minute displacements for output and second output means which is selected when the tangential minute displacement for output is larger than the minute output displacement SO, for distributing and outputting to the each axis directions dwe minute displacemen for output stored in the minute displacement storage means in accordance with the ratio between the corresponding minute displacement in the tangental direction and the minute output displacement SO and for updating the minute displacement for output with the minute displacement thus output.

## Description
ACCELERATION DECELERATION DEVICE FOR NWERICAL CONTROLLER The present invention relates to an acceleration deceleration device for a numerical controller. Conventional acceleration deceleration devices of this kind are roughly classified into those of the type that performs acceleration or deceleration while varying the feed rate which is provided to interpolating means, and those of the type that performs acceleration or deceleration for each axis while manipulating a minute displacement from the interpolating means in consideration of the overall delay. With the latter system, since acceleration or deceleration takes place entirely independently of interpolation, it is sufficient for the start and stop of a workpiece or cutter only to start and stop the interpolation without regard to acceleration or deceleration and, accordingly, this system is advantageous in that the interpolating means is simple structured, but is defective in that an error is caused in the path of the cutter after acceleration or deceleration because of a delay for each axis. In contrast thereto, the former system is entirely free from the fear of an error in the path of the cutter being caused by acceleration or deceleration, but in order to stop deceleration accurately at the end of given movement of the workpiece or cutter, it is necessary to detect at all times the distance necessary for deceleration corresponding to ever changing moving speed of the workpiece or cutter and the distance from its position to the end of its movement therefore, complex calculations are involved and a complicated acceleration deceleration device is needed therefor.Further, in the case of additionally providing a function of calculating the position of the workpiece or cutter in each axis after interpolation to check whether the workpiece or cutter is within a limit range of movement, the latter system is capable of decelerating and stopping the workpiece or cutter within the range of its movement through utilization of a delay just corresponding to the distance of deceleration which exists between the positions of the workpiece or. cutter after interpolation and after acceleration or deceleration. On the other hand, the former system has no such delay, and hence possesses the drawback that it cannot decelerate and stop the workpiece or cutter within the range of its movement. An embodiment of the present invention can provide an acceleration deceleration device for a numerical controller which permits simplification of the arrangement of interpolating means and is capable of deceleration and stopping of a workpiece or cutter within a given limit range of its movement. An embodirnent of the present invention can provide an acceleration deceleration device for a numerical controller in which an error in the path of a cutter by acceleration or deceleration is very small. An accelerstion deceleration device fflibodying the present invention is provided with minute displacement storage means for successively storing minute displacements in each axis drection and in a tangential direction inter polated by interpolating means for periodically obtaining minute displacements in each axis direction from separately calculated minute displacements in the tangential direction, tangential minute output displacement computing means for computing a minute output displacement SO in the tangential direction by performing acceleration or deceleration on the basis of the minute displacement in the tangential direc tion through the use of a predetermined acceleration deceleration algorithm, and output means for successively taking out the minute displacements in each axis direction from the minute displacement storage means and distributing to each axis the minute displacement in each axis direction in accordance with the ratio between the corresponding minute displacement in the tangential direction stored in the minute displacement storage means and the minute output displacement SO computed by the tangential minute displacement computing means. The abovesaid output means comprises output constant specifying means for specifying minute displacements for output among the minute displacements in each axis direction and in the tangential direction stored in the minute displacement storage means, specifying the specified minute displacements as proportional constants for computing minute output displacements and modifying the minute displacements for output and the proportional constants to the minute displacements input immediately after them when the minute output displacement SO is not equal to zert but the specified tangential minute displacement for output is zero, first output means which is selected when the tangential minute displacement for output is smaller than the minute output displacement SO, for outputting to the respective axes all the minute displacements for output, and second output means which is selected when the tangential minute displacement for output is larger than the minute output displacement SO, for distributing and outputting to the each axis directions the minute displacement for output stored in the minute displacement storage means in accordance with the ratio between the corresponding minute displacement in the tangential direction.and the minute output displacement SO and for updating the minute displacement for output with the minute displacement thus output. An embodiment of the present invention can provide an acceleration deceleration controller for a numerical control device that is provided with interpolating means for periodically obtaining a minute displacement of a workpiece or tool in each axis from a separately calculated minute displacement thereof in a tangential direction. Reference is made , by way of example, to the accompanying drawings, in which Fig. 1 is a block diagram illustrating the arrangement of an acceleration deceleration device embodying the present invention Fig.2 is a diagram explanatory of the operation of an embodiment of the present invention Fig. 3 is a block diagram illustrating an example of hardware which can constitute an acceleration deceleration device embodying the present invention and Figs. 4 through 6 show an example of a flowchart of an acceleration deceleration routine which is carried out by ansaccelerationldeceleration device embodying the present invention. In Fig. 1, interpolating means 1 is to obtain minute displacements AX and AY in respective axes from a minute displacement AS in a tangential direction calculated by feed rate control means not shown . The arrangement of the interpolating means 1 is well known. Tangential direction minute output displacement computing means 2 is to compute a minute output displacement SO in the tangential direction by performing accelera tion or deceleration on the basis of the minute displacement hS in the tangential direction. Minute displacement atorage means 3 is to store the minute displacements hX and bY from the interpolating means 1 and the minute displacement AS in the order of output. For example, in the case of interpolating a circular arc OP shown in Fig. 2, if the minute displacements are output in an order X1, Y1 X2, Y2 X3, Y3 , then they are stored in the order of output as depicted inFig. 1 and, at the same time, the corresponding minute displacements hSl, AS2 and AS3 in the tangential direction are also stored. Incidentally, the minute displacements hSl to S3 may be obtained from the minute displacements bX1 to AX3 and Y1 to EY3, or the input to the interpolating means 1 may also be used. Output constant specifying means 4 specifies those of the minute displacements in the respective axes and in the tangential direction stored in the minute displacement storage means 3 which are to be taken out as outputs, and it specifies the specified minute displacements for output as proportional constants for computing minute output displacements in the respective axes. In this case, when the tangential minute output displacement SO is not zero but the tangential minute displacement for output is zero, the specified minute displacements for output and the proportional constants are replaced with those immediately following them. First output means 5 is to provide to position control circuits not shown in the respective axes all the minute displacements for output in the respective axes which are stored in the minute displacement storage means 3. The values of all the output minute displacements for output become zero. Second output means 6 computes the minute displacement for output in each axis stored in the minute displacement storage means 3 in accordance with the ratio between the corresponding tangential minute displacement and the proportional constant, and provides the computed minute displacement to the corresponding position control circuit and, further, it subtracts the output displacement from the minute displacement for output in each axis. Switching means 7 receives the tangential minute displacement for output AS OUT from the minute displacement storage means 3 and the tangential minute output displacement SO and, for each cycle of acceleration or deceleration control, it performs predetermined status decisions in such a sequence as follows 1 Decision as to whether SO 0 2 Decision as to whether AS OUT 0 3 Decision as to whether AS OUT SOIn the decision l If SO 0, the current cycle is brought to an end. if SO 0, the decision 2 is made.In the decision 2 If AS OUT 0, the output constant specifying means 4 is driven to make the decision 3 . If AS OUT 0, the decision 2 is made.In the decision 3 If AS OUT SO, the second output means 6 is driven to put an end to the current cycle. If AS OUT SO, the first output means 5 is drive and then the operation is returned to the procedure of the condition AS OUT 0. The operation of the present invention will hereinafter be described in connection with the interpolation oi the circular arc OP shown in Fig. 2. The minute displacements EX1, AY1 and AS1 in the X and the Y axis and in the tangential direction by a first interpolation are stored in the storage means 3, and they are specified as the minute displacements for output and as the proportional constants. Further, a minute output displacement SO1 in the tangential direction is computed by the tangential minute output displacement computing means in accordance with an existing acceleration deceleration algorithm. Now, assuming that the rate of acceleration deceleration is selected to be k percent for example, 20 of a delay ERR, then the minute output displacementSO1 in the tangential direction has a length equal to k percent of the minute displacement S1 in the tangential direction as shown,in Fig. 2. In the first cycle, SO1 0, S1 0 and S1 SO1, so that the second output means 6 is selected, which obtains minute displacements for output WX1 and WY2 in the X and the Y axis according to the following equations and provides them to the X axis and the Y axis position control circuit, respectively. KX WX1 SO1 x KX KS WY1 SOp X KS where KX is a proportional constant for. the X axis, which has a value equal to X1, and KY is a proportional constant for the Y axis, which has a value equal to EY1. That is, as shown in Fig. 2, the minute displacements for output WX1 and WY1, which correspond to k percent of the minute displacements QX1 and Y1 obtained by the first interporation, respectively, are output for the respective axes. Further, WX1, WY1 and SO1 thus output are subtracted from the minute displacements for output AX1, Y1 and tSl, respectively, by which the minute displacements for outputs become such as indicated by X1 , Y1 and S1 in Fig. 2. In the next cycle, minute displacements X2, EY2 and AS2 in the X and the Y axis and in the tangential direction, obtained by a second interpolation, are stored in the storage means 3. Accodingly, the overall delayERR becomes such indicated by ERR2 in Fig. 2, so thatSO2, which is k percent of the delay ERR2, is output from the tangential minute displacement computing means 2.Also in this cycle, SO2 0, A51 0 and AS1, S02, so that the second output means 6 is selected, from whichWX2 and WY2 are provided to the X and the Y axis and the minute displacements for output are changed to X1 , Y1 and AS1 . In the next cycle, the minute displacements X3, AY3 and AS3 in the X axis, Y axis and tangential directions by a third interpolation are stored in the storage means 3.Accordingly, the overall delay is such as indicated byERR3 in Fig. 2 and SO3 which is k percent of the delay is output from the computing means 2. In this cycle, since S1 SO3, the first output means 5 is selected first to provide therefrom WX3 X1 and WY3 Y1 to theX and Y axes, respectively. Further, w53 AS1 corresponding to the abovesaid WX3 and WY3 is subtracted from SO Then the output constant specifying means 4 is started, by which EX2 EY2 and AS2 are specified as new minute displacements and proportional constants.Consequently, the condition AS2 SO3 SO3 holds and the second output means 6 is selected, from which WX3 and WY 3 corresponding to SO3 SO3 SO3 WS3 are provided to the X andY axes, respectively. And the minute displacements for output are altered to EX2 , EY2 and AS2,. Also in the subsequent cycles, the same operation as described above is repeated to carry out predetermi ned acceleration deceleration control. As described above, according to the present invention, since the minute displacement after interpolation is distributed to each taxis in accordance with the inclination of the direction of the displacement to the X or Y axis, an error in the path of a cutter is appreciably reduced.According to the conventional acceleration deceleration or deceleration for each axis while manipulating the minute displacement from the interpolating means in view of the overall delay, k percent, KERR2, of the delay ERR is dis tribute to each of the X and Y axes, for example, in the second cycle and, in the third cycle, k percent, kERR3 of the delay ERR3 is distributed to each of the X and Y axes, resulting in the path of the cutter greatly deviating from the circular arc inwardly thereof as will be seen fromFig. 2. But the present invention is entirely free from such a defect. While the foregoing description has been given in respect of two axis control of the X and Y axes, it is a matter of course that axis control of three or more axes can similarly be accomplished. Fig. 3 illustrates in block form an example of hardware which constitutes the acceleration deceleration device of the present invention. Numerical information necessary for numerical control including acceleration deceleration control is read out from a tape reader 33 or external memory 35 and is stored in a memory 36. In the memory 36 are stored various programs necessary for numerical control, for example, an interpolation routine, an acceleration deceleration routine, a position control routine and so forth, and a microprocessor 30 executes predetermined numerical control in accordance with such routines. Figs. 4 through 6 show a flowchart of an example of the acceleration deceleration control routine that is arnei out. y an acceleration deceleration device embodying the present invention.The meanings of symbols in Figs, 4 to 6 are as follows XI Input minute displacement in the X axis directionYI Input minute displacement in the Y axis directionZI Input minute displacement in the Z axis directionSI Input minute displacement in the tangential directionXO Output minute displacement in the X axis directionYO Output minute displacement in the Y axis directionZO Output minute displacement in the Z axis directionSO Output minute displacement in the tangential directionQX n Oueuing for XI QY n . Queuing for YIQZ n Queuing for ZIQS n Queuing for SI n 1 QMAX IN Input position index for queuingOUT Output position index for queuingQMAX Number of locations of queuingERR Delay for acceleration deceleration for SIKX Constant for proportional calculation component in the X axis direction KY Constant for proportional calculation constant in the Y axis direction KZ Constant for proportional calculation component in the Z axis direction KS Constant for proportional calculation component in the tangential direction In Figs. 4 through 6, step P1 is to calculate the input minute displacement SI in the tangential direction, steps P3 to P5 are to advance the queuing input index IN by one, and step P6 is to load each input minute displacement in the queuing. This input minute displacement is stored in the memory 36. Steps P1 to P6 implement the minute displacement storage means 3. Steps P7 to P9 perform acceleration or deceleration with SI delayed to obtain SO, thereby obtaining new delayERR. These steps implement the tangential minute output displacement computing means 2. SO and ERR are stored in the memory 36. Step P10 is to initially clear the output displacement in each axis. Steps Pll, P12 and P17 are to implement the switching means 7. Steps P13 to P15 perform an operation of advancing the queuing output index OUT by one, and step P16 carries out an operation of saving the contents of new queuing output positions as constants for proportional calculations. StepsP13 to P16 constitute the output constant specifying means 4.Incidentally, the constants for proportional calculations are stored in the memory 36. Steps P18 and P19 are to perform an operation of providing all the contents of the current queuing output positions toX axis, Y axis and Z axis position control circuits 37, 38 and 39. These steps constitute the first output means 5. Step P20 is to obtain, by a proportional calculation, an output displacement in each axis which is proportional toSO, step P21 is to apply the calculated results to the X axis,Y axis and Z axis position control circuits 37, 38 and 39, and step P22 is to update the contents of the current queuing output positions with the abovesaid calculation results. These steps constitute the second output means 6. As has been described in the ioregoing, in an embodiment of the present invention, since acceleration or deceleration is carried out through using a predetermined acceleration deceleration algorithm after interpolation, the interpolatint means is simplified in construction and the workpiece or cutter can be decelerated and stopped without getting out of the limit range of its movement. Further, delays are successively stored in the form of interpolated minute segments and the minute displacement in the tangential direction separately calculated from a delay in the tangential direction is proportionally distributed for each minute section to obtain the output minut displacement in each axis, so that an error in the path of the cutter can be suppressed very small. It will be apparent that many modifications and variations may be effected without departing from the scope of the novel concepts of the present invention.