# Electronic lock and key system for hotels and the like.

## Abstract
An electronic key and lock system is provided which is particularly suited for use in hotels and motels to control access to the rooms of the establishment. The system includes a battery energized microcomputer controlled unit in each door which is capable of activating an electromechanical deadbolt mechanism when a magnetically encoded card bearing a selected code is inserted into a slot in that particular door, and which includes a non contact proximity magnetic sensor for the cards. The microcomputer controlled unit has five levels of response, namely, guests, maid, master, grand master and emergency. The microcomputer is programmed to respond to cards bearing a new code when a new guest inserts his card into the slot in the door, and of adjusting the unit to respond to the new code and to reject the previous card. The microcomputer is capable not only of reading a magnetically encoded card inserted into the corresponding slot and of releasing the deadbolt mechanism of the door when the card bears the proper code, but it is also capable of recording the time and identity of all hotel personnel gaining access to the room, and of responding to a particular guest card only for a particular time period, corresponding to the duration of the guest s intended occupancy of the room.

## Claims
What is claimed is 1. An electronic lock control system to be mounted in a door including microcomputer means having first binary counter means for storing binary data representative of a first predetermined multi bit binary number and second binary counter means for storing binary data representative of a second predetermined multi bit binary number having a predetermined numeral relationship with said first predetermined multi bit number a key member having multi bit binary data stored thereon corresponding to an entrance code key reading means connected to said microcomputer means for reading the binary data stored on said key member and for introducing inputs corresponding to such data into said micro computer, the entrance code of said key member and the binary data stored on said first counter means for producing an access output, and said microcomputer responding to a match between the entrance code of said key member and the binary data stored in said second binary counter means for producing said access output means connected to said microcomputer and responsive to said access output to unlock the door and said microcomputer responding to a match between said entrance code stored on said key member and the binary data stored in said second binary counter for changing the count of said first and second binary counters by a predetermined amount. 2. The combination defined in claim 1, in which said microcomputer means changes the count of said first and second binary counters by one count in response to a match between said binary data stored on said key member and the binary data stored in said second binary counter means. 3. The combination defined in claim 1, in which said key member is magnetized to cause said key reading means to generate electric signals corresponding to the binary data stored on said key member and also to generate corresponding clock signals when said key member is read by said key reading means. 4. The combination defined in claim 1, and which includes a privacy switch connected to said microcomputer means and operable from the interior of the door to prevent said microcomputer means from producing said access signal when the privacy switch is set to a particular position. 5. The combination defined in claim 1, and which includes receiving means for said key member a switch mounted in said key receiving means to be actuated to a first position when said key member is inserted in said key receiving means, and which is actuated to a second position when the key is withdrawn from said key receiving means, and circuitry connected to said switch and to said microcomputer for causing the microcomputer to produce said access output a predetermined time interval after the switch has been actuated to its first position and returned to its second position by the insertion and withdrawal of the key member in and from said key receiving means. 6. The combination defined in claim 1, further including a battery for energizing said microcomputer, receiving means for said key member, a switch being mounted in said key receiving means to be actuated when said key member is inserted into said key receiving means, and a circuit connected to said switch and to said battery for testing the state of said battery each time said key member is inserted into said key receiving means. 7. The combination defined in claim 1, in which certain of the data bits constitute identification bits, and in which said microcomputer means includes a memory for storing information concerning the identity of the person using the card. 8. The combination defined in claim 1, in which certain of the data bits constitute a duration code, and said microcomputer means responds to said duration code to change the count of said first and second binary counters by said predetermined amount after a predetermined time represented by said duration code has expired. 9. The combination defined in claim 1, in which the difference between said first and second multi bit binary numbers is greater than one, and in which said microcomputer responds to a match between the entrance code stored in said key member and any multi bit binary number between said first and second multi bit binary numbers to produce said access output and for changing the count of said first and second counters by a predetermined amount. 10. The combination defined in claim 9, in which the data bits are symmetrically positioned on either side of the clock bits so that the key member may be inserted in the slot with either face up and still be effective.

## Description
SPECIFICATION ELECTRONIC LOCK AND KEY SYSTEM FOR HOTELS AND THE LIKE BACKGROUND OF THE INVENTION The advantages of electronic lock systems over their mechanical counterparts are obvious in that the.electronic lock systems offer greater protection in guarding against unauthorized entry, key duplication and lock. picking. The prior art electronic lock systems, in general, include an electronic control circuit which responds to a coded card, or other coded key, to operate an electromechanical latch The cards in the prior art systems are. usually coded optically, magnetically, electrostatically, or capacitively. United States Patent 3,821,704 discloses an electronic lock system in which. the electronic control circuit in each door can be readily changed to respond to new codes. This is an essential requirement in hotels, in order that each new guest may be issued a card bearing a new code which will be effective to open a particular door, and which will cause the. card issued to the previous guest to be no longer effective in operating the door. A feature in the system described in the patent is that when the new guest inserts his card into the slot in the door of the room assigned to him, the insertion causes the unit in the door to be changed to respond to the new code encoded into the card of the new guest, and to be no longer responsive to the.code encoded into the card issued to the previous guest. As mentioned in United States Patent 3,321,704, a requirement in adapting electronic lock systems to hotels is the necessity that the lock must be responsive to a variety of coded cards For example, a maid must be provided with a maid s card. For security reasons, however, it is generally desirable to provide the maid with a card which will open only the rooms to which the particular maid is assigned, and no others. A supervisor may be issued a higher level master card which will open a larger number of rooms than the maid s card, corresponding to the number of rooms assigned to all maids, under the supervision of the supervisor.Still higher level master cards may be issued to hotel personnel for opening all doors in a section of the hotel for maintenance purposes, or in case of fire, or other emergency. It will be seen, therefore, that the requirement of a number of levels of cards, and the recurrent need to change the individual door locks or groups of door locks to control theft, presents a sub stantial problem in adapting electronic lock systems to hotels. In the electronic lock system described in the aforesaid patent, each lock is controlled by a decoding device which includes a resettable memory. In its simplest form, the memory is pre set with a multi bit combination. Each time a card is used in the system described in the patent, at least two numbers are entered into the system, a key number and an authorize tion number. If the key number is found to match the combination previously stored in the particular decoding device, the lock of the corresponding door will be activated.If such a match is not made, a comparison is then made hetween the authorization number on the card and an authorization number entered by the previous user If the comparison is established, the decoding device is reset to the new key number, so that the lock may be opened by the new card Accordingly, to change a lock combination in any particular decoding device in any particular door in the system described in the patent, all that is necessary is to encode a newly issued card with a new card number and with the last card authorization number. Then, when the new card is inserted into the particular door, the circuitry will respond to change the stored code to the new code, and to activate the electromechanical latch system to open the door. In the system described in the patent, when a guest registers for a room, he is given a card bearing at least two fields of encoded information. One field contains the new key number, and the second field contains the authorization number assigned to the last guest to use the room. Upon the first insertion of the card by the new guest, the lock is automatically rekeyed to the new combination encoded into the new card.Thereafter, until the lock combination is again changed, the only card number that will open the particular door is that assigned to the present guest and no prior guest cards will open the lock since the decoding circuit now contains a new code number. Because the lock combination is stored in a memory accessible only by a particular logic circuit, electronic door locks of the type described in the patent are not susceptible to being picked. Further, each lock may be re keyed without the intervention of anyone but the user Finally, there is no inter connection with a central controller from the individual electronic units in the individual doors, which saves a considerable amount of installation cost. The electronic lock system of the present invention is of the same general type as described in United States Patent 3,821,704, However, the electronic lock system of the invention has additional features which include, inter alia, the installation in each door of a battery energized microcomputer controlled electronic circuit, and which are constructed so that units of the present invention to be installed easily and expeditiously in existing hotel doors of the type having mortise locks or having locks located in the knobs, Each of the units of the invention mounted in the individual doors responds to a programmable magnetically coded key card which serves to activate an electronic lock circuit if the code is proper, and also to up date the code stored in the unit if the card has been issued to a new guest.Each unit, in accordance with the concepts of the present invention, is also capable of identifying and recording the time of all entries into the room, and of limiting the number of days the card issued to any particular guest is effective The key cards used in the electronic lock system of the invention are magnetically encoded, and they are reprogrammable and may be used many times Data on each card is proximity sensed by a non contact electromagnetic read head, when the key card is inserted into a slot in any one of the electronic lock door units, so that the read head does not contact the magnetic material in the card and the problems of ambiguous data transfer due to dust, dirt, grease and the like, are eliminated, such problems being common to the prior art key card reading systems, whether magnetic strip, optical or capacitance encoding of the individual cards is used.In addition, the individual bits on the card used in the system of the invention are sufficiently loosely packed so that the information may be written into the card and read from the card by manual movement of the card without any need for drive motors or the likes For convenience, each unit may be constructed so that the key cards may be inserted into the slot with either face up, The card may also be programmed with a guest s identity and sent to the guest when a reservation is madet Then, upon entering the hotel, the guest need merely insert his card into a card reader to complete check in and to receive his room assignment.On check out the guest merely inserts his card into the reader and his billing information is automatically recorded and he is provided with a print out. A portable computer is provided which may be hand carried to any door and plugged into the electronic control unit in that door to read identification and time data stored in the unit, and also to re program the door unit if necessary, and to program the unit door for an initial use Specifically, the present invention provides an electronic lock control system to be mounted in a door including microcomputer means having first binary counter means for storing binary data representative of a first predetermined multi bit binary number and second binary counter means for storing binary data representative of a second predetermined multi bit binary number having a predetermined numeral relationship with said first predetermined multi bit binary number a key member having multi bit binary data stored thereon corresponding to an entrance code key reading means connected to said microcomputer means for reading the binary data stored on said key member and for introducing inputs corresponding to such data into said microcomputer, the entrance code of said key member and the binary data stored on said first counter means for producing an access output, and said microcomputer tesrnndina to a match between the entrance code of said key member and the binary data stored in said second binary counter means for producing said access output means connected to said microcomputer and responsive to said access output to unlock the door and said microcomputer responding to a match between said entrance code stored on said key member and the binary data stored in said second binary counter for changing the count of said first and second binary counters by a predetermined amount. The present invention also provides a key member for use with an electronic lock, or the like, comprising a magnetic card formed of selected magnetizable material, and having a configuration to be magnetized to represent a plurality of binary bitse BRIEF DESCRIPTION OF THE DRAWINGS FIGURE 1 is a perspective representation of a door lock unit which incorporates the concept of the present invention FIGURE 2 shows a metallic card which when inserted into a slot in the door unit of FIGURE 1 serves to unlock the door, the card being magnetically coded with any selected code by an appropriate coder located, for example, at the hotel desk FIGURE 3 is a schematic representation of the various components incorporated in the door unit ofFIGURE 1, including a circuit board FIGURE 4 is a circuit diagram of the circuitry on the circuit board of FIGURE 4 and FIGURE 5 is a representation of a portable computer which is used to encode the card of FIGURE 2, and which may be used to read data stored in the individual door units, and to program the door units for original use.DETAILED DESCRIPTION OF THE ILLUSTRATED EMBODIMENT The door unit of FIGURE 1 is designated 10, and it includes a slot 12 into which a magnetically encoded card 16 is inserted into the slott When the card bears the appropriate code, the door is unlocked, and may be opened by turning a handle 14. The card is formed, for example, of magnetizable material. The card includes a first series of slots designated A, a second series of slots designated B, and a third series of slots designated C, The portions of the card between the individual slots are appropriately magnetized in accordance with a binary codes The series A and B represent data bits, whereas the series C represent clock bitst The clock bit slots C may also be used with an optical reader for clocking purposes, if so desired.For example, when the card is inserted into slot 102 of FIGURE 5, the central row of slots may be read optically for clocking purposes, and when the card is withdrawn the clock bits may be read magnetically. The card may be encoded by a computer 100 FIGURE 5 by inserting the card in a slot 102, and by operating the keyboard of the computer. Computer 100 may be a small, inexpensive, portable computer, such as an EPSON HX 20. This computer is usually constructed to encode a magnetic tape in a cassette. The simple modification of replacing the cassette by cardreceiving slot 102, enables the card to be encoded by the computer. The programmable card 16 is advantageous over optically encoded cards in that it is easily encoded without any need for a hole punching machine, it is reusable, and it is not susceptible to counterfeiting. As shown in FIGURE 3, appropriate electronics are contained within the door unit 10 of FIGURE 1, including a circuit board 20, a board reader 22, a switch 24, an energizing battery 26, a solenoid 28, and a privacy switch 30, The card reader 22 includes three magnetic read heads 22A, 22B, 22C. When card 16 is inserted in slot 12, the card moves under the three read heads and is moved inwardly until it actuates switch 24. Switch 24 activates the circuit, and the card is read as it is withdrawn from the slot.The three heads 22A, 22B and 22C of the card reader 22 sense the encoding between the various series of slotsA, B and C on card 16, The magnetic sensing by the card reader 22 is on a proximity basis, in that the read heads 22A, 22B and 22C do not actually contact the magnetic card, so that the problems of ambiguous data transfer due to dust, dirt, grease, and the like, do not arise. The battery 26 activates the circuitry on cairo cuit board 2Q, and if the particular card 16 bears the proper code, solenoid 28 will be activated when the card is withdrawn from the slot, so that the door may be opened Privacy switch 30 may be actuated when a person is in the room, so that the circuitry on circuit board 20 will not respond to any card inserted into the slot, except the emergency card. Battery 26 may he a 2.9 or 3,4 volt lithium battery which has a life expectancy of 20. years, The circuit diagram of the door unit is shown in FIGURE 4.As shown, the three read heads 22A, 22B and 22C which make up the card reader 22 are respectively connected to comparators Al, A2 and A3 which may be contained in an integrated circuit of the type designated LM339. The comparators Alp A2 and A3 are connected to pins PBO, PB1 and PC1 of a microcomputer MC10 which may be of the type designated MC146805G2 The comparators Al and A3 supply data bits to the microcomputer MC10 and the comparator A2 supplies clock bits. Battery 26 has its negative terminal connected to a negative lead designated B , and its positive terminal connected to a positive lead designated B , The lead B is connected to the emitter of a transistor Q1 the collector of which is connected to a lead designated , A pair of resistors R1 and R2, each having a value of 5.1 kilo ohms, are connected in series between the lead B and B , These resistors are shunted hy a .1 microfarad capacitor C1. The junction of resistors R1 and R2 is connected to the read heads 22A, 22B. and 22C, and to a group of 5.7 kilo ohm resistors R3, R4 and R5. The read heads are connected to the inverting inputs of the respective comparators Al, A2 and A3p and the resistors R3, R4 and R5 are connected to the non inverting inputs of the comparators, A group of 1 megohm resistors R6, R7 and R8 connect the respective output terminals of the comparators to the corresponding non inverting input terminals The lead B is connected to the comparators to excite the comparatorsf and is also connected through respective 100 kilo ohm resistors R9, R10 and Rll to pins PB0, PB1 and PC1 of microcomputer MC10, Pins PB2, PB3, PB4, PB5, PB6 andPB7 of the microcomputer are grounded. The privacy switch 30 is connected to lock case ground, and to pin PA6 of the microcomputer MC10. Lead B , on the other hand, is connected to magnetic head ground. The card switch 24 has its armature connected to pin PA3 of the microcomputer, and a normally open terminal connected to lead B , and a normally closed terminal connected to a 5 microfarad capacitor C2 and through a 5g1 kilo ohm resistor R14 to lead B . Resistor R14 is also connected to pin VCC of the microcomputer, and capacitor C2 is connected to lead B , Card switch 24 is actuated to one position when the card is fully inserted in the slot 12, and it is actuated to its second position when the card is withdrawn from the slott The microcomputer MC1Q produces the access output at PA2 a predetermined time after the switch 24 has been actuated to its first position by the full insertion of the card into the slot, and then returned to its second position by the withdrawal of the card.The circuit is activated when the card is fully inserted, and the card is read as it is withdrawn, Pin PCQ of the microcomputer is connected to the junction of a grounded capacitor C3 and resistor R15, the resistor heing connected to the positive terminal of voltage source 26, Pin PAS is connected to a clock terminal through a 100 kiloMohm resistor R16, Pin PA4 is connected to a data terminal through a 100 kilo ohm resistor R17. Lead B is connected to a common ground terminal, as shown. Lead B , on the other hand, is connected through a diode CR1 of the type designated IN4007, and through a fuse fl to a power terminal. The computer 100 is shown in FIGURE 5, may normally be kept at the desk of the hotel, or other facility, and is used to code the guest cards, as each guest checks into the hotel. This being achieved by inserting a blank card into a slot 102 and then creating an appropriate code on the card by operation of the keys of the computer. Computer lQ0 may be carried to the individual doors, and then connected to the terminals described above to read identification and time date stored in the unit and also to supply power, clock signals, data and a ground connection to the circuitry ofFIGURE 4 for originally programming the microcomputer MC10, or for re programming the microcomputer in the eyent of a synchronization failure, or for opening the door in the event of battery failure. A pin designated OSC out is connected to a 470. kilo ohm resistor R20 and to a 22 megohm resistorR22, resistor R20 being connected to a grounded 22 picofarad capacitor C6 and resistor R22 being connected to a pin designated OSC inU of microcomputerMC10 and to a 7Q picofarad grounded capcitor C7, A 32,76.8 Kz crystal X1 is connected between the common junctions of resistor R22, capacitor C7 and resistorR20, capacitor C. Pin PA1 of microcomputer MC1Q is connected to a 1Q kilo ohm resistor R24, and pin PA2 is connected to a 1 kilo ohm resistor R26. These resistors are connected through respective 5,1 kilo ohm resistors R28 and R3Q to lead B The common junction of resistors R24 and R28 is connected to the base of a PNP transistor Q2, and the common junction of resistors R30 and R26 is connected to the base of a PNP driver transistor Q3.The emitters of the transistors Q2 and Q3 are connected to the leadB , The collector of transistor Q2 is connected through a 100 ohm resistor R36 to LED CR3, which is also connected to lead B . The collector of transistor Q3, on the other hand, is connected to the lock solenoid S10 which may, for example, be composed of 300 turns ofNo. 39 wire, and to diode CR8 which is connected to lead B .The other side of the lock solenoid 510 is connected to the lock casing The junction of fuse fl and diode CR1 is connected to a 10 kilo ohm resistor R50 which, in turn, is connected to a diode CR6, the diode being connected to lead B , The lead B is connected through a diode CR7 to pin PA4 of the microcomputer and through a diodeCR8 to the B lead, Lead B is also connected through a diode CR9, and through a further diode CR10 to theB lead, the junction of the latter diodes being connected to pin PA5 of the microcomputer, The diodes CR7,CR8, CR9 and CR1Q may be of the type designated lN4148, Diode CR9 is shunted by a 4.7 megohm resistor Rug0. The junction of resistors R1 and R2 is connected through a 1 megohm resistor R62 to the non inverting input of a comparator A4 which may also be included in the integrated circuit containing comparators Al, A2 andA3, The output terminal of the comparator A4 is connected to pin PA7 of microcomputer MC1Q, and through a 100 kilo ohm resistor R64 to the junction of resistorR14 and capacitor C2q Resistor R64 is also connected back through a 4.7 megohm resistor R66 to the inverting input of comparator A4, and to a 2 2 megohm resistor 68 which is connected to the B lead, Resistor R64 is also connected through a 100 kilo ohm resistor R80 to the junction of resistor R50 and diode CR6. The pin PA0 of the microcomputer is connected through a 1 1 kilo ohm resistor R82 to the base of transistor Ql, and through a 5.1 kilo ohm resistor R84 to the lead B . The transistor Q1 is normally non conductive, so that there is no significant drain on the battery 26 when the circuit of FIGURE 4 is not in use. When the card 16 of FIGURE 2 is inserted into slot 12 ofFIGURE 1, the card switch 24 closes, and this causes the microcomputer My10. to render the transistor Q1 conductive, thereby energizing the system. The transistor Q1 remains conductive while the card is being withdrawn from the slot, and until all the bits on the card have been read, after which the transistor Q1 again becomes non conductive, So long as the circuit is activated, the trans sistor Q2 is intermittently energized, and causes theLED CR3 to flash. The flashing continues, for example, for 5 seconds.If the proper code is on the card, the pin PA2 of the microcomputer causes the driver trans sistor Q3 to become conductive, thereby energizing solenoid S10 to unlock the door, The door must then be opened during the 5 seconds while the LED CR3 is flashing. At the end of 5 seconds, the transistor Q3 is again rendered non conductive, de energizing the solenoid. When the privacy switch 30 is closed, lead B is grounded, and the circuit is ineffective to unlock the door, even if a properly coded card is inserted into slot 12 of FIGURE 1. As described in conjunction with FIGURE 2 the rows A and E of the magnetic card 16 represent the data bits, and the center row C represents the clock bits.Accordingly, of the total bits which represent the data code, a certain number are used for the entry coder and the remaining bits are used for an identification code. The microcomputer MCl0 responds to the entry code on the card to make a comparison with the code stored in its memory, and if a comparison is achieved, causes the transistor Q3 to be rendered conductive so as to energize the door unlocking solenoid S10. The microcomputer also responds to the identification code bits to store in its memory, identification data including information relating to the time of each entry and whether the key used was a service key, a maid s key, or a guest s key, Specifically, the microcomputer 1Q stores five levels of key codes in a constructed embodiment of the invention.The first level responds to the insertion of a guest card in slot 12 of FIGURE 1 the second level responds to the insertion of a maids card in the slot the third level responds to the insertion of a master card in the slot of FIGURE 1 a fourth level which responds to the insertion of a grand master card in the slot and a fifth level responds to the insertion of an emergency card into the slot. The microcomputer MC10 also stores a sixth level of key code which corresponds to an access code for the computer lQ0 of FIGURE 5 when the computer is carried to the door and plugged into the circuit of FIGURE 4, With respect to the guest level, each new guest is issued a card, and his card will activate but a single door.With. respect to the maid level, each maid is issued a card, and her card will activate a predetermined number of doors when the privacy switch has not been activated. The master level cards will, for example, activate all the doors to permit servicing unless the privacy switch has been activated whereas the emergency level cards will activate the doors even though the privacy switch 30 has been activated, in order to gain access to the room under all conditions. The use of magnetic armature cards means that the cards may be reprogrammed and used many times, which reduces card cost, as compared with the single use card.The data on the card is proximity sensed as mentioned above, eliminating the need for the reader heads to touch the card which, as mentioned, eliminates the problems of ambiguous data transfer due to dust, dirt, grease, and the other environmental problems common to electronic readers, whether magnetic strip, optical or capacitance. As will be described, when a new guest is issued a card for a particular room, the code on his card is stepped by one or two on the binary scale, as compared with the previous card. Then, when the new guest inserts his card into the slot, the door unit responds to his card to unlock the door, and at the same time sets a register in the microcomputer 1Q so that the system will no longer respond to the preceding card, Even though the change of code from one card to the next in the constructed embodiment of the system is t llt or 2 on the binary scale, unauthorized entry can still be prevented by providing no indication on the card as to the position of the most significant bit or of the other bits of lesser significance, As mentioned above, the microcomputer 10 will read the card and record the time and identity of each person entering the room, for example, for the last fourteen entries Specifically, the microcomputer will indicate whether the person entering the room was a guest, a maid, service personnel or emergency personnel,In the case of hotel personnel, each is identified, because of identification data recorded on their cardsBy being able to read the card and record the last fourteen entries, the list of suspects of any burglary, or the like, is narrowed, which acts as a significant deterent to prevent burglary by hotel employees. As mentioned above, the identification and time data is read from each unit by the computer of FIGURE 5. The fact that the code change on the successive cards is in accordance with a predetermined binary count, obviates any need for any communication between the card coding mechanism at the main desk of the hotel, and the various door units. Whenever a new card is to be issued to a guest, for example, it is merely necessary to insert a blank card into slot 1Q2 of computer 1QQ FIGURE 5 at the main desk, and to encode the card with the current binary code corresponding to a particular room, increased by one or more on a binary scale, and there is no need to synchronize with a random coding sequence, or pseudo random coding sequence, at the door unit as is the case, for example, in the system of Patent 3,800,284. When the new card is inserted into slot 12 ofFIGURE 1, the door unit will read the new code on the card and change the current code by one or more on the binary scale so that the old card will no longer be accepted. Provision may be made for the situation in which a card is issued for a particular room which is not used, so that the unit in the door does not have the opportunity of up dating the current codet This is achieved by causing the system in the door to accept the current code, the current code plus 1 binary unit, and the current code plus 2 binary units. Therefore, even though the current code has not been up dated by the previously issued card, it will still accept the new card. As mentioned above, computer 100 of FIGURE 5 is preferably small and portable so that is can be carried to the individual doors when the occasion arises and plugged into the individual door units. The microcomputer unit MC10 in each. door unit has a small memory which stores data as to the identities and times of the last fourteen entries into the room, The computer can be plugged into the door unit to read out this information, Also r as mentioned above, the computer can be used to program or re program the door unit, Lithium batteries do not gradually lose potential when they begin to fail. Instead, the potential immediately drops to zero.For that reason, a battery indicator circuit is included in the system of FIGURE 3,This circuit includes capacitor C2 which is charged through resistor R14 by the battery 26, The resulting voltage across the capacitor powers the microcomputer MC10, The internal resistance of the battery 26 inv creases as it begins to fail, Therefore, its voltage will drop when failure is imminent during the time it is loaded by solenoid S1Q, Comparator A4 is used to look at the voltage of battery 26 when it is loaded by solenoid S1Q, If that voltage drops below a certain threshold, the code register in the memory of the microcomputer MC1Q is set to zero and the door unit will not accept any code. Then, when computer 100 is plugged into the system, it can open the door. Microcomputer MC10 includes an internal register, and whenever a card is inserted into slot 12 of FIGURE 1, the entrance code on the card is entered into the register, The microcomputer also includes a first internal counter which is set to the proper entrance code of the door. When a guest inserts his card into slot 12 of FIGURE 1, and when the entrance code on his card matches the code in the counter, pin PA2 goes low and solenoid S1Q is energized and the door may be opened In order to preserve power, the solenoid is first energized by a 5 1 millisecond D, pulse to cause it to latch thereafter a 1 KHz square wave with a 50 duty cycle appears at pin PA2 for five seconds to hold the solenoid latched.The solenoid obviously draws less current from battery 26.during the square wave as compared with the duration of the initial D.C. pulse. Microcomputer MC1Q also includes a second internal counter which is set, for example, to one binary count greater or less than the first interval counter, or to any predetermined number of counts greater or less than the first counter. If the next guest inserts his card into slot 12, and if the entrance code on his card matches any count inclusive between the first and second counters, solenoid S10 is energized and the door may be opened. The two counters are then stepped so that the count on the first counter matches the entrance code on the new guest card, and so that the count of the second counter is greater or less than the new count of the first counter by the predetermined number of counts.When the predetermined number of counts between the two counters is greater than one, and when the system is such that the solenoid S1Q will be energized when the entrance code on the new card matches any count inclusive between the first and second counters, a new guest may still gain access to the room, even if the previous guest for some reason or another did not use the room. Each guest card has a second code encoded on his card representing the duration of his authorized occupancy of the room. As he inserts his card into slot 12, another counter is set in accordance with the duration codet This latter counter is then counted down to zero by the internal clock of the computer. When the counter reaches zero, it increments or decrements the previously described counters by the predetermined amount, and the present card is no longer effective, Computer MC10 also includes an internal maid s entrance register which is set to a particular code.When a maid s card is inserted into slot 12 having a code matching the particular code, solenoid S10 is energized and the door may be opened. Each maid s card also has an identity code which identifies the holder,This code is stored in the computerts memory, together with the time of access The microcomputer My10, however, will not respond to the maid s card if the privacy switch 3Q is closed. A similar internal register and identity storage is provided within the computer for the master cards, and for the emergency cardt As noted above, the emergency card will operate the solenoid S10 even though the privacy switch 30 is closed. The identities stored in the memory of computer MC10, and times of access, can be read by plugging computer 100 of FIGURE 5 into the circuit of FIGURE 4. The microcomputer MC10 includes a clock general tor controlled by crystal X1, and counting circuitry for indicating real time, so that the time of the various entries can also be stored in its memory. The unit in the door records every entry into the room on an elapsed time basis, When the computer 10Q is plugged into the circuit of FIGURE 4, the computer responds to the elapsed time readings of the door unit to provide a read out of the real time of each entry. The invention provides, therefore, an electronic lock system in which each door has its own selfcontained microcomputer controlled unit which is not wired to a central computer, and which is battery operated by a self contained battery. The unit is small and light, and it may be readily removed from the door and replaced as a single unit, should the need arise, The system of the invention is conceived so that the individual guest cards can be programmed to expire after a selected time interval. Also, non use of any issued guest card will not affect the operation of the system. In addition, the individual door units keep a record of the identities of all hotel personnel entering the corresponding room, and the times of each access. The desk computer electronically codes each guest card as it is issued, and it eliminates mechanical card punches. The card itself is a simple, programmable metal card which is magnetically encoded and which is read on a proximity basis with no moving parts in the readerThe card can be re programmed and re used countless times. The desk computer is small and light and readily portable. It can be carried to any particular door and plugged into the door unit, as described above, to read information stored in the door unit, and to start up the door unit. It will be appreciated that while a particular embodiment of the invention has been shown and described, modifications may be made, It is intended in the claims to cover all modifications that come within the true spirit and scope of the invention