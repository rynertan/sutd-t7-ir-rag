# METHOD FOR CONTROLLING EXECUTION OF APPLICATION PROGRAMS WRITTEN IN HIGH LEVEL PROGRAM LANGUAGE

## Claims
Verfahren, um auf einem Datenverarbeitungssystem mit eng gekoppelten Multiprozessoren in einer Mehrfachbefehls Mehrfachdaten MIMD Umgebung ein Programm auszuführen, das in einer Anwendungssprache geschrieben ist, wobei das Verfahren die folgenden Schritte umfaßt

## Description
The present invention relates to methods for improving efficiency of execution of application programs written in high level program language in tightly coupled multi processor data processing systems. Currently, single large FORTRAN application programs cannot utilise the full computational capability of tightly coupled multiprocessing MP configurations to achieve minimum turn around time. This limitation is due to the Single Instruction Single Data SISD environment which is currently provided for FORTRAN application programs to using only one of the processors of an MP configuration at any instant of time. The Multiple Instruction Multiple Data MIMD environment permits a single FORTRAN application program to use all the processors of an MP configuration concurrently and thus utilise the configuration s full computational capability. FORTRAN, the primary programming language for Scientific and Engineering applications, has, to date, provided no programming language standard for MIMD execution. Standard FORTRAN application programs can only execute in SISD mode. Therefore a single program, written in FORTRAN, cannot utilise more than one processor when executing on a tightly coupled multiple processor MP system. The method of the present invention, as set forth in the appended claims and illustrated by way of example hereinafter, provides MIMD support for application programs written in FORTRAN or other similar languages. This support allows a single program to be structured into computationally independent sections which can execute in parallel by utilising additional processors of a tightly coupled MP configuration. The MIMD operation can improve application turn around time by allowing more intensive use of the computational facilities of the MP configuration. The method of the present invention allows such parallel execution on a tightly coupled multiprocessor configurations, without requiring system hardware or system language extensions. The following are systems representative of the prior art. Several differences exist between the operation of the Application Program Performance Extender APPE and the method according to the present invention. The Application Program Performance Extender operates by invoking single MVS multi tasking related functions under direct command of the application program. Inter relationships between these functions must be managed by the application program. APPE also operates by passing arguments for all work in a given task as part of the ATTACH macro. In addition, APPE operates on application program supplied data areas for its own internal parameters. The method of the present invention operates by invoking a number of MVS multi tasking related functions and managing their interrelationship automatically. It also builds the argument list for each piece of work to be performed by a task at execution time. In addition, it operates using its own internal data areas only. No application program supplied data areas are required. The X MP 2 MIMD environment is similar to the APPE system in that it provides low level constructs to allow concurrency and requires that the application program manage the relationships between these constructs. The IBM 3838 and the FPS array processors are special purpose add on hardware devices attached to a general purpose host processor. These devices can only be used by programs which have been specially coded for their use and cannot be used by other general data processing programs which may be run on the host processor. The Denelcor HEP and the two VAX 11 780 machines sharing a common memory are also examples of special purpose hardware configurations, not generally applicable to the general data processing environment. In contrast, the method of the present invention provides parallel execution on standard tightly coupled MP configurations and does not require any special purpose or dedicated hardware which cannot be used by other programs. The method of the present invention not only operates in a standard hardware environment, but it also utilises only standard system software and procedures as well. This contrasts with the preceding examples in the following manner Accordingly, the present invention can be defined as a method for executing, on a tightly coupled multi processor data processing system in a Multiple Instruction Multiple Data MIMD environment, a program written in an application program language, the method including the steps of initialising an MIMD environment for said application program by a discrete call to an initialisation routine in the application program, said initialisation comprising requesting the operating system to initialise a plurality of subtasks having access to a load module containing code for a plurality of subroutines of said application program said application, executing in a main task, repeatedly finding a free subtask, assigning a subroutine in said load module to said free subtask, said subroutine representing an independently executable portion of the application program, and requesting the operating system to schedule the execution of said subroutine by said subtask the operating system synchronising, in response to a request issued by said main task, the execution of the main task with the plurality of subtasks by causing the main task to wait until all said subtasks are no longer busy, i.e. all said assigned subroutines have been executed terminating the MIMD environment for the application program, including terminating all said subtasks, in response to a request issued by said main task. The present invention will be described further, by way of example, with reference to an embodiment thereof as illustrated in the accompanying drawings in which In the drawing, like elements are designated with similar reference numbers, and identical elements in different specific embodiments are designated by identical reference numbers. The described method of the present invention consists of four VS FORTRAN callable subroutines, an interface subroutine for controlling the subtasks and several utility subroutines which may be executed on a multiprocessing computer system such as an IBM 3084 with appropriate storage capacity and Input Output devices. The method of the present invention is implemented in PL S III program language. The VS FORTRAN callable subroutines are the FORTRAN application s interface to the method of the present invention facilities. These subroutines are The interface program for controlling the subtasks is A FORTRAN application program which uses the preferred embodiment of the invention is prepared by the programmer as two MVS load modules. The programmer identified parallelisable code in the FORTRAN program, reorganises this code into FORTRAN subroutines, removes the subroutines from the main program and places those subroutines in a separate load module of parallel executable subroutines. See Figure 2 . The first load module is used by the jobstep task and contains. The main FORTRAN program must contain a CALL to AAAINI to initialise the MIMD environment. CALLs to AAAEXE and AAASYN can be placed in either the main FORTRAN routine or any of the serial subroutines to control the execution and synchronisation of the MIMD subroutines. The location of these CALLs is dependent on the logic of the application program. A CALL to AAATRM should be placed at a point in the application program where the MIMD environment is no longer required. This CALL allows the application program to terminate normally. The second load module is used by the subtasks and contains The parallel FORTRAN subroutines, when invoked, must be capable of executing independently of and in parallel with the main FORTRAN application program between the CALL to AAAEXE which scheduled the MIMD subroutine and the next CALL to AAASYN. The MIMD subroutines must also be capable of executing independently of and in parallel with any other MIMD subroutine which may be scheduled concurrently by the main application program. A FORTRAN job which uses the method of the present invention is submitted to MVS like any other FORTRAN job. A sample of JCL which could be used as follows In the preceding example, MIMDLM is the member name in AAALIB of the load module which contains the MIMD FORTRAN subroutines. and 4 is the number of subtasks required. The AAALIB DD statement must point to the same library as the STEPLIB DD statement. Figure 1 shows the flow of the process. The numbers n at the left side of the figure show the sequence of the process. The headings across the top show the environment in which the step is carried out. The following description explains each step of the process. Steps 10 through 14 are performed independently by each subtask that is attached. FIGURE 3 shows the control block structure that is built during initialisation. The anchor block AB is a control section that is automatically included in the main task load module by the linkage editor. The remaining control blocks are created during initialisation. Figure 4 shows the flow of the scheduling and synchronisation process. The numbers n at the left side of the figure show the sequence of the process. The headings across the top show the environment in which the step is carried out. The following description explains each step of the process. Steps 9 through 16 are processed by each subtask which is scheduled by steps 1 through 4 and may be performed any time after the POST in step 3 is executed on the subtasks work ECB. The sequence of scheduling a set of MIMD subroutines and then synchronising on their completion as shown in Figure 4 may be repeated as often as required by the application program. Figure 5 shows the flow of the termination process. The numbers n at the left side of the figure show the sequence of the process. The headings across the top sow the environment in which the step is carried out. The following description explains each step of the process. It should be understood that the various FORTRAN and MVS commands, macros, control block structures and task structures used in describing the preferred embodiment of the present invention, are well known to those skilled in the art and are described in the following published documents