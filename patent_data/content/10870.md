# Electronic lock and key, and an alarm system incorporating same.

## Abstract
A key 26 comprises a resistor R40 of a predetermin ed value which can be connected to a socket S of an electronic lock, where it forms a divider with a resistor R29 . A window comparator A2, A3 determines whether or not a resistor in a certain range around the predetermin ed value has been connected and provides a signal ac cordingly. This lock and key is used to arm and disarm an intruder alarm in which changes in signal from an ultrasonic trans mitter U1 to an ultrasonic receiver U2 caused by the presence of an intruder are detected.

## Claims
CLAIMS 1. An electronic lock and key, characterised in that the key 26 comprises an electronic component R40 with a predetermined value, which is electrically connectable to the lock, the lock comprising means 28 for detecting whether a key with a component of the predetermined value has been connected and providing an output signal which distinguishes between when a key with a component of the predetermined value has been detected and when a key with a component of a different value has been connected. 2. A lock and key according to claim 1 characterised in that the component is a resistor R40 . 3. A lock and key according to claim 2 characterised by a resistive divider having to arms, one said arm comprising the resistor pew40 in the key and the other comprising a resistor R29 in the detecting means a voltage being connected across the two arms of the resistive divider the detecting means 28 further including a voltage comparator A2,A3 having an input derived from the junction of the two arms and producing said output signal in accordance therewith. 4. A lock and key according to claim 3 characterised in that the comparator is a window comparator A2,A3 producing the output signal in accordance with whether the input from the junction of the two arms i. within a certain range corresponding to a certain range bf values of the resistor R40 in the key around said piedetermined value. 5. An intruder alarm system comprising intruder detection means 10,12,14,16,18,A1 , and an alarm H , the alarm being activated when an intruder is detected by the intruder detection means, characterised by a lock and key according to any one of the preceding claims and means 64 to inhibit the alarm, the output signal of the locl being fed to the inhibiting means so as to inhibit the alarm when the key with the component of said predetermined value is connected thereto. 6. An intruder alarm system according to claim 5 characterised by time delay means 22 acting between the intruder detection means and the alarm, whereby the alarm is not activated if the correct key is connected to the lock within that time delay. 7. An intruder alarm system according to claim 5 or claim 6 characterised by time delay means R41,C16 between the output of the lock and tl e alarm inhibition means, providing a time delay after disconnection of the key in which the inhibition means continues to inhibit the alarm. An An intruder alarm system according to any one of claims 5 to 7 characterised by time delay means R42,D9,C16 between the output of the locl and the alarm inhibition means, providing a time delay after connection of the correct key before the inhibition means inhibits the alarm. 9. An intruder alarm system according to any one of claims 5 to 8 characterised in that the intruder detection means comprises an ultrasonic transmitter U1 , an ultrasonic receiver U2 receiving the ultrasound transmitted by the transmitter, and a detection circuit 14,16,18,A1 receiving the output of the receiver and detecting changes therein and producing a signal to activate the alarm when such changes are detected. 10. An intruder alarm system according to any one of claims 5 to 9 characterised by a repeater alarm unit having an alarm H which is activated by the intruder detection means when an intruder is detected and which is inhibited by the inhibition means.

## Description
ELECTRONIC LOCK AND KEY, ED AN ALARM SYSTEM INCORPORATING SAME This invention relates to an electronic lock and key. It also relates to alarm systems, especially intruder alarm systems, which incorporate such a lock and key. Intruder alarm systems usually have to have some means of arming and disarming them, so that they are not set off by the presence of authorised personnel. It is important that an unauthorised intruder should not be able to tamper with the system to disarm it. According to the present invention there is provided an electronic lock and key, the key comprising an electronic component with a predetermined value, which is electrically connectable to the lock, the lock comprising means for detecting whether a key with a component oS the predetermined value has been connected and providing an output signal which distinguishes between when a key with a component of the predetermined value has been detected and when a key with a component of a different value has been connected. Conveniently, the electronic component is a resistor.The key detecting means may include a resistive divider across which is connected a voltage, the resistor in the key providing one arm of the divider when connected, the key detecting means also having a voltage comparator arranged to detect the presence of a predetermined voltage in the divider which is produced when a key with the predetermined resistor value is connected. Preferably the comparator is a window comparator which will provide the output signal only when said voltage is within a certain range corresponding to a certain range of resistor values around said predetermined value. In practice, the window comparator suitably comprises two voltage comparators, one detecting an upper limit to the range and the other a lower limit to the range, the output signal being derived from the outputs of the to voltage comparators. The above lock and key can be combined in an intruder alarm system, making it difficult for an intruder to tamper with the system because he has no way of knowing the correct resistor value and so would have to experiment with a large number of values in order to disarm the system. The lock is arranged to disarm the alarm system when the key is connected, and to arm it when it is disconnected. Preferably, there is a time delay between disconnecting the key and the alarm system becoming armed, in order to allow an authorised key operator to leave the premises without the alarm sounding. The alarm system will normally include means for detecting an intruder, and an alarm, for example an audible alarm, which is set off when an intruder has been detected.Preferably, the system provides a time delay which will be called the intruder delay between the detection of an intruder and the setting off of the alarm, and the system is arranged not to set off the alarm if the correct key is connected to the lock to disarm the system within that time delay. This enables an authorised key operator to disarm the system on entering the premises without activating the alarm. Preferably, on connecting the key to the lock, the system does not become disarmed until a further time delay which will be called the key connection delay has expired without the key being disconnected, the key connection delay being shorter than the intruder delay.This helps to prevent an intruder tampering with the system by connecting a large number of keys with different values af resistor in a short space of time, since to be effective any key would have to be connected for the duration of the key connection delay. Preferably also, on disconnecting the key, there is a time delay the key disconnection delay before the system becomes armed.This allows an authorised key operator time to vacate the premises after disconnecting the key. In a preferred embodiment, the intruder detecting means includes an ultrasonic transmitter and an ultrasonic receiver, the ultrasonic receiver feeding circuitry which detects changes in the ultrasonic sounds received from the transmitter such as the changes produced by an intruder moving in the vicinity . Preferably this circuitry only provides an output signal indicating the detection of an intruder where the changes persist for a predetermined length of time which will be called the acquisition delay . This helps to enable the system to discriminate between intruders and the small changes produced, for example, by insects, air movement and random sounds. The above and other novel features, which together or separately form part of the invention, will be made clearer by the following description of a preferred embodiment of intruder alarm system. In the description, reference is made to the accompanying drawings, wherein Fig. 1 is a schematic diagram of a main unit of the system, Fig. 2 shows a circuit diagram of the main unit, and Fig. 3 shows a circuit diagram of t remote repeater or slave unit of the system. The system comprises a main alarm unit, the functions of which are seen in Fig. 1, and is designed to protect enclosed rooms from the presence of intruders. If an intruder is detected an audible alarm is sounded in the room and a signal is optionally sent to a remote repeater alarm unit, described later. The unit operates by emitting high frequency ultrasonic sound waves 40kHz into the room and these are reflected and partially absorbed by the various objects in the room and also the room boundaries. In the steady state a system of standing waves is set up whose intensity remains constant provided that none of the reflecting or absorbing surfaces in the room is changed. If such a change does occur, however, caused by say the presence of an intruder then the intensity of the standing waves in the room will in general change. The main unit detects the pattern of changes which are caused by a person moving within the room and requires that a minimum cyclic rate of change of standing wave pattern of amplitude greater than a certain specified level to persist for a specified length of time, the acquisition delay , before an intruder is recognised by the unit. This is to prevent normal small changes in standing wave pattern caused by insects, air movements and random sounds from being recognised as intruders. When an intruder has been recognised any further change or lack of change in standing wave pattern has no effect and after a time delay, the intruder delay, the alarm is sounded. The purpose of this delay, typically 15 seconds, is to allow the disarming of the unit using an electronic key device, without the sounding of the alarm, after the owner or other authorised person enters the room. This electronic key is used both to arm and disarm the unit, and comprises a miniature jack plug whzh can be inserted into a socket in the main unit. A time delay the key disconnection delay is provided between the removal of the key from the unit and the arming of the unit, to allow the operator to leave the room to be protected without causing the alarm to sound, this time delay being typically 15 seconds. Another time delay the key connection delay is associated with the key, this being to prevent a large number of keys being tried in a short space of time, and operates such that the unit is not disarmed until the key has been inserted for a time period of several seconds, typically 5 seconds. A standby battery system is provided, using either primary or rechargeable batteries, to cope with failure of the mains electricity supply caused by either the intruder trying to silence the alarm or power breakdowns. The battery voltage is monitored and when it is too low a distinctive alarm sound is generated. A more detailed description of the various parts of the unit will now be given, referring to both Fig. 1 andFig. 2. The transmitter 10 comprises a piezoelectric transmitting transducer Ul, operating at 40 kHz, together with transistors Tri, Tr2 and associated components which form a feedback oscillator with the transducer as the frequency determining element. A capacitor C3 is used to ensure that the desired mode of oscillation of the transducer is selected. The circuit is designed for the minimum number of components and a large range of power supply voltages. The ultrasound is reflected back from the room to a receiver and 40 kHz amplifier 12, which has a piezoelectric receiving transducer e to converttm received ultrasonic signals into a voltage which is amplified to a suitable level for subsequent envelope detection by the amplifier comprising transistors Tr3, Tr4 and associated components. This amplifier is a c coupled by capacitors C5 and C6 so that its response at low frequencies is minimised.This is important as this part of the circuit is followed by a very high gain low frequency amplifier and any induced 50 Hz signals from the power supply or low frequencies received by the receiver transducer could cause a false indication of intruders to be given if also amplified by the 40 REz amplifier. An emitter resistor R13 of Tr4 is conveniently used to set the gain of the 40 kHz amplifier. The signal from the amplifier 12 is fed to a conventional voltage doubling envelope detector 14 which is used to detect the low frequency envelope and which comprises diodes D3, D4, capacitors C8, C9, and a resistorR15. This form of detector is used as its response to low carrier frequencies may be minimised by a suitable choice of C6 for reasons as described above. The output of this circuit is a low frequency signal say 10 Hz to 100 Hz , whose frequency corresponds to rates of change of movement by an intruder and whose amplitude varies as a function of the size of the intruder and the distance from the alarm. This signal is taken to a band pass amplifier 16 comprising transistors Tr5, Tr6 and associated components.It has low and high half power points at approximately 30 Hz and 70 Hz. The gain of the amplifier in mid band is approximately 4000 and its purpose is to amplify the frequencies in the output of the envelope detector which correspond to the presence of intruders. Next follows a charge pump 18, the purpose of which is to change the low frequency output of the band pass amplifier into a d c voltage. It comprises capacitors C11,C12, C13, diodes D5, D6 and resistor R22. Its operation is that of a pump circuit at low frequencies, rather than that of a simple voltage doubling rectifier, as the time constant C12.R22 is chosen to be 0.12 seconds so that it takes several cycles of low frequency before the d c output attains its final value. This gives some protection against short duration interference caused by sounds picked up by the receiver transducer or power supply transients. The output of the charge pump is taken through R22 to a level detector comprising an operational amplifier Al. Its purpose is to give an output hich is approximately 9V if the d c output of the charge pump is below a certain threshold voltage and to give an output of OV if it is above the threshold. The threshold is determined by R22 a resistor R23 connected to the positive supply line, and the characteristics of Al. when the pump output is at the threshold, nominally equal currents will be flowing into the two current sinking inputs of Al. The OV state of the output of Al thus indicates the presence of sufficient changes of standing wave pattern, of the desired frequencies, to indicate the presence of an intruder. The acquisition delay is provided by a resistor R24 and a capacitor C15 at the output of the level detector Al.The purpose of this part of the unit is to ensure that the indication of an intruder being present given by the level detector circuit persists for a certain minimum time before the event is permanently remembered and used to sound the alarm. The time period is determined by the values of R24, C15 and the logic threshold voltage of a gate G1, and is set to be approximately 0.5 seconds. NAND gates G1 and G2 provide a latch 20. It is a bistable circuit of conventional type, the two states being reset corresponding to either the key being inserted in the unit or the key being absent and no intruder having been recognised since the key was withdrawn and set corresponding to an intruder having been recognised since a previous reset condition . Once set the bistable may only be reset by the use of the key. An intruder delay circuit 22 is provided by NAND gates G3, G4, a resistor R25 and a capacitor C17, This circuit provides a delay between the presence of an intruder setting the latch and the sounding of the alarm.Its purpose is to allow the unit to be disarmed by the key circuit before the alarm is sounded. G3 and G4 form a bistable circuit which is reset by a key circuit described below and set when the voltage at the R25 C17 junction falls below the input logic threshold voltage of G3. The voltage at this input of G3 is only allowed to change at a rate determined by R25 and C17 and consequently after the presence of an intruder has set the latch circuit there is a time delay nominally 15 seconds before the intruder delay bistable is set and the alarm is sounded. The audible alarm itself is provided by a horn unitH, which is in an electrical drive circuit 24 including two transistors Tr7, Tr8 arranged as a Darlington pair. The transistor Tr7 also forms a simple OR gate with resistors R48 ,R49, so that the horn can be driven by either of two gated astable oscillators AS1, AS2, which provide two distinctive alarm sounds. The oscillator AS1 comprisingNOR gates G5, G6 and associated components, generates an on off sequence of approximately equal on off periods of 1 second and is enabled by the intruder delay circuit 22 to indicate the presence of an intruder. The other oscillator AS2 comprising NOR gates G7, G8 and associated components, generates an on off sequence in which the on period is tens of milliseconds, this being Just sufficient to generate an audible pip in the horn, and the off period is tens of seconds. This sequence is designed to only consume a small amount of power driving the horn and is used to indicate the presence of a low battery voltage condition, as described below. The key is a miniature jack plug assembly 26 into which is moulded a resistor R40 having a given value which will be different in each unit. This can be plugged into a matching socket S on the front of the unit to disarm the alarm. The unit has a circuit 28 to recognise this key, comprising operational amplifiers A2, A3 and associated components. The amplifiers are used as comparators and their outputs are connected together to form a wired OR configuration such that if either amplifier is saturated in a high voltage condition approximately 9V this will override any lower voltage condition of the other amplifier.The inverting inputs are connected to resistors R30 andR33 respectively, while the non inverting inputs are connected to resistors R31 and R32 respectively. R30 andR32 are taken to the positive supply line. VZhen the key is plugged into the unit the resistor R40 that it contains forms part of a resistive divider with a resistor R29, andR31 and R33 are taken to the junction of this divider. A given voltage say V is thus set at the junction of the resistors.The resistors R30 to R33 are chosen such that when this voltage is present the outputs of both A3 and A2 are in the OV condition. when V exceeds a certain voltage, set by R31, R30 and the power supply voltage, the output ofA3 becomes high anf when V becomes less than a voltage set by R32, R33 and the power supply voltage the output voltage of A2 becomes high. There is thus only a range of values of the key resistor R40 which will cause V to be in thedesired range when the key is inserted. If the key is removed or short circuited V moves outside the range and the alarm is armed. A set of different key values for different units can be obtained by fitting different values of R29. When the key is withdrawn from the unit the output voltage of A2 and A3 changes from OV to 9V and a capacitorC16 is charged through a resistor R41. The voltage on C16 is applied to the gates G2 and G4, and after a length of time it will have reached a value equal to the threshold voltage of gates G2 and G4, thus allowing the latch 20 and intruder delay circuit 22 to be set. The key disconnection delay is thus set by R41, C16 and the logic threshold voltage of G2 and G4. When the key is inserted and the intruder alarm condition is present the output voltage of A2 and A3 first drops to OV and then C16 is discharged to OV through a resistor Pal42 and a diode D9 in parallel with R41. 1hewn it is discharged down to the logic threshold of G2 and G4 the latch and intruder delay bistables are reset and the alarm is silenced. The key connection delay is thus set by R41,R42, C16 and the logic threshold of G2 and G4. The transmitter 10 and signal processing stages are normally provided with power from a mains derived supply 30, which has a smoothing capacitor C1 and a regulating zener diode Z1. Alternatively, power can come from a standby battery 31 within the unit through a diode D2 which is reverse biassed unless the mains power supply fails. The alarm horn is fed with power from either the unregulated part of the mains power supply through a resistor PL2I or the standby battery through a diode DI. The value of R21 is chosen to maintain DI just reverse biassed when the alarm is sounding with normal mains powered operation and fully charged battery.A resistor R8 is provided to supply a small current to trickle charge the battery, if it is a secondary battery, or if a primary battery is fitted a larger value of R8 may be used to supply the small internal discharge current of the battery and also the current taken by the low voltage alarm described below. A low voltage alarm is provided to measure the battery voltage and if it is too low it passes a signal to the oscillator AS2 so that the low battery alarm note may be sounded. It uses an amplifier A4 as a comparator to compare the current produced by the battery voltage through a resistor R28 with a reference current produced by resistors R26, R27 and a zener diode Z2. If the battery voltage is greater than the desired value the output voltage of A4 is approximately 9V, and if less than the desired value the output of A4 is OV and this condition is taken to gate G7 to sound the low battery alarm. The circuit diagram of the repeater or slave alarm unit is shown in Fig. 3. It is a self contained unit powered by a battery B2, and has a low current consumption giving a long battery life. A three wire communication system between the repeater and main intruder alarms is used see also Fig. 2 in which a wire 1 must be maintained at a logic high level with respect to a ground wire 3, and a wire 2 must be maintained at a logic low level with respect to wire 3 if the repeater alarm is not to sound. Any departure from these conditions causes the repeater alarm to sound. This includes conditions where the connecting wires become open or short circuit. In addition an internal battery monitoring circuit is provided to sound a distinctive alarm if the battery voltage falls below a specified level. NAND gates G9, G10 and resistors R51 and R52 form the basis of this three wire system. In the normal condition, with no alarm sounding, wire 2 is maintained at a logic low level by the main unit, which sinks the small current passing through R51. If no sink is provided for this current then the inputs of G9 change to a high logic level so that its output connected to one input of G10 goes low. This gives protection against the three wires being cut or becoming open circuit. Wire 1 is connected to the other input of G10 and is normally maintained at the logic high level by the circuit 22 of the main unit. This involves the supply of a small current through R52. If wire 1 becomes open circuit or alternatively short circuited to wire 3 this current cannot be supplied ai this other input of G10 will go low.If just wire 1 and wire 2 are connected together then R51 and R52 form a potential divider network across the power supply and the voltage produced is the input voltage for both gates G9 and G10. These gates should be part o one integrated circuit, and as they are both fabricated on the same chip of silicon their logic threshold voltages will be the same and thus this identical voltage on wires 1 and 2 will be interpreted as the same logical condition by each gate. Any of these abnormal conditions will cause the output of G10 to go high and this will energise a gated astable comprising gates G11,G12 and associated components. This has an output similar to the astable AS1, and operates horn H through a resstorR55 and thyristor SCR1. The low battery alarm circuit comprises a transistorTr9, gates G13, G14 and associated components. ResistorsR57, R64, a potentiometer Vr1 and transistor Tr9 form a simple voltage regulating circuit and the voltage at the collector of Tr9 stays fairly constant as the power supply voltage is changed. The logic threshold of G13 changes, however, as the power supply voltage is varied and Vr1 is adjusted such that when the power supply voltage is high the logic threshold is above the regulated voltage but when the power supply voltage falls to below the desired alarm level the logic threshold is below the regulated voltage. Some positive feedback is provided by a capacitor C24 and resistor R58 in parallel to ensure that the transition between the two conditions occurs quickly to provide the circuit with some protection against noise, induced radio frequency signals or oscillations of the gates when operated in the linear mode. It also has the desirable feature that the outputs of the gates are held close to the logic high and low states and this greatly minimises the power consumption of the gates and prolongs the battery life. The output of G14 is taken to a network of a resistor R59, diode D13 and capacitor C25, which is to prevent the effects of interference on the power supply fran causing false triggering of the next stage, which is a low battery alarm astable formed by gates G15, G16 and associated components. Then the horn is operating considerable interference is present on the supply due to the large impulsive currents taken by the horn and the three components described above are to ensure that a logic high level at the input to Cos cannot be changed by a power supply impulse. The low battery alarm sequence generated by the astable is an on off sequence consisting of an on pulse which is just sufficient to trigger the thyristor SCAR1 such that the horn emits an audible click sound tens of milliseconds , and the off time is some tens of seconds. The horn H may be sounded by either the low battery circuit through a resistor R63 or the three wire system through R55. Diodes D11 and D12 are provided to limit the size of impulsive transients generated by the horn when operating. It will be appreciated that a number of modifications could be made to the apparatus described. For example, another electronic component than a resistor could be used in the key, such as a capacitor which when connected to the main unit could form part of a selective filter. It would be possible to detect the presence of the correct capacitor value by using an oscillator of the corresponding frequency.The electronic lock and key could be used in other applications, e.g. for locking and unlocking doors, or in security applications where access is to be provided only to the holders of correct keys.