# Knock free engine control system for turbocharged automotive engine

## Claims
Maschinenregelsystem für eine turbogeladene Brennkraftmaschine zum Regeln des Zündzeitpunktes und des Ladedrucks in einer Luftzuführleitung, enthaltend

## Description
The present invention relates to an engine control system for a turbo charged internal combustion engine for controlling spark ignition timing and charge pressure in an air induction passage according to the preamble of claim 1. Such engine control systems are known from SAE Technical Paper series no. 810060, 23rd to 27th February 1981, pages 215 to 223. In controlling a turbo charged internal combustion engine it is desirable to maintain the charge pressure as high as possible and, at the same time, maintain the spark advance angle as close to the maximum torque point as possible. The best torque range for engine performance varies significantly, depending upon the fuel octane number and or mechanical octane number. Additionally, charge pressure and ignition timing are inter related with respect to the engine output. Therefore, frequent control corrections are required to avoid an excessive increase of the exhaust gas temperature and to limit fluctuation of the spark advance angle due to engine knocking. According to the afore mentioned SAE Paper, control of ignition timing only or charge pressure boost only and the inter related combination thereof is performed. However, there is no ignition timing control and charge pressure boost control independent from one another observing special control ranges. Hence, it is hardly possible to attain optimum settings for the ignition advance angle and the charge pressure boost in response to the working conditions of the engine and therefore harmful knocking of the engine may not be avoided. It is, therefore, the object of the present invention to provide an engine control system of the aforementioned kind which is apt to comply with the working conditions of the engine and avoids harmful knocking of the engine. This object is obtained by the features of claim 1. Preferred embodiments of the invention are subject matter of the dependent claims. According to the present invention as set forth in the claims the invention seeks a balance between the spark advance angle and the charge pressure to prevent a significant drop in engine performance while also avoiding the generation of engine knock. This is accomplished by independently controlling the ignition timing and the boost pressure. When the boost pressure is being modified, the ignition timing is held constant and vice versa. This results in the balance between the spark advance angle and the charge pressure. The charge pressure is controlled relative to a given optimum or standard charge pressure, and the spark advance angle is controlled within a predetermined variation range defined by predetermined extremes. The independent control is defined as adjusting the charge pressure, while holding the spark advance angle at an angle adjacent one of the extremes of the variation range, and when the spark advance angle is adjusted the charge pressure is held at the optimum charge pressure value. This control is carried out responsive to the engine knocking signal in order to prevent knock generation. The present invention will better understood from the detailed description given herebelow and from the accompanying drawings of the preferred embodiments of the present invention which, however, should not be taken as limitative to the invention but for elucidation and explanation only In the drawings Referring now to the drawings, particularly to Fig. 1, there is illustrated the general structure of a turbocharged internal combustion engine with an engine control system according to the present invention. The turbocharged engine has a turbocharger 10 for supplying intake air to the engine 12 at a controlled boost pressure. The turbocharger 10 comprises a turbine 14 inserted in an exhaust passage 16 and a compressor 18 inserted in an air induction passage 20. The turbine 14 and the compressor 18 are connected to each other via a drive shaft 22 for rotation together. The compressor 18 is interpositioned between an air flow meter 24 and a throttle chamber 26 in which a throttle valve 28 is movably provided. In the air induction passage 20, a boost sensor 30 and a pressure relief valve 32 are provided downstream of the compressor 18. On the other hand, a wastegate 34 bypassing the turbine 14 is provided in the exhaust passage 16. A valve 36 is provided at the inlet of the wastegate 34 for controlling the rotation speed of the turbine 14 and thus controlling the boost pressure generated by the turbocharger 10. The valve 36 is operably connected to a pressure controlled valve actuator 38. As shown in Fig. 1, the pressure controlled actuator 38 has an actuator housing 40 defining therein an internal space which is divided into two chambers 42 and 44 by an elastic diaphragm 46. The chamber 42 is connected to the air induction passage 20 downstream of the compressor 18 via a passage 48 to introduce intake air therein. On the other hand, the chamber 44 is connected to the exhaust passage 16 upstream of the turbine 14 via a throttling passage 50, an electromagnetic valve 52 and an induction passage 54. The valve 36 is connected to the diaphragm 46 via a valve stem 56 so as to move according to movement of the diaphragm. A bias spring 58 is inserted in the chamber 44 to exert an initial pressure on the diaphragm 46. The electromagnetic valve 52 controls the induction rate of the exhaust gas pressure into the chamber 44 to control the throttling rate of the valve 36 and thus control the rotation speed of the turbine 14. The electromagnetic valve 52 is connected to a control unit 100 to receive a control signal. The electromagnetic valve 52 is energized and deenergized depending upon the duty cycle of the control signal for controlling the induction rate of the exhaust gas into the chamber 44. By this the pressure in the chamber 44 is controlled to vary an intercept point of the wastegate 34. Variation of the intercept point of the wastegate 34 causes variation of the induction rate of the exhaust gas into the turbine 14 to change the revolution speed of the compressor 18. Thereby, the compression or charge pressure in the air induction passage downstream of the compressor 18 is controlled. The control unit 100 is also connected to the boost sensor 30 and the air flow meter 24 to receive therefrom the signals S The control unit 100 is also connected to an ignition control unit 64 including a spark advance controller 66. The spark advance controller 66 receives a control signal S An engine speed sensor 68 is adapted to detect the revolution speed of the engine and produce an engine speed signal S It will be appreciated that the knock sensor 60 can be constructed in various per se well known ways. Such knock sensors have been described in detail in GB A 2,056,073, 2,056,219 and 2,061,062. Detection of knocking by means of such knock sensor signals are disclosed in GB A 2,053,351 and 2,061,380. The boost sensor 30 is a kind of pressure sensor for measuring the pressure in the air induction passage and can be constructed in various per se well known ways. For example, such a pressure sensor has been disclosed in GB A 2,054,864. The disclosures of all of the foregoing publications are incorporated herewith by reference. Fig. 2 shows a circuit construction of the control unit 100 and Fig. 3 shows a flowchart of a control program for controlling the spark advance angle and the boost pressure of the turbocharger. The function of the control system will be described in detail with reference to Figs. 2 and 3. The control program of Fig. 3 may be executed in synchronism with the revolution of the engine for performing control of the spark ignition timing and the boost pressure of the turbocharger 10. At the first block 1002, the system is initialized. Thereafter, respective control parameters, the engine speed signal value N, the boost sensor signal value P, the exhaust gas temperature signal value S At a subsequent block 1010, the exhaust gas temperature sensor signal value S If the exhaust gas temperature signal value S On the other hand, if the boost pressure P in the air induction passage 20 is equal to the standard pressure P When the spark advance angle ϑ, as checked at the block 1028, is greater than the predetermined retard limit angle ϑ If the magnitude of the knocking signal S On the other hand, if the boost pressure P₄ is equal to the standard pressure P If the answer at either of the blocks 1056 and 1060 is YES, the boost pressure P is increased by a given value γ₅, at a block 1066. Thereafter, the boost control signal indicative of the increased boost pressure P₅ is output at a block 1068 and the ignition control signal indicative of the spark advance angle ϑ It will be appreciated that the given values γ₁ to γ₅ can have the same value for simplification of program execution and, likewise the given values α₁ and α₂ can have the same value. Referring to Fig. 4, there is illustrated another embodiment of the control unit 100 in the engine control system of Fig. 1. As in the foregoing embodiment, the control unit 100 is connected to a crank angle sensor 70, an engine speed sensor 68, a boost sensor 30, an exhaust gas temperature sensor 62 and a knock sensor 60. The engine speed sensor 68 is connected to a standard pressure signal generator 120. The standard pressure signal generator 120 includes a look up table storing standard pressure data P The standard pressure P The engine speed sensor 68 is also connected to a standard advance signal generator 122. The boost sensor 30 is also connected to the standard advance signal generator 122 for inputting thereto the boost sensor signal S The standard advance signal generator 122 thus produces a standard advance signal I The standard pressure signal P The standard advance signal I The crank angle sensor 70 is connected to a sawtooth wave signal generator 136 to output thereto a crank reference angle signal S The knock sensor 60 produces the knock sensor signal S As will be appreciated from Fig. 6, the value of the correction signal S₉ is incremented by a fixed amount whenever the pulse signal S₈ is outputted by the knock magnitude detector 146, at a rate corresponding to a 2 deg sec. increase of the retard angle or 0.05 atm. sec. increase of the boost drop. As will be appreciated, the correction signal value is gradually decreased at a rate corresponding to a decrease of 0.007 deg. sec. of the retard angle or 0.002 atm. sec. of the boost drop. The correction signal S₉ is fed to the foregoing switching circuit 126 and continues to either the comparator 138 as the correction signal for boost pressure control or to the comparator 140 as the correction signal for spark advance control. The exhaust gas temperature sensor 30 is adapted to produce the exhaust gas temperature signal S The preferred construction of the switching circuit 126 is illustrated in Fig. 7. The comparator 124 is connected to a relay 160 of the switching circuit 126, which is, in turn, associated with a selector switch 162 for switching the position of a movable switch element 162a between stationary terminals 162b and 162c. The movable switch element 162a is connected to a relay coil 164 associated with a point switch 166 including a movable switch element 166a and stationary terminals 166b and 166c which are respectively connected to the comparators 138 and 140. The movable switch element 162a is normally urged toward the stationary terminal 162c as long as the relay 160 is maintained at deenergized position. The relay 160 is energized in response to the comparator signal S₁ to turn the connection of the movable switch element 162a to the stationary terminal 162b. During this transition, the selector switch 162 is temporarily turned OFF for a moment to disconnect the relay coil 164 from the comparator signal responsive switches 168 and 170. The movable switch elements 168a and 170a are adapted to close in response to the comparator signal indicative of the spark advance angle ϑ being equal to or less than the predetermined retard limit angle. On the other hand, the movable switch elements 168c and 170c are adapted to close in response to the comparator signal of the comparator 132 indicative of the spark advance angle equal to or more than the standard spark advance angle. The movable switch elements 168b and 170b are responsive to closing of the one of the movable switch elements 168a, 170a or 168c, 170c to close and maintained at closed position until it is reset by breaking of the circuit by the opening of the selector switch 162. The selector switch 162 is responsive to the comparator signal S₁ from the comparator 124 indicative of the boost pressure P less than the standard pressure P Here, if the boost pressure P is increased across the standard pressure and thus the comparator signal S₁ turns to LOW level, the relay 160 is then deenergized to turn the connection of the movable switch element 162a from the stationary terminal 162b to the stationary terminal 162c. Upon this transition, the selector switch 162 is temporarily turned OFF for a moment. By this, the holding movable switch elements 168b and 170b are reset to disconnect the relay coil 164 to turn the switch 166 to connect the movable switch element 166a to the stationary terminal 166b. As set forth, according to the shown embodiment, the switching of control between the spark advance correction and the boost pressure correction is performed depending upon the operational condition of the engine. The operation hereof is similar to the foregoing embodiment in that spark ignition control and boost pressure control by controlling opening point of the wastegate are carried out selectively depending on engine operating conditions. As long as harmful engine knocking does not occur, the spark advance angle remains retarded at a given retard angle, e.g., 1 , from the standard advance angle and the boost pressure in the air induction passage is charged to the specific mechanical limit of thereof. On the other hand, when the boost pressure is at standard pressure and the spark advance angle is retarded from the standard advance angle by more than the given retard angle, then the spark advance is advanced until it exceeds the standard advance angle. On the other hand, when harmful engine knocking occurs, the control operation for the spark advance and the boost pressure will be performed according to the following schedule In order to perform the foregoing operation, the switching circuit 126 detects engine operating conditions to switch the control between the spark advance control and the boost pressure control. As apparent from Fig. 7, in the shown embodiment, the switching circuit is normally urged toward the advance angle control. Under normal engine conditions in which harmful engine knocking does not occur, the boost pressure P is increased from below the standard boost pressure P In the spark advance control, the spark advance angle is advanced until it reaches the standard advance angle by a per se well known spark advancer. In this condition, the occurrence of knocking is controlled by advancing and retarding the spark advance angle within a range between the standard advance angle and the predetermined retard limit angle. If the spark advance is advanced beyond the standard advance angle, then the comparator 132 produces a comparator signal S₄ indicative of the fact that the spark advance angle is equal to the standard advance angle and thus the difference therebetween is zero. The comparator signal S₄ is fed to the preset signal generator 142 to activate the latter. The preset signal generator 142 thus produces a correction signal S₆ representative of a given retard angle with respect to the standard advance angle. The correction signal S₆ is fed to the arithmetic circuit 134. The arithmetic circuit 134 determines the spark advance angle by obtaining logical sum of the pulse signal S₃ and the correction signal S₆ and produces the advance control signal S₁₄ to be fed to the spark advance controller 66 in the ignition control unit 64. At the same time, the comparator signal S₄ is fed to the switching circuit 126 to bring the movable switch elements 168a and 170a into contact with the stationary terminals 168d and 170d. As a result, the relay coil 164 is energized to bring the movable switch element 166a into contact with the stationary contact 166c. Thus, boost pressure control is again performed while the spark advance angle is held at a given angle retarded with respect to the standard advance angle. On the other hand, if harmful engine knocking occurs, as detected by the knock magnitude detector 146 based on the knock sensor signal value M, spark advance retardation and reduction of the boost pressure will be performed in accordance with the foregoing schedule. In more detail, if the engine operating condition is the foregoing condition 1 and thus the switching circuit 126 is adapted for boost pressure control, the correction signal S₉ produced by the correction signal generator 148 is fed to the comparator 138 through the switching circuit 126. The comparator 138 produces the comparator signal S₁₂ indicative of the relative amplitudes of the correction signal S₉ and the sawtooth signal S₅. This comparator signal S₁₂ is fed to the arithmetic circuit 130 which generates a boost pressure control signal for controlling the electromagnetic valve 52. This boost pressure control will be repeated until harmful engine knocking is terminated or the boost pressure drops to the standard boost pressure P If the boost pressure decreases to the standard pressure P After the spark advance angle is fully retarded to the predetermined retard limit angle, the comparator 132 produces the comparator signal S₄ to be fed to the preset signal generator 142 to activate the latter and to the switching circuit 126 to change the control mode from spark advance control to boost pressure control. At this time, the preset signal generator 142 produces the preset signal S₆ to hold the spark advance angle at a position slightly advanced with respect to the predetermined retard limit angle. If harmful engine knocking continues, then the control function described in the foregoing condition 3 is performed. The boost pressure control in this condition 3 is the same as that of foregoing condition 1 . As will be appreciated, according to the shown embodiments, the harmful engine knocking can be eliminated without significantly influencing engine performance, particularly with regard to the transient response characteristics of the engine. During the foregoing control operations, if exhaust gas over heating is detected, the boost pressure is reduced regardless of other factors in order to maintain the exhaust gas temperature in a range in which an exhaust gas purifier can be fully active and will not be damaged by the exhaust gas heat. The foregoing second embodiment can be modified with keeping the above described desired functions. For example, as shown in Fig. 8, the correction circuit 150 and the output of switching circuit 126 leading to comparator 138 are connected to a standard pressure correction circuit 180 which corrects the predetermined standard pressure signal in accordance with engine conditions in order to improve the response of the control system to variations in the engine operating conditions.