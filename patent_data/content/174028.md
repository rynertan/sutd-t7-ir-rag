# APPARATUS FOR PROCESSING FLOATING POINT DATA HAVING EXPONENTS OF VARIABLE LENGTH

## Claims
Gerät zum Umwandeln von Gleitkomma Eingangsdaten mit einem Exponent variabler Länge und einer Mantisse in Gleitkomma Ausgangsdaten mit einem Exponent fester Länge und einer Mantisse, wobei die Eingangsdaten 100 aufgebaut sind aus

## Description
The present invention relates to an apparatus for processing floating point data having exponents of variable length. The format of the floating point data having exponents of varying length to be used in the present invention is known in Japanese Patent Laid Open No. JP A 59 11444 or U.S. Patent US A 4 671 641 In order to process those floating point data, it is necessary to separate the exponents and the mantissa from the data before processing and to generate floating point data having the exponents of variable length by combining the exponent and mantissa data both of fixed length obtained as a result of the processing. In the above specified Patent Application, however, the separating and combining processes are executed in the bit serial manner which results in a slower processing rate. An object of the present invention is to provide an apparatus which can separate or integrate floating point data having exponent parts of variable length in a bit parallel manner. According to a feature of the present invention, there is provided a floating point data processing apparatus for generating exponent data of fixed length from floating point data which is composed of a sign bit indicating the sign of a mantissa a first exponent part which has a bit length determined in dependence upon a significant bit length necessary for binarily expressing an exponent and which has all its bits determined at 1 or 0 in dependence upon said mantissa sign and the sign of said exponent a second exponent part which has its bit length determined in dependence upon the bit length of said first exponent part, which has a predetermined relationship determined in dependence upon the sign of said exponent and said mantissa sign with the significant bit part when said exponent is binarily expressed, and the leading bit of which has a value different from the value of one bit of said first exponent part and a mantissa part which has a plurality of bits having a bit length determined in dependence upon the value of said exponent,said exponent data of fixed length being composed of a sign bit part having a plurality of bits having values indicating the sign of said exponent and a significant bit part having a plurality of bits indicating the values of said exponent. The apparatus comprises detect means for receiving in parallel a plurality of bits other than said sign bit of said floating point data and for detecting the position of a bit, which has a value different from the value of one bit of said first exponent part and which is the closest to said first exponent part, as the position of the leading bit of said second exponent part shift means for receiving in parallel at least the bits other than said sign bit of said floating point data and responsive to the position detected by said detect means, for shifting said floating point data such that said second part comes to a predetermined position signal means for generating a bit pattern indicating such a bit position of said shifted floating point data as has its value to be transformed in dependence upon said sign bit of said floating point data, the leading bit of said first exponent part and said detected position and output means for receiving in parallel the respective bits of said floating point data shifted by said shift means and said generated bit patterns and for generating said exponent data. According to another feature of the present invention, there is provided a floating point data processing apparatus for generating floating point data having an exponent part of a varying length from both exponent data of fixed length, and mantissa data of fixed length, said exponent data being composed of a sign bit part having a plurality of bits of values determined by an exponent sign and a significant bit part having a plurality of bits indicating the value of said exponent, and said mantissa data of fixed length being composed of a mantissa sign bit part, an inverted bit part inverted from said mantissa bit part, and a mantissa significant bit part, said floating point data being composed of a sign bit indicating a mantissa sign a first exponent part having a bit length determined in dependence upon a significant bit length necessary for binarily expressing an exponent and which has all its bits determined at 1 or 0 in dependence upon said mantissa sign and the sign of said exponent a second exponent part which has its bit length determined in dependence upon the bit length of said first exponent part, which has a predetermined relationship determined in dependence upon the sign of said exponent and said mantissa sign with the significant bit part when said exponent is binarily expressed, and the leading bit of which has a value different from the value of one bit of said first exponent part, and a mantissa part which has a plurality of bits having values determined in dependence upon the value of said exponent. The apparatus comprises detect means for receiving in parallel a plurality of bits of said exponent data and for detecting the position of a bit, which has a value different from the value of one bit of said sign bit part and which is the closest to said sign bit part, as the position of the leading bit of said significant bit part first shift means for receiving in parallel a plurality of bits of said exponent data and for shifting said exponent data in dependence upon said detected position such that the leading bit of said exponent data is positioned next to the first exponent part of said floating point data to be generated second shift means for receiving in parallel a plurality of said mantissa data for shifting said mantissa data in dependence upon said detected position such that the leading bit of said mantissa data comes next to the significant bit part of the exponent data after shifted signal means for generating both a first bit pattern which indicates the bit position of a bit,which has its value to be transformed, of the exponent data, which are shifted by said first shift means, in dependence upon one of the sign bit part of said exponent data, the sign bit of said mantissa bit and said detected position and for generating a second bit pattern which indicates the position other than the mantissa significant bit part of the mantissa data Before entering into the specific description of the floating point processing apparatus according to the present invention, a cursory review will be made in the following as to the system for expressing the floating point data having the exponent part of variable length which system will be shortly referred to as the present expression or the present expression method which is to be used in the processing apparatus of the present invention. The essence of the present expression method resides in that the length of an exponent part is determined in dependence upon the preceding 0 train or 1 train thereof. The present expression method will be described specifically in the following. The binary expression of the value of the mantissa f is made, as follows For e 0, the range in which the number e can be expressed just by a binary m 0 bits is as follows If the range of the number f of Equation 3 is incorporated, Equation 6 is expressed in terms of the range of the number x, as follows Equations 6 and 9 do not contain the cases of e 0 and 1. This is interpreted as m 0. Including these, the internal expression of the integer e in case this number e can be expressed just by the m bits, as follows From the values e The length of the exponent part is expressed by 2m 1 and is characterized by increasing as the magnitude of the exponent increases. The length of the exponent part is also characterized by the fact that it can be detected easily by detecting the length m 1 of the 1 or 0 train positioned at the leading part. The order of the magnitude of the part except the leading 1 or 0 train of Equation 11 is coincident with the magnitude order of the value e even if the mantissa part is included in consideration. For x 0 like the case of x 0, Equation 7 is replaced by the following equation In dependence upon the sign of the exponent e, the sequence of m 1 number of 0 or 1 , followed by the 1 or 0 sequence and then by the respective inverted bits Fig. 1 shows the general format of the numbers according to the present expression. Indicated at numeral 1 is the sign bit of a mantissa which takes the value 0 or 1 in accordance with the positive or negative of the number x. Indicated at numeral 5 is an exponent part which is expressed by Equation 11 or 11 . An L field 2 is a part of the 1 sequence or 0 sequence of m 1 bits, and a E field 3 is a significant bit part of composed of m bits and expressing the magnitude of the exponent. A F field 4 is a mantissa part which is composed of an ℓ 2m 2 bits if the total bit number of the expression of Fig. 1 is designated by ℓ. Since the number 100 ₁₀ is expressed by Equation 1 , as follows Hence, the number 100 ₁₀ is expressed, as shown in Fig. 2, according to the present expression, as follows In order to conduct floating point processing of the numerical data which are expressed by using the exponent part 5 of variable length shown in Fig. 1, as is apparent from the description thus far made, it is necessary to separate the exponent part data having the exponent part of fixed length of the prior art and the remaining mantissa part data. For this necessity, it is necessary to separate the exponent part 5 and the mantissa part 4, which have the expression of Fig. 1. For this necessity, it is sufficient to detect the length m 1 of the L field 2. As is apparent from Equation 11 or 11 , the leading bit of the E field takes the value reversed from the value 1 or 0 constructing the bit sequence of the L field 2. By making use of these characteristics, it is possible to detect the length m 1 of the L field 2 and to judge the boundary between the E field 3 and the F field 4 on the basis of the length m 1 detected. As is apparent from Equation 11 , in case the sign bit S is 0, the E field 3 expresses the exponent as it is, when the L field 2 is a bit sequence of 1 , and the reversed E field 3 expresses the exponent when the sign bit S is 1 . In the practical processing apparatus, there is a limit to the total length of the data of Fig. 1. At this time, the bit in the allowable data length is selected to the exponentially expressed data of variable length from the S field 1 of the data of Fig. 1. As a result, when the exponent is large, the data may not contain the mantissa part 4 or a part of the E field 3. However, this case raises no problem in the present expression. Fig. 3 is a block diagram showing one embodiment of the present invention. In Fig. 3 reference numeral 20 indicates a boundary detection circuit for detecting the boundary between the length description part 2 and the significant bit part 3 of the exponent part numerals 21 and 28 bit pattern generators numerals 22, 24, 29, and 31 shift circuits for shifting input bits in parallel numerals 23 and 30 exclusive OR circuits numeral 25 a bit insertion circuit numeral 26 an arithmetic logic unit for processing floating point data having an exponent part of fixed length numeral 27 a boundary detection circuit for detecting the boundary between the exponent sign bit part and the significant bit part numeral 32 an AND circuit and numeral 33 indicates an OR circuit. In Fig. 3, the arithmetic of the data 100 of the exponent of variable length according to the present expression is conducted, as follows Next, the procedures for generating the exponent pare of the present expression type from the shift result will be described in the following. The exponent part according to the present expression method is generated by generating the bit pattern 112 from the output 101 of the exponent boundary detection circuit and the sign bit of the mantissa by the bit pattern generator 28 and by transforming the sign bit part 3 and the significant bit part 3 of Figs. 12B and 12C by the use of the EOR circuit 30 in accordance with Equations 11 and 11 . The position and length of the exponent significant bit part 3 and the sign bit part of the exponent of Figs. 12B and 12C are determined from the output 101 of the exponent part boundary detection circuit 27. Based upon the sign bit of the mantissa 110, it is possible to generate the bit pattern necessary for generating the exponent part of variable length according to the present expression. Fig. 12D shows the general format of the result of the exponent part i.e.the output 116 of the EOR circuit 30 generated for the shift output 114 in the cause of Fig.12B, and Fig. 12E shows the general format of the result i.e.,the output 116 of the EOR circuit 30 of the exponent part generated for the shift output 114 in the case of Fig. 12C. In either case, the left end bit of the output is set at 0 , and the OR circuit 33 is used so that the sign bit of the mantissa data 110 can be inserted. Figs. 15A to 15D show the various outputs 112 of the bit pattern generator 28 in case the output of the shift circuit 29 takes the format of Fig. 12B. Fig. 15A shows the pattern in case both the mantissa part 110 and the exponent part 100 are positive. Whether the mantissa 110 is positive or not can be judged in dependence upon whether its leading bit is at 0 or not, and whether the exponent part 100 is positive or not can be judged in view of the exponent sign bit i.e., 120 of Fig. 13 in the output 101 of the boundary detection circuit 27. At this time, the output 114 of the shift circuit 29 has significant bits at the m bits on and after the m 3 th bit from the leading bit, as shown in Fig. 15A. As is apparent from the first equation of Equation 11 , on the other hand, the signal 116 to be output as the data for the exponent data 114 according to the present expression from the EOR circuit 30 takes the value 1 from the second bit to the m 2 th bit, the value 0 at the next m 3 th bit, and the significant bit part of m 1 bits and a train of 0 of ℓ 2m 2 bits at the subsequent bits. This last part is that to which the mantissa is to be added. Therefore, the output 112 of the bit pattern generator 28 has to be the pattern which takes the value 1 for the m 1 bits 10 from the second bit to the m 3 th bits, as shown in Fig. 15A. Fig. 15B shows the case in which the mantissa is positive whereas the exponent is negative Fig. 15C shows the case in which the mantissa is negative whereas the exponent is positive and Fig. 15D shows the case in which both the mantissa and the exponent are negative. The description of these cases are omitted here because they are apparent from Equations 11 and 11 . Figs. 15E to 15H correspond to the case in which the output 114 of the shift circuit 29 is shown in Fig. 12C, and the values of the sign bits of the mantissa and exponent correspond to Figs. 15A to 15D, respectively. The bit pattern generator 28 can be realized easily by the use of the ROM which is made receptive of the output 101 of the boundary detection circuit 27 and the sign bit of the mantissa 110 as its address inputs and which is written with the bit pattern shown in Figs. 15A to 15H in its corresponding locations. The bit pattern generator 28 can also be realized easily by the use of a PLA OR logic gates. Incidentally, the bit pattern generator 28 outputs another bit pattern 113, which will be described hereinafter. The mantissa 110 is shifted rightward up to a predetermined position of the mantissa of the present expression type, while expanding the sign bit Se rightward, by the shift circuit 1 in accordance with the outputs 127 and 128 in the output 101 of the boundary detection circuit 27. The shifting stroke is 2m bits when the length of the exponent part is 2m 1 bits. Fig. 16A shows the normalized mantissa part data 110 before they are shifted. Reference numeral 1 indicates the mantissa sign bit, and numeral 11 is identical to the inversion of the mantissa sign bit in accordance with Equation 3 and its definition. The decimal point is located at 8. Fig. 16B shows the result of the output which is shifted rightward by 2m bits. Numeral 12 indicates a 2m number of mantissa sign bits, and the decimal point is at 6, which provides the boundary between the exponent part and the mantissa part according to the present expression. Next, in order to set the region stored with the exponent part at 0 , the bit pattern 113 is generated by the bit pattern generator 28, and a logical product is taken between the bit pattern 113 and the output 115 of the shift circuit 31 by the AND circuit 32. The result output 117 is shown in Fig. 16C. The pattern 113 generated by the bit pattern generator 28 is made, as shown in Fig. 16D, such that all 2m 1 bits corresponding to 12 and 11 in Fig. 16B are at 0 whereas all the bits corresponding to the other parts are at 1 . Therefore, the bit pattern generator 28 is constructed to generate bit pattern 113 separately of the bit pattern 112 in accordance with the value m which is expressed by the output 101 of the boundary detection circuit. The result 118 transformed into the present expression is attained if the logical sum of the exponent part 116 output from the EOR circuit 30 and the mantissa part 117 output from the AND circuit 32 is taken by the use of the OR circuit 33. This result output 118 is equal to the output 116 of the EOR circuit 30 in case the output 116 of the EOR circuit 30 is shown in Figs. 15E to 15H. The same result is obtained as the output 101 of the circuit 20 even if, in place of the left end input bit 120 of the check circuits 34 k 1 , , and 34 1, the right end bit of the lefthand partial bit train is input. Similar processing applies to the circuits 34 1 to 34 k of Fig. 13. As has been described hereinbefore, according to the present invention, the separation of the exponent part and the mantissa part from the data according to the floating point expression having the exponent part of variable length, and the combination of the exponent part of fixed length and the mantissa part after the arithmetic operation into a floating point data with an exponent part of a variable length are conducted in bit parallel so that a high speed floating point data processing apparatus can be realized.