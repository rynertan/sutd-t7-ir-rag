# A method and a switch for serially bit switching word formatted data.

## Abstract
A method und a switch for serially bit switching format ted data are disclosed. The data of each word, in the example a PCM word, is serially bit switched rather than being switched in parallel as in conventional PCM switches. This is achieved by time multiplexing corresponding word bits of respective incoming channels 10 onto a single data highway α to form a bit interleaved digital bit stream. Data on the highway is switched through a switch random access memory RAM 12 under control of a control memory 14 onto a highway β according to the required connections so as to rearrange the order of the data bits. The rearranged data is demultiplexed to the respective outgoing channels 16 . To avoid loss of alignment of boundaries at the outgoing channels, as between respective channels, the switch determines those connec tions which incur a switch cycle delay T relative to those which do not. This is done by comparing in a comparator 24 the read and write address controlling the switch memory 12 and if the write address is equal to or greater than the read address this means that the particular bit being switched has not been delayed in the switch memory by one cycle. In the converse situation the delay has oc curred in the switch memory. A delay equalizer circuit 18 includes a further RAM 29 which receives all data on the higway β and introduces a one cycle delay thereto. A by pass connection 21 enables data on the highway β to by pass the further RAM and hence avoid the delay. An AND OR select gate 22 selects data from the further RAM or the by pass connection as the case may be under the control of the comparator so that all data at the switch output has been subjected to the same delay. A synchro nization signal at the switch input, for word aligning the data, is delayed by one cycle at the switch outlet.

## Claims
CLAIMS 1. A method for serially bit switching digital word synchronized word aligned data between inputs and outputs of a digital switch, characterised by the steps of converting data from different incoming channels 10 to said switch into a bit interleaved bitstream on a single data highway or , bit switching said bitstream via a swtich memory 12 , determining those bits which incur a switch memory delay T ,as opposed to those bits which do not incur a said delay T , applying a said delay T to said bits which do not incur said delay T , and applying a said delay T to a synchronization signal for synchronizing he word boundary of outgoing data from the switch relative to a synchronization signal for synchronizing the word boundary of incoming data to the switch. 2. A switch for serial bit switching digital word synchronized word aligned data between inputs and outputs of said switch according to the method of claim 1, characterised in that, said switch comprises circuit means 11 for converting data from different incoming channels 10 to said switch into a bit interleaved bitstream on a single data highway oc , a switch memory 12 for receiving sequentially said data from said highway and bit switching said data to rearrange the order of data in said bitstream according to connections to be made through the switch, further circuit means 24 for determining those bits through the switch which incur a switch memory cycle delay T as opposed to those bits which do not incur a said delay T , a delay equalizer circuit 18 for applying a said delay T to those bits which do not incur a switch memory cycle delay and a delay compensator circuit 27 for delaying a synchronization signal for synchronizing the word boundary of outgoing data from the switch relative to a synchronization signal for synchronizing the word boundary of incoming data to the switch. 3. A switch according to claim 2, characterised in that said further circuit means 24 comprises a comparator for comparing address information for sequentially and cyclically writing into said switch memory 12 with address information for random reading from said switch memory and providing an output 23 when said read address is greater than said write address, the output of said comparator being provided to said delay equalizer circuit 18 to cause said delay equalizer circuit to apply said delay T . 4. A switch according to claim 3,characterised in that said delay equalizer circuit 18 includes a random access memory RAM 29 for sequentially receiving the rearranged data bits from said switch memory 12 and cyclically writing the bits into successive locations thereof, said rearranged bits being cyclically read from said RAM 29 so as to incur a said delay T , said delay equalizer circuit also including a by pass connection 21 whereby data from said switch memory is caused to by pass said RAM and an AND OR gate arrangement 22 to switch either the data bits from said RAM or from said by pass connection t9 the switch output depending respectively on whether said output of said comparator is present or not at said equalizer circuit.

## Description
A METHOD AND A SWITCH FOR SERIALLY BIT SWITCHING WORDFORMATTED DATA This invention relates to digital data switches c and in particular to a method and a switch for serially bitswitching word formatted data such as, for example, voice data of the PCM Pulse Code Modulated type. Of course bit switches suitable for switching unsynchronized data such as delta modulated data are well known and are widely used, for example, in small telephone exchanges. However, such bit switches are not suitable for switching word formatted data as word boundary information of incoming channels to the switch will not be maintained for all outgoing channels. This loss of information occurs because data through the switch on some connections is delayed by one switch cycle time that is a one bit time delay at the input channel bit rate as will be appreciated by those skilled in the art. Conventionally, switches for switching digital word formatted data such as PCM data comprise a switch wherein the data is transferred in word format by switching the bits of each word in parallel through the switch. Such a switch is inefficient in smaller applications in that it requires an identical path for each data bit of each word.It is also necessary to convert the serially generated incoming data to the switch into parallel form for switching and vice versa after switching. This further adds to the complexity and hence the cost of a parallel word switch. An alternative means for switching word formatted data is described in Applicants co pending Swedish Patent Application No. 76 11580 7 filed on 19th October, 1976.The co pending application describes a switch having a synchronization by path for switching synchronization information separate from each word and is intended for use with remote per channel codecs encoders decoders which are not word synchronized word aligned , that is, the word boundaries arrive at the switch at random instants of time. Whilst a switch of the type having a synchronization by path provides a simple bit switch suitable for switching word formatted data in serial form the switch does require effectively a duplication of the data path through the switch. The duplication makes the switch inefficie nt particularly when larger switch sizes are contemplated. Accordingly it is an object of the present invention to provide a method for serially bit switching digital word synchronized word aligned data, which method is particularly suitable for use in applications with per channel codecs in close proximity to the switch to avoid the aforementioned inefficiencies of the alternative switches described. It is a further object of this invention to provide a digital data switch for serially bit switching digital word synchronized word aligned data, which switching is particularly suitable for use in smaller applications to avoid the aforementioned inefficiencies. In order that the invention may be more readily understood one particular embodiment will now be described with reference to the accompanying drawings wherein, Figure 1 a is a schematic circuit block diagram of a basic known bit switch showing word synchronized word aligned PCM data at the input thereto and the effects of bit switching said data causing loss of synchronization on some channels, Figure 1 b shows the arrangement of data on highway a of Figure 1 a and the arrangement of data on the highway ss of Figure 1 a as a result of channel connections shown in the table and Figure 2 is a basic circuit block diagram of one embodiment of this invention. Referring to Figures 1 a and b a number of incoming data channels 10 are multiplexed by multiplexor 11 onto a single data highway a. The data on highway a is bit interleaved data as shown in Figure 1 b i.e. the bit stream on a is from each incoming channel in sequence.Data on the highway a is written sequentially into RAM switch 12 under control from binary counter 13. The data is read from the RAM switch 12 under control of control memory 14 according to the particular connections to be established. The data from 12 appears on highway ss in rearranged order according to the connections and is demultiplexed by demultiplexor 15 under control of the binary counter 13 to respective outputs 16. If the connection through the switch is such that the control memory address from 14 is greater than the address from binary counter 13 at a particular instant of time then the data through the switch will be delayed by one cycle of the RAM 12, that is, one bit delay at the incoming channel bit rate. If aO bo cO etc. represent the word boundaries of each channel which are synchronized on all incoming channels 10 as shown,the position of the word boundaries is unknown at the output side at some connections suffer the delay as shown. With single channel codecs the synchronization pulse which is used to synchronize the encoders not shown at the input must also be applied at the correct point in time to the decoders not shown at the output. It is not possible however if the word boundary positions at the decoders are unknown as occurs with the known bit switch shown in Figure 1 a . Reference should now be made to Figure 2 which shows an embodiment of the present invention. In Figure 2 the parts of the switch corresponding to the switch ofFigure 1 a are numbered correspondingly and will not be described again. The switch of Figure 2 has sixty four inlets each with its own discrete encoder 17 for converting voice frequency Vf signals to PCM digital signals. Data into multiplexor 11 is at 64 K bit s and thus data on the highways a and ss is at 4.096 M bits s. As explained above data on highway ss is rearranged in order and some bits are delayed by a cycle of switch memory 12, that is 16 ups, which is the bit period of incoming data. In order to avoid this problem the switch includes a delay equalizer circuit 18 for causing a delay to those bits which have not incurred a switch memory cycle delay. The delay equalizer circuit 18 comprises a 64 x 1 bit RAM 29 which sequentially receives data from highway ss and by means of a 4 MHz read write clock signal on 19 provides the data in the same sequence on RAM output 20. The data on output 20 however is delayed by 16 us relative to the data on highway ss. A by pass connection 21 in the delay equalizer circuit 18 enables data on highway ss to by pass the RAM 29.The RAM output 20 and by pass connection 21 are provided to AND OR select gate 22 which switches one or the other to highway y under the control of a signal on connection 23.Connection 23 is the output of a comparator 24 which compares the READ and WRITE addresses controlling the switch memory 12. In other words comparator 24 compares the address from counter 13 with the address from control memory 14 and if the address from control memory 14 is equal to or greater than the address from binary counter 13 at a particular instant of time the comparator 24 provides an output on 23 to cause the delayed data from RAM 29 to be switched to highway y. If the address from control memory 14 is less than the address from counter 13 no output appears on 23 and thus the non delayed data on by pass 21 is switched via gate 22 to highway y. Thus the data on highway y is all delayed by one cycle of the RAM 29 and after demultiplexing in demultiplexor 15 is word aligned between the sixty four outputs of demultiplexor 15. Therefore data received at the respective channel decoders 25 is word aligned. A synchronization signal generator 26 generates a synchronization signal for synchronizing the encoders at the switch input and a similar signal must also be applied at the correct point in time to the decoders 25 at the switch output. In order to achieve this a delay compensator circuit comprising flip flop 27 is incorporated in the connection 28 from synchronization generator 26 to the decoders 25. The flip flop 27 is clocked at 64 KHz and thus inserts a 16 us delay in the synchronization signal to the decoders to compensate for the delay introduced by equalizer circuit 18. Figure 2 shows one switch group. Similar switch groups may be added to expand the switch size to handle any desired number of inlets. The principle of the invention is of course applicable to multistage digital switches for example, time space time switches. Furthermore, the invention is applicable to switches having primary PCM multiplexors shared codecs as opposed to the per channel codecs described above. In such a situation the basic equalizer circuit is the same as that described above. However, the switch differs in that it is necessary to convert word interleaved bitstreams at the switch input into a bit interleaved bitstream as appears on the highways described above. This can be achieved by use of RAM s in the highway o . For example, consider a two input multiplexor at the switch input, each input of which contains thirty two channels constituting a 2.048 Mb s word interleaved bitstream.The output of the switch multiplexor would comprise a 4.096Mb s bit interleaved bitstream but the bitstream would not be the same as that of highway a in the embodiment above because the bitstream would comprise alternately bits from the entire words of two channels and then bits from the entire words of a further two channels and so on. Such a bit interleaved bitstream may be converted to a bitstream as on highway a by means of a bit to word converter comprisingRAM S not shown which are written into and read from in such a way as to achieve the required interleaving. Since such reformatting does not constitute a part of the present invention it will not be described in detail here as a person skilled in the art would readily appreciate a means for achieving the desired result. A reverse conversion takes place after switching.With shared codecs framing and word synchronization are contained in the frame structure of the primary multiplex. The effect bf the TDM switch is, as before, to cause a delay on some channels and thus cause a slip in the word boundaries as in the embodiment described above and a delay equalizer is used to obtain an identical delay on all channels. However, in this latter case a delay compensator is introduced to restore the correct word boundaries. The compensator is built into the bit to word converter and operates by modifying the read write sequence of the converter. In this case it must be remembered that the encoders are frame and word synchronized. It will be appreciated by persons skilled in the art that the invention described herein provides an economical and convenient way of bit switching word formatted data. In fact it provides the advantage that there is very little modification necessary to existing delta switches in order to use them for switching word formatted data.