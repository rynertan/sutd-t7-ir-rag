# CONTROL FOR A STEPPER MOTOR OR OTHER SYNCHRONOUS MOTOR

## Claims
Eine Steuerung für einen Schrittmotor oder einen anderen Synchronmotor, mit einem Positionsmeßwertumformer 14 , der ein die Motorposition darstellendes Motorpositionssignal schafft, einem ersten Mittel 11 zum Vergleichen des Positionssignals mit einem eine gewünschte Position darstellenden, gesetzten Punktsignal und zum Erzeugen eines Positionsfehlersignals, das die Entfernung darstellt, über die sich der Motor bewegen muß, bevor er die gewünschte Position erreicht einem zweiten Mittel 30 , das eine eine gewünschte Geschwindigkeit des Motors darstellende Motorsteuerausgabe schafft einem Schnittstellenmittel 13 , das den Treiberstrom an den Motor mit einer durch das zweite Mittel bestimmten Frequenz schafft einem dritten Mittel 20 , das die Größe der Motorsteuerausgabe auf einen vorgegebenen Pegel begrenzt, so daß der Motor ohne Schlupf laufen kann einem vierten Mittel, das auf das Positionsfehlersignal anspricht, um an das zweite Mittel 30 ein eine gewünschte Änderungsrate der Geschwindigkeit darstellendes Änderungsratensignal zu liefern einem fünften Mittel 29 , das die Größe des Änderungsratensignals auf einen vorgegebenen Pegel begrenzt, so daß die Motorgeschwindigkeit den geforderten Geschwindigkeitsänderungen folgen kann, dadurch gekennzeichnet, daß das vierte Mittel einen Funktionsgenerator 22 27, 40 42 umfaßt, der das Positionsfehlersignal, ein auf die momentane Laufgeschwindigkeit bezogenes Signal un 1 und ein Signal F , das den vorgegebenen Pegel, auf den das Änderungsratensignal durch das fünfte Mittel begrenzt wird, darstellt, als Eingaben empfängt und ein Ausgangssignal erzeugt, das die geforderte Geschwindigkeitsänderungsrate darstellt, die notwendig ist, um den Motor am gesetzten Punkt anzuhalten, wobei die durch das fünfte Mittel 29 auferlegte Begrenzung berücksichtigt wird.

## Description
This invention relates to a control for a stepper motor or other synchronous motor. The control is intended primarily for use in controlling a stepper motor to provide a mechanical input for a hydromechanical servomechanism driving a fuel control valve in a gas turbine engine fuel system. The control is, however, also applicable to many other different tasks. Conventional closed loop position controls of the type disclosed in U.S. 3619757 make use of a position error signal i.e. the difference between a position demand signal and an actual position signal to determine motor speed. With stepper motors, control can conveniently be effected without any internal closed loop within the position loop by varying the frequency of the pulses supplied to the motor windings, but it has been found necessary to limit the frequency and also effective and expedient to limit the rate of change of frequency to allow the higher speed range of the stepper motor known as the slewing range to be utilised, as disclosed in U.S. 3619757. It can be shown mathematically that a closed loop stepper motor control in which frequency rate of change limitation is applied will produce large overshoot in response to large step demand if the frequency is made linearly dependent on the position error. According to the invention, there is provided a control for a stepper motor or other synchrononus motor as defined in the appended Claim 1. Preferred embodiments of the invention are defined in the other appended claims. It is thus possible to provide an apparatus for controlling a stepper or other synchronous motor in which the problem of large overshooting is suppressed to negligible levels by controlling the motor in a stopping distance mode, in which a calculation is made to establish any speed change required if the motor is to be stopped at the required stopping position, taking into account the rate of speed change limitation of the motor, and motor speed is corrected accordingly. Basically, in a digital implementation, this can be done by calculating the stopping distance S Alternatively, it is much simpler to obtain the same value for u directly, from the equation In the accompanying drawings, Figure 1 is a block diagram of an example of an apparatus for controlling a stepper motor in accordance with the present invention Figure 2 is a functional block diagram of one example of a control scheme which can be used in the apparatus of Figure 1, and Figure 3, is a similar functional block diagram of another example of a control scheme. Referring firstly to Figure 1 the apparatus used includes a computer 10 the output of which is used to control the speed of a stepper motor l2 via a known digital to frequency converter power amplifier combination 13. The digital output from computer 10 contains speed and direction data which the unit 13 converts to an appropriately phased multi phase supply to the motor at the appropriate frequency. A position transducer 14 driven by the stepper motor provides an actual position signal to the computer 10. The computer 10 may control several motors 12 via a like number of units 13, a corresponding number of transducers 14 providing position signals to the computer. In this case, outputs from the computer 10 to the units 13 are provided in sequence. Turning now to Figure 2 the combination of the motor 12 and position transducer 14 are shown as a single unit for simplicity. The output of the position transducer is applied to the computer in which set point data is produced and compared with this output in subtractor 11 . As will be explained hereinafter a correction signal from the computer is applied to compensate for the error which occurs as a result of its cyclic digital operation in which data processed therein is always up to one cycle out of date. The subtractor provides a signal representing the position error, i.e. the distance still to be travelled before the motor shaft reaches the set point. The output of the computer is provided by an output limiter 20 which limits the digital output to a value M representing the highest speed at which the motor will run predictably without stall. This output can therefore be taken as representing the actual motor speed, and the need for a motor speed transducer, or for arrangements for differentiating the position transducer output to provide an actual speed signal, is therefore avoided. The box 21 in Figure 2 is included to show that the speed signal actually fed back to the rest of the control is that which was derived in the preceding calculation cycle. The speed signal u It will be appreciated that the output of unit 24 represents the stopping distance at the currently existing speed. Comparator 27 compares this distance with the actual remaining distance and its output represents the error between these two distances. The unit 25 provides as output a speed change which, after limitation, if any, by limiter 29, is added to the actual speed signal u Switch 28 operates to select whether normal linear speed control or the stopping distance mode of control is used. Switch 28 is controlled by a comparator 31 which selects linear control whenever the value of u The correction signal which is applied to the main computer as mentioned above is derived from yet another multiplier divider 33 which receives as input the u In operation, a change in set point, following an interval during which the motor shaft was at the previous set point will result in a step change in the position error signal from zero to some new value. Since u The above description explains what happens during a single finite journey from one point to another. In a real system the set point signal is likely to be varying all the time. The response of the stepper motor to such variations will, however, be apparent from the above. Figure 3 is a view like Figure 2 showing a simplified example of the invention. Items 11, 12 14, 13, 20, 21, 22, 23, 26, 29, 30 and 33 are exactly as described above. The switch 28, its associated comparators 31 and 32 are omitted, however, and changeover from linear mode to stopping distance control mode is effected simply by the insertion of a limiter 40, between the absolute value generator 22 and the comparator 23. This has the effect of applying a lower limit of F to the value of u . The remainder of the system is re arranged to allow use of only one multiplier divider unit instead of units 24 and 25. This unit 41 receives the remaining distance output of the main computer as its input rather than the u It will be appreciated that the example described in Figure 3 can very readily be applied by means of a digital computer, the various boxes shown all representing computional steps.