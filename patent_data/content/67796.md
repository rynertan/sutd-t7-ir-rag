# Device for indicating pole zero cancellation, in particular for amplifiers for ionizing radiation spectroscopy.

## Abstract
The Pole Zero Adviser for the Pole Zero Cancellation in Spectroscopy Amplifiers amplifiers for ionizing radiation pulse spectometry is a device that makes it possible to achieve a very accurate setting of the control of the Pole Zero Cancellation adjustment simply by observing a visual indica tor on the amplifier, without using any other instrument. It consist essentially of a sampler device for sampling the baseline after every pulse processed in the amplifier, associated to an averager device for averaging the samples, and to a display device, which gives a visual indication of the value and sign of the averager output signal, that is, of the mean value of the baseline sample. The device samples preferably the amplifier output suitable commands are provided for its operation. In prac tice, the circuit has a linear gate controlled by a suitable command and followed by a low pass filter circuit, whose output is connected to the visual indicator. The preferred type of sampling and averaging circuit is the so called boxcar integrator . This is essentially an RC low pass filter having a switch in series to the resistor the switch, when open, interrupts not only the arrival of the input signal, but also the discharge of the capacitor the low pass filter is thus modified by making its time constant RC tend to infinity. In comparation to implementations employing low pass filters with constant parameters, not modified when the gate device is switched, the boxcar integrator has the advantage of giving an output signal whose value does not depend on the repetition rate of the amplifier pulses. In fact, the output signal of the boxcar integrator is the average over a predetermined number of samples, which is constant for any repetition rate of the random time pulses generated in the radiation detector. The preferred type of visual indicator device is made by two LEDs light emitting diodes connected to the averager output, which indicate positive and negative output levels respectively.

## Claims
CLAIMS 1. Device for signaling the pole zero cancellation, in particular for amplifiers for ionizing radiation spectroscopy, charaterized by the fact of including a circuit that performs a sampling and an averaging of samples, preferably connected to the output of the amplifier, and command means for driving the sampler circuit and indicator means able to give a visual indication of the averager circuit. 2. Device according to claim No. 1, charaterized by the fact that the sampling and averaging circuit consists of a so called boxcar inte grator . 3. Device according to claim No. 2, charaterized by the fact that the boxcar includes an RC integrator circuit that has in series to the resistor a switch, which has the function of command for driving the circuit, and with the capacitor C connected to ground. 4. Device according to claim No. 1, charaterized by the fact that, in case of operation with baseline at level different from the ground reference, a sample and hold circuit or a delay line are used, inserted before the input of the sampler circuit the signal to be inspected therefore is the output from such a sample and hold or such a delay line, and the circuit includes two sampler averagers that operate on the baseline before and after the pulse respectively, and the indication is given by the output of the latter minus the output of the former. 5. Device according to claim No. 4, charaterized by the fact that the output of the sample and hold circuit or of the delay line is connected to two amplifiers, with gains having opposite sign and equal absolute value, and only one sampler averager is used, because a switch is provided that commutes the connection of the sampler input alternately to the output of one or of the other amplifier, for sampling the baseline before and after the pulse respectively. 6. Device according to claim No. 2, charaterized by the fact that the boxcar circuit is implemented with a MOSFET switch that connects an input resistor in series to the inverting input of an operational amplifier, whose non inverting input is connected to ground, with a feedback resistor connected from the output of the amplifier to the junction between the input resistor and the switch, and with a feedback capacitor connected from the output to the inerting input of the amplifier. 7. Device according to claim No. 2, charaterized by the fact that the boxcar circuit is implemented with a gated transconductance amplifier, which connects the junction between the input and feedback resistors to the input of an output amplifier stage the gated transconductance amplifier performs the function of the ordinary switch in the basic boxcar scheme, as a gate command is provided for switching off this amplifier. 8. Device according to the previous claims, charaterized by the fact that the command means for the sampling circuit are implemented with ordinary monostable multivibrator circuits. 9. Device according to the previous claims, charaterized by the fact that the command of the sampler circuit makes it possible to employ for the sampling operation only that part of the predetermined time interval, which is not overlapped by possible further pulses, following the one that has started the operation sequence, and this is obtained by using the ordinary logic circuits, such as coincidences and anticoincidences. 10. Device according to the previous claims, charaterized by the fact that the indicator means are made by two light emitting diodes LEDs , connected to the output of the averager circuit in such a way that one of them is lighted when the output voltage is positive, the other one when this voltage is negative. 11. Device according to the previous claims, charaterized by the fact that a switch is provided for disactivating the indicator means during the execution of measuraments of spectra.

## Description
DESCRIPTION The present invention concerns in general the field of ionizing radiation pulse spectroscopy and more specifically a device for indicating the correct Pole Zero Cancellation in Spectroscopy Amplifiers. It is well that in ionizing radiation spectroscopy, that is, in measurements of energies of radiations such as alpha, beta and gamma rays, accelerated ione etc., it is usual to employ radiation detectors, preamplifier amplifiers and multichannel pulse amplitude analyzers. The present invention concerns in particular the amplifiers. A Spectroscopy Amplifier has to filter the noise and process the pulses received from a preamplifier, associated to the detector, by satisfying stringent requirements, so that it be possible to exploit, in the actual experimental conditions, the high resolution obtainable with the modern semiconductor detectors. It is known that the output pulse shape may be different in different trowels of spectroscopy amplifiers. In practice, the most widely employed and satisfactory pulse shaping is the so called semi gaussian shaping, which produces a pulse shape that approximates a gaussian function, usually employing active filters. Whatever is the selected pulse shape, it is very important to make sure that, in the actual operating conditions, this shape is not altered by spurious tails , that is, by additional contributions having low amplitudes, but long durations, extending over time intervals much longer than the envisaged pulse width. In fact, these tails deteriorate the resolution in the amplitude measurament in all pratical cases where the pulse repetition rate is not very low. Fig. 1 outlines such tails Fig. la shows the designed pulse shape, Fig. lb shows the shape altered by an additional tail. Spurious tails can be caused by an imperfect matching of the amplifier filtering and pulse shaping networks to the shape of the pulse received from the preamplifier. This pulse has usually a quite short risetime followed by an exponential decay, charaterized by a time constantTpa , which normally has values from a few tens of microseconds upwards, as outlined in Fig. 2. Since the value of Tpa varies from preamplifier to preamplifier, all modern spectroscopy amplifiers include a control which makes it possible to adjust the amplifier pulse shaping in order to match it to the specific preamplifier used. This control is called Pole Zero Adjustament, because it is based on a linear compensation technique which is called cancellation of a pole by superimposition of a zero in the control system theory with reference to the terminology used in the analysis of linear networks by means of the Laplace transform . This adjustment is extremely important and critical for obtaining the best performance in the measurament of spectra. Object of the present description is a device concerning this adjustment. For the sake of brevity, in the following the Pole Zero Adjustment will be denoted simply by P Z. The problem is to be able, while acting on the P Z control, to find out the setting at which the pulse has an accurate baseline recovery, at the end of its designed shape. To this aim, it is required to ascertain the existence of slow tails having amplitudes even of the order of 10 3 of the pulse peak and less, with positive or negative sign. This means to verify at the amplifier output the existence of tails of the order of 10 mV and less, after pulses with amplitudes up to 10 V. This check has to be made in the actual operating conditions, with an electronic noise having intensity comparable or even higher than the tails to be checked. The adjustment is usually made by observing directly on the oscilloscope the waveforms. In such a procedure, besides the difficulty of evaluating the amplitude of tails buried in the noise, other difficulties arise since the oscilloscope is overloaded by the main pulse, which precedes the tail. As a matter of fact, in order to observe the tail it is necessary to use an expanded vertical scale of the oscilloscope, typically from 10 to 50 mV div. in these conditions, a 10 V pulse perturbs the oscilloscope input circuits in such a way that the oscilloscope response is distorted also in the following time interval, where the tail should be observed. At some extent, this may be avoided by clipping the main pulse with a diode network, added at the oscilloscope input. This is sketched in Fig. 3, where SA denotes the spectroscopy amplifier and 0 the oscilloscope.However, even with the diode network, the maximum amplitude of the clipped, pulse may reach 0.5 V, so that it may still overload the oscilloscope on the most expanded vertical scales. The drawback is thus not eliminated, but only reduced, and therefore limits the maximum sensitivity that can be used in practice for observing the tails. If, instead of observing artificial pulses produced by a pulse generator connected to the preamplifier test input, the adjustment is made by observing pulses produced by the detected radiations, as in principle it is advisable to do, a further difficulty arises because in general there is a statistical distribution of the amplitudes of such pulses, and therefore of their tails. These fluctuations obviously enhance the difficulty of ascertaining the amplitude of the tails. In summary, the P Z adjustment by means of the oscilloscope observation requires specific skill and practice to the operator, and is in fact subject to the following drawbacks a an oscilloscope must be available in practical instances this fact may cause difficulties to many of the users.b The noise at the amplifier output obscures the small tails.c The vertical sensitivity which can be employed in the oscilloscope must be limited, in order to avoid that the oscilloscope be overloaded and its indication consequently become unreliable.d The measurament of the amplitude of tails of the pulses generated by the radiations to be analyzed is made more confused by their statistical amplitude distribution. The aim of the present invention is therefore to eliminate as completely as possible all the above mentioned drawbacks by implementing a device that makes possible to perform an accurate pole zero adjustment without the necessity of employing an oscilloscope. Another goal of the present invention is to implement a device of the above mentioned type which does not require the use of artificial pulse generators, that is, which makes even possible to operate by using just the pulses generated by the radiations to be analyzed. A further goal of the present invention is to implement a device of the type above mentioned which is apt to make the P Z adjustment easy and fast even for unexperienced operators, and this with high precision, that is, with very low amplitude of the residual tail. These and other objectives, that will be better clarified in the course of the following description, are archived by means of a suitable device. As outlined in Fig. 4, this device is characterized by the fact of including an electronic circuit that performs a sampling, operating preferably on the amplifer output an electronic circuit that makes the average of the samples indicator means apt to give a visual indication of the value and sign of the averager output command circuits for the sampler. The preferred type of sampling and averaging circuit is the socalled boxcar integrator , that is, an RC low pass filter having a switch in series to the resistor, as outlined in Fig. 5. This switch, besides connecting switch closed and disconnecting switch open the signal source to the filter, modifies the characteristic time constantTpb of the low pass filter switch closed Tpb RC switch open Tpb tends to infinity . In comparision tb implementations with constant parameter low pass filters, the boxcar has the advantage of producing an output signal whose value represents the average over a predetermined number of pulses, indipendent from the pulse repetition rate. The boxcar makes simpler and more accurate the use of the device with the radiation detector pulses in the various practical cases. However, even implemented with constantparameter low pass filters, the device is still well suitable and effective. The invention will now described in greater detail, with reference to preferred types of implementation, that are given only as examples, and that therefore are not intended to limit the types of possible implementations. The description is illustrated by the enclosed drawings Figure 1, that shows pulse shapes with and without tails Figure 2, that outlines the shape of pulses received from preamplifiers Figure 3, that depicts the usual set up for P Z adjustment by using an oscilloscope Figure 4, that shows the simplified block diagram which illustrates the essential elements in the structure of the Pole Zero Adviser Figure 5, that shows the essential elements of a boxcar integrator Figure 6, that illustrates the operation of the boxcar integrator outlined in Fig. 5 Figure 7, that illustrates the operation of the Pole Zero Adviser Figure 8, that illustrates the operation of a Pole Zero Adviser in which an additional sample and hold circuit is used, in order to measure the level of the pulse baseline in cases where it is not at ground potential Figure 9, that shows a scheme for using only one boxcar integrator for measuring both the baseline level before the pulse and the tail level after it, in cases where the baseline level is not at ground potential Figure 10, that illustrates the operation of a Pole Zero Adviser in which an additional delay line is used in order to measure the level of the pulse baseline, in cases where it is not at ground potential Figure 11, that shows an implementation of the boxcar integrator employing a MOSFET switch Figure 12, that shows an implementation of the boxcar integrator empoying a gated transconductance amplifier Figure 13, that shows a preferred implementation of the device, according to the invention. The device inspects the signal in the amplifier circuit at a point after the differentiating filter section, preferably at the amplifier output, in order to work on pulses that are completely shaped and amplified.As outlined in Fig. 7 a starting from the onset of each pulse, it determines a delay TD sufficient to mark an instant where the pulse in its nominal form that is with perfect P Z can be considered completely ended, that is, it has such a small amplitude that it negligibly deviates from the baseline.b starting from the instant mentioned in a , it determines a short time t interval Ts, of the order of a few microseconds. c In the interval mentioned in b it takes the signal at the amplifier output or at the observed point in the amplifier and processes it in order to filter out the noise and generate a quasi continuous signal. The possible tails following the pulses contribute in such a way that this quasi dc signal represents the mean value of the tail amplitude, averaged over a number N5 of pulses. this number N5 is sufficiently high to reduce to an acceptable value the fluctuations caused by the statistical pulse amplitude distribution as an indication, NS is typically from 102 to 103 pulses.d The operation of the circuit should preferably be such that the result is practically not dependent on the repetition rate of the pulses within the range in which the P Z adjustment is usually performed as an indication, from a few 10 Hz to about 10 Thz repetition rate .e In order to avoid that at some instants erroneous indications occur, caused by the random arrival of another pulse following the one from which the delay TD is estabilished, it is advisable that the means that command the sampling act in such a way, thatfor the sampling and averaging operation, only that part of TS is used, which is not overlapped by possible further pulses as above mentioned. The occurrence of such a further pulse in TS and the corresponding curtailment of the sampling interval are illustrated for the second pulse in Fig. 7.In Fig. 7, the numbers denote the following 1 Waveforms at the amplifier output.2 Sisals that indicate the arrival of pulses that exceed the auxiliary threschold dashed line SO . 3 Output of the monostable that generates the delay T for the tail inspection. D 4 Output of the monostable that sets the duration TS of the time interval for the tail inspection.5 Part of the output waveform that is seen by the tail sampling block.6 Quasi dc output signal from the tail sampling and averaging block. The function above mentioned in a and b illustrated in 3 and 4 ofFig. 7 are performed by ordinary monostable circuits the function above mentioned in e is implemented by means of ordinary logic circuits coincidence, etc. . The function above mentioned in c is performed by a circuit which implements the sampling and averaging operations, that is, a circuit includes on the signal path a linear gate device followed by a low pass filter. Because of the above mentioned reasons and with reference to the point d , the preferred type of sampling and averaging circuit is the boxcar integrator This is a well known type of circuit, whose essential elements are shown in Fig. 5 and whose operation can be clarified by Fig. 6. The numbers in Fig. 6 denote the following 1 input signal to the boxcar 2 command for closing the switch 3 part of the input signal preocessed by the boxcar 4 output signal from the boxcar with time constant RC 5 T5 in the exemple of the figure . According to the invention, the boxcar is implemented in a simple way ard with a low cost, with performance level commensurate to the specific application required. In practice, the switch S1 is closed only in the time intervals TS see point b above . During these intervals the waveform arriving at the input is integrated with time constant RC. At the end of every Ts, the capacitor C remains at the level reached and holds the stored charge, waiting for the following interval Ts. Therefore, as far as the amplitude of the boxcar output signal is concerned, the result is just as if the idle time intervals between the various TS were non existent. The amplitude of the boxcar output signal has thus a value equal to that of an ordinaryRC filter which received the signal and noise in the various intervals TS one after another without idle intervals .This output amplitude is a weighted average of the input values in these intervals the average is performed over a number N5 5RC T5 of intervals preceding the time of observation, and the weights decrease exponentially from the nearest intervals towards the more remote intervals. The boxcar circuit outlined in Fig. 5 gives the average value of the input voltage in the intervals Ts, measured with respect to the gr und reference,to which the other end of the capacitor is connected.This average voltage value corresponds to the desired indication, that is, to the average value of the tails, provided the baseline of the pulses under observation corresponds to the ground level. On the other hand, in cases where this baseline has a different level, the desired indication is given by the difference between the output voltage from the circuit and the voltage corresponding to the baseline. In order to implement a complete device, the solution can be selected among various possible equivalent alternatives a the baseline is contantly regulated by suitable auxiliary circuits, that hold it to a predetermined constant value, which is to be subtracted from the boxcar output value.b the value of baseline level just before the onset of the pulses is continuously measured and averaged, and this measure is continuosly subtracted from the boxcar indication, which is the measure of the tail level after the pulses. A solution of the type b can be implemented as outlined inFig. 8, by using a sample and hold circuit. This circuit, driven by a signal that indicates the onset of each pulse, memorizes the voltage value in this istant at the point of the amplifier typically the amplifier output monitored by the boxcar which inspects the tails. During the hold time, the output of the sample and hold circuit can be measured and averaged by using the same method described for the measurament of the tails, that this, by using another separate boxcar circuit, similar to the one used for the tails. Fig. 8 outlines the operation for the cases in which a sampleand hold circuit is used to measure a baseline level different from the reference ground level. The number in Fig. 8 denote the following 1 output waveform from the amplifier 2 signale that indicate the arrival of pulses that exceed the auxiliary thereshold dashed line SO 3 signals that give the hold command to the sample and hold circuit 4 output waveform from the sample and hold circuit 5 output of the monostable that generates the delay TD for the tail inspection 6 signals that set the duration of the baseline inspection 7 signals that set the duration of the tail inspection which is shortened in case of arrival of a further pulse . As the two insp ctions,of the baseline and of the tail respectively, are performed at different times, it is possible to use only one boxcar to process them, instead of two separate boxcars as above outlined. This can be done as shown in Fig. 9 the input of the boxcar is alternately connected to a signal path with non inverting amplification measurament of the tail after the pulse and to a signal path with inverting amplification of equal absolute value measurament of the baseline before the pulse . The switch S1 when closed determines the duration of the time intervals in which signal is processed by the boxcar. The switch S2 determines the polarity of the processed signal the signal is summed in corrispondence to the tail measuraments and subtracted in corrispondence to the baseline measuraments. Another possible solution for operating with baseline level different from the reference ground level avoids the use of a sample handhold circuit, but instead requires the use of a delay line, with a delayTR of at least 1 to 2 microseconds, interposed between the observed point in the amplifier and the input of the boxcar, which measures the baseline.The gating interval TS must be limited in this case to durations shorter then the delay TR. The operation is outlined in Fig. 10 the numbers denote the following 1 output waveform from the amplifier 2 the same waveform after delay line, having delay TR T5 3 signals that indicate the arrival of pulses that exceed the auxiliary thereshold dashed line SO 4 output of the monostabie that generates the delay TD for the tail inspection 5 signals that set the duration of the baseline inspection 6 signals that set the duration of the tail inspection. In this solution, the measurament of the baseline can be performed with a procedure strictly analogous to that used for the measurenent of the tails, included the function see point e above of employing only that part of the intervals TS which is not overlapped by possible further pulses, that follow the one from which the delay TD is estabilished in a fraction of the events, this function makes indeed the measurament time interval T5 shorter than the nominal value. As already stated, the most important element of the device, that is, the sampling and averaging circuit and, in particular, its preferred form, the boxcar integrator, should be implemented by means of simple circuits with performance commensurate to the amplifier, and associated to the various auxiliary circuits existing in the amplifier itself, circuits that can be exploited to command its operation. Two circuit configurations, that satisfy such requirements, have been implemented and tested. In practice, it is advisable in both types to use before the circuit a preamplifier stage, with gain Ap of the order of about 20, and a clipping diode network that limits the maximum amplitude of the pulse, as the one shown in Fig. 3.Implementation of the boxcar by means of a MOSFET switch Fig. 11 The MOSFET performs the function of the switch S1 in Fig. 5. when it is closed,thecirruit behaves just asa normal active integrator, with time constant RfCf and do gain Rf Ri. When it is open, the capacitor Cf holds the charge level reached it is discharged only by the very small leakage current and the output remains at a costant level, waiting for the subsequent closing. The circuit is equivalent to the scheme in Fig. 5 with RC RfCf.Implementation of the boxcar with a gated tramsconductance amplifier Fig. 12 This scheme is based on the use of a so called transconductance amplifier high impedance input, high impedance output of a type having an auxiliary gate command, which interrupts its operation and leaves its output isolated, that is, with high impedance and null current. A typical example of such a circuit is the integrated circuit RCA CA 3080. The function of the switch in inFig. 5 is performed by the gate command of the CA 3080 the switching on of the CA 3080 corresponds to the closing of the switch S1. With the CA 3080 switched on, the circuit behaves like an active integrator, with time constant C gm gum transconductance on the CA 3080 an do gain 8CRi. when the 0 CA 3080 is switched off, the capacitor CO holds the charge level reached. In order to actually obtain this, the circuit I2 must have a high input impedance and a very low input bias current typically, it should have a FET input stage, as for instance the integrated circuit type u AF 774. The circuit is equivalent to the scheme in Fig. 5 with RC Co gm. From a practical standpoint, the circuit with the transaondutance amplifier shown in Fig. 12 results to be more simple and effective. The reading of the circuit indication can be obtain in a very simple way, without using instruments for the measurament of the output voltage. Due to the amplification used, the values of the output dc voltage are sufficently high to light two LED light emitting diode indicators, mounted on the amplifier front panel, so that they can be readly seen by the operator. As shown in Fig. 13, the two LEDs are connected to the circuit output in such a way that one of them is lighted for positive output voltage, the other one for negative output voltage. The switch S3 in Fig. 13 is used to disactivate the indication. As a matter of fact, the complete device is set into operation only when theP Z adjustment is performed, and is disactivated in the subsequent execution of the measurament of spectra. Of course, instead of the LEDs, any available type of visual can be used that is able to give a direct reading of the output of the averager circuit. Although the invention has been described and illustrated with reference to some forms of implementation, it is evident that it is not limited to these forms, and that it is possible to foresee all those modifications and variations that can be made by an expert of the field, without by that going out of the range of the invention concept.