# ALU WITH CARRY LENGTH DETECTION

## Claims
Arithmetisch logische Einheit 10 mit einer Taktsignalsteuerschaltung 22,40 zur Steuerung eines Taktsignalgenerators 70 , der iterative periodische Taktsignale erzeugt, die zur Steuerung des arithmetisch logischen Einheit 10 benutzt werden, welche arithmetisch logische Einheit 10 ferner eine Einrichtung zur Durchführung von Operationen in Abhängigkeit von den Taktsignalen aufweist, welche arithmetisch logische Einheit 10 Datensignale parallel verarbeitet, ausgewählte Verarbeitungsoperationen durchführt und Übertrag Fortpflanzungssignale P₀ P₅₉ parallel von Paaren von Operandeneingabebits erzeugt, wobei jedes der Übertrag Fortpflanzungssignale P₀ P₅₉ einen geltend gemachten und einen negierten Zustand hat, welche Taktsignalsteuerschaltung 22,40

## Description
This invention deals with the Arithmetic and Logic Unit ALU section of computing systems, and more particularly it deals with synchronous ALUs having a look ahead carry chain. Presently, one type of computing systems with ALUs use a look ahead carry chain to improve the performance of the system, i.e. increase the speed of the computations. Very briefly, a conventional look ahead carry chain is made up of a plurality of serial slices, with each slice having a predetermined number of input bits pairs forming a group. Within each slice the carry bit is propagated serially from the lower input pairs to the higher input pairs. However, the carry input to each successive slice is not taken from this slow propagating carry bit, but is instead generated from the group carry propagate P In some present day systems, the required cycle time by using a carry save scheme. In this case, the system obtains all the intermediate that is, bit or group sums and carrys is one cycle, and combines them in a subsequent cycle to obtain the final answer. The problem of this approach is that the system must now pay an increased price in the hardware complexity required to implement a carry save ALU. This is the case of the arrangement disclosed in the document US A 3 947 671. It is an object of this invention to reduce the cycle time needed for the great majority of ALU operations. It is another object of this invention to minimize the effect of carry propagation delay in the ALU without increasing the hardware complexity and without excessively adding to the number of devices needed. The present invention, then, provides for a system whose ALU uses carry length detection means that take advantage of the fact that most ALU operations have a largest maximum carry length, i.e. the number of consecutive input bit positions propagating a carry, that is much less than the width of the ALU. Thus, by detecting a long carry and providing additional time, i.e. a stretched cycle for synchronous systems, for the ALU to complete the operation for a small percentage of operations, a data path can be run in the present system at a faster rate for most ALU cycles. This invention further provides for means for performing a selected operation on input operands in a predetermined clock cycle, first means for detecting a path for a carry propagation through a number of consecutive bit positions greater than a first predetermined number, and means for stretching the clock cycle by a first predetermined amount in response to a signal generated by the first detecting means. Preferably there are also provided second means for detecting a path for a carry propagation through a number of consecutive bit positions greater than a second predetermined number greater than the first, and second means for stretching the clock cycle by a second predetermined amount in response to a signal generated by the second detecting means. Preferably, the detecting means only detect the carry propagation path for a subset of all bit positions, for excluding preselected bit positions from generating the cycle stretching signal. This invention also provides for means for performing a selected operation on input operands in a predetermined clock cycle, said operands occupying a number of bit positions, means, including a plurality of detection cells, for detecting a carry propagation path through a number of consecutive bit positions at least as great as a predetermined threshold range, the range having as a lower limit the minimum number of consecutive carry propagations within one of a plurality of pre determined groups of detection cells and as an upper limit the number of consecutive carry propagations that set at least one of the groups, and means for controlling the cycle in response to the detecting means. The invention is mainly directed to an arithmetic and logic unit that includes a timing signal control circuit for controlling a timing signal generator that generates iterative periodic timing signals used to control said arithmetic and logic unit, said arithmetic and logic unit further including means for performing operations in response to said timing signals, said arithmetic and logic unit processing data signals in parallel, performing selected processing operations, and generating carry propagate signals P₀ P₅₉ in parallel from pairs of operand input bits, each of said carry propagate signals P₀ P₅₉ having an asserted and a negated condition, said timing signal control circuit comprising The invention is also directed to an arithmetic and logic unit that includes a timing signal control circuit for controlling a timing signal generator that generates iterative periodic timing signals used to control the arithmetic and logic unit, said arithmetic and logic unit further including means for performing operations in response to said timing signals, said arithmetic and logic unit processing data signals in parallel and for performing selected processing operations, characterized in that said timing signal control circuit comprises Referring now to Fig. 1A, there is shown a block diagram for the ALU of the present invention. ALU 1 is shown as having two 6 Bit operands as inputs, A The remaining slices 22B, through 22L, implement similar expressions with their corresponding input signals P The group carry propagate signal P The individual P The remaining slices implement similar expressions for the corresponding input signals C The carry signals C The P The block diagram for the ALU 1 also shows that the operation code 75 controlling the ALU is input to Decode Circuit 76. Decode Circuit 76 then generates various signals that are needed by the ALU and whose values depend on the operation to be performed. An 8 bit function control signal 77 may be used to determine the function, or operation, to be performed on the input operands A and B. This is achieved by controlling the generation of the P Referring now to Fig. 1B, there is shown in more detail the Carry Length Detection Circuit 4 . The carry propagate signals P The reason for the particular two levels of AND gating is that the first level of gating, i.e. gates 42A through 42L and P The outputs P The Propagate Stutter Signal 49 may then be set for as few as ten asserted consecutive signals P The additional advantage of not gating the two end gates is that an additional performance improvement is obtained when the end bits, either least significant or most significant 5 bits, of the two inputs A The Propagate Stutter Signal 49 is gated in AND gate 5 with an Allow Stutter signal 51, which is normally set. The Allow Stutter signal 51 is not set for ALU operations in which all input bits produce a carry generate signal G A Double Precision Enable signal 47 is also included in the second level detection gates for signals P₅ through P₃₄, to eliminate detection of a long carry over bits unused while calculating in single precision, while all 6 bits are enabled for double precision operation. It should be clear that the principles of this invention are not limited to 60 bit ALUs, but that they can be applied to ALUs of any width and are applicable to designs usings standard parts as well as custom designs. The optimal width of the AND function used to produce the group carry propagate signals depends on the technology in which the ALU is implemented. Referring now to Fig. 2, there is shown a diagram for the Carry Length Detection Circuit 40 for a 32 bit ALU where the width of the group carry propagate is 4 bits. AND gates 60A through 60H form the first gating level in Carry Look ahead circuit 22 and gates 62A through 62C form the second gating level of Carry Length Detection circuit 40. OR gate 64 is used to propagate a Propagate Stutter Signal 65 if all the eight consecutive carry propagate signals P In this implementation the Allow Stutter signal 51 is used as described above to inhibit the clock stutter signal for those ALU operation in which the carry propagation is not a factor. In general, if the individual carry propagate signals P The mode of operation described thus far is synchronous in that the timing of all the operations is controlled by a clock signal, usually in the form of a plurality of phases, occuring at regular intervals. If the current operation cannot complete within one of these time intervals, the clock stutter signal is used to delay the execution of a new operation by one additional time interval, during which time the current operation will finish. Thus in the case of the embodiment of Fig. 1, the ALU must be designed to be fast enough to process the worst case of eighteen consecutive carry propagations within a clock cycle, while for the embodiment of Fig. 2, the ALU must process the worst case of fourteen consecutive carry propagations within a clock cycle. Another mode of operation is possible, however. Since the carry propagate terms become valid after a fixed combinational delay, the Clock Stutter signal 54 is valid early enough in the cycle to extend a phase of the system clock by a predetermined amount allowing just enough time for the current operation to complete if necessary. This additional time, provided if a stutter signal is asserted, must be long enough for the worst case of consecutive carry propagations to complete. In this mode of operation the stutter signal is not used to stutter the system clock, to essentially issue a fixed increment of delay, but is used to delay the clock cycle by a variable amount sufficient to assure completion of the current operation. Referring now to Fig. 3, there is shown an embodiment of the invention implementing this feature. The first level gates 42 of Carry Look Ahead Circuit 22 are coupled to second level gates 44 in Carry Length Detection Circuit 40, and in turn are coupled through OR gate 48 to gate 50 to generate a first Clock Stutter signal 54, as explained before in connection with Fig. 1. Stutter signal 54 is now used by Clock Control 70 to extend a phase of the system clock, by a first predetermined amount, if the current operation can be completed within this additional time. To determine if more time is needed to complete the current operation a second tier of carry length detection using a wider bit grouping is used, and if needed it provides a second predetermined amount of clock stretch. To implement this, the paired group carry propagate signals P Even by using a single stutter signal, the performance is increased, because most ALU operation greater than 95 will not require an additional clock cycle. For example, in the circuit described in Fig. 1, the probability of requiring an additional cycle, a stutter, on random data is approximately The present invention provides for an ALU that must handle in a unit cycle, without a clock stutter, the maximum number of consecutive carry propagations that will not set the stutter signal. For example, this number is eighteen for the embodiment shown in Fig. 1 and fourteen for the embodiment of Fig. 2. However, it should be understood that this number can be decreased to accomodate slower ALU designs without compromising, i.e. decreasing, the minimum number of consecutive carry propagations that will trigger a clock stutter. Thus the difference between the maximum carry length which always stutters the clock and the minimum carry length which might stutter the clock can be controlled by adding additional sets of AND gates to produce overlapped groupings of consecutive carry propagate signals. This is shown in the embodiment of Fig. 4, where the first level gates 42 are used as before to provide the initial grouping of five carry propagate signals P A modification to the Carry Length Detection Circuit 4 tray be made, by changing the type of signals monitored to detect the continuous propagation path. for instance, instead of using only the group carry propagate signals P In this case, an arrangement using a plurality of cells, a single such cell being shown in Fig. 5, can be used to produce the appropriate signals to be used as inputs to the Carry Length Detection circuit 4 . In each cell an output signal is produced in two stages. First the AND function of individual carry propagate signals P