# VCO CENTERING CIRCUIT

## Claims
PLL Schaltung zur Wiederherstellung des Frequenztaktes von auf einer Eingangsleitung vorliegenden Daten, die enthält

## Description
The invention relates to phase lock loops in general and more particularly to apparatus for centering the Voltage Control Oscillator VCO . The use of phase lock loops in various types of communication systems is well known in the prior art. A typical phase lock loop consists of a phase comparator, a loop filter and a voltage controlled oscillator VCO . The phase comparator compares the phase of an input reference signal with the phase of the VCO and generates an error voltage which is used to drive the VCO until it is phase locked with the input reference signal. It is desirable to have as large a dynamic range of correction voltage as possible. This would allow the maximum correction for phase transients and frequency variations in the reference signal. In integrated circuit technology, design of VCO circuits usually has a variation in the natural frequency f In the past using up a large part of the available voltage range presents no problems since linear circuits were designed using voltages with a potential difference of at least 10 volts. In cases where the optimum range was required, a potentiometer was used to adjust the VCO to the desired frequency when the input voltage was at the center of the allowed range. There are several technologies in which the range of voltages available for adjusting the VCO is relatively narrow. For example, in a VLSI chip a potential difference of 4.5 volts or less is available. In addition, there is an effort in the CMOS technology to design chips comprising of logic circuits, processors and memories. It is believed that these designs will probably have a larger variation in the natural frequency f European patent application 0 051 473 discloses a PLL including two phase detection means one having a narrow bandwidth, and one having a wider bandwidth and an automatic switching system between the two so as to increase PLL frequency capture range for fast acquisition using the wide bandwidth detection means, then increase noise immunity of PLL frequency tracking by switching to the narrow bandwidth detection means. European patent application 0 115 234 discloses a PLL for synchronizing over a pulse train, including in the loop back two threshold under V1 or above V2 voltages detectors incrementing or decrementing a binary counter which in turn controls VCO output frequency thru a digital analog converter. The input for threshold detectors is the result of comparison between output of a phase detector, handling both VCO output frequency and the pulse train, and a Ref voltage the generation of which is not disclosed. Tuning that Ref voltage allows for tuning VCO natural frequency, thus getting by tolerance for the values of crystal and capacitance used for the VCO. Although not disclosed, generation of Ref voltage probably will have to involve a potentiometer that one will have to adjust manually. Thus, nowhere in the prior art is anticipated a PLL including a circuit allowing for automatic presetting of the VCO to its natural frequency, at a controlling voltage such that voltage range later available for PLL locking over incoming data, is maximized. It is therefore the general object of the present invention to provide a more efficient PLL apparatus than was heretofore possible. It is still another object of the present invention to provide a PLL with a device and method for automatically adjusting the f At the start of an adjustment cycle the VCO in the PLL is forced to operate at the frequency of a local crystal. Preferably, the frequency is equivalent to the nominal frequency of the input signal. An error voltage is developed and is compared to the voltage available for adjusting the VCO. Preferably, the voltage should be at the midpoint of the adjustment range. If the error voltage falls outside of an allowable range, a counter means is activated and provides a bias current which drives the VCO. The process of forcing the VCO to the crystal frequency and comparing the correction or error voltage is repeated until the compare means finds that the VCO correction voltage falls within the allowable range whereupon the proper bias current is locked into the counter means. In one feature of the invention, means is provided for issuing a signal indicating that the adjustment is complete and the normal PLL function is enabled. More particularly, the invention includes a phase locked loop circuit for recovering the frequency clock of data present on an input line, comprising Fig. 1 shows a block diagram of an improved PLL according to the teachings of the present invention. Fig. 2 shows the details of a circuit for adjusting the center frequency of the PLL. Fig. 1 shows a block diagram of a circuit arrangement embodying the teaching of the present invention. The circuit arrangement comprises of a phase locked loop identified by numeral 10, a local oscillator centering circuit means 12 connected by conductors 14 and 16, respectively, to the phase locked loop and a signal indicating means 18 connected by conductors 20, 22, and 24, respectively, to the phase locked loop and the local oscillator centering circuit means 12. The phase locked loop 10 receives data on the received data line and adjusts the frequency of current control oscillator 51 until the phase of the output signal from the current control oscillator locks onto the phase of the incoming data signal. Thereafter, a signal labeled recovered clock is outputted on conductor 28. The local oscillator centering circuit means 12, when activated by a control signal on the line identified as frequency acquisition line, initiates a series of adjustment routines until a suitable bisync current is outputted on conductor 16. The bisync current is sufficient to drive the current control oscillator so that the output frequency is positioned at the free running frequency of the oscillator. Although obvious to those skilled in the art, it should be noted that current controlled oscillator 51, amplifier means 50 and summing means 52 may be identified as VCO 26. Thereafter, the signal indicating means 18 monitors the condition on the phase locked loop and whenever the centering routine is completed outputs a ready signal on conductor 30. Thereafter, the phase locked loop is enabled to run in its normal operating condition. The adjustment routine which is provided by local oscillator centering circuit means 12 allows the full range of the available voltage to be used in adjusting the current controlled oscillator to lock onto the incoming data and as a result improves the operational characteristics of the phase lock loop. Still referring to Fig. 1, the phase lock loop 10 comprises of a current control oscillator 51 having conductor 28 connected to its output terminal and conductor 30 connected to its input terminal. A feedback conductor identified by numeral 32 connects the output terminal of the current controlled oscillator to one of the inputs on phase detector means 34 and frequency detector means 36. In particular, the phase detector means 34 accepts the feedback signal from the current controlled oscillator and compares it with input data signal on the received data line. Whenever there is a phase difference between the signals, the phase detector means outputs a voltage signal on conductor 38. Likewise, frequency detector means 36 accepts the feedback signal from current controlled oscillator 51, compares it with a control signal on the crystal xtal frequency line and whenever there is a difference in the frequency outputs a signal on conductor 40. The signals on conductor 38 and 40 are fed into multiplexor MUX means 42. The multiplexor means 42 is a conventional off the shelf multiplexing device and as such the details will not be given. The multiplexing means 42 is controlled by a series of control pulses outputted on the frequency acquisition line. Depending on the signal on the frequency acquisition line, the multiplexing means 42 is cause to select the output of either the phase detector means 34 or the output of the frequency detector means 36. The signal which is selected is fed over conductor 44 into charge pump means 46. The charge pump means 46 is a conventional off the shelf device and the details will not be given. Output signals from the charge pump means 46 are fed over conductor 48 into amplifier means 50. The amplifier means 50 accepts a signal from conductor 48, amplifies the signal and drives the signal into summing means 52 from whence it adjusts the current into the current controlled oscillator, thereby forcing the oscillator into lock with incoming signals. Still referring to Fig. 1, signal indicating means 18 comprises AND circuit means 54 which is connected to energy detection means 56 and phase lock loop PLL detecting means 58 over conductors 60 and 62, respectively. The input from energy detection means 56 is connected over conductor 24 to phase detector 34. The energy detection 56 monitors the output of phase detector means 34 and outputs a signal on terminal 60 when energy is outputted from the phase detector means. Similarly, phase lock loop lock detection means 58 is connected by conductor 22 to the output of charge pump means 46. The function of the phase lock loop lock detection means 58 is to indicate, by means of outputting a signal on terminal 62, when the loop is not locked. The signals on conductors 60 and 62 are combined in AND circuit means 54 to generate a ready signal on conductor 30. Fig. 2 shows the details of the local oscillator centering circuit means 12. In order to simplify the description, common numerals are used to identify elements which are common to both Figs. 1 and 2. The local oscillator centering circuit means 12 comprises of a pair of comparators identified by numerals 60 and 62. The comparators are used to set a voltage reference window within which the phase locked loop filter voltage must be positioned in order the frequency of the output signal, from the control oscillator, is positioned about its center frequency. As will be explained subsequently, once the phase locked loop filter voltage is positioned within this window, the bias voltage which provides the current on conductor 16 is locked into place and thereafter the loop is energized for normal operation. In the preferred embodiment of this invention the voltage available for driving the controlled oscillator is approximately 5V distributed on both the positive and the negative directions relative to a 0 voltage reference line. With this distribution comparator 60 which sets the upper limit of the window is supplied with a 2.50 Δ on conductor 64. Similarly, comparator 62 sets the lower limit of the window and is supplied with a voltage value 2.50 Δ on conductor 66. It should be noted that the comparators may be used to set a voltage window other than 5V. Therefore, the use of 5V as a desirable voltage window is only representative of a particular voltage range and ought not to be construed as a limitation of the scope of the present invention. The output signals from comparators 60 and 62 are fed over conductors 68 and 70, respectively, into AND blocks 71 and 72. With the aid of a control signal on conductor 74 to be described later AND blocks 71 and 72 generate the increment counter pulses on conductor 76 and the decrement counter pulses on conductor 80. The increment decrement pulses are fed into counter 82. As will be explained subsequently, counter 82 is used as a variable register to hold a digital word corresponding to the bias current which is used to center the control oscillator. The output from counter 82 is fed over conductor 84 into digital to analog D A converter 86. The D A converter converts the digital words stored in the counter to a corresponding bias current which is fed over conductor 16 into summing means 52. Still referring to Fig. 2, a clock pulse and a reset pulse are generated and applied to counter 82 on conductors 88 and 90, respectively. The clock pulse is used for stepping the counter and is generated from AND block 73. The input into AND block 73 is from a low frequency oscillator and a controlled signal to be described later generated on conductor 74. Likewise, the reset pulse on conductor 90 is enabled to reset the counter at the beginning of an adjustment cycle and is generated from single shot SS circuit 92. The single shot circuit is activated by the control signals on conductor 74. The control signal on conductor 74 is generated from the Q output of a D type latch identified by numeral 94. The latch is the primary controller for the centering circuit 12. To this end, the latch detects whenever the input signal frequency acquisition mode is selected. This selection is indicated by placing a control pulse on the frequency acquisition line. The pulse sets the counter and starts a new bias adjustment cycle to center the local oscillator. The latch is reset with a pulse generated from OR circuit block 96. The OR block detects when both comparators are indicating that the phase lock loop correction voltage is within the desired window. The pulse is delayed by delay block 98 from whence it is fed over conductor 100 into the reset terminal of the latch. A supply voltage V The circuit arrangement operates as follows Similarly, the low frequency oscillator is at a frequency low enough to allow frequency acquisition at each new DC bias current, thus after each clock pulse the system will settle at the crystal frequency. The phase lock filter voltage will be compared to the window and additional steps will be taken until the window voltage is reached. At this time the latch will be reset so that the Q output is low, holding the counter at the value that gives proper bias current towards either window voltage and the phase locked filter. The Q output enables one leg of the AND circuit 54. When the lock and energy detect circuits are satisfied, a ready signal is forwarded to the system. The VCO natural frequency has now been adjusted to the desired frequency with its input voltage at the mid range point. The described circuit arrangement eliminates the deviation from the middle of the VCO input range and allows lower gain VCO circuits. Another benefit is that the above described system can be integrated into an LSI chip design and does not require any more card space. In addition, the available signal range is expanded by a factor of 4 or 5.