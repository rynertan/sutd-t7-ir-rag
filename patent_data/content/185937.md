# TABULATION SETTING FOR A PRINTER

## Claims
Druckger√§t mit einer Tabulatorsetzfunktion, umfassend eine Tabulatorsetzvorrichtung 9 zum Setzen einer vorbestimmten Zahlenstellenposition in einer Zeichendatenkette

## Description
The present invention relates to a printing apparatus for printing characters, symbols and numerals and, more particularly, to a printing apparatus with which input data can be efficiently corrected. To prepare a table of numbers by using printing apparatuses, e.g., typewriters or wordprocessors, the decimal points of numbers or the rightmost positions of numbers having no decimal points must sometimes be aligned. For example, to print decimal number 123.456 by using a conventional manual or electrical typewriter, the typist sets a tab position where the decimal point should be printed. He or she then depresses the tab key, whereby the print head is moved to the tab position. The typist pushes the back space key three times, returning the print head for a three character distance. Then, he or she depresses the Electronic typewriters which have a memory, can store a document and can process the stored document have recently become popular. Some of them are equipped with a so called decimal tab key, To print decimal number 123.567 with the decimal point at a desired tab position, the typist first sets the desired tab position. He or she then pushes key and depresses is finally depressed, the typewriter prints 123.456, with the decimal point at the tab position. To print whole number 123, the typist depresses , When space key is pushed, the data representing 123 is stored in the memory in such a manner that the space will be located in the tab position. Symbol indicates a space. When the return key, is depressed, the typewriter prints the whole number, with the space located at the tab position. The electronic typewriters described in the preceding paragraph have a drawback. Let us assume that the typist has set the tab position at the tenth printing position and has mistakenly depressed key, intending to print 123. In this case, the data stored in the memory is, 12. The typest must depress the cursor key, key is depressed after key has been depressed. From GB A 2 087 115, it is known a printer which is able to perform a digit alignment. The CPU of this known printer includes a latch in which a specified value is stored to fix the decimal point at a specified position. Upon actuation of numerals keys, a character data string is stored into a register and displayed on a display unit while no printing is made at this stage. Also, a counter is provided for storing the number of numeral key actuations. In response to the actuation of a decimal point key, the CPU subtracts the value stored in the counter from the value stored in the latch, and displaces the printing head to the position of the digit obtained by the subtraction, in order to immediately start printing. Thus, even if the decimal point key is erroneously pushed, printing is started before the error is corrected. As a result, correction of typing errors is not possible before printing is started. In IBM technical disclosure bulletin, vol. 18, no. 4, it is described a decimal tabulation and text centering method. According to this known method, after all of the character codes are entered, a field end code, such as a carrier return or tabulation code is keyed. An accumulation of backspace codes equal to the printing escapement of the character codes preceding the decimal point is then entered into the memory, in storage locations succeeding the tabulation code and immediately preceding the first entered character code, after all of the character codes are moved to allow storage space for the backspace codes. Upon entry of the backspace codes into the memory, the display is responsive to the string of backspace codes to shift the displayed text to the left, so that the field is displayed with the decimal point at the desired location. In this known method, the digit alignment is carried out by using spacecodes. The handling of this known method is rather complicated, in particular when a correction of the entered character codes is desired. Additionally, this known method requires a lot of memory space to store the backspace codes. It is an object of the present invention to provide a printing apparatus which is free from the above drawbacks and can easily correct input data. In order to achieve the above object according to the present invention, there is provided a printing apparatus according to claim 1. The printing apparatus of the present invention performs digit alignement for the tab operation so that the data for designating execution of the tab operation corresponding to an input operation of a decimal tab key is inputted after the character data string to be subjected to the tab operation is inputted. That is, when a character data string is inputted, no specific operation associated with tab operation is performed, and the character data string is simply stored in the memory means. Therefore, input data can be easily corrected as in the case of a normal key input operation. This invention can be more fully understood from the following detailed description when taken in conjunction with the accompanying drawings, in which An embodiment of the present invention will be described with reference to the accompanying drawings. Fig. 1 shows the overall configuration of a printing apparatus according to the present invention. A keyboard 1 has a carriage return key CR 101, a space key SP 102, a decimal tab key DT 103, left and right cursor moving keys 104 and 105 and other keys 106. An output from the keyboard 1 is connected to a central processing unit CPU 2 through a data bus 14. The CPU 2 has an i register 201, an a register 202, a c register 203, a b register 204, a control unit 205 and an operational unit 206. The CPU 2 is connected to a display controller 12 through a data bus 28, and the controller 12 is connected to a display unit 13 through a data bus 29. The CPU 2 is connected to a read only memory ROM 7, a document memory 8 and a tab memory 9 through an address bus 15 and a data bus 16. The CPU 2 is connected to an A buffer 4 and a B buffer 5 through the bus 16, and the buffers 4 and 5 are connected to a comparator 6 through data buses 25 and 26. An output from the comparator 6 is connected to the CPU 2 through a data bus 27. The CPU 2 is connected to a printing controller 10 through a data bus 21 and a signal line 22, and the controller 10 is connected to a printing unit 11 through a data bus 23 and a signal line 24. The CPU 2 is connected to a character number counter 3 through signal lines 17, 18 and 20, and the output from the counter 3 is connected to the CPU 2 through a data bus 19. On the other hand, the memory 8 has an internal input buffer 801, and the controller 10 has an internal PB buffer 1001. The operation of the printing apparatus with the above arrangement will be described with reference to an operation flow chart of Fig. 2 and illustrations of Figs. 3 and 4. First, the operation will be briefly explained. Fig. 3 shows a case wherein printing is performed so that a decimal point of input numeral data is aligned at a 15th digit, as shown in a printing format thereof. The buffer 801 temporarily stores key input codes from the keyboard 1 Fig. 1 from the leftmost position. Assume that a 15th digit is stored in advance in the memory 9 of Fig. 1 as a decimal tab position to be referred to as a DT position hereinafter . Referring to Fig. 3, 102 in Fig. 1 is depressed, the keys 103 in Fig. 3 and the carriage return key 101 in Fig. 1 are depressed. Thus, the CPU 2 Fig. 1 discriminates that a numeral string between the space key code SP at the seventh digit and the decimal tab key code DT at the 15th digit on the input buffer is to be aligned at the decimal tab position. The CPU 2 then discriminates that the total number of characters of this numeral string is seven, and thereafter, discriminates the decimal point at the 11th digit on the input buffer. Thus, the numeral having seven characters is printed to be entirely shifted so that the decimal point is printed at the preset 15th digit on the printing format. According to the present invention, the key is operated after inputting numerals. As long as the and keys are not detected, the input key codes are simply stored in the input buffer, and tab operation is not performed. For example, when 123.456 is to be inputted as in the above case, even if erronenous key input operation is performed, e.g., key is not operated, the input data can be corrected as in normal correction of characters. That is, in this case, the cursor is moved to the left by one character by using the left cursor key 104 Fig. 1 so as to delete the The operation of the printing apparatus shown in Fig. 1 will be described with reference to the flow chart shown in Fig. 2. The decimal tab position the DT position is stored in advance in the tab memory 9 through the keyboard 1. In an example shown in Fig. 3, since the DT position is set at the 15th digit, numeral stored in the tab memory 9 is 15 . Then, key input is performed using the keyboard 1 as follows , Thus, the corresponding key codes are stored in the input buffer 801 of the memory 8, as shown in Fig. 3. The unit 205 of the CPU 2 starts the flow chart shown in Fig. 2 after operation of the key Fig. 2 1 . Then, the unit 205 detects the DT code in the input buffer 801 using the address bus 15 and the data bus 16, and sets an addess i 15 thereof in the a register 202 Fig. 2 2 . The register 202 stores the preset digit address of the input DT code in the input buffer. As will be described later, an address of the rightmost numeral code of the numeral data at the left of the DT code set in the input buffer is set. In this case, the storage content of the i register which similarly stores the digit address of the DT code on the input buffer is updated to i 15. Therefore, it can be detected that the digit address of the rightmost numeral code in the input buffer is 14 . The address of the leftmost numeral code of the numeral data at the right of the SP code in the input buffer is set in the i register. In order to detect the address of the leftmost code of the numeral data in the input buffer, the SP code is detected. For this purpose, the SP code is read out from the ROM 7, and is set in the A register. The A register temporarily stores the input SP code or the decimal point code. Then, the unit 205 reads out the numeral code M i at the address i in the input buffer 801 and stores it in the B buffer 5 Fig. 2 5 . In this case, since a content of the i register 201 is a value decremented by one by the unit 206, i.e., the storage content of the i register 201 is i 15 by the processing of Fig. 2 2 , the read address of the numeral code M i is a value obtained by subtracting 1 from 15, i.e., i 14. Therefore, as shown in the input buffer 801 of Fig. 3, the numeral code M 14 at the corresponding address is the numeral code 6 at the 14th digit. The contents of the A and B buffers 4 and 5 are compared by the comparator 6 with each other through the data buses 25 and 26. It is compared whether or not the data read out from the input buffer 801 to the B buffer 5 is equal to the space code SP as the content of the A buffer 4. In this case, since the content of the B buffer is the numeral code 6, coincidence cannot be detected, and a noncoincidence signal is supplied from the data bus 27 to the unit 205 in the CPU 2. In this case, the flow advances from Fig. 2 6 to Fig. 2 7 , and the unit 205 increments the content of the counter 3 by one through the signal line 17. Note that the content of the counter 3 is cleared to 0 through the signal line 18 at the beginning of the flow chart shown in Fig. 2. Then, the flow advances to Fig. 2 4 , and the content of the i register 201 is decremented by one by the unit 206. The content M 13 in the buffer 801 at the corresponding address is read out to the B buffer 5, and is compared with the space code in the same manner as described above. Thus, the processing of Fig. 2 4 to 7 is repeated, and the content of the buffer 801 is read out in the order of 14th, 13th, 12th, 11th, 10th, 9th and 8th digits. When the seventh digit is read out, the content M 7 is the SP code, as shown in Fig. 3 a , and the comparator 6 generates a coincidence signal. Thus, the leftmost code of the numeral string is detected to be located at the right of the SP code. At this time, the content of the i register 201 indicates the address i 7 of the SP code at the left of the left most code of the numeral string in the input buffer 801. Since the content of the counter 3 is successively decremented by one while the content of the input buffer 801 is read out from the 14th digit to the 8th digit, it represents that the number of characters included in the numeral string is 7. In this manner, by the operation of Fig. 2 2 to 6 , the address a 15 of the DT code in the buffer 801, the address i 7 of the SP code therein and the number of characters 7 included in the numeral string are detected. Then, the decimal point address in the input buffer 801 is detected. The decimal point code is read out from the ROM 7 and is set in the A buffer 4 Fig. 2 8 . Since the content of the i register 201 is the address i 7 of the SP code, the content M i of the buffer 801 is read out in the right direction from the 8th digit, and is set in the B buffer 5. Then, the content of the buffer is compared by the comaparator 6. The above operation is repeated so as to read out the contents M 8 , M 9 , M 10 ,... Fig. 2 9 The address of the decimal point code detected in this manner is shifted to the DT position set in the memory 9 in advance so as to detect a shift amount for printing. First, the DT position is read out from the memory 9, and is set in the c register 203 Fig. 2 The unit 205 reads out the numeral code M a from the address of the buffer 811 corresponging to the content a 14 of the register 202, and supplies the readout code to the PB buffer in the controller 10 through the buses 16 and 21 Fig. 2 The above operation is repeated until the content of the counter 3 reaches 0. As can be understood from the above description, since the number of characters 7 is stored as an initial value of the counter 3, the numeral string 123.456 stored at the addresses 8 to 14 in the buffer 801 is printed at the 12th to 18th digits in the order from the higher to lower digits. At this time, as shown in Fig. 3, the position of the decimal point is properly aligned at the DT position. In this manner, when the numeral string consisting of seven characters is printed having the decimal point aligned at the DT position, decimal tab processing is completed Fig. 2 Next, a case will be described wherein a numeral string 1234 having no decimal point is printed to be aligned at the left neighboring digit of the decimal tab position the 15th digit , as shown in Fig. 4. In this case, in the flow chart shown in Fig. 2, the decimal point code cannot be detected in step As described above, when a numeral string includes a decimal point, printing is performed so that the decimal point is aligned at the DT position. On the other hand, when a numeral string does not include a decimal point, the right end of the numeral string is aligned at the left neighboring digit of the DT position. Note that in the above operation, a precise printing position of the unit 11 is controlled by a timing pulse TP supplied from the unit 11 to the controller 10 through the signal line 24. Although a display operation is not particularly explained, a proper display operation of document data is performed using the CPU 2, the display controller 12 and a display 13. In the above embodiment, a numeral string with or without a decimal point has been exemplified as a character string to be aligned at the DT position. However, the character string is not limited to the numeral string, a right end of a character or symbol string can be adjusted, or input data can be adjusted using a special symbol instead of a decimal point.