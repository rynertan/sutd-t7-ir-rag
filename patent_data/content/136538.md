# Inter element processor in a high performance parallel vector processor.

## Abstract
A parallel vector processor is disclosed. In order to increase the performance of the parallel vector processor, the present invention decreases the time required to process the elements of a single vector stored in a vector register 12 . Each vector register of a plurality of vector registers is subdivided into a pluraliry of smaller registers 12a . A vector, stored in a vector register 12 , comprises N ele ments however, each of the smaller registers 12a stores M elements of the vector, where M is less than N. An element processor 20 is associated with each smaller register for processing the M elements of the vectors stored in the smaller register and storing a result of the processing in a result register. Each of the smaller registers of the vector registers, and its corresponding element processor, com prise a unit 30 . A plurality of units 30 are connected in a parallel configuration. The element processors, associated with each unit, have been loaded with the result, the result being stored in a result register. Each of the results are processed in parallel fashion, as a result of the parallel configuration of the plurality of units. Therefore, the time required to process the elements of a single vector, stored in a vector register, is decreased.

## Claims
CLAIMS 1. A vector processor, comprising a plurality of vector register means 12 for storing a plurality of N element vectors, respectively, each of said plurality of vector registers including a plurality of smaller register means 12a for storing N elements of the corresponding N element vector, where M is less than N characterized by a plurality of element processor means 20 each connected to corresponding ones of said smaller register means 12a for processing the M elements of the vector stored in the smaller register means, each of said smaller register means 12a and its corresponding element processor means 20 comprising a unit 30 , a plurality of the units 30 being connected together in a parallel configuration 40 forming a plurality of units 30, 40 for processing in parallel fashion the N elements of a vector stored in one of said plurality of vector register means 12 . 2. The vector processor of claim 1 further comprising storage means 52, 54 for storing a plurality of instructions and control means 50 connected to said storage means and to said plurality of units 30 for controlling the operation of said plurality of units in accordance with an instruction stored in said storage means 54 . 3. The vector processor of claim 2 wherein said plurality of units 30, 40 adds together a plurality of groups of M elements of said N element vector in response to instructions from said control means thereby producing a plurality of subtotals, said plurality of subtotals being stored in a corresponding plurality of units 40 , said corresponding plurality of units 40 adds together said plurality of subtotals to produce a final total in response to further instructions from said control means, said final total being stored in a unit 30 0 and being indicative of the sum of the elements of said N element vector. 4. The vector processor of a previous claim wherein each said element processor means 20 comprises read means 20a for reading an element of an N element vector and another element of said N element vector register means 20b, c connected to said read means for storing the elements read by said read means pre shift means 20f connected to the register means for shifting the operand associated with said element to align said operand with the operand associated with said another element operation means 20d, e, g connected to the pre shift means for processing the elements thereby producing a set of results post shift means 20i connected to the operation means for receiving said set of results from said operation means and shifting the results a predetermined amount in accordance with the number of similar predetermined type of digits in said results and post operation storage means 20h for storing the set of results, the set of results being passed to one of the plurality of vector register means for storage therein. 5. The vector processor of claim 2 or 3 wherein said control means 50 comprises command means 50a, d, e connected to said storage means 54 and responsive to said instruction stored in said storage means for transmitting command information to said plurality of units 30 , said command information controlling the operation of said plurality of units in accordance with said instruction address means 50c, h, g connected to said storage means 52, 54 for transmitting address information to said plurality of units 30 indicative of the addresses of said plurality of units controlled by said command means and data means 50b, f connected to said storage means for transmitting data to said plurality of units.

## Description
INTER ELEMENT PROCESSOR IN A HIGH PERFORMANCE PARALLEL VECTOR PROCESSOR Cross Reference to related applicationA copending European patent application No. 84109081.4 relates to an apparatus for rapidly processing the elements of a pair of vectors stored in a pair of vector registers, BACKGROUND OF THE INVENTION Field of the InventionThe present invention pertains to a computer system, and more particularly, to an interelement processor associated with a parallel vector processor in said computer system for rapidly processing the elements of a single vector and for storing the results of said processing. Description of the Prior ArtA typical vector processor, such as that shown in FIG. 1, includes a plurality of vector registers, each vector register storing a vector. The vector comprises a plurality of vector elements. A pipeline processing unit is connected to a selector associated with the vector registers for receiving, in sequence, the elements of a first vector from a selected vector register and for performing an arithmetic operation on the elements of the first vector to yield a resultant vector. The elements of the resultant vector may be re stored in corresponding locations of the first vector register or in another vector register.However, with this configuration, it is necessary to perform operations on each of the elements of a vector in sequence. The time required to complete operations on all 256 elements of a 256 element vector is a function of the cycle time of the pipeline unit per operation on each of the elements.With increasing sophistication of computer systems, it has become increasingly evident that there is a need to increase the performance of the vector processor portion of the computer system by decreasing the time required to process or perform arithmetic operations on each of the elements of a vector or on each of the corresponding elements of a plurality of vectors stored in the vector registers within the computer system. SUMMARY OF THE INVENTIONAccordingly, it is a primary object of the present invention to increase the performance of the vector processor portion of a computer system by decreasing the time required to process the elements of a vector stored in a vector register comprised in said vector processor portion of the computer system.It is a further object of the present invention to increase the performance of the vector processor portion of the computer system by subdividing the plurality of vector registers into a plurality of smaller registers, and processing in parallel each of the elements of a vector stored in the smaller registers of a vector register.It is still a further object of the present invention to further increase the performance of the vector processor portion of the computer system by connecting a plurality of units, comprising the plurality of smaller registers, in a parallel configuration and processing in parallel the elements of a vector stored in the smaller registers of a vector register.These and other objects are accomplished, in accordance with the present invention, as claimed, by reducing the time required to complete processing operations on all elements of a single vector. The vector registers are subdivided into a plurality of smaller registers, each of which stores, for example, four elements of a 256 element vector. An element processor is associated with each smaller register, the element processor performing the same function as the pipeline processing unit. Each element processor, and corresponding smaller register, comprises a unit. A plurality of units are connected in a parallel configuration.With this configuration, when an arithmetic operation is performed on the elements of a single vector, stored in a vector register, the arithmetic operation is completed in approximately the same time which would be required to complete an arithmetic operation on four elements of the vectors utilizing the typical vector processor of FIG. 1. As a result, the performance of the vector processor is improved substantially as a result of utilization of the present invention. Brief Description of the DrawingsA full understanding of the present invention will be obtained from the detailed description given hereinbelow and the accompanying drawings, which are given by way of illustration only, and thus are not limitative of the present invention, and wherein FIG. 1 illustrates a conventional vector processor FIG. 2 illustrates a parallel vector processor of the present invention wherein the vector registers of FIG. 1 are subdivided into a plurality of smaller registers, and an element processor is associated with each smaller register for performing processing operations on the elements of the vector stored in the smaller register FIG. 3 illustrates a detailed construction of an element processor shown in FIG. 2 FIG. 4 illustrates a plurality of smaller registers, and their corresponding element processors, connected in a parallel configuration, according to the present invention, for performing a processing operation on the elements of a vector stored in the smaller registers of a vector register andFIG. 5 illustrates the construction of the Processor Interface Adaptor ofFIG. 4. Detailed Description of the Preferred EmbodimentReferring to FIG. 1, a pipeline vector processor 10 is illustrated. A plurality of vector registers 12 VRO through VR15 is shown, each register storing 256 elements element 0 through element 255 . In the preferred embodiment, an element comprises a four 4 byte binary word. A selector 14 is connected to each of the vector registers 12 for selecting corresponding elements from the vector registers 12 and gating the selected elements through to a pipeline processing unit 16. The pipeline processing unit 16 is connected to the selector for receiving the corresponding elements and for performing selected operations on said elements, such as arithmetic operations. For example, the processing unit 16 may receive element 0 from vector register VR0 and element 1 from vector register VRO and perform an addition operation on said elements.Processing unit 16 may then receive element 2 from vector register VRO and add this element to the previous sum, forming another sum. Processing unit 16 may continue to add the remaining elements of vector register VR0, in sequence, to the stored sum, forming a final sum of the elements constituting the vector stored in vector register VR0. A result register 18 is connected to the pipeline processing unit for storing the final sum received from the pipeline processing unit. The result register 18 is connected to each of the vector registers 12 via a select gate 20 for transferring the final sum from the result register 18 to another vector register, if desired.However, the vector processor configuration illustrated in FIG. 1 possesses certain differences with respect to the vector processor configuration of the present invention. Utilizing the example, a first element is selected from register VRO and a second element is selected from register VRO. The elements are added in the above manner. A third element is selected from register VR0 and added to the previous sum in the above manner.Each of the 256 elements must be selected from register VRO and added together, in sequence, in order to provide a final sum of the elements constituting the vector stored in vector register VRO. As a result, the time required to complete the processing of the vector stored in vector register VRO is a function of the number of elements per vector and the cycle time required to process one element per vector. The performance of a vector processor could be improved by decreasing the time required to process a vector stored in a vector register. Referring to FIG. 2, a parallel vector processor is illustrated. In FIG. 2, each of the vector registers VRO through VR15 of FIG. 1 stores an N element vector. Each of the vector registers VRO through VR15 is subdivided into a plurality of smaller registers 12a. Each of the smaller registers 12a stores N elements of the N element vector, where M is less than N. For example, if vector registers VR0 through VR15 each store a 256 element vector, a smaller register 12a may store four elements of the 256 element vector. A corresponding plurality of element processors 20 is connected to the plurality of smaller registers 12a for performing processing arithmetic operations on the elements of a vector stored in a vector register. Utilizing the example, each of the element processors 20 performs processing operations on four elements of a vector.The results of the processing operation are simultaneously produced by each element processor, in parallel, and may be stored in corresponding locations of any one of the vector registers VRO through VR15.Referring to FIG. 3, a block diagram construction of an element processor 20 is illustrated. In FIG. 3, a local storage 12a is synonymous with the vector registers 12a shown in FIG. 2. A system bus 11 and 11a is connected to a driver circuit 9 on one end and to a receiver circuit 7 on the other end. A first input data assembler ASM 13 is connected to a driver circuit 9 and to a receiver circuit 7. The ASH 13 is further connected to local storage 12a and to the element processor 20. The element processor 20 shown in FIG. 3 comprises a second input data assembler ASH 20a connected to the local storage 12a and to the first input data assembler 13. A bus interface register BIR 15 is connected to bus 11 and bus 11a on one end and to the second input data assembler 20a on the other end.A shift select register 20b and a flush select register 20c are connected to the input data assembler 20a. The flush select register 20c is connected directly to a trues complement gate 20d whereas the shift select register 20b is connected to another trues complement gate 20e via a pre shifter control 20f. The trues complement gates 20d and 20e are each connected to an arithmetic logic unit ALU 20g. The ALU 20g is connected to a result register 20h via a post shifter control 20i, the result register 20h being connected to the local storage 12a for storing a result therein when the element processor 20 has completed an arithmetic processing operation on the four elements of a vector stored in the smaller register 12a of a vector register 12. A multiplier circuit 20j is interconnected between the input data assembler 20a and the ALU 20g.Two operands are received by the multiplier circuit 20j. A sum output and a carry output is generated by the multiplier circuit 20j, the sum and carry outputs being received by the ALU 20g.Referring to FIG. 4, according to the present invention, blocks 0 through 63 are illustrated, each block being a unit 30. Furthermore, each unit 30 represents, in combination, a smaller register 12a, and an associated element processor 20. The units 30 are connected together in a parallel configuration, as indicated in FIG. 4, for increasing the speed by which the elements of a vector, stored in a vector register, are added together to yield a result indicative of the sum of the elements of said vector. For ease of description, refer to FIG. 2 or 3 and note that an element processor 20, in association with its corresponding smaller register 12a, collectively comprise one unit, identified by feature numeral 30. Referring to FIG. 4, each of the blocks labelled 0 through 7 represent a unit such as 30 of FIGS. 2 or 3. Blocks 0 through 7, collectively, comprise an overall unit 40. A plurality of overall units 40 are connected in a parallel configuration. Four of the overall units 40 are connected together at one junction 51 and four of the remaining overall units 40 are connected together at another junction 52. In addition, four of the overall units 40 correspond to a 128 element vector stored in the smaller registers 12a of blocks 0 through 31, and four of the remaining overall units 40 correspond to another 128 element vector stored in the smaller registers 12a of blocks 32 through 63.Therefore, the configuration ofFIG. 4 is capable of providing a sum total of the elements of a 256 element vector. Junction 51 is connected to a bi directional driver 42 and junction 52 is connected to another bi directional driver 44. Each of these drivers is connected together, at their outputs, to a further junction 53. A processor interface adaptor PIA 50 is connected to junction 53 for directing the functional operation of the plurality of units 30 which comprise the plurality of overall units 40. A storage, or main memory, 52 is connected to the PIA 50. An instruction processing unit IPU 54 is connected to the PIA 50 and to the storage 52.Referring to FIG. 5, the construction of the PIA 50 is illustrated. ThePIA 50 includes a vector instruction register VIR 50a connected to theIPU 54 for receiving a vector instruction from the IPU and temporarily storing the vector instruction. A vector data register VDR 50b is connected to storage 52 and to the IPU 54 for receiving data from storage 52 and temporarily storing the data. A vector status register VSR 50c is connected to the storage 52 and to IPU 54 for receiving data from storage and for temporarily storing the data. A pico control store 50d is connected to the VIR 50a for decoding the vector instruction stored in the VIR 50a and for selecting a pico control routine stored in the store 50d.A command register 50e is connected to the pico control store 50d and to the element processors of units 30 via a command bus for driving the element processors. A bus control 50f is connected to the VDR 50b and to the element processors of units 30 for receiving data from the VDR 50b and transmitting the data to the element processors 20 of units 30 via a data bus. The bus control 50f can also steer data from one element processor to another element processor. The VSR 50c is also connected to a bus control 50g via an address control 50h. The address control 50h generates addresses corresponding to the data received from the VSR 50c. The bus control 50g is connected to the element processors 20 of units 30 for transmitting the generated addresses to the element processors 20 of units 30 via an address bus.The functional operation of the interelement processor in accordance with the present invention will be described in the paragraphs below with reference to FIGS. 3 through 5.Assume that the IPU 54 has already directed the PIA 50 to load data from storage 52 into one or more of vector registers CR0 through VR15 via element processors 20. Assume further that each vector register VRO through VR15 is 256 elements in length. As a result, a 256 element vector is assumed to reside in one or more of the vector registers 12. When a 256 element vector is stored in one or more vector registers 12, the IPU 54 instructs the PIA 50 to execute an INTERNAL ACCUMULATE instruction.When the INTERNAL ACCUMULATE instruction is executed, each of the elements stored in a smaller register 12a are added together yielding an intermediate summation element, the intermediate summation element being stored in the result register 20h associated with the corresponding processor 20 connected to the smaller register. When executing the INTERNAL ACCUMULATE instruction, the PIA 50 instructs the element processor 20 associated with each unit 30 to retrieve the first element and the second element from its corresponding smaller register 12a. Utilizing the example, assume that four elements are stored in each smaller register 12a. The first and second elements of each smaller register 12a are passed to the corresponding processor 20. Under control of the IPU 54, the PIA 50 instructs the processors 20 to add the first and second elements and to store the sum in the result register 20h associated with each processor 20. Each of the processors 20 performs the summation operation and stores the sum in the result register 20h. The PIA 50, under the control of the IPU 54, instructs each of the element processors 20 to retrieve the third element from their corresponding smaller register 12a, add the third element to the sum stored in the result register 20h, and store a further sum in the result register 20h. When the processors 20 execute this further instruction, the PIA 50 instructs each of the processors 20 to retrieve the fourth element from their corresponding smaller register 12a, add the fourth element to the further sum stored in their corresponding result register 20h, and store the sum of the four elements in the corresponding result register 20h. As a result, an intermediate summation element is stored in the result register 20h of each processor 20 corresponding to each unit 30. The intermediate summation element represents the sum of the four elements stored in the corresponding smaller register 12a.The PIA 50, under the control of the IPU 54, directs all the processors 20, associated with units 30, to add the intermediate summation elements together, thereby producing a final total. The processors 20 add the intermediate summation elements together in the following manner.The intermediate summation element stored in unit 30 block 1 is added to the intermediate summation element stored in unit 30 block 0, the sum remaining in storage in unit 30 block 0. Simultaneously, the intermediate summation element stored in unit 30 block 3 is added to the intermediate summation element stored in unit 30 block 2, the sum being stored in unit 30 block 2. The intermediate summation element stored in unit 30 block 5 is added to the intermediate summation element stored in unit 30 block 4, the sum being stored in unit 30 block 4. The intermediate summation element stored in unit 30 block 7 is added to the intermediate summation element stored in unit 30 block 6, the sum being stored in unit 30 block 6. Therefore, subtotals are stored in units 30 blocks 0, 2, 4 and 6 of the first overall unit 40.The second through the eighth overall units 40 undergo a similar functioning in that subtotals are stored in the following additional units 30 8, 10, 12, etc. through 62.Next, the subtotal stored in unit 30 block 2 is added to the subtotal stored in unit 30 block 0, the new subtotal being stored in unit 30 block 0. The subtotal stored in unit 30 block 4 is added to the new subtotal stored in unit 30 block 0, another new subtotal being stored in unit 30 block 0. The subtotal stored in unit 30 block 6 is added to the another new subtotal stored in unit 30 block 0, a further subtotal being stored in unit 30 block 0. The second through the eighth overall units 40 undergo a similar functioning in that further subtotals are stored in the following additional units 30 8, 16, 24, etc. through 56.The further subtotal stored in unit 30 block 8 is added to the further subtotal stored in unit 30 block 0, a first further subtotal being stored in unit 30 block 0. The further subtotal stored in unit 30 block 16 is added to the first further subtotal stored in unit 30 block 0, a second further subtotal being stored in unit 30 block 0. The further subtotal stored in unit 30 block 24 is added to the second further subtotal stored in unit 30 block 0, a third further subtotal being stored in unit 30 block 0. Simultaneously, the further subtotals stored in blocks 32, 40, 48 and 56 are added together in a similar fashion, a fourth further subtotal being stored in unit 30 block 32.The fourth further subtotal stored in unit 30 block 32 is added to the third further subtotal stored in unit 30 block 0 via bi directional drivers 44 and 42, a final total being stored in unit 30 block 0. The final total represents the sum of all the elements constituting the 256 element vector stored in a vector register. The final total is available for use by IPU 54, when needed.The functional operation of the element processor 20 shown in FIG. 3 may be subdivided into four cycles of operation a read local storage and shift select cycle, alternatively known as a first cycle a pre normalize shift cycle, known as a second cycle an ALU operation cycle, known as a third cycle and a post normalize shift cycle, known as a fourth cycle.Assume that the PIA 50 has directed each of the processors 20 to add the elements of their smaller registers together and store the results of the summation operation in result register 20h. PIA 50 instructs each of the processors 20 to retrieve their respective four elements from their corresponding smaller registers 12a from local storage associated with vector registers 12. Directing attention to the functional operation of element processor 0, elements 0 through 3 are received from storage 52 by receiver 7 via bus 11a and stored in local storage 12a via ASH 13. The local storage 12a is synonymous with the vector register 12a shown inFIG. 2 which stores elements 0 through 3. Assume further that the elements 0 through 3 represent floating point element operands.When the PIA 50 directs element processor 0 20 to add elements 0 through 3 together and to store the sum in the result register 20h, then, on the first cycle, the operands of the first two elements of the four element vector are read from the local storage 12a and are temporarily stored in the flush register 20c and the shift register 20b via the input data assembler 20a. However, at the same time, the exponents of the respective elements enter an exponent control path not shown where the difference in magnitude of the exponents is calculated. Therefore, the element having the smaller exponent is gated to the shift select register 20b whereas the element having the greater exponent is gated to the flush select register 20c.The flush and shift select registers 20c and 20b are latched by a latch clock at the end of the first cycle.At the beginning of the second cycle, a shift operation is started. The element having the greater exponent, stored in the flush select register 20e is gated into one input of the arithmetic logic unit ALU 20g. Shift control information is passed from the exponent control path not shown to the pre shifter 20f wherein the element having the smaller exponent, stored in the shift select register 20b, is right shifted by the pre shifter 20f to align said element with the element having the greater exponent, which is currently being gated into the one input of the ALU 20g.Concurrently, the ALU 20g is selecting the appropriate inputs from the trues complement gates 20d and 20e for receiving the elements from the flush and shift select registers 20c and 20b via the trues complement gates 20d and 20e, respectively.The third cycle, in the operation of the element processor 20 of FIG. 3, is dedicated to the functional operation of the arithmetic logic unit ALU 20g. The ALU is an 8 byte high speed carry look ahead adder, designed with l s complement arithmetic and with end around carry and recomplementation. The ALU performs an addition operation, wherein the bits of four respective elements, in the example, elements 0 through 3 stored in the smaller registers 12a of element processor 0, associated with vector register VRO, are added together. The results of the addition operation are ultimately stored in the local storage 12a. However, prior to this step, a post normalization step must take place during the fourth cycle. When the addition operation is completed by the ALU 20g, a post normalization step takes place during the fourth cycle. The term post normaliza ton , in data processing terms, comprises the steps of detecting leading zero hexadecimal digits in the results produced by the ALU, and left shifting the results in accordance with the number of zero digits detected.The results exponent must be adjusted by decrementing the exponent by a value of 1 for each digit shifted. Digits of the output of the ALU 20g are examined by the post shifter 20i for their zero state, and the results of the ALU output are left shifted in accordance with the number of zero digits detected. The left shifted results of the ALU output are passed to the result register 20h for temporary storage therein. The exponent control path not shown increments or decrements the exponent value of the result element output from the ALU so that a correct final exponent value is gated to the result register 20h. Thus, a result element is stored in the result register 2ooh, the operand of which is left shifted a proper amount in accordance with the number of zero digits detected in theALU output, the exponent of which is the correct final exponent value.If desired, during the next cycle, following the fourth cycle, the result element is passed to the local storage 12a for storage therein. The functional operation repeats with respect to the remaining two elements to yield a sum of the four elements stored in result register 20h. The sum of the four elements is the intermediate summation element.Due to the technological advance associated with integrated circuit packaging, the cost to produce integrated circuit chips is low. Therefore, the cost involved in the production of large quantities of integrated circuit chips is relatively low. As a result, it becomes economically justifiable to optimize the performance of a computer system, or the vector processor portion of the computer system, by utilizing an increased number of integrated circuit chips. The present invention utilizes this principle to optimize the performance of the vector processor portion of a computer system, and in particular, to optimize said performance relating to the summation of the elements of a single vector stored in a vector register. The invention being thus described, it will be obvious that the same may be varied in many ways. Such variations are not to be regarded as a departure from the scope of the invention, and all such modifications as would be obvious to one skilled in the art are intended to be included within the scope of the following claims.