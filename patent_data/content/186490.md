# METHOD FOR OPERATING A MICROSCOPICAL MAPPING SYSTEM

## Claims
Abbildungsverfahren f√ºr eine mikroskopische Analyse, wonach

## Description
The present invention relates to computer aided interactive microscopical mapping in specimens viewed through a microscope. A number of computer aided microscope mapping instruments in the prior art involve optically combining the image of a video display with the live image from the microscope objective, such that when the operator looks into the microscope oculars he sees both images together, superimposed on each other. A cursor on the video display is typically controlled by the operator using a joystick or other graphic input device GID . He can map information into the computer by moving the cursor over the viewed specimen and pressing a button to enter coordinates into the computer. Once all features of interest in the current field of view have been entered, he moves the stage and resumes mapping. It has been observed that the discontinuities associated with these field hops are very disruptive of the operator s sense of orientation within the specimen and of the continuity of data collection. For example, the system of Glaser and Van der Loos U.S. Patent 4,202,037 employs a configuration of computer and microscope, wherein the user controls, by means of the graphical input device GID , the position of a blinking X on the display device. The position of the blinking X can represent, variously, the position on the display at which the user wishes to generate a mapping mark, or the selection of a system control command which is displayed on a dedicated portion of the display device. If the user wishes to place a mark over a location in the specimen outside the current field of view, he must first command the microscope stage to move such that the desired location is brought within the field of view, and then he must manipulate the GID in order to bring the blinking X over the location of interest. Finally, he must indicate, by pressing a button or by other means, that the system should record the current location of the blinking X . The system does so, and simultaneously generates appropriate marks on the display in substantial coincidence with the specimen as an indication to the operator of the action taken. This method of microscopical mapping or sketching may be generically referred to as moving cursor mapping with visual feedback. Those skilled in the art will recognize that to map over a region of the specimen that covers many microscopical fields of view it will be necessary to move the specimen stage many times and as noted above the problems with discontinuities associated with these stage moves or field hops are very disruptive. In this invention this problem is overcome by keeping the video cursor fixed at all times at the center of the microscopical field of view, and causing the stage to move under this cursor. Thinking of the cursor as the tip of his pen , the operator instantaneously sees his ink in the form of luminous marks produced on the video display trailing behind the cursor as he roams freely throughout the specimen. Marks which leave the field of view are stored by means which allow them to be instantaneously and precisely redisplayed upon return to a previously mapped region. In accordance with this invention a mapping method for a microscopic analysis comprises producing, by means of a microscope, an image of a specimen mounted on a position controlled stage superimposing the produced image with the image of a display device with a display window controlling the position of the stage by means of a graphic input device generating marks from a fixed point on the display device as controlled by means of the graphic input device defining said marks as x,y, coordinate axes pairs, that correspond to the instantaneous points of intersection of the optical axis with the specimen stage at the time the marks are generated to provide a data base for a digital computer said computer being programmed to manage the data base to preserve the coincidence of the marks with the viewed specimen image moving the marks in unison with the specimen stage so that the marks move in apparent coincidence with the stage movement as viewed in the superimposed image while concurrently displaying on a second display device a digitized static video image of a substantial portion of the produced image of the specimen generating a video box on the second display device and moving the video box such that the size and location of the video box indicates the instantaneous size and location of the microscopic field of view. Thus the present invention itself comprises an improved method for a user to interact simultaneously with the computer means and the microscope in a computer aided microscopical mapping system. More particularly, in the present invention, the microscope which is employed superimposes the images from a mapping display device and the specimen. The user employs a graphical input device to convey graphical or positional information to the computer. In response to this positional information input, the computer essentially simultaneously controls the position of the specimen stage, generates marks at a fixed location on the mapping display device, moves the previously generated marks with respect to the display, and produces numerical indicia. The positions of the marks on the mapping display device are moved such that the marks move in unison and in apparent coincidence with the image of the specimen as viewed by the user in the microscope oculars. Those marks which leave the visible window of the mapping display device are preserved in their proper relative positions and are redisplayed as required by the condition of coincidence of the marks with the previously mapped portions of the specimen. The numerical indicia comprise an accurate representation of the location and character of user selected portions of the historical trajectory of the specimen stage. For reasons which will be made more apparent below, this method of interaction between the user and the computer microscope system is referred to herein as flying field mapping with visual feedback. In operation, a drawing tube projects the image of the mapping display device into the microscope in such a way that its image appears to the user superimposed on that of the magnified specimen. Displayed on a monitor is a video cursor a small cross hair which appears at the center of the field of view. Also displayed on the monitor is an N x N pixel portion of a 2040 x 2048 pixel digital image memory which is called the mapping display window. The window size N is typically between 16 and 512 pixels and depends on the power of the objective selected. The digital image memory is organized as 2048 rows by 2048 columns of pixels, each pixel represents 8 bits or 1 byte of storage. The operator defines a one to one correspondence between x and y dimensions of the specimen and column and row addresses in the image memory such that each pixel in the image memory corresponds to a unique Cartesian coordinate in the specimen. Storing a value in an image memory location corresponds to generating a mark on the mapping display. In order to map, the operator manipulates the stylus of a graphics tablet, which transmits to the computer information on the distance and direction of the stylus motion. On the basis of this input, the computer does three principal things. First, it causes the microscope stage to move in a corresponding way. Second, it drives the mapping display window through the large image memory in such a way that the display appears to move in perfect registry with the live image of the specimen as viewed in the microscope. Third, it determines whether a button on the stylus has been depressed by the operator. If so, the computer then It is important to note that since all data are captured from the optical axis of the microscope, the data are immune to corruption due to geometrical distortion in the mapping display device or in the optical system. The correspondence between stylus motion and stage motion is carefully chosen such that the user feels as though he is flying over the image of the specimen as in a helicopter. It is this fact which allows the user to perform highly detailed mapping in the context of a specimen whose dimensions are much larger than that visible within one microscopic field of view. Digital control of the mapping display window size allows registration of the mapping display with the live image under several different microscope objectives of different magnifications. Means are also provided to map several discrete types of information using the color and shape attributes of the mapping mark to distinguish among them. The principal advantage of this invention over the prior art method lies in its ability to rapidly map in a region of the specimen that extends over many microscopical fields of view without the discontinuities and inaccuracies associated with the requirement of moving the stage and then generating the mapping marks as separate and discrete operations. It will be appreciated also that, contrary to a moving cursor method of mapping, the flying field method of mapping avoids corruption of the geometrical data due to distortion inherent in the display device or in the optical system, due to the fact that the point of digitization remains fixed with respect to the optical axis. The apparatus of the present invention comprises a computer with a memory for storing data, a manually controlled graphical input device GID for manually conveying graphical information into the computer, a position controlled specimen stage, a mapping display device with a display window corresponding to the field of view objective magnification , and a microscope where the optics therein produce a super imposition of the image of the specimen and the image produced by the mapping display device at the oculars of said microscope. FIG. 1 is a block diagram of one embodiment of the system of this invention. FIGS. 2A 2K are schematic diagrams of microscope views of an object on a stage illustrating the advantage of the method of the invention. FIGS. 3A 3I represent a flow chart of a program for controlling the hardware components and managing a data base according to the invention. Referring to FIG. 1, the sketching system chosen for purposes of illustration includes a microscope The microscope stage assembly Computer system Communicating with computer Image memory The image memory The capacity of image memory Data mover controller Tracking display monitor To operate the flying field mapping system, the operator initially positions the microscope To initiate mapping, the operator presses a button on the stylus of the graphics tablet With boundaries and points mapped for a given specimen of a sequence of sections, the results may be cataloged by z coordinate and sent to 3 D graphics processor FIGS. 2A through 2K are used to exemplify the system operation. More particularly, each pair of FIGS. 2A, 2B 2C, 2D 2E, 2F 2G, 2H and 2I, 2J, represent a microscopic field of view and a tracking display for that field of view at the magnifications indicated below each illustrated field of view. FIG. 2K is the display of the data obtained from the following typical mapping sequence of operations as seen on the mapping display monitor Upon looking into the oculars, the operator may see an image such as FIG. 2A, and ask, where am I . Without changing magnification, he can lift his eyes from the oculars and see in the image displayed on the tracking monitor Having completed the mapping session, the operator obtains a readout from memory of the data points recorded from the specimen examined. Data output may be in hard copy form or visually displayed on the mapping display monitor FIG. 2K . From a series of specimen mapped sections, one can assemble a 3 D figure of the mapped object using known techniques and analyze its structure. The numbers preceding each paragraph refer to the numbered steps of the flow charts shown in FIGS. 3A 3I. Referring first to Figures 3A and 3B is the initialization procedure that is completed for each stage mounted specimen, before mapping commences, where In Steps 101 through 105, the system allows the operator to acquire and optimize for viewing a low magnification video image as a tracking display image. This image covers a substantial portion of the specimen. After initialization, the system defaults to the line mapping mode of Figures Step Steps Step Step Step Step Step Steps The color and shape of a line or mark is further defined by its position within the range to correspond with a particular mapped object. Recycle time through the steps of Figures 3C, 3D is between 40 and 150 times a second. Figures 3E and 3F cover the mark mapping mode algorithm which is similar in most respects to that of Figure 3C, 3D. In contrast with the use of ISW1 and ITOG for controlling a continuous flow of INK for line mapping when the stylus tip is pressed against the tablet controlled by ISW1 ISW1 and ISW2 are used to produce a mark. Step Steps Step Step Figure 3G as briefly mentioned earlier, contains the steps Step Step The erase and quit operations of steps Step The QUIT routine of Figure 3I provides the steps Although the description has referred specifically to a light microscope embodiment, the principals of the method are applicable to such technology as electron microscopy, cartography, and photo imaging and analyses.