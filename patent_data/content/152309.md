# TELEVISION SOUND SIGNAL PROCESSING APPARATUS

## Claims
Fernsehtonsignale bearbeitendes Gerät für eine Demodulation und Decodierung empfangener, digitaler Tonsignale

## Description
This invention relates to an apparatus for receiving and decoding signals in a system for coding and transmitting video and sound signals such as a CATV system or a pay tv system, and more particularly to the receiving and decoding means for sound signals. In a pay TV system or the like, video and sound signals are transmitted in encoded form so as to be inaccessible to nonsubscribers, and they are decoded by subscribers, so that normal picture and sound may be reproduced. Various video and sound coding means and methods have been proposed so far, but they all had individual problems. For example, encoding by inverting black and white colors of video signal only, by compressing the synchronizing signal, and by inverting the synchronizing signal have been found to be easy to decode, and the signals were therefore easily accessed illegally. A method of encoding by eliminating the synchronizing signal produced an unstable picture because of jitter produced by reconstructing the synchronizing signal. A method of encoding by eliminating the color burst signal resulted in inaccuracies in the phase of the reproduced color burst signal and unstable colours. As methods of encoding sound signals, a method of scrambling PCM sound was too broad in bandwidth when another sound carrier was used and was unsuited to FM broadcast such as in a satellite broadcasting system, and its decoding unit was expensive. In a method of transmitting sound using a plurality of carriers and changing them over randomly resulted in a complicated decoding unit and it was found to be difficult to balance the stereo sound reproduction. A coding and decoding system for video and audio signals is disclosed in US patent 4,424,532. The system includes means at the transmitter for deriving clock and internal timing signals from the video signal. The internal timing signals are utilized at the transmitter to provide digital audio data representative of the program audio signal. The digital data is derived by sampling the program audio signal during horizontal lines of the video signal. The synchronizing information in the horizontal and vertical blanking intervals of the video signal is suppressed and the digital audio data and data representative of a decoder clock signal are inserted in the horizontal blanking intervals. Vertical reference signal data is inserted into the vertical blanking intervals of the video signal as it is transmitted. At the decoder there are means for reconstructing the audio signal from the digital audio data. There is an independent sync pulse generator at the decoder which is controlled by the lock data and the vertical reference signal data and which provides the appropriate synchronizing information for the video signal. The video signal without sync information, is combined with the separately generated sync pulses from the sync pulse generator and with the reconstituted audio to provide a television program signal usable at a conventional receiver. It is hence an object of this invention to present a television sound signal processing apparatus which is hard to be accessed illegally and excellent in quality of sound reproduction. It is another object of this invention to provide a television sound signal processing apparatus capable of eliminating the accumulation of errors when decoding delta encoded sound signals. The present invention provides a television sound signal processing apparatus for demodulating and decoding received digital sound signals, comprising Moreover, the majority value of reference signals transmitted repeatedly three times or more in an odd number within a same horizontal blanking period of a vertical blanking period is used as the reference value for delta decoding of sound signal of the field. In the television sound signal processing apparatus of this invention, what is more, a sound signal of a television signal is sampled and converted into a form of multivalue digital signal, its uncompressed digital signal is sent in a certain period while, in the other period, receiving a digital signal representing the difference from the sampled value of sound signal in one horizontal blanking period before being sent into a horizontal blanking period, and supposing the value of uncompressed digital signal to be reference value x and the value of the next compressed digital signal to be Δx, the value Δx of the subsequent compressed digital signal is added to the immediately preceding process signal every time as Further, when an uncompressed digital sound signal is sent in the vertical blanking period once in every field, this digital value is taken as the reference, and the signals are processed every time as In order that the present invention be more readily understood, embodiments thereof will now be described by way of example with reference to the accompanying drawings, in which One of the present embodiments is illustrated in conjunction with Figure 1, wherein numeral 1 denotes the tuner of a television receiver, 2 is a VIF circuit, 3 is a detecting circuit, 4 is a circuit to reproduce synchronising signals, and 5 is a circuit to change over whether or not to invert the video signal on the basis of the data processing result of a data processing circuit 6. This data processing circuit 6 is intended to process the data, convert digital sound into analog signal, and deliver a discriminating signal changeover signal to determine whether or not to invert the video signal. Numeral 7 is a circuit to form a signal of RF VHF using the sound and image normalized in a remodulation circuit of RF as the inputs. The output of the detecting circuit 3 lacks horizontal synchronizing signal and vertical synchronizing signal as shown in Fig. 2 ₁, Fig. 3 ₂₂, ₂₄, and vertical trigger signal V Hereunder the reproduction of synchronizing signal is described. First, the outline of the operation is mentioned by referring to Fig. 4. Supposing synchronous reproduction be done, the output of a buffer 8 is sliced in a slicing circuit 12 and shaped into a binary signal, and is sampled in a sampling circuit 13 to store sound data at every H in a buffer memory 18, while the delta encoded signal is decoded in a delta decoder 19 and transferred into a buffer memory 20, of which output is D A converted at a speed of 2 f On the other hand, the data of 5H to 7H, 268H to 270H in Fig. 3 are written into a buffer memory 14, read out, and decoded in a decoder 15, and a signal to determine whether or not to invert the video signal is delivered, while a pulse to determing the inverting period is formed in an inverting changeover circuit 16 and applied to a synthesizing circuit 10. The output of a clamp circuit 9 is inverted in an inverting amplifier 17, of which output is also applied to the synthesizing circuit 10, and the output of the synthesizing circuit 10 is changed over whether the output of clamp circuit 9 or the output of the inverting amplifier 17 is applied, by the output of the inverting changeover circuit 16. The output of the inverting changeover circuit 16 is also applied to the inverting amplifier 17, and the output of the inverting amplifier 17 is suppressed when inversion is not required, and the crosstalk is lessened in the synthesizing circuit 10. When the output of the synthesizing circuit 10 is clamped in a clamp circuit 11, an ordinary video signal is obtained. The synchronous reproduction is described in details below in conjunction with Fig. 5. The procedures of synchronous reproduction and data processing are shown in Fig. 6. Numeral 22 in Fig. 5 is a detecting circuit of vertical trigger signal V Thereafter, in the procedure shown in Fig. 6, the synchronizing signal is established, the data is processed, and the sound is processed. Parameters of sound signal and information data are shown in Tables 1 and 2, in which the sound signals in the horizontal blanking period are indicated. As evident from Table 1 and Fig. 7, a total of 44 bits comprising two samples each at the right and left are sent forth every H, and a phase matching circuit for 1, 0 is provided before it. In Fig. 7, based on the fall of the first bit of ₁₂, 45 clock pulses are generated thereafter from An example of sampling and sound signal processing circuit is shown in Fig. 8. The output of the buffer 8 is sliced in a slicing circuit 38, and a binary waveform as shown in Fig. 7 ₁₂ is obtained. On the other hand, in a timing control circuit 40, gate pulses containing a portion of sound signal t₂ to t₆ in Fig. 2 are generated from the outputs of 1 2 divider 29 and 1 525 divider 30, and are applied to an AND gate 39, and only the sound signals are extracted and applied to D terminal of D flip flop 41. When the D flip flop 41 is clocked by Fig. 7 ₁₃, the data can be sampled. The fall of t₄₂ is detected by the output of the AND gate 39, and clocks The buffer memory 43 is controlled by the timing control circuit 40 so that the output of the D flip flop 41 may be fed to the buffer memory 43 only for the portion of 44 bits of In Fig. 9, if there are 2 14 bits including error correction code in T₃₄ to T₃₅, the error should be corrected from T₃₅ to T₄₂. This is effected in a circuit attached to the buffer memory 42. On the other hand, the data of T₃₂ to T₃₃ is stored in the buffer memory 43 somewhat later for example, 1 µs than T₃₃. Supposing this time to be T₃₃ ΔT, the data of a₀ to a₁₀ and the previous data are arithmetically operated within, for example, 1 µs, from T₃₃ ΔT. When the operation and error correction are done in hard logic, both operations can be processed within 1 µs each. The result of this arithmetic operation is D A converted by the D A converter 45 and stored in memory L₁ of 47. Furthermore, the data of c₀ to c₁₀ is compared with the previous data, and the result is D A converted and stored in memory R₁ of 49. Numerals 47 through 50 are analog memories. It is sufficient when the above operations be done within about 1 2H, and when the error correction circuit and arithmetic operation circuit are composed in hard logic as mentioned above, 11 bits of memories L₁, R₁ may be completely processed within several to ten micro seconds. The time of delivering the data L₁, R₁ of T The output of each memory of 47 to 50 is alternately delivered from AND gates 51 to 55 and OR gates 53, 56. That is, in T The sound data received at time T₃₄ to T₃₅is processed until T₃₉, and is fed to an arithmetic operation circuit 44 at T₄₂, and, at this time, 11 bits each of L₁, R₁ of T₄₂ to T₄₃ are ignored, and are directly D A converted. The data sent within T₃₄ to T₃₅ in Fig. 9 is delivered. That is, uncompressed data is used only for one sample in every field. Thereafter, taking this value as the starting value, only the change portion is successively added or subtracted as described above. Meanwhile, if the first one bit of 11 bits is treated as a code, the remaining 10 bits are increments or decrements. Therefore, it is possible to follow up the changes of 60 dB. By thus processing digital sound signals, the reference value can be transmitted once in every field correctly by adding an error correction code even in a so called digital enconding of 11 bits, so that the sound signals are of sufficient integrity and resistant to noise. Numerals 57, 58 in Fig. 8 are parts of signal processing circuit used in a so called teletext receiver or the like, and 57 is a bus buffer and 58 is a CPU. The data in the VBL after 4H in Fig. 3 is processed in these bus buffer 57 and CPU 58, of which composition is known, being similar to that of a so called teletext receiver. An accurate reproduction of the reference value of sound is described below while referring to Figs. 9 to 11. The actual sound data in Fig. 9 is assumed as shown in Fig. 10. At ₁₀₀, the preceding 32 bits are composed of 24 repetitive bits of 1 and 0 of clock run CR and 9 bits of framing code. The next 384 bits consist of three sets of sound data of 128 bits each, having the same content, comprising 64 bits of information and 64 bits of check code as in ₁₀₁. This takes the form of source BCH code, and can correct random and burst error within 10 bits. The final 24 bits of ₁₀₀ are CRC codes. The information of 64 bits consists of the portion of two fields each for L and R, 2 2 14 56 bits, and 8 bits of additional data. The 8 bit data may be used as required, and CRC may not be necessarily used. The flow of signal is explained in Fig. 11. Numeral 57 is an analog gate, and gate pulses comprising T₃₄ to T₃₉ in 4H in Fig. 9 are generated in the timing control 40, and the output of video buffer 8 is gated. If any data of the same number of bits is wholly superposed, for example, up to 21H in VBL, gate pulses including T₃₄ to T₃₉ 440 bits are delivered every H from the timing control circuit 40 from 4H to 21H and 267H to 284H, and are applied to a gate 57. The output of the gate 57 is converted into a binary value in the slicing circuit 38, and is gated by the output of the timing control circuit 40 at AND gate 39 . The AND gate 39 , different from the gate 39 in Fig. 8, is made to conduct if the gate 57 conducts in other periods than the horizontal blanking period. In the horizontal blanking period, the parts except buffer memory 42, bus buffer 57, and CPU 58 in Fig. 8 will operate as stated above. A sampling circuit 41 , different from the 41 in Fig. 8, is a shift register having an S P converting function. On the other hand, the output of gate 57 is applied to BPA 58 of 6 5f Writing and reading of data into the buffer memory 57 are controlled in W R processing circuit 63. The contents in the buffer memory, that is, the data in the corresponding field the portion of three times of L₁₀₀, R₁₀₀ in Fig. 10 ₁₀₂ of 2 56 3 bits for the portion of two fields are compared. As stated above, since the same data is stored three times, the most frequently occuring value is determined by comparison, and L₁₀₁, R₁₀₁ are determined. If not determined, the L₁₀₀, R₁₀₀ stored in the previous field are used. The L₁₀₁, R₁₀₁ are held up to the next field. These processings are done by the high speed CPU 64 or hard logic. The time available for processing is about 40 µs at maximum of T₃₉ to T The output of the CPU is stored in the buffer memory 65, and applied to the arithmetic operation circuit 44 before T In Fig. 10, incidentally, error correction, three times of majority decision, and forwarding of data in previous field are mentioned to take place simultaneously, but it is the same if they are done separately. Or, at ₁₀₂, only L₁₀₀ and R₁₀₀ may be used and the remaining 28 bits may be used in other data. When effected as in Fig. 10, if ₁₀₂ skips in one field, the value in the previous field may be used. In delta decoding system, errors may be accumulated, but in this system, the data returns to the correct value within one field. Thus, this invention presents a processing circuit for delivering sound of high quality containing reproduced image, which is hard to be illegally accessed, in decoding encoded sound signals. It is another advantage that the decoding circuit is suited to LSI and is practical. The above disclosure is based on a 525 line television system but is equally applicable to other systems e.g. 625 line or 1050 line systems.