# SEMICONDUCTOR MEMORY INCORPORATING A TEST PATTERN GENERATOR

## Claims
Eine Halbleitereinrichtung mit

## Description
The present invention relates to a semiconductor device incorporating a memory cell array, for example, a random access memory RAM . Generally, in a semiconductor device incorporating a memory cell array for example, RAM various kinds of logic circuits are provided in addition to the memory cell array for transmitting or receiving signals to or from the array. Such logic circuits include, for example, counter circuits and arithmetic logic units ALU . Address signals for the memory cell array are supplied from the output side of the counter circuits, and data which has been calculated in the ALU s is supplied from the output side of ALU s to the array and written into the predetermined address. Also, predetermined data read from the memory cell array is supplied to the input side of the ALU s in order, for example, to carry out predetermined calculation in the ALU s again. In the prior art, if it was desired to test the function or the internal state of the memory cell array, the test was carried out through the above logic circuits. However, in this case, the test data to be written into the memory cell array was designated from the outside. Therefore, there was the problem that it was necessary to use a large amount of test data, resulting in poor efficiency for the testing. In view of the above, it has been desired to provide a test circuit within the above semiconductor device, enabling direct testing without the need for supplying test data from the outside. However, even if such a test were to be used, a problem would arise that the test pattern constituting the test data to be written into each memory cell becomes large, especially when the capacity of the memory cell array is large. As a result, the writing of the test data for the memory cell array would still be troublesome. JP A 57 3299 discloses a memory integrated circuit having the features of the precharacterising part of accompanying claims 1 and 2. According to a first aspect of the present invention, there is provided a semiconductor device according to accompanying claim 1. A second aspect of the present invention provides a semiconductor device according to accompanying claim 2. The present invention is intended to solve the above mentioned problems. An embodiment of the present invention may enable automatic generation of a pattern of test data just by supplying address signals for the memory cell array for example, RAM , without the necessity of supplying test data from the outside. In this connection, in one type of test pattern, generally called a checkerboard pattern, the test data to be written into adjacent memory cells consists of alternate 1 s and 0 s. This test pattern, recently known is simple, but desirable in that it can detect exactly defective parts of the memory cell array. According to an embodiment of the present invention, it is possible to automatically generate such a checkerboard pattern just by supplying address signals for the memory cell array. An embodiment of the present invention may provide a semiconductor device incorporating a test pattern generating circuit able to test the internal state of the memory cell array before shipment of the semiconductor device. Thus, in embodiments of the present invention, if the address signals are row address signals for the memory cell array, for example, the least significant bit signal of the row address signals changes alternately between 0 and 1 every time each adjacent row address namely, each of even row address and odd row address is input in turn. As a result, it is possible to automatically generate the desired test pattern the checkerboard pattern, for example , by processing logically the above least significant bit signal and the predetermined control signal. Reference is made, by way of example, to the accompanying drawings in which Figure 1 is a schematic block diagram illustrating the overall constitution of a semiconductor device incorporating a memory cell array. As shown in Fig. 1, there are provided a memory cell array 1 for example, RAM and a logic circuit area 10 on a chip 12, which logic circuits transmit or receive signals for example, address signals A₀ to A There are provided a counter circuit 101 and an arithmetic logic unit ALU 102, for example, in the above logic circuit area 10. The address signals A₀ to A Figure 2 illustrates the constitution of a test pattern generating circuit and connections between the test pattern generating circuit and the memory cell array in a semiconductor device according to one embodiment of the present invention. In Fig. 2, there is shown a memory cell array RAM 1. Only row address signals A₀ to A Also, selectors 5 and write amplifiers 6 are connected to the data input side of the memory cell array 1. Sense amplifiers 7 are connected to the data output side of the memory cell array 1. When a control signal CNT2 supplied from the outside to the selectors 5 becomes high level, for example, the test data T₀ to T On the other hand, when the control signal CNT2 supplied to the selector 5 becomes low level, for example, the usual data D₀ to D Also, the output data X₀ to X Also, there is provided a test pattern generating circuit 8 which generates test data to be written into the memory cell array 1 to test the array 1. In the test pattern generating circuit 8, there are provided AND gates 83, 84, 85, 86, and the like. The least significant bit signal A₀ of the row address signals A₀ to A A control signal CNT1 is input from the outside to the AND gates 83 and 85, through an inverter 82, and to the AND gates 84 and 86 directly. Similarly, the above control signal CNT1 is input to the further following AND gates in the same manner. The output signals of a pair of AND gates 83 and 84 are input to an OR gate 87, from where the test data T₀ is output. Also, the output signals of a pair of AND gates 85 and 86 are input to an OR gate 88, from where the test data T₁ is output. Similarly, the output signals of each pair of AND gates are input to the corresponding OR gate, from where the test data T₀ to T Thus, if all of the row address signals A₀ to A At this time, if the control signal CNT1 supplied to the test pattern generating circuit 8 is set to low level, the low level control signal is input directly to each of AND gates 84, 86 , and the inverted high level signal produced by inverting the control signal CNT1 through the inverter 82 is input to each of AND gates 83, 85 . As a result, both the output signals of AND gates 83 and 84 become low level, and, thus, the output signal of the OR gate 87 also becomes low level. Therefore, the test data T₀ is output as the low level signal namely, 0 . On the other hand, as the output signal of the following AND gate 85 becomes high level, the output signal of the OR gate 88 also becomes high level although the output level of the AND gate 86 is low . Thus, the test data T₁ is output as the high level signal namely, 1 . Similarly, the test data T₀ to T Next, if the word line WL₁ is selected by changing the levels of the row address signals A₀ to A Thus, each of the test data which alternately changes between 0 and 1 as shown in Fig. 4A namely, each of the test data constituting the above mentioned checkerboard pattern is written into each memory cell in the memory cell array 1. Although in the above mentioned embodiment, the active level of the control signal CTN1 is set to the low level, if the active level of the control signal CNT1 is set to the high level, each of the test data constituting another checkerboard pattern as shown in Fig. 4B is written into each memory cell in the memory cell array 1. Figure 3 is a circuit diagram of an example of a memory cell for example, 1 00 in the above memory cell array 1 and a selector 50, a write amplifier 60, and a sense amplifier 70 connected to the above memory cell. As shown in Fig. 3, there are provided an inverter 501, AND gates 502 and 503, and an OR gate 504 in a selector 50. When the above mentioned control signal CNT2 becomes high level, the test data T₀ supplied from the test pattern generating circuit 8 is input to the write amplifier 60 through the gates 502 and 504. On the other hand, when the control signal CNT2 becomes low level, the usual data D₀ supplied from the logic circuit area is input to the write amplifier 60 through the gates 503 and 504. In the write amplifier 60, there are provided an amplifier 601 and an inverter 602. The write amplifier 60 is connected to the memory cell 1 00 through the write bit lines WBL₀ and When data is written into the memory cells connected to the write word line WWL₀ , the voltage level of the selected word line WWL₀ becomes high. At this time, if the data T₀ or D₀ of high level namely, 1 , for example, is to be written into the memory cell 1 00 through the selector 50, the voltage level of the write bit line WBL₀ supplied through the amplifier 601 becomes high, and, contrary to this, the voltage level of the write bit line Thus, in the memory cell 1 00, the transistor Q₅ turns on, and the voltage level of the connection point A between the transistors Q₂ and Q₄ becomes high. Thus the data 1 is written into the memory cell 1 00. Further, at this time, the transistor Q₆ also turns on, and the voltage level of the connection point B between the transistors Q₁ and Q₃ becomes low. Thus, the above mentioned high level voltage at the connection point A is latched. In this connection, when the data is written into the memory cell, the clock signal CLK becomes low level, and, thus, the memory cell 1 00 is charged up through the P channel type transistor Q₉ and the read bit line RBL₀ by the power source V When the data is read from the memory cells connected to the read word line RWL₀ , the voltage level of the selected word line RWL₀ becomes high, and, thus, the transistor Q₇ turns on. At this time, the above clock signal CLK becomes high level, and the transistor Q₉ turns off. When the data 1 has been written into the memory cell 1 00 as above mentioned, the transistor Q₈ turns off because the gate level of the transistor Q₈ is low level . Thus, the high level data X₀ produced by the above mentioned charging up is output through the transistor Q₇ , the read bit line RBL₀ , and the sense amplifier 70 in which an amplifier 701 is provided. Contrary to this, if the data 0 is written into the memory cell 1 00, the transistor Q₈ turns on because the gate level of the transistor Q₈ becomes high . Thus, the level of the read bit line RBL₀ becomes low namely, the level of V Figure 5 illustrates the constitution of the test pattern generating circuit and the connections between the test pattern generating circuit and the memory cell array in a semiconductor device according to another embodiment of the present invention. In Fig. 5, there is shown the memory cell array RAM 1 to which in this case both row address signals and column address signals are supplied as address signals. As shown in Fig. 5, there are provided address buffers 2 , row decoders 3 , column decoders 4 , selectors 5 , write amplifiers 6 , column selectors 7 , and sense amplifiers 8 . In the embodiment shown in Fig. 5, the memory cell array 1 is physically constituted in the size of four row addresses and four column addresses, as shown in Fig. 6. The address signals A₀ to A₂ are input to the corresponding address buffers 2 . The address buffers 2 output the internal column address signals A₀ and The row decoders 3 select the predetermined row address according to the level of the internal row address signals A₁ to Also, the selectors 5 and the write amplifiers 6 are connected to the data input side of the column selectors 7 . The sense amplifiers 8 are connected to the data output side of the column selectors 7 . At the time that the data is to be written into the memory cell array by the control of the usual write enable signal, if a control signal CNT2 supplied from the outside to the selectors 5 becomes high level, for example, test data of two bits T₀ and T₁ supplied from the test pattern generating circuit 9 are input through the selectors 5 , the write amplifiers 6 , and the column selectors 7 to predetermined memory cells in the memory cell array 1 . Contrary to this, if the control signal CNT2 becomes low level, for example, the usual data of two bits D₀ and D₁ supplied from the logic circuit area 10 is input through the selectors 5 , the write amplifiers 6 , and the column selectors 7 to the predetermined memory cells in the memory cell array 1 . On the other hand, at the time that the data is to be read from the memory cell array 1 , the data X₀ and X₁ is output from the predetermined memory cells through the column selectors 7 and the sense amplifiers 8 . In this connection, the column selectors 7 select two column addresses as the addresses to or from which the above data of two bits are input or output, according to the output level of the column decoders 4 . Also, there is provided a test pattern generating circuit 9 which generates the test data to be written into the memory cell array 1 in order to test the memory cell array 1 . In the test pattern generating circuit 9, there is provided an exclusive NOR gate 91 to which both of the least significant bit signal A₁ of the row address signals and the least significant bit signal A₀ of the column address signals are supplied. In this connection, there is only one bit signal A₀ for the column address signal in this embodiment, and therefore, the above signal A₀ is also the least significant bit signal of the column address signals. The output signal of the exclusive NOR gate 91 becomes high level when both levels of the above supplied signals coincide namely, both high or both low , and becomes low level when the levels of the above supplied signals do not coincide. The output signal of the exclusive NOR gate 91 is input to each of the AND gates 94 and 96 directly and is input to each of the AND gates 95 and 97 through an inverter 92. Further, a control signal CNT1 is input from the outside to each of the AND gates 94 and 96 directly and is input to each of the AND gates 95 and 97 through an inverter 93. The output signals of a pair of AND gates 94 and 95 are input to an OR gate 98, from where the test data T₀ is output. Similarly, the output signals of a pair of AND gates 95 and 97 are input to an OR gate 99, from where the test data T₁ is output. Then, the test data T₀ and T₁ is input to the above mentioned selectors 5 . When the test data is to be written into each memory cell in the memory cell array 1 , if all of the address signals A₀ to A₂ are set to the low level, the output level of the exclusive NOR gate 91 becomes high. Thus, the above high level signal is supplied to AND gates 94 and 96 directly, and the low level signal produced by inverting that high level signal through the inverter 92 is supplied to the AND gates 95 and 97. Also, if the active level of the control signal CNT1 is high level, the high level control signal CNT1 is supplied to the AND gates 94 and 96 directly, and the low level signal produced by inverting that control signal CNT1 through the inverter 93 is supplied to the AND gates 95 and 97. As a result, each output level of the AND gates 94 and 96 becomes high, and, thus, each output level of OR gates 98 and 99 namely, each level of the test data T₀ and T₁ becomes high. Thus, the high level test data 1 is written into the predetermined two memory cells arranged at the intersection of the row address selected when the row address signals A₁ and A₂ are both low level namely, the top row address in the pattern shown in Fig. 6 and each of two column addresses selected when the column address signal A₀ is low level namely, the first and third column addresses from the left side in the pattern shown in Fig. 6 . Similarly, if the address signals A₀ and A₂ are set to the high level and the address signal A₁ is set to the low level, all output levels of AND gates 94 to 97 become low, and, as a result, each output level of the OR gates 98 and 99 namely, each level of the test data T₀ and T₁ becomes low. Thus, the low level test data 0 is written into the predetermined two memory cells arranged at the intersection of the row address selected when the row address signals A₁ and A₂ are low level and high level respectively namely, the third row address from the top side in the pattern shown in Fig. 6 and each of two column addresses selected when the column address signal A₀ is high level namely, the second and fourth column addresses from the left side in the pattern shown in Fig. 6 . Further, by repeating a similar operation, each test data constituting the checkerboard pattern as shown in Fig. 6 is written into each memory cell in the memory cell array 1 . In this connection, if the active level of the control signal CNT1 is set to the low level, it is obvious that each data written into each memory cell is inverted. As described above, according to the present invention, it is possible to automatically generate a pattern of the test data for example, a checkerboard pattern and to transmit the test pattern to the memory cell array just by supplying address signals for the memory cell array, without the necessity of supplying test data from the outside. Although in the above described embodiments a checkerboard pattern of test data is generated, it will be understood that in other embodiments of the invention a different pattern of test data may be generated, by providing a suitable arrangement of a test pattern generating circuit.