# METHOD OF LOADING SYSTEM PROGRAM.

## Abstract
A method of loading a system program for apparatuses SYS1, SYS2 that execute predetermined processing con trolled by a system program that has been loaded into a memory. According to this loading method, the system pro gram is divided into a plurality of modules M1 to M4 which are stored on a floppy disc FLOP data CD are set in advance in ROMs LROM1, LROM2 so that the capacities of memories MM1, MM2 , to which the system program will be transferred and stored, are confirmed the memory ca pacities of the apparatuses SYS1, SYS2 are confirmed with reference to data CD at the time when the system program is being loaded such that a predetermined module is loaded onto the memories MM1, MM2 based upon the memory capacity the module M4 that has not been loaded is then stored as a relocatable module in the memory MM1 to substitute for an unnecessary module as required, and an execution control table LAT is prepared to control the memory position in the memory MM1 of said relocatable module. When a relocatabie module is to be referred to, the memory position is found by using the execution control table and the relocatable module is referred to.

## Claims
CLAIMS 1. A method of loading a system program of an apparatus which performs predetermined processing under the control of a system program loaded in a memory, characterized by dividing a system program into a plurality of modules and storing the modules on a floppy disc, preseting data, which are for indicating the capacity of said memory to which the system program is to be transferred for storage, in the system beforehand, ascertaining the memory capacity of the system by referring to said data when the system program is loaded, loading prescribed modules into the memory based on said memory capacity, storing an unloaded module as a relocatable module in the memory in place of an unneeded module as the occasion demands, creating an execution management table for managing a storage location at which said relocatable module is stored in said memory, and in a case where the relocatable module is referred to, obtaining a storage location by using said execution management table to refer to said relocatable module. 2. A method of loading a system program according to claim 1, characterized by storing a loading program in a ROM of the system, storing said data in said ROM, storing a monitor program, which is one module, in the memory by the loading program, and loading the prescribed modules into the memory by said monitor program upon referring to said data. 3. A method of loading a system program according to claim 1, characterized by creating a table, which indicates a corresponding relationship between a name of each subroutine contained in the relocatable module and a storage location of said subroutine in the memory, as the execution management table.

## Description
DESCRIPTION SYSTEM PROGRAM LOADING METHODTechnical Field This invention relates to a method of loading a system program and, more particularly, to a method of loading a system program of an apparatus which performs predetermined processing under the control of a system program loaded in a memory.Background Art An automatic programming system for automatically creating an NC program is constituted by an input output unit, such as a graphic display unit, a printer and a magnetic cassette tape or floppy disc, in addition to the main frame, and is very useful owing to its ability to create NC programs simply, rapidly and accurately. The main frame of the automatic programming system is constituted by a computer, in which software ta system program for NC program creation is stored beforehand in a main internal memory.If a group of data a part program specifying a tool path created in a predetermined automatic programming language APT or FAPT are subsequently inputted in accordance with predetermined rules, a host processor program within the system program automatically calculates tool path coordinate values using the abovementioned group of data, creates an NC program conforming to an EIA or ISO code and outputs the program. Accordingly, in automatic programming, first a predetermined system program from an external storage medium is stored in the main memory device of the automatic programming system and then automatic programming processing is executed. There are cases where the storage capacity of the main memory device hereafter referred to simply as a memory differs depending upon the automatic programming system. Consequently, if the system program is composed of e.g. a plurality of modules M1 M4 as shown in Fig. 7, only modules Ml M3 can be stored in a memory MM see Fig. 8 A J in case of a system having a small storage capacity. Where the system has a large storage capacity, on the other hand, all of the modules M1 M4 can be stored in the memoryMM Esee Fig 8 B In other words, the prescribed module M4 sometimes can or cannot be stored, depending upon the size of the storage capacity.It should be noted that module M1 is, for example, a monitor program, module M2 a language translator, module M3 a first postprocessor module, and module M4 a second postprocessor module. If the second post processor module M4 is necessary for the case shown in Fig. 8 A , the monitor program module M1 dislodges the first postprocessor module M3 from the memory MM and stores the second postprocessor module M4 in its place. Thereafter, processing is executed by referring to the entries e.g. subroutines of this module. If the first postprocessor module M3 agains becomes necessary, the substitution is made in the same fashion and processing is continued. For the case shown in Fig. 8 B , all of the modules are stored in the memory and, hence, module substitution processing is unnecessary. Further, where the storage capacity is small, as shown in Fig. 8 A , the position at which the module M4 is stored differs from that at which the same module is stored when the storage capacity is large, as shown inFig. 8 B . Consequently, processing executed when referring to the module M4 differs depending upon the size of the storage capacity. Thus, as set forth above, the processing method differs depending upon the size of the storage capacity. In the prior art, therefore, a requisite system program is created for each system that has a different storage capacity and a floppy disc storing the system program is prepared for each such system. However, preparing a floppy disc for every system that has a different storage capacity is undesirable as it involves a greater amount of labor. Moreover, an increased number of floppy discs is a drawback since this involves more complicated management. Accordingly, an object of the present invention is to provide a system program loading method in which only one type of floppy disc need be prepared irrespective of memory capacity. Disclosure of the Invention The present invention relates to a method of loading a system program of an apparatus which performs predetermined processing under the control of a system program loaded in a memory. The loading method includes dividing a system program into a plurality of modules and storing the modules on a floppy disc, presetting data, which are for indicating the capacity of a memory to which the system program is to be transferred for storage, in the system beforehand, ascertaining the memory capacity of the system by referring to the data when the system program is loaded, loading prescribed modules into the memory based on the memory capacity, storing an unloaded module as a relocatable module in the memory later in place of a subsequently unneeded module as the occasion demands, creating an execution management table for managing a storage location at which the relocatable module is stored in the memory, and in a case where the relocatable module is referred to, obtaining a storage location using the execution management table to refer to the relocatable module. The system program is divided into a plurality of modules, the modules are stored on a floppy disc, and the data, which are for indicating the capacity of the main memory device memory to which the system program is to transferred for storage, are set in the system beforehand. For example, the data indicative of the memory capacity are stored in a ROM storing a loading program. When a system program loading request is generated after the introduction of power under these conditions, the loading program first stores a monitor program module in the memory. Thereafter, the monitor program refers to the data and predetermined modules are loaded in the memory. More specifically, if the memory cap acity is large, all modules are loaded in the memory. If the memory capacity is small, all modules are not loaded instead, a predetermined module is left out and the others are loaded in the memory. The module not loaded is stored as a relocatable module in the memory later in place of a subsequently unneeded module as the occasion demands. The monitor program creates the execution management table for managing the storage location at which the relocatable module is stored in the memory.In a case where the relocatable module is referred to, the storage location is obtained by using the execution management table and entries e.g. subroutines contained in the relocatable module are referred to by using this storage location. It should be noted that a table indicating a corresponding relationship between the name of each subroutine contained in a relocatable module and the storage location thereof in the memory is created as the execution management table.Brief Description of the Drawings Fig. 1 is a view for describing the present invention Fig. 2 is a view for describing an execution management table according to the present invention Fig. 3 is a view for describing another execution management table according to the present invention Fig. 4 is an external view of an automatic programming system to which the present invention can be applied Fig. 5 is a block diagram of the automatic programming system Fig. 6 is a flowchart for describing processing according to the present invention Fig. 7 is a view for describing the configuration of a system program and Fig. 8 is a view for describing the drawbacks of the prior art.Best Mode for Carrying Out the Invention Fig. 1 is a schematic view of the present invention. A system program is stored on a floppy discFLP. The system program has a module M1 monitor program , a module M2 language translator , a module 3 first postprocessor module and a module M4 second postprocessor module . In each of systems SYS1, SYS2, data CD indicative of the storage capacities of main memory devices memories Mi 4l, MM2 are set by pins on a printed circuit boards, not shown, or these data are stored in read only memories LROM1, LROM2 for loading program storage. When the system program is loaded, first the module Ml monitor program is stored in the main memory devices MM1, MM2 by a loading program. Next, the monitor program ascertains the storage capacities by referring to the data CD set on the printed circuit boards or in the read only memories LROM1, LROM2 and stores prescribed modules in the main memory devices. More specifically, if the memory storage capacity is large which is the case for systemSYS2 , then the monitor program loads the remaining modules M2 M4 in the memory MM2. If the memory storage capacity is small which is the case for system SYS1 , then the monitor program does not load all of the modules. Instead, the prescribed module M4 is left out and the remaining modules M2 M3 are loaded in the memory MM1. The module M4 not loaded in system SYS1 is stored later as a relocatable module in the memory MM1 in place of a subsequently unneeded module e.g. M3 as the occasion demands. In parallel with the foregoing loading processing, the monitor program creates, at a predetermined location in the main memory devices MM1, MM2 , an execution management table LAT for managing the storage location of each module in the main memory devices MM1, MM2 . For example, in the case of system SYSI having the small storage capacity, assume that module M1 is stored from memory address Al in the main memory device MMI, module M2 is stored from memory address A2, and moduleM3 is stored from memory address A3, as illustrated inFig. 2 A . In such case, the execution management table LAT will be Ml,Al M2,A2 M3,A3 In the case of system SYS2 having the large storage capacityr assume that module M1 is stored from memory address Al in the main memory device MM2, module M2 is stored from memory address A2, module M3 is stored from memory address A3, and module M4 is stored from memory address A4, as illustrated in Fig. 2 B .In such case, the execution management table LAT will be Ml,Al M2,A2 M3,A3 M4,A4 Each module has a number of subroutines For instance, module M4 has subroutines SBR41, SBR42, .... SBR4i,..., as shown in Fig. 2 B . A subroutine registration table SRT is placed at the beginning of each module, and the table is followed by various subroutines SBRij Ci 1 4, j 1, 2, .. . The subroutine registration table SRT exhibits the correlation between the name of each subroutine and the starting address of the subroutine. The starting address referred to here is a relative address when the starting position of a module is taken as the reference. Accordingly, if the relative address of each subroutine SBR4j j 1, 2, ... of the module M4 is aq j 1, 2, ... , then the subroutine registration table SRT of module M4 is constituted by the following correspondence table SBR41, a41 SBR42, a42 ...SBR4j, a4j, Accordingly, if the subroutine SBR4j of module M4 is requested by the monitor program in actual processing, then a processor CPU first reads the starting address A4 of the module M4 from the execution management table LAT, thereafter reads the relative address aq of the subroutine SBR4j from the subroutine registration table SRT of module M4j, reads the subroutine SBR4j from the memory address A4 a4j , and executes processing. Though the foregoing discussion deals solely with module M4, the same will hold for the other modules. Further, the execution management table LAT is described above as being composed of corresponding relationships between the modules and their starting addresses. However, it is also permissible for the table to be composed of corresponding relationships between the names of the subroutines contained in the modules and the storage locations of these subroutines in the main memory device. Fig. 3 if a view for describing such a management table. Assume that the relative address of each subroutine SBR3j j 1, 2, ... in module M3 is a 3j j 1, 2, ... , that the relative address of each subroutine SBR43 Ci 1, 2, ... in module M4 is a43 Ci 1, 2, ... , and that module M3 is stored from the address A3 of main memory device MM1 in the small capacity system SYS1. The execution management table LAT in such case will be as shown in Fig. 3 A , in which the starting address of each subroutine SBR3j is the sum of the starting address A3 of module M3 and the relative address a3 of the subroutine Likewise, assume that the module M4 is stored from the address A3 of main memory device MM1 in the small capacity systemSYS1.The execution management table LAT in such case will be as shown in Fig. 3 B . Further, if the moduleM3 is stored from the address A3 of main memory deviceMM2 and the module M4 is stored from the address A4 in the large capacity system SYS2, then the execution management table will be as shown in Fig. 3CC . Fig. 4 is an external view of an automatic programming system to which the present invention can be applied, and Fig. 5 is a block diagram of the automatic programming system A main frame 11 has an upper side provided with a printer 12 and a front side provided with a CRT display device 13. Disposed in front of the CRT display 13 is a keyboard 14 on which there are provided an array of keys 14a such as character keys, numeric keys and function keys. Disposed at the side of the CRT display 13 is a floppy disc unit 15. Numeral 12a denotes a recording paper on which printing is performed by the printer 12. Numerals 15a, 15b denote floppy discs. The main frame 11 is constituted by a microcomputer and, as shown in Fig. 5, includes a processor lla, a ROM llb, a RAM llc and a working memory lld. The processor lla corresponds to the processor CPU in Fig. 1, the ROM lIb corresponds to the read only memories LROM1, LROM2 in Fig. 1, and the RAM llc corresponds to the main storage devices l Ml, MM2 inFig. 1. The ROM llb stores the data CD indicative of storage capacity, as well as the loading program.Under the control of this loading program, a system program monitor program is read from a floppy disc and loaded in the RAM llc, after which another system program is loaded in the RAM llc by the monitor program. The processor lla executes processing under the control of the system program, causes the CRT display device 13 to display the results of processing and various instructions, executes predetermined processing based on data and commands entered from the keyboard 14, creates an NC program and either prints out the program via the printer 12 or records the program on a floppy disc. Let us now describe the method of the present invention in accordance with Fig. 1 and the processing flowchart of Fig. 6. The execution management tableLAT will be described as being composed of corresponding relationships between subroutines and starting addresses see Fig. 3 . When the system is manufactured, data CD indicative of the memory capacities of the main memory devices memories ... Mlr M2 are set by pins on printed circuit boards or in the loading program storage memories LROM1, LROM2 . For a case where systems having different memory capacities are of two types only, namely a large capacity system and a smallcapacity system, by way of example, pins are set to their on or off positions or 1 or tO t is stored in the loading program storage memories in advance. a In response to a system program loading request, such as by turning on a power supply, the processor CPU loads the monitor program module Ml into the main memory devices MM1, MM2 from the floppy disc FLP under the control of the loading program. b Next, the monitor program refers to the set data CD to ascertain the system memory capacity large or small .d c If the memory capacity is large CD 1 , then the processor CPU, which is under the control of the monitor program, loads all of the remaining modulesM2 M4 stored on the floppy disc FLP into the main memory device. d Next, the monitor program creates the execution management table LAT see Fig. 3 C indicating the corresponding relationships between the storage locations of the subroutines contained in each module and the names of the subroutines, and stores the table in the main memory device at a predetermined location thereof e If the system program all modules is stored in the main memory device MM2 as a result of the foregoing processing, then automatic programming processing is executed thereafter under the control of the system program. If a prescribed subroutine contained in each module becomes necessary, the monitor program refers to the execution management table LAT to obtain the storage location of the subroutine and then reads the subroutine from this location. f If the memory capacity is small, then the monitor program stores the modules M2 M3 is the main memory device and does not store the relocatable moduleM4 in this main memory device. g Next, the monitor program creates an execution management table LAT Esee Fig. 3 A and stores this table in the main memory device MM1. Note that since the module M4 is not stored in the main memory device MM1 in the initial loading operation when the memory capacity is small, the fact that moduleM4 is not stored in the main memory device is recorded in the execution management table. h Thereafter, predetermined automatic programming processing is executed based on the system program stored in the main memory device MM1. i When the module M4 the second postprocessor module is requested in the automatic programming processing, the module M4 is stored at the location storing the module M3 the first postprocessor module . j The monitor program then creates a new execution management table LAT see Fig. 3 B 1 in the main memory device MM1. k Thereafter, processing is performed based on the system program stored in the main memory device SM1. Note that if the module M3 is requested, the module M3 is stored in place of module M4 and the execution management table is revised. In the case described above, the present invention is applied to an automatic programming system.However, the invention is not limited to such a system. According to the present invention as described above, the arrangement is such that a system program is divided into a plurality of modules which are then stored on a floppy disc, data indicating the capacity of a memory to which the system program is to be transferred for storage are set in the system beforehand, the memory capacity of the system is ascertained by referring to the data when the system program is loaded, prescribed modules are loaded into the memory based on the memory capacity, an unloaded module is stored as a relocatable module in the memory in place of an unneeded module as the occasion demands, an execution management table for managing a storage location at which the relocatable module is stored in the memory is created, and in a case where the relocatable module is referred to, a storage location is obtained using the execution management table and the module is referred to by using the storage location. Accordingly, only one type of floppy disc for system program storage need be provided irrespective of the size of the memory capacity, labor can be reduced and floppy disc management facilitated.