# SEMICONDUCTOR MEMORY DEVICE HAVING READ MODIFY WRITE CONFIGURATION

## Claims
Halbleiterspeichervorrichtung mit

## Description
The present invention relates to a semiconductor memory device, more particularly, to a semiconductor memory device for performing high speed read modify write hereinafter referred to as RMW operations on a large amount of data. Demand has arisen for effectively writing image data in or reading image data from an image processing memory or the like and for effectively performing a high speed RMW operation, i.e., the storage contents are read out from the memory, the read out data is modified, and the modified data is restored in the memory. A typical RMW application is exemplified by color inversion for inverting a color currently displayed on a display unit in a given relationship, and by pattern emphasis for emphasizing a specific pattern. A conventional RMW scheme is applied in such a manner that data is read out by using an RMW function of a dynamic random access memory D RAM device, the read out data is modified by an external circuit, and the modified data is restored in the corresponding memory cell. However, the conventional RMW scheme requires a relatively long processing time defined by the operating cycle of the D RAM device, resulting in inconvenience. WO A 82 2615 discloses a semiconductor memory device in accordance with the precharacterising portions of the accompanying claims 1, 2 and 4. EP A 0 056 240 discloses a memory device for performing digital delay processing, which allows serial access mode operation wherein the memory contents of part or a whole row of cells are read out sequentially. A shift register is arranged parallel to a column decoder for performing such a serial readout, and the column decoder is operable to select the point along the shift register where readout is to begin. Neither of the above documents discloses a semiconductor device for performing high speed RMW operations. According to one aspect of the present invention, there is provided a semiconductor memory device comprising According to a second aspect of the invention, there is provided a semiconductor memory device comprising According to a development of the second aspect of the invention, there is provided a semiconductor memory device, wherein the data modification means comprises a plurality of modification circuits provided in parallel, and wherein the register means is in the form of a plurality of shift registers provided one or more for each respective modification circuit, each modification circuit having individual data transfer means connecting it to its respective shift register, whereby high speed read write modify operations may be carried out in parallel by each modification circuit. According to a third aspect of the invention there is provided a semiconductor memory device comprising An embodiment of the present invention can provide a semiconductor memory device for performing a high speed RMW operation of a large amount of data for selected memory cells. The device may include a circuit for designating a predetermined range of data output from the data output circuit and data restore in the data input and output circuit, to perform a predetermined range of data modification. Reference is made, by way of example, to the accompanying drawings, in which Figure 1 is a block diagram of a semiconductor memory device according to a first embodiment of the present invention. The semiconductor memory device in Fig. 1 has a plurality of dynamic RAM D RAM cells MC 1 arranged in a matrix form, a row decoder 5 for selecting word lines WL₀ to WL₂₅₅ of the memory cells in response to row address signals RA₀ to RA₇ , a sense amplifier array 2 of sense amplifiers SA₀ to SA₂₅₅ connected to bit lines BL₀ to BL₂₅₅ and The semiconductor memory device in Fig. 1 further has a data read shift register array 12 including 256 series connected shift registers SRA₀ to SRA₂₅₅ connected to the bit lines BL₀ to BL₂₅₅ through a first transfer gate array 10 including 256 transfer gates, and a data write shift register array 14 having 256 series connected shift registers SRB₀ to SRB₂₅₅ and connected to the bit lines BL₀ to BL₂₅₅ through a second transfer gate array 11 including 256 transfer gates. An output amplifier 13 is connected to the read shift register array 12. An output signal S A typical example of the read and write shift registers SRA₀ to SRA₂₅₅ and SRB₀ to SRB₂₅₅ of Fig. 1 is a two phase ratio type shift register as shown in Fig. 2. A timing chart of the two phase ratio type shift register is illustrated in Fig. 3. In the shift register SR₂ , a value at a node N₁₄ of the preceding step of the shift register SR₁ is transferred as master data, and a transistor Q₂₂ is turned ON in response to a clock pulse P₁ to receive the master data in a node N₂₁. When a voltage level at the node N₂₁ is set at logic 1 , the level at a node N₂₂ is inverted. In order to perform a slave transfer, a transistor Q₂₆ is turned ON in response to a clock pulse P₂ to set the level at a node N₂₃ to be equal to that at the node N₂₂. The signal level at a node N₂₄ is inverted in accordance with the signal level at the node N₂₃. Therefore, the data can be shifted bit by bit in each shift register. The operation of the semiconductor memory device in Fig. 1 will be described hereinafter. The D RAM side is asynchronized with the shift register side and may be operated independently thereof. The D RAM can be accessed in a conventional manner. At the same time, when the D RAM is held in a nonaccess mode, an RMW operation can be performed in the following manner. In the RMW mode, a transfer instruction TR and a read instruction R W 0 are supplied to a transfer clock driver 16, and the driver 16 generates a clock signal T As shown in Fig. 4, the modifying circuit 15 for example includes an amplifier 151 for amplifying the input signal S The modified signal is stored in the write shift register array 14. When the modified signals are loaded in to all the shift registers, the transfer instruction TR and the write instruction R W 1 are supplied to the transfer clock driver 16. The gate array 11 is turned ON in response to the clock signal T In this case, when the data in the memory cells is to be used for only display, an output amplifier not shown connected to the end stage SRB₂₅₅ of the shift register array 14 may serially output the data to be displayed on the display unit while the gate array 11 is kept OFF. As described above, a simultaneous high speed RMW operation can be performed for memory cells connected to a given word line. In the above embodiment, two shift register arrays are used for the RMW operation. The semiconductor memory devices mentioned above perform an RMW operation for all shift registers all bit lines . In general, however, an RMW operation is desired to be performed for desired bit lines. An embodiment suitable for this application will be described hereinafter. Figure 6 shows an arrangement of a semiconductor memory device according to a second embodiment of the present invention. Reference numeral 100 denotes a circuit corresponding to the D RAM device Fig. 1 including the memory cell array 1, the sense amplifier array 2, the gate array 3, the column decoder 4, the row decoder 5, and the I O amplifier 25 so as to schematically show the connections between the respective components with the bit lines in units of columns. A shift register array 21a is connected to the bit lines BL₀ to BL₂₅₅ through a transfer gate array 20a including 256 transfer gates. The output terminals of the shift register array 21a are connected to the corresponding input terminals of an output gate array 22a including 256 gates, i.e., transistors. The drains of the transistors of the output gate array 22a are connected to a data bus DB. The data bus DB is connected to a modifying circuit 25a. A pointer shift register PSR array 23a is arranged to control the respective gates of the output gate array 22a. A column decoder 24a is arranged to set a value in the pointer shift register array 23a. Each shift register in the shift register array 21a may be the same as that shown in Fig. 3. One arrangement representing the connections between the shift registers SR₁ and SR₂ , the output gate 22a, and the PSR₁ and PSR₂ is shown in Fig. 7. The timing chart of the arrangement of Fig. 7 is shown in Fig. 8. The data is shifted bit by bit in response to the clock signals P1 and P2 in the same manner as in the first embodiment. According to the second embodiment, in addition, the contents in the shift registers appear on the data bus DB consisting of data buses SDB and Figure 9 is a circuit diagram of part of an example pointer shift register array 23a. The n th pointer shift register PSR The operation of the pointer shift registers will now be described. First, when the pulse PE is high level, it is assumed that an output SL The transistors Q The transistors Q₅₆ , Q₅₇ , and Q₆₁ in the pointer shift register PSR By applying one clock signal T In this embodiment, an arbitrary amount number of bits of serial data appearing on the bit lines between the first bit line BL₀ and n th bit line BL A modification circuit 25a may be the same as one of the types of modifying circuit described above. The RMW operation of the semiconductor memory device according to the second embodiment in Fig. 6 will be described hereinafter. When a transfer instruction TR is set at logic 1 , the gate array 20a is turned ON in response to a clock signal T In one preferred mode of RMW operation, an output from an arbitrary one of the pointer shift registers PSR₀ to PSR₂₅₅ is set at logic 1 , and the output gate connected to the 1 holding shift register of the register array 21a is turned ON, while data in the shift registers SR₀ to SR The same modification operation as described above is performed for n bits. In another mode of RMW operation, one of the pointer shift registers PSR₀ to PSR₂₅₅ is set at logic 1 and both the shift register arrays 21a and 23a are shifted synchronously. By this operation, n shift registers SR₀ to SR The modified contents need not be restored in the memory cells to update the contents thereof but can be supplied from the shift register array 21a to another device. As may be apparent from the above description, a high speed RMW operation can be performed for a predetermined range of 1st to nth bit lines BL₀ to BL In the above embodiment, data on the first to n th bit lines are modified. However, any modification range of n₁ th to n₂ th bit lines can be selected. Still another embodiment of the present invention is shown in Fig. 11. In the circuit of Fig. 11, the shift register array 21a in Fig. 6 is replaced with an set reset R S flip flop array. More specifically, instead of the shift register, a latch circuit 27b consisting of a flip flop 273, an OR gate 271, and an inverter 272 is used together with gates 22b and 28b associated with the latch circuit 27b. In operation, the contents of memory cells on a bit line BL In order to increase the RMW operation speed, an n parallel RMW arrangement is shown in Fig. 12. The connection between the circuit of Fig. 12 and the memory cell array 100 is the same as described above. However, in order to perform the n parallel RMW operation, n data buses DB 1 to DB n and n modifying circuits 25 1 to 25 n are arranged. Furthermore, n pointer register arrays 23 1 to 23 n can be operated in parallel with n register arrays 21 1 to 21 n. The pointer register arrays 23 1 to 23 n and the register arrays 21 1 to 21 n may be shift registers or flip flops. The modifying circuits 25 1 to 25 n may each be the same as the modifying circuit 15 of Fig. 1. The modifying circuit may include a circuit as shown in Figs. 4 and 5a to 5c or others. The circuits shown in Figs. 4 and 5a to 5c can be selectively used to perform various RMW operations. Devices for performing RMW operations for memory cells m x n of a specific area are shown in Figs. 13 and 14, respectively. The circuit in Fig. 13 has a gate array 31 consisting of gates Q₀ to Q₅₁₁ each having one end connected to a corresponding one of bit lines BL The operation of the circuit shown in Fig. 13 will be described. When the memory cell DRAM side is not accessed, a specific word line WL Among the contents latched by the data latches DL₀ to DL₅₁₁ , the contents of specific registers for the shift register array 34, e.g., SR In this state, the clock signal The same operations are performed for the word lines WL Figure 14 shows an embodiment wherein the gate array 33 in Fig. 13 includes a gate array 35 consisting of gates Q The contents of the memory cells temporarily transferred to data latches DL₀ to DL₅₁₁ are modified by the modifying circuit 25a together with the input data D In this circuit, high speed RMW operation can be performed for the memory contents for the specific memory cell area m x n , and the contents of other memory cell areas can be left unchanged.