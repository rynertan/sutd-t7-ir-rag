# System for converting data processing information to text processing format and vice versa.

## Abstract
A method and means for operating an interactive text processing system 11 wherein the system emulates a terminal for a data processing system 10 which is capable of accessing information from the data processing system data base, copying the information into the text processing system memory, and automatically converting the informa tion from the data processing system format into the text processing system format. Similarly, the text processing system is capable of converting information from its own data base from a text processing system format to a data processing system format and transmitting the information to the data processing system.

## Claims
CLAIMS 1. Information processing system capable of conducting data processing operations wherein the processing affects the value of the information and capable of conducting text processing operations wherein the processing affects the format of the information, characterized in that it comprises means for storing data developed by said data processing operations and means for converting the stored data from a data proces sing format to a selected text processing format. 2. Information processing system according to claim 1 characterized in that it comprises means for displaying the stored data means for defining a block of data within the displayed data and means for converting the defined block of data from a data processing format to a selected text processing format. 3. Information processing system according to claims 1 or 2 characterized in that said means for converting includes means for deleting data processing attribute codes and inserting text processing format codes. 4. Information processing system according to claims 2 or 3 characterized in that said means for defining a block of data includes means for identifying the start of said block of data as a first cursor position in said dis played data and identifying the end of said block of data as a second cursor position in said displayed data. 5. Information processing system according to claims 3 or 4 characterized in that said means for converting further includes means for replacing nondisplay data processing attribute codes with text processing space codes and inserting text processing carrier return codes at the end of each line of data. 6. Information processing system according to any one of claims 1 to 5 characterized in that it further com prises means for storing data developed bysZtid text processing operations and means for converting the stored data from a text pro cessing format to a selected data processing format. 7. Information processing system according to claim 6 characterized in that it comprises means for displaying the stored data means for defining a block of data within the displayed data and means for converting the defined block of data from a text processing format to a selected data processing format. 8. Information processing system according to of Claim 6 or Claim 7 characterized in that said means for converting includes means for deleting text processing format codes and inserting data processing attribute codes. 9. Information processing system according to of Claim 7 or 8 characterized in that said means for defining a block of data includes means for identifying the start of said block of data as a first cursor position in said dis played data and identifying the end of said block of data as a second cursor position in said displayed data. 10. Information processing system according to of Claim 8 or 9 characterized in that said means for converting further includes means for replacing text processing space codes, text processing tab codes and text process ing carrier return codes with nondisplay data processing attribute codes. 11. Information processing method for conducting data pro cessing operations wherein the processing relates to the value of the information and for conducting text pro cessing operations wherein the processing relates to the format of the information, characterized in that it comprises the steps of storing data developed by said data processing opera tions and converting the stored data from a data processing format to a text processing format. 12. Information processing method according to Claim 11 characterized in that it further comprises the steps of displaying said stored data defining a block of data within the displayed data and converting the defined block of data from a data pro cessing format to a text processing format. 13. Information processing method according to Claim 11 or 12 characterized in that said step of converting further includes the steps of defining a set of data processing attribute codes defining a set of text processing format codes and replacing said data processing attribute codes in said stored data with said text processing format codes. 14. Information processing method according to any one of claims 11 to 13 characterized in that it further com prises the steps of storing data developed by said tex p rocessing opera tions and converting the stored data from a text processing format to a data processing format. 15. Information processing method according to Claim 14 characterized in that it further comprises the steps of displaying said stored data defining a block of data within the displayed data and converting the defined block of data from a text pro cessing format to a data processing format. 16. Information processing method according to Claim 14 or 15 characterized in that said step of converting in cludes defining a set of text processing format codes defining a set of data processing attribute codes and replacing said set of text processing format codes with said data processing attribute codes.

## Description
SYSTEM FOR CONVERTING DATA PROCESSING INFORMATION TO TEXT PROCESSING FORMAT AND VICE VERSA DescriptionTechnical Field of the InventionThis invention relates generally to information processing systems and, more particularly to automatic means and methods in a text processing system for converting input data from a data processing format to a text processing format and vice versa.Background ArtPrior art computer systems have traditionally been divided into systems programmed to do data processing functions and systems programmed to do word or text processing functions.The data processing field developed earlier and is directed to information processing where the primary purpose is to affect the value of the information being processed. Data processing typically involves mathematical and other computational operations such as ordering and sorting which affect the value or substance of the information. Generally, data processing has little concern with the format of the information except to the extent necessary to make the information readable or discernible to the operator either through a display or printer.The more recently developing word processing or text processing field is directed to information processing where the primary purpose is to affect the formatting of alphanumeric data being processed with little or no regard for the value or substance of the information. Text processing typically involves formatting or arranging the information for printing into documents such as letters, text books, magazines, newspapers, etc., for dissemination to the public. The substantial differences between data processing functions and text processing functions have traditionally led to independent technology development in the two fields and independent information processing equipment and programming for providing the functions. The data processing equipment has traditionally been more elaborate and more expensive than word processing equipment.In recent years technology developments have greatly reduced the cost of information processing hardware. This has led to developments in the field of merging traditional data processing functions and traditional text pissing functions into a single computer system. Concurrent with these developments has come the discovery that the most efficient utilization of the new integrated information processing systems requires the capacity to communicate with traditional data processing systems to take advantage of the large data bases stored therein.Disclosure of the InventionThe present invention discloses a method and means for operating an interactive text processing system wherein the system emulates a terminal for a data processing system that is capable of accessing information from the data processing system data base, copying the information into the text processing system memory, and automatically converting the information from the data processing system format into the text processing system format. Similarly, the text processing system is capable of converting information from its own data base to the format of the data processing system and transmitting the information to the data processing system.In the data processing system terminal emulation mode, screens of information from the data processing system data base are displayed on the display of the text processing system. The word processing system operator has the option to interactively select blocks of information from the dis play for storage in the word processing system memory. The selection of information to be saved in the text processing system memory is accomplished by either saving the entire screen of data currently displayed or by selectively placing the display cursor at the boundaries of blocks of information within the screen to be saved. The selected information is then transferred from the display buffer into system storage.During the transfer the information is scanned for attributes peculiar to the data processing system such as field attributes and nulls. These are replaced with text processing space codes and carrier return codes are inserted at the end of each line. Once in the text processingyigstem storage the information can be manipulated using any of the available word processing functions.Information transmitted from the text processing system to the data processing system is stripped of text processing format codes prior to transmission. Brief Description of the DrawingsFIG. 1 is a logical block diagram showing the apparatus of a text processing system utilizing the present invention.FIG. 2 is a flow diagram of the routine for initiating a conversion of the information being displayed.FIG. 3 is a detailed flow diagram of the subroutine for saving the display contents of FIG. 2.FIG. 4 is a flow diagram of the subroutine for converting DP data to text processing data format.FIG. 5 is a flow diagram of the subroutine for converting WP data to data processing format. Description of an Embodiment of the InventionWith reference to FIG. 1, a system in accordance with the present invention is shown. A text processing system 11 is connected to a remote data processing system 10 through communication adapters 13 and 14 and communication link 12.The communication adapters 13 and 14 may be any standard device having the capability, at the transmitting end, of converting parallel to serial data so that the data may be communicated over external telephone lines and, at the receiving end, for reconverting the received serial data into parallel form so that it may be handleME by the receiving system. Such communication adapters will not be described in detail since they are not involved in the present invention which is directed to how transmitted data is reformatted once it is received at the text processing systemIn any event, the mode of communication over bus 12 which represents the link between the two systems is asynchronous serial communication.The communication adapter which can be used in the present invention is described in detail inEuropean Patent Application No. 82103174.7 filed on April 15. 1982.In the present embodiment, the host data processor 9 may be any known data processing system, for example IBM System 370.The text processor 11, when in communication with the data processor 10 emulates a remote terminal of the data processor, for example the IBM 3270 terminal The text processing system 11 operates as a conventional text processor when not in communication with the host data processing system 10. The text processing system may be programmed to switch back and forth between a text processing mode and data processing terminal emulation mode.The text processing system is capable of switching from an initiated data processing session to a text processing session before the completion of the data processing session and then to switch back to the data processing session and resume the incomplete data processing operations at the point where the session was switched to text processing.The text processing system includes means for initiating a data processing session in said system, means for switching to a text processing session before the completion of the data processing session, means for storing the status of the non completed data processing session during said text processing session, and means for switching back from said text processing session to said non completed data processing session.More particularly, it includes a text or word processor having an interactive display terminal for conducting said text processing operations and a data processor for conducting said data processing operations. The system further includes means activated during the data processing sessions for operating the text processor as an emulation of an interactive display terminal and means for connecting said emulated display terminal to the data processor so that the emulated display terminal functions as a display terminal for said data processor.The specific system further includes a data entry keyboard in said text processor, means for storing a plurality of different character sets, each set corresponding to the keyboard, means for selecting a character set for said keyboard for said data processing sessions and a different character set for said text processing sessions and means for switching from one of said selected character sets to the other automatically in response to the switching of sessions.The text processing system operator accesses the text processing system through operator control keys on keyboard 15.The keyboard drives a processor 16 over bus 42. The processor 16 is operably interconnected into a visual display 17, a diskette 18, a printer 13, and a random access memory 19 by a memory bus 20. A system clock 21 is provided for timing functions within text processing system 11.The information transmitted from data processor 10 to the text processor 11 is serially and asynchronously sent over bus 12 to communications adapter 14. Communications adapter 14 does a serial to parallel conversion of the input data and sends it over memory bus 20 to memory means 19 which has the capability of storing the received data and displaying it on visual display 17 as soon as it is received or at some subsequent times. Memory 19 includes a number of data areas and functional programs for operating with the data input into it through bus 20 from the communications adapter 14. The received data sent to memory 19 from communication adapter 14 over memory bus 20 is stored in text storage buffer 22 sequentially in the order in which it is received.The handling and updating of the data stored in text storage buffer 22 is controlled by routines stored within text storage buffer manager TSB block 26. These routines will be subsequently described further. A display access method program 24 controls the display of characters representative of the stored data on visual display screen 17 through display refresh buffer 25. The display refresh buffer 25 may operate in any conventional manner such as a raster scan cathode ray tube CRT .Text storage buffer TSB manager block 26 is connected to text storage buffer 22 by channel 27. The text storage buffer manager block 26 is further connected to buffer control block 23 through a channel 28. As previously indicated, the data representative of the characters is input into buffer 22. The data representative of characters is stored sequentially in text storage buffer 22 in the order in which it is received. The data received from the host data processor includes character data and attribute data peculiar to the data processor such as record length, record format, null, etc. Only those characters recognizable as text characters are displayed on the word processing system display. In displaying the characters, text character data stored in buffer 22 is communicated to display access method 24 over channel 29. It should be noted that corresponding diskette access method block 30 is used instead of display access method block 24 when communication between the text storage buffer 22 and the diskette 18 is desired.A display control block 31 is connected through a channel 32 with display access method block 24. The corresponding diskette control block 33 communicates with diskette access method block 30 over channel 34 when access to the diskette drive is required.In any event, as soon as the information from communication adapter 14 is received by the text storage buffer 22, this information is transmitted over channel 29 to display access method 24 and then via channel 34 to display refresh buffer 25. The information stored in display refresh buffer 25 is representative of the actual alphanumeric information shown on display 17. The display control block 31 serves to store flags and status information as required by the operation of display access method block 24.It should be noted that we previously described received data being transferred from the communication adapter 14 to the text storage buffer 22 over bus 20. Actually the process involves several steps. Information from communication adapter 14 is put on to bus 20 which takes the data to communication access method block 35 under the direction of communication control block 134 on line 38 after which the data is input over channel 39 to receive buffer 36 and then over channel 40 to communications monitor 37. Information from the communications monitor 37 is input over channel 41 to text storage buffer manager block 26 previously described.Then the data is input to the text storage buffer 22 over channel 27 under the direction of buffer control block 23. Since the operator controls processes being described through a keyboard 15 communicating through processor 16, standard keyboard entry processes should be described. As the operator enters each keystroke at the keyboard 15, a corresponding signal is transmitted through channel 42 to processor 16 which enters the keystroke command into the memory 19. In the memory, upon the receipt of a keystroke command, a keystroke routine is produced for keystroke service routine block 50 to handle the particular command received. This is carried out under the control of keystroke control block 51.The keystroke command is then processed via channel 43 through communications monitor 37 and cha iil 41 to the text buffer storage manager block 26 which has the program to control buffer control block 23 to carry out various processes with respect to the data stored in the text storage buffer 22.Using the hardware just described in FIG. 1, the processes of handling the received data in accordance with the present invention will now be considered. As was previously stated, when the text processing system 11 operates in a data processing system terminal emulation mode, data received from the host data processor is stored in the text storage buffer 22 of the memory 19. The data processing information includes coded information that is peculiar to the data processing system and is not part of the text processing system s normal character set. The peculiar data processing system information relates to control codes such as field attributes and nulls. The normal alphanumeric character set and special character set, e.g. , , , , etc. are common between the two types of systems. The data processing system information stored in the text storage buffer 22 is passed over bus 29 to the display access method 24 for placement into the display refresh buffer 25. The information is then made visible to the operator through display 17. When the text processing system 11 is operating in a data processing terminal emulation mode the information in memory and on the display 17 can be altered through the keyboard 15 only as allowed by the host data processor 9. If the text processing system operator desires to alter the information beyond what is allowed by the host data processor or desires to retain the data processing system information being displayed, the information must be copied from the data processing screen storage and converted to a text processing format. The text processing system must then be switched to a text processing system mode before the information can be manipulated.Referring now to FIG. 2, in order to copy information from the data processing screen, the operator places the display cursor at the start of the data to be cried. This is accomplished through cursor control keys located in the keyboard and operable in the data processing terminal emulation mode as was previously stated. When the cursor has been placed at the beginning of the information segment to be saved, the operator depresses a block define key on the keyboard which is recognized at block 201 in FIG. 2. When the block define keystroke is inserted by keystroke control 51 into the keystroke services routine 50, the text storage buffer manager 26 is invoked at block 202 to store the present cursor address as the starting address of the data processing information to be copied.At block 203 keystroke control 51 tracks cursor motion in the buffer control block 23 as the cursor is advanced through keyboard 15 to the end of the information segment to be copied. When the cursor has been placed at the end of the information segment to be copied the operator must depress either a block copy key and or an enter key at block 204 if the system recognizes either one of these keys then the text storage buffer manager 26 is invoked at block 205 to store the present cursor address as the ending address of the information segment to be copied. If neither the block copy key nor enter key is depressed at block 204 the routine will be ended.Assuming that the proper keystrokes are entered, the text storage buffer manager 26 will invoke the display control block 31 through bus 83 to display a save in progress 1 message in block 206 on the message line of display 17.Alternatively, display 17 may include a light that is adjacent a fixed save in progress message and the display control block 31 may be invoked to turn on this light.Following display of the save in progress message, a SAVE subroutine is called at block 300 to process setup for the area in which the information to be converted will be stored.Referring to FIG. 3 the SAVE subroutine prompts the operator, in step 301, through a message entered from the display control block 31 to the display screen 17 to input a code defining an area in which the saved inD2Eeation is to be stored. The implementation of the save area definition may take the form of a predetermined number of storage areas of a predetermined length, for example, 2000 bytes of storage, any one of which can be invoked by the operator entering a code name or code number from the keyboard. Conversely, the save areas may be defined as having variable lengths determined by the length of the data to be saved. In the preferred embodiment, nine save areas of variable length are predefined and can be invoked by the operator entering a numeric identifier of 1 through 9.This prompt is implemented with a default selection of save area number one if the operator fails to specify another save area number. When the operator enters a proper response in block 302, the text storage buffer manager is invoked to establish the block of storage in the text storage buffer 22. In block 303, the format buffer control 170 is invoked to establish formatting information in the text storage buffer manager from the format buffers in the keystroke services routine 50. The format storage buffers provide storage for the operator to enter a primary format and an alternate format to be used in processing information to be stored or displayed. The format information includes text processing control codes such as carrier returns and line lengths. This information is keyed and prestored in the format buffers while the system is in a text processing mode. Once the format information has been stored in the text storage buffer manager 26, the mode of the text processing system 11 is tested, in step 304, to determine if it is in a text processing mode or a data processing terminal emulation mode. As was previously stated, the text processing system 11 is capable of operating under program control in either a standard text processing mode or a data processing terminal emulation mode in which it is connected through a cpmmunications line to a host data processing system 10. Assuming that the system is operating in a data processing system terminal emulation mode then at block 305 the SAVE subroutine will transfer the data processing data aFeibute codes from the attribute buffer in keystroke services 50 to the text storage buffer manager 26.These data processing data attribute codes define the characters that are peculiar to the data processing system such as nulls and field identification codes as was previously discussed. Then in block 400 theSAVE subroutine transfers control to the CONVERT DP DATA subroutine which is shown in FIG. 4.Referring now to FIG. 4, the CONVERT DP DATA subroutine sets the space code counter and scan character count counter equal to zero in block 401. In block 402 the text storage buffer manager 26 is directed to scan the DP data stored in the text storage buffer 22 beginning at the starting address which was established in block 202 of FIG. 2. The scan is executed on a character by character . basis with the address of each character being compared to the established ending address in block 403. As each character is processed before the ending address is reached the count of the characters is compared in block 404 to the maximum line count that was established in the format established in the text storage buffer manager in block 303 of FIG. 3 and accumulated in block 405. Each scanned character is tested to determine if it is a DP data attribute such as a null in block 406. If the character is aDP data attribute then it is replaced in block 407 by a word processing space code in the line buffer where the characters are being inserted. Then, one is added to a counter in block 408 which keeps track of the number of accumulated space codes. If the character is determined not to be a data processing data attribute code then the character is assumed to be of the character set common to both types of systems and the character code is inserted into the line buffer in block 409.The subroutine continues by branch C to block 404 to process characters into the line buffer and accumulate a count until the number of characters equals the line length limits set by the format. When the line length limit is reached a branch is taken to block 412 where the total cOdatrof spaces in the line is compared to the maximum line length count. If the line turns out to be all spaces then a carrier return code is inserted in block 413 in the save area rather than inserting an entire line of space codes. This will provide a blank line when the information is either printed or displayed by the system in a text processing mode and prevents unnecessarily using memory space.If the space code count does not equal the line length count then the line must contain some text characters and the entire contents of the line buffer are inserted into the save area followed by a carrier return code in block 416. The space count counter is then set to zero in block 414 and the character count counter is set to zero in block 415 and the system is ready to process a new line of data in block 403 by branch B.When the scan address exceeds the end address in block 403 the last data in the block defined to be saved has already been processed. A branch is taken to block 410 where the information is copied from the save area into the diskette buffer 64. In block 411 the diskette access method 30 is invoked to write the data from diskette buffer 64 onto the diskette 18. Control is then returned to the save routine inFIG. 3 where it is returned to main routine in FIG. 2 in block 300.Referring back in FIG. 2 to branch A in block 207 the display control block 31 is invoked to remove the savein progress message from the display message line and the routine ends When the text processing system 11 is operating in a text processing mode and data is displayed which the operator desires to convert to a data processing format for transfer to the data processing system, the operational sequence of the system is identical to that described above until processing reaches block 304 in FIG. 3. In block 304 if it is determined that the system is in a text processing mode, then a branch is taken to block 306 wherein the WP data attribute codes are transferred from the attribute buffer in keystroke services routines 50 to the text storage buffer manager 26.The WP data attribute codes are defined as the text format control codes such as carrier return, spgys tab, etc. that are included in the normal text data stream along with the standard alphanumeric character codes. In block 500 the subroutine to convert the WP data to DP data by removing the text processing format control codes and inserting corresponding data processing field attribute codes is called. This subroutine is shown in FIG. 5.Referring to FIG. 5, in block 501 the subroutine prompts the operator to input data processing field identification codes which are peculiar to the particular data processing system to which the data will be transferred. After the operator inserts this code through the keyboard, in block 502 the line buffer is set to all null data processing characters. In block 503 the text storage buffer manager 26 is invoked to scan the display data in the text storage buffer 22 beginning at the starting address as was previously described. The characters are then scanned sequentially beginning at the starting address. While the scan address is less than the preset ending address in block 504 each character is tested to determine if it is a carrier return code in block 505.If the character is not a carrier return code then in block 506 ., the character is tested to determine if it is a space code or a tab code. If the character code is a space or tab then in block 507 a null code is inserted in the line buffer and a branch E is taken back to block 505 to process the next character. If the character code is not a space code or tab code, a branch is taken from block 506 to block 508 wherein the character code is inserted in the line buffer. Then a branch E is taken back to block 505 to test the next character.When a carrier return code is encountered in block 505 a branch is taken to block 509 wherein the field identification code is inserted into the save area. In block 510 the contents of the line buffer are inserted into the buffer save area adjacent to the field identification code. Since the line buffer was initially set to all null codes in block 502, if the first character encountered is a carrier return code the data processing field will be established as a line of all null characters. If the text characters in the line do not extend to the end of the line then whatever character positions remain following the encounter of a carrier return code will contain nulls. In block 511 the line buffer is once again set to all nulls and the field identification code is updated in block 512.Processing is then transferred back by branch D to block 504 wherein the scanning of addresses continues.When the scan address exceeds the ending address the last data character specified for the block by the operator inFIG. 2 has been processed. A branch is taken by block 504 to return processing to block 500 in FIG. 3 which then returns processing to block 300 in FIG. 2. Once again the display control block 31 is invoked by branch A to remove the savein progress message from the display message line in block 207 and processing ends.The data thus converted to a data processing format while in the text processing mode remains in the text storage buffer 22. As described here above the operator is then free to switch the system to a data processing terminal emulation mode for transferring the information from the text processing system 11 to a host data processing system 10. Likewise, data converted to a text processing format and stored on diskette while in the data processing terminal emulation mode may be processed as text processing data when the system is switched to a text processing system mode. While the invention has been particularly shown and described with reference to a preferred embodiment it will be understood by those skilled in the art that various other changes may be made by equivalent means such as, for example any other type of display, storage or memory organizations without departing from the scope of the invention as defined by the claims.