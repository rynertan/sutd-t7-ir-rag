# Data source system including a counter comparator circuit and microprocessor having multiple outputs which are to be simultaneously activated.

## Abstract
The invention relates to data source systems including digital circuits such as processors or control units in which a number of data lines are controlled in dependence of the position of a counter. A data source circuit of the system allows for several data lines to be simultaneously controlled by means of a comparison register and a comparator in that a given logic state is stored in a qualification unit, said logic state controlling the data lines when the counter position is reached

## Claims
1. A data source system with a data source circuit which includes a counter and a comperator unit with a control signal output on which a control signal is generated when the counter reaches a counter position which is stored in the comparator unit, characterized in that there is provided at least one qualification unit which is first set to a given logic state and which generates a signal on one or more outgoing lines in reaction to the occurrence of said control signal and in dependence of the logic state.

## Description
The invention relates to a data source system with a data source circuit which includes a counter and a comparator unit with a control signal output on which a control signal is generated when the counter reaches a counter position which is stored in the comparator unit. The invention also relates to a programmable processor for digital signal processing which includes an arithmetic and logic unit, a program memory, several registers and communication means in the form of input and output registers, and bus connection means for connecting said components to one another and to the environment. The invention also relates to data source circuits and programmable microprocessors including data source circuits, integrated on a semiconductor substrate. In digital data source systems including processors and control units, it is often necessary to control data lines or internal bus lines in dependence of the position of a counter. This counter counts, for example clock pulses timer or external input pulses event counter . The counter position in which a signal must be supplied on the line is laid down in a comparison register. A comparator circuit compares the position of the counter with the content of the register. When correspondence is detected, a signal is supplied whereby, for example the position of an output register is changed or an interrupt is generated. For each line to be controlled in this manner, a register and a comparator circuit must thus be provided. In order to reduce the number of comparator circuits for a given number of lines to be controlled, a solution can be used as in the Intel microcontroller 8096 described in Electronic Design, August 5, 1982, pages 165 173 . Therein, use is made of one comparator and a content addressable memory for defining the given counter positions and the associated lines to be controlled. To this end, outputs of the content addressable memory are connected to an output circuit which also receives the output signal of the comparator. Upon reception of the output signal of the comparator, the output circuit utilizes the command field of the content addressable memory for controlling the output lines. Such a solution satisfies the requirements imposed simultaneously controlling a number of output lines at an exactly defined instant and using only one comparator unit however this solution is comparatively expensive, which is of course a drawback. It is the object of the invention to provide a data source system including a data source circuit or programmable processor which enables the control of a desired number of data lines in dependence of different counter positions with a high repitition rate and simultaneously , which utilizes only one comparator unit, and which is still inexpensive. To achieve this, a data source system in accordance with the invention is characterized in that there is provided at least one qualification unit which is first set to a given logic state and which generates a signal on one or more data lines in reaction to the occurrence of said control signal and in dependence of the logic state. A data source system in accordance with the invention offers the advantage that a given logic state is stored in the qualification unit and the associated counter position the associated instant is stored in the comparator unit, which means that the means having generated and or supplied or stored the logic state and the associated counter position become available again for determining, storing or supplying a next logic state and the associated instant or for other operations. A preferred embodiment of a data source system in accordance with the invention is characterized in that the qualification unit includes a number of flipflops and a corresponding number of logic gates, an output of a flipflop being connected to an input of an associated logic gate, a further input thereof being connected to the output of the comparator unit, the outputs of the gates controlling the data lines. The data source system in accordance with the invention enables the control of several lines by means of one comparison register and one comparator, in dependence of different counter positions. For this purpose there is added a qualification unit which includes at least one flipflop for each line to be controlled. The state of this flipflop determines whether the associated line will be controlled or not by the comparator result. When the comparison register is loaded,thus determining the counter position in which a signal is supplied, the qualification unit is also loaded, thus determining which line or lines will receive this signal. A programmable processor for a data source system in accordance with the invention is characterized in that it includes a data source circuit which includes a counter and a comparator unit with a control signal output on which a control signal is generated when the counter reaches a counter position which is stored in the comparator unit, there being provided at least one qualification unit which is first set to a given logic state and which generates a signal on one or more outgoing lines in reaction to the occurrence of said control signal and in dependence of the logic state. Such a processor offers the advantage that, after the loading of a given logic state and the counter position, the processor can perform further operations without having to exert a further effect on the instant of control of the various output lines and also without being disturbed thereby. A preferred embodiment of a processor in accordance with the invention is characterized in that inputs of the comparator unit and of the qualification unit are connected to the bus connection means. The advantage of such a processor consists in that the bus connection means of the processor are not required for controlling the output lines and hence the the output register, which means that they are available for other uses ALU, registers etc. . Embodiments in accordance with the invention will be described in detail hereafter with reference to the drawing therein The data source system 10 in accordance with the invention which is shown in Figure 1 includes a data transmission device 5, at least one data source circuit The comparator unit 3 includes a comparator 3a and a comparison register 3b. The qualification unit 4 determines which line 5 will conduct the signal on output 6 of the comparator. In the present embodiment the output lines 5 control the inputs of the output register 7. However, the signals on the lines 5 may also be used for other control purposes. The comparison register 3b as well as the qualification unit 4 can be loaded The lines 5 are connected to inputs of the output register 7. These inputs may be set inputs, reset inputs or modification inputs. Outputs of the register 7 are connected to receiving devices R As appears from Figure 2, the qualification unit 4 may be composed of a number of flipflops FF1, FF2, ... FF4 and a corresponding number of AND gates E1, E2, ... E4. The inputs of the flipflops are connected to the bus 8. The output of each flipflop is connected to an input of an associated AND gate. The second input of each AND gate is connected to the output of the comparator 3b. The flipflops FF1, FF2, ... , FF4 of the qualification unit can be set to a desired state, thus determining which of the AND gates E1, E2, ... E4 will conduct the signal of the comparator 3b as soon as this signal appears. It will be apparent that the data source circuit Figure 3 shows a block diagram of a programmable processor The processor It will be apparent that the processor As appears from Figure 3, the output register 112 is also connected to the bus 120, thus enabling writing and reading of the register 112 by software. In Figure 4 is illustrated an example of one flipflop The outputs D₁ and D₂ of two flipflops of the qualification unit 144 are connected to inputs of a logic gate When the comparator output signal T is low , the signals D1 and D2 have no effect on the flipflop Situation 1 is realised by means of three parallel connected transistors T1, T2 and T3 Situation 2 should occur when the signals T, D1 and D2 are high, high and low, respectively. The transistor TB must then be turned on. However, when the signals D1 and D2 may not have an effect on the flipflop Instead of the circuit The above simple solution can be used if the information on the one hand from bus 120 or from registers 144 and 148 and thus from comparators 142 and 146 is send to the register 112 at differend timeslots as it is known at which moment of the cycle time the comparators 142 of 144 may generate a positive edge. So at further instances not interfering register 112 may be written or read under control of software. The detail of the processor