# METHOD OF PROTECTING FILE OF NUMERICAL CONTROL.

## Abstract
A numerical control apparatus is provided with a processor 102a , a control program memory 102b , a mem ory 102c holding files, and an input means 102d for ac cessing the files, and the processor 102a arithmetically processes control data supplied from outside according to a control program, so that a machine connected to the apparatus is numerically controlled. The names of files which are to be protected are stored in the memory 102c of the numerical control apparatus, and when a modification command and the name of a desired file are supplied through the input means 102d , the name of the desired file and the names of the files being protected are compared with each other. When the name of the desired file is the same as that of a file being protected, the modification of the file is executed only on condition that a processing con firmation input is supplied through the input means 102d .

## Claims
CLAIMS 1 A numerical control unit file protection system provided with a numerical control unit having a processor, a memory for storing a control program and files, and input means for accessing said files, said processor processing externally entered control data in accordance with said control program to numerically control a machine connected thereto, characterized in that the name of a file to be protected is stored in said memory, the name of an object file is compared with the protected file name in the memory when a modification command and the name of the object file are entered from said input means, and processing for modifying said file is executed, on the condition that there is a processing confirmation input from said input means, when said object file agrees with the protected file. 2 A numerical control unit file protection system according to claim 1 , characterized in that there is provided a display device which, when an object file agrees with a protected file, confirms modification processing for said file from the input means. 3 A numerical control unit file protection system according to claim 1 , characterized in that when an object file agrees with a protected file, modification processing for said file is executed by entry of a keyword from the input means and collation with said keyword.

## Description
DESCRIPTION NUMERICAL CONTROL UNIT FILE PROTECTION SYSTEMTechnical Field This invention relates to a computerized numerical control unit for numerically controlling a machine tool or the like, and more particularly to a numerical control unit file protection system capable of protecting a file stored in a memory against an erroneous updating operation.Background Art Numerical control units hereafter referred to as NC units find use in applying NC techniques to a variety of machines, and the field of application thereof is ever widening. These NC units are now constituted by computers and are capable of implements ing various functions by means of software. Recent NC units have a parameter control function in addition to the basic control software and are adapted so as to be able to store several files, with file names affixed thereto, in a submemory. By way of example, diagnosis and product iDn management are facilitated if such information as the change in status of a machine with time, as well as the operating time, is filed. Files of this kind are capable of being modified by deletions, substitutions and changes in file name, though the files also contain information which is desired to be left unchanged. The operation of NC units has become ever more simplified by adopting operator guidance and the like, and even an individual who does not possess a full understanding of NC units is capable of readily altering a file. Consequently, there are instances where important files that are not to be altered are deleted by an erroneous operation, such as by entering a file name incorrectly. A solution to this problem is desired. Accordingly, an object of the present invention is to provide a numerical control unit file protection system capable of protecting important files from an erroneous control operation.Disclosure of the Invention According to the present invention, there is provided a numerical control unit having a processor, a memory for storing a control program and files, and input means for accessing the files. The processor, in accordance with the control program, processes externally entered control data to numerically control a machine connected thereto. The arrangement is such that the name of a file to be protected is stored in the memory, the name of an object file is compared with the protected file name in the memory when a modification command and the name of the object file are entered from the input means, and processing for modifying the file is executed, on the condition that there is a processing confirmation input from the input means, when the object file agrees with the protected file. According to the present invention, a file which is to be protected, among files which undergo modification processing, is prevented from being manipulated incorrectly by an operator.Brief Description of the Drawings Fig. 1 is a block diagram illustrating an embodiment of the present invention, Fig. 2 is a flowchart of processing embodying the present invention, and Fig. 3 is a flowchart of processing according to another embodiment of the present invention.Best Mode for Carrying Out the Invention Fig. 1 is a block diagram illustrating an embodiment of the present invention and shows a numerical control unit applied to a die milling electric discharge machine. In the Figure, numeral 101 denotes a paper tape bearing punched numerical control NC command data.Specifically, the paper tape 101 stores NC command data such as positioning information for machining and M , S and T function information. Numeral 102 denotes a numerical control NC apparatus which causes a tae reader, described below, to read in the NC data from the paper tape 101, and which decodes the read NC data delivering, e.g., M, S and T function instructions to the machine side through a magnetics panel, not shuo z when the data is indicative of such instructions, anf move command we Zc to a pulse distributor, which is the succeeding stage, when the data is indicative of such a command. The NC apparatus 102 is composed of a processor 102a for executing processing in accordance with a control program, a program memory 102b for storing a prescribed control program, a data memory 102c for storing data, an operator s panel 102d for operator control, a tape reader puncher 102e, a submemory 102f for storing files, an input output port 102g, a present position counter 102h, a display unit 102i, and an address data bus 102j interconnecting the foregoing items. The program memory 102b is constituted by a read only memory ROM or by a non volatile memory and stores a numerical control program for numerically controlling a machine. By way of example, for an electric discharge machine, the program memory 102b would store a machining control program for controlling machining electrode feed, table feed and machining voltage, etc. The data memory 102c is composed of a non volatile memory which, in addition to storing NC data such as machining position data from the paper tape 101, stores a programmed machining program in an area PM in the form of parameters or user macro. Numeral 103 denotes a pulse distributor which executes well known pulse distribution computations on the basis of the move command Zc and generates distributed pulses Ps at a frequency corresponding to a commanded speed. Numeral 104 designates a known accelerator decelerator circuit which generates a train of pulses Pi by rectilinearly accelerating the pulse rate of the train of distributed pulses P5 at the occurrence of this pulse train, and by rectilinearly decelerating the same at the end thereof. Numeral 105 indicates a D.C. motor by which an electrode EP is fed for machining. Numeral 106 denotes a pulse coder which generates one feedback pulse FP each time the DC motor rotates by a predetermined amount. Numeral 107 denotes an error calculating and storing unit which is constructed of, for example, a reversible counter, and which stores a difference Er between the number of the input pulses Pi generated by the accelerator decelerator circuit 104 and that of the feedback pulses FP. This error calculating and storing unit may be constructed, as shown in the Figure, of an arithmetic circuit 107a for calculating the difference Er between Pi and FP, and an error register 107b for storing Er More specifically, assuming that the DC motor 105 is rotating in the forward direction in accordance with a command causing the DC motor 105 to rotate in this direction, the error calculating and storing unit 07 operates in such a manner that each time the input pulse P is generated, said pulse is counted up, while 1 each time the feedback pulse FP is generated, the content is counted down, and that the difference Er between the number of input pulses and the number of feedback pulses is stored in the error register 107b. Numeral 108 denotes a digital analog DA converter for generating an analog voltage proportional to the content of the error register 107b. Numeral 109 denotes a speed control circuit. It should be noted that 108, 109 construct a motor drive circuit. The operation of the arrangement embodied in Fig.1 will now be described. First, prior to machining, NC data is read from the paper tape 101 by the tape reader puncher 102e, and the NC data from the paper tape 101 is stored in the data memory 102c via the bus 102j. Next, when a start command is applied to the processor 102a via the bus 102j by manipulating the operator s panel 102d, the processor 102a successively reads and executes the machining control program stored in the program memory 102b. Specifically, required parameters NC parameters, feed speed, machining voltage, etc. are read out of the data memory 102c together with the NC data, an X axis move command Xc and Y axis move commandYc are created for moving a table not shown in X andY directions, and these commands are delivered to a table drive unit through an input output port not shown , whereby the table is positioned. It should be noted that an arrangement equivalent to the route extending from the input output port 102g to the servomotor 105 is provided for each of the X and Y axes, though not shown in Fig. 1. The Z axis move command Zc is created in similar fashion, and the M , S and T functions are delivered to the machine side through the input output port 102f. The move command Zc is delivered to the input output port 102g via the bus 102j. When the move command is applied to the pulse distributor 103 from the input output port 102g, the pulse distributor 103 produces distributed pulses P5 by performing a pulse distribution operation based on the move command Zc Upon receiving the pulses P5, the accelerator decelerator circuit 104 accelerates and decelerates the pulse rate thereof and applies the train of command pulses Pi to the error calculating and storing circuit 107. Thus, the content of the error register 107b becomes non zero, so that the DA converter 108 provides a voltage and the motor 105 is driven by the speed control circuit 109 so as to move the electrode EP. When the motor 105 has rotated by a predetermined amount, the feedback pulse FP is generated by the pulse coder 106 and is applied to the error calculating and storing unit 107. The differenceEr between the number of commanded pulses Pi and the number of feedback pulses FP is stored in the error register 107b. Thenceforth, the motor 105 iE, servo controlled so as to make the error Er approach zero, whereby the electrode EP is fed for machining and moved toward a target position. A variety of files, of which the following are examples, are registered in the submemory 10.t I. Feed velocity conforming to workpiece material II. Applied current conforming to workpiece material III. Override quantity conforming to workpiece material IV. Machine status information V. Operating time for each process Items I through III are stored beforehand as files in the submemory 102 and are called to a screen for reference when data are entered. Itesm IV, V are created as the machine is operated and are called to the screen for confirmation when necessary. The files are stored in the submemory 102f upon being provided with file names, and the files are accessed by entering the file names. Among the files there are those that are to be left unchanged. Such files require protection. To this end, according to the present invention, among the files F1, F2, F3... that are stored in the submemory 102f, files fl, f2 that are to be protected are preset as system parameter data in the parameter area PM of the data memory 102c. When the next operation is carried out, it is confirmed whether there is a protected file stored in the parameter area PM, followed by executing the following operations a file deletion b file substitution c file name change Fig. 2 is a flowchart of processing embodying the present invention. 1 To access a file in the submemory 102f, an operation command and the name of the object file are entered from the operator s panel 102d. These are transmitted to the processor 102a via the bus 102j. 2 As a result, the processor 102a is placed under the control of a file processing program in the program memory 102b and determines whether the operation command is one of the aforementioned modification commands a , b , c . If the command is not a modification command, the processing designated is executed. 3 If the command is a modification command, then the file name entered is compared with protected file names fl, f2 stored in the parameter area PM of the data memory 102, whereby it is determined whether the file is a protected file. If it is not, the designated modification process is executed. 4 If the file is a protected file, then the processor 102a causes the display device 102i t display an inquiry via the bus 102j. Specifically, the display device 102i will present a display reading OK TO MODIFY ENTERED FILE . 5 In response, the operator verifies the entered file name, checks to determine whether there is an error, and enters NO from the operator s panel 102d, whereby the processor 102a ends processing without executing the designated modification process. 6 If there is no error, on the other hand, then OK is entered from the operator s panel 102d, upon which the processor 102a executes the modification process for the file in the submemory 102f corresponding to the entered file name. Fig. 3 is a flowchart of processing according to another embodiment of the present invention. This embodiment differs from that of Fig. 2 in that confirmation of the modification process is performed by keyword entry and collation rather than by an inquiry. That is, entry of a keyword from the operator s panel 102d is set as a condition in addition to entry of the operation command and object file name.After steps 2 , 3 identical to those in Fig. 2 are executed, 7 the processor 102a determines whether a keyword is registered in the parameter area PM of the data memory 102c. If no keyword is registered, processing ends without execution of the designated process. 8 If a keyword is registered, on the other hand, the processor 102a determines whether a keyword has been entered from the operator s panel 102d. If no keyword has been entered, processing ends without execution of the designated process. 9 If a keyword has been entered, on the other hand, the processor 102a compares the entered keyword with the keyword stored in the parameter area PM of the data meory 102c. The processor ends processing without executing the designated process if the two keywords fail to agree, and executes the designated modification process when the keywords do agree. The foregoing relates to a case where the invention is applied to a die milling electric discharge machine. However, the present invention can also be applied to an NC automatic programming apparatus or the like, in which case the files would be i material files specifying cutting conditions conforming to various workpiece materials iron, aluminum, stainless steel,... , and ii files used to enter quadrants drawn on a design drawing. According to the present invention as described above, in a numerical control unit having a processor, a memory and input means, files and the name of a file to be protected are stored in the memory, a comparison is made with the name of the protected file in the memory in accordance with a modification command and a file name entered from the input means, and file modification processing is permitted when the entered file name is the protected file and, further, on the condition that there is a processing confirmation input from the input means. Accordingly, the invention prevents modification of a protected file in response to erroneous entry of a file name or an erroneous operation command input from the input means. In addition, a protected file can be modified with ease upon entry of a processing confirmation input, and modification of an unprotected file can be performed exactly as in the prior art. In other words, according to the present invention, among files which are to undergo modification processing, a request for a prescribed confirmatory operation is made with respect to a protected file, thus to protect against an erroneous operation by the operator. The present invention therefore has important practical advantages. It should be noted that while the present invention has been described in accordance with an embodiment thereof, the present invention is not limited to the above described embodiment but can be modified in various ways in accordance with the gist thereof, and that such modifications will not depart from the scope of the claim.Industrial Applicability According to the present invention, a file which is to be protected, among files which undergo modification processing, is prevented from being manipulated incorrectly by an operator. Accordingly, the present invention may be applied to protection of data in a computerized numerical control unit.