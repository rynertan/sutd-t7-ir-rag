# A METHOD OF POLLING AND A COMMUNICATION SYSTEM FOR ASCERTAINING SERVICE NEEDS

## Claims
Verfahren zum Betreiben eines Nachrichtensystems, das eine Hauptstation 18 und eine Vielzahl von Arbeitsstationen S

## Description
This invention relates to managing communication systems, and in particular to method and apparatus enabling a master control station to ascertain which of a number of operating stations using a common communication channel need service from the channel. Operating methods are known for the control of a plurality of stations using a common communication channel in which a masterstation establishes priorities and controls all use of the channel. In order to avoid interference on the channel, a protocol is usually adopted that the operating stations will transmit only when directed to do so by a message from the master station. Since the operating stations do not initiate any communications, they cannot directly call the masterstation s attention to a need for service that arises, and it is necessary for the master station to send inquiries from time to time to each of the operating stations. Each operating station replies when queried by indicating what if any service it needs. A communication system managed as described above uses considerable time in the message exchange between the masterstation and the operating stations to provide the masterstation with the information about which stations need what service. When there are many operating stations sharing the channel but ordinarily only a few of which are in need of any service, a large utilization of the facility is expended in obtaining very sparse information. This is also the case with methods and systems as disclosed in PATENT ABSTRACTS OF JAPAN, Vol. 4, no. 130 E 25 612, 12.09.80 JP patent application publication 55 82 552, and PATENT ABSTRACTS OF JAPAN, Vol. 7, no. 36 E 158 , 1181, 15.02.83 JP patent application publication 57 188 161, which both are of the type which equate station address code to the station s physical serial position along the communications channel. Another attempt to improve communication of workstations in a network with the master control station is the assignment of a recurring time window during which the workstation may initiate a transmission on a serial bus of the master control station excluding all other workstations, c.f. European patent application publication 0 052 956. It is an object of the invention to remedy the shortcomings of the prior art methods of polling and communication system for ascertaining the need for service of one or more of a plurality of working or operating stations of a communication system controlled by a single master control station. The problem the invention addresses resides in shortening the time and lowering the load of the common communication channel for providing the masterstation with the information about which operating station need what service, i.e. improving the operation of a communication system. A Method for operating a communication system and such system which solve the problem underlying the invention are defined in the appendant claims. According the invention, the masterstation initially directs a single inquiry signal to the aggregate of the operating stations and receives a response from this aggregate indicating by its structure which of the several individual stations currently needs service from the communication facility. Messages are thereafter exchanged between the masterstation and those operating stations only which need service to inform the masterstation as to the details of the service needed. The many message exchanges between the masterstation and the individual stations needing no service is eliminated. The invention provides a method for operating a communication system and such system which has a masterstation and a plurality of operating stations S is distinct for each station S As shown particularly in fig. 1, communication system 10 includes masterstation 18, a plurality of operating stations of which 20 is exemplary, and inbound coaxial cable 14 conveying signals from the masterstation and all operating stations to head 16, and outbound coaxial cable 12 conveying signals from head 16 to the masterstation and every operating station. A forward communication channel for tranmission of system supervisory signals from the masterstation to the operating stations is provided by a defined frequency band with transmissions from the masterstation propagating on the inbound cable to the head and thence on the outbound cable to every operating station. A return communication channel for transmission of system supervisory signals from every operating station to the masterstation is provided by a defined frequency band with transmissions from the operating stations propagating on the inbound cable to the head and thence on the outbound cable to the masterstation. Amplifiers, splitters, and other devices may be used as appropriate to control signal level and impedance of the channels as required by circumstances according to well known principles such design details are unrelated to the subject invention. As shown particularly in Figure 2, masterstation 18 includes processor 30, memory 32, timing generating circuits 38, uart 36 meaning universal assynchronous receiver transmitter , polling logic 34, and transmitting receiving modem 40. Bus 42 interconnects the processor, memory, uart and polling logic for tranfer of parallel data. Modulated carrier signal is transferred from cable 12 to modem 40 on link 58 and from modem 40 to cable 14 on link 60. Serial bit data is transferred as shown on links 46, 48, 50, and 52. Timing signals are transferred from timing generating circuits 38 to polling logic 34 on link 54. Other timing and control connections not shown are used to enable the processor to control the operations of the stations in accordance with well known design principles. Station 18 may communicate with other computers or peripherals through I O devices 44. Operating station, shown more particularly in Figure 3, includes processor 60, memory 62, uart 66 polling logic 68, delay switch bank 90, timing circuits 70, and transmitting receiving modem 64. Connector 86 carrying carrier modulated signals connects cable 12 to modem 64 connector 86 connects modem 64 to cable 14. Connectors 76 and 78 interconnect polling logic 68 and modem 64 connectors 80 and 82 interconnect uart 66 and modem 64 all carrying serial bit data . Connector 88 connects timing circuits 70 to polling logic 68. Bus 72 carrying parallel byte data interconnects processor 60, memory 62, uart 66, switchbank 90, and polling logic 68. In the particular embodiment described here, the forward and return channels are used exclusively for communications between the masterstation and each of the operating stations to effect supervision and control of a communication network serving the several operating stations. Other communication channels are used to carry intercommunication among the operating stations. Messages are sent over the channels by modulated carrier in the form of packets, each with a start bit, 8 information bits, a parity bit odd parity , and a stop bit. Each operating station has a unique address and is programmed to respond to messages starting with its own address and to those with a broadcast address. In order to avoid interferring transmissions on the commonly used communication channels, the operating stations are programmed to transmit only when directed to do so by the masterstation, which thus completely controls the use of the channels. In the exemplary embodiment, there are 2047 operating stations with addresses running from 1 to 2047. The broadcast address is 0. The operation of the system is as follows. Before initiating regular communications on the system, each operating station S In routine operation, the processor 30 of the masterstation initiates a poll by transmitting a distinctive five byte message which is transmitted through the uart 36 and the modem 40 to channel 14. The first two bytes are the broadcast address, i. e., 00000000, 00000000, in binary the third byte is without information content, being reserved for system expansion the fourth byte is 00000000 , a command code indicating the message is a polling request, and the fifth byte is used to generate the polling sync signal. This fifth byte is 1000 0000 in binary. When encoded for transmission by uart 36 in an 11 bit packet this will produce an output sequence of a low the start bit , a high, eight lows the last being the parity bit , and a high the terminator bit . The transition from the parity bit to the terminator bit is used as the timing signal for syncronizing the polling. During the long sequence of 0 s in the fifth byte the polling logic 34 is armed by an output from the processor, and the rising edge of the terminator bit triggers the start of counting circuits in the polling logic which start counting timing pulses delivered from timing generator 38 on connector 54. The polling request message is processed by modem 40 and propagated over the communication channels to each of the operating stations. In general, the operating stations may receive the polling request message at different times because of propagation delays. At exemplary station 20, the message is received and demodulated by modem 64 and passed in serial bit form to uart 66, which puts the information bits on the bus 72 in parallel form. The processor 60 decodes the message and identifies it from the first four bytes of the message as a polling request. Then if the station needs service, the processor during the sequence of 0 s in the fifth byte arms the polling logic 68. When thus armed, polling logic 68 is triggered by the rising edge of the last bit of the fifth byte and begins to count timing pulses supplied on connector 88 from timing circuits 70. The rising count of these timing pulses is compared with the stored delay value d The reply pulses from all the responding operating stations will be propagated along the return communication channel to the masterstation where, because of the manner of selecting the several d When the service need map is completed, the masterstation processor scans the map systematically and where it finds a 1 at a particular position it associates the position with an operating station address. This association may be done through a look up table or simply through an algorithm generating the station address from the map position. The masterstation processor 30 then, using the address, sends one or more addressed messages to the corresponding operating station to ascertain what service is required and provide that service. After proceeding systematically through the service need map and providing whatever service is needed by all the stations indicating that they need service, the processor initiates another polling cycle to obtain an updated map of service needs of the operating stations. The method and apparatus described are readily implemented in detail with standard circuitry and programming well known to those skilled in the communications and computer art and need not be further expanded upon.