# APPARATUS FOR SHUTTING OFF GAS

## Claims
Gasabstellsystem, das

## Description
The present invention relates to a gas shut off system for prevention of explosive accidents caused by town gas, liquefied petroleum gas, and the like, and in particular to a gas shut off system comprising a control unit including a microcomputer whereby a shut off valve is automatically closed in response to detection of abnormal conditions such as gas leak which is made by the aid of a gas flow rate sensor, and using a battery as a power supply. Town gas and LP gas are being widely used as an energy source for cooking, heating, hot water supply, or the like. However, if there is any failure of handling, these gases can explode and cause a great accident. For example, recently high altitude and airtight houses have caused the neighborhood to suffer damage from gas accidents Therefore, putting safety provisions and gas devices for prevention of the gas accidents to practical use should be early achieved in view of social conditions. For prevention of the gas accidents, fuse cocks, reinforced gas hoses, town gas alarm devices, shut off systems associated with alarm devices, and the like have been hitherto employed. These have not been spread to existing houses because of troublesome installation and are not necessarily effective for preventing explosive accidents with suicidal intent which account for most of the accidents. Of the causes of gas accidents, short time great amount discharge of raw gas resulting from the separation of a tube from a gas cock or the intentional opening of a gas cock and abnormal heating or oxygen deficiency resulting from the forgetting of turning off of devices are important factors for the accidents, the accidents with suicidal intent relating to the former. In these accidents, the flow rate pattern such as magnitude of gas flow rate and continuous time of flow rate becomes abnormal as compared with normal conditions. Therefore, it is possible to prevent a wide range of gas accidents including the accident with suicidal intent by automatically shutting off the gas main when the gas flow rate pattern becomes abnormal. Furthermore, the installation can be improved by combining the system with a gas meter. The estimation of pattern of use, comparison with an abnormal pattern, and the like can be realized by means of a microcomputer. DE A 32 42 750 describes a gas shut off system according to the preamble of claim 1.In this system, the actual flow rate is measured and compared with an upper limit value. If the actual value exceeds the upper limit value, the fluid flow is forcibly shut off. An object of the present invention is particularly to provide a long life use for a battery used as a power supply in a system for previously preventing explosive accidents caused by gas such as town gas and LP gas used as an energy source for cooking, heating or hot water supply in a house. A gas shut off system according to the present invention comprises the features of claim 1. It includes a microcomputer programmed in terms of, for example, explosive limit to shut off the discharging of gas before the occurrence of gas explosion, by the computation based on gas flow rate and discharge time. Also included in view of workability is a battery as a power source. Therefore, a gas shut off system according to the present invention is arranged to minimize the consumption of the battery and to provide a long time use of the battery. In this system, a gas flow rate is detected by a flow rate sensor, and a microcomputer determines whether the flow rate pattern is normal or abnormal on the basis of the detection of the gas flow rate and actuates a shut off valve to shut off the gas in response to the determination of abnormality. This system has greater ability for prevention of accidents as compared with conventional gas accident preventing countermeasures. In addition, hardware is combined with the gas meter, resulting in easy installation into existing houses and improving the workability. Preferably, the system comprises a lithium battery having excellent long time realiability as a power source, a flow rate sensor having a reed switch, an exclusive CMOS 4 bit 1 chip microcomputer in which the consumption of current is low, an indicator including a LED and having an excellent visibility, and a self hold type shut off valve which matches the characteristics of the lithium battery. The arrangement enables the system to be operated by one lithium battery over ten years. The reason that a battery has been selected as a power source of this system is as follows. Namely, in the case of use of the commercial power, it is required to provide a power cord between a power line and a gas meter, resulting in complex work and unsuitability for existing houses. Furthermore, when the power cord is intentionally or accidentally cut or when the supply of power to this system is stopped due to service interruption and the like, this system completely becomes unusable. Therefore, a system including a battery as a power source must be required. However, the duration of service of the battery is limited and therefore it is required to exchange the battery with a new one when the voltage is dropped due to consumption. Period of the battery exchange as long as possible is desirable for the user because of reduction of labor. An embodiment of the present invention will be hereinbelow described with reference to the drawings. A flow rate sensor 2 which is a means for measuring a flow rate is mounted on a gas meter 1 as shown in Fig. 1. A signal from the flow rate sensor 2 is applied to a control unit 3 for performing the determination of gas shut off. The control unit 3 computes a gas flow rate and generates a gas shut off signal when the gas flow rate meets predetermined conditions in terms of an abnormal flow rate. In response to the gas shut off signal, a shut off valve 4 provided in a gas passage is actuated to close the gas passage. Furthermore, the control unit 3 is responsive to signals from abnormality sensors such as an earthquake sensor and a CO sensor to generate the shut off signal to shut off the gas passage when predetermined conditions are satisfied. The control unit 3 includes a microcomputer programmed to effect the determination of the gas shut off, the microcomputer generating a shut off signal to close the shut off valve 4 when gas continuously flows for a predetermined time period. Namely, in the case of abnormally great flow rate, the shut off signal is generated during a short time, whereas even if the flow rate is small, the determination of gas leak is made when the flow rate is not varied over a long time and the shut off signal is generated, so that the discharge of gas is automatically stopped before reaching the explosive limit even if a closed space is filled with gas. This is effective for the abnormal condition that raw gas is continuously discharged with the cock of a gas device provided in a room being opened. Furthermore, an earthquake sensor is effective as means for preventing the leak of raw gas and explosive accident caused by the damage of the gas passage provided downstream of the gas meter 1 or the connecting portion between the gas passage and the gas device due to earthquake, while a CO sensor is effective as means for detecting the permeation of carbon monoxide CO in a room due to incomplete combustion of a gas apparatus. These sensors are provided as an abnormality sensor. The microcomputer of the control unit 3 can be set to a standby mode. The standby mode means a condition in which the microcomputer waits for a specific signal, i.e., an interruption signal. When the signal is received in the condition, it returns to a normal operating condition operating mode . Generally, current required when the microcomputer is in the standby mode is several percents of the current required in the operating mode, the value of the current being small. The reason is that most of functions are stopped in the standby mode. The control unit 3 receives an output of the flow rate sensor 2 arranged to count the reciprocating movements of the diaphragm of the gas meter and determines whether or not the gas flow rate periodically read is coincident with the gas aptitude use condition previously programmed. If the gas flow rate is coincident with the aptitude use condition, the measurement of flow rate is subsequently made. On the other hand, if it does not agree therewith because of abnormality, a gas shut off signal is generated to shut off the shut off valve 4. The comparison of the gas flow rate and the gas aptitude use condition is made for an extremely short time, and the microcomputer is in the standby mode except this comparison process, resulting in considerably preventing the consumption of the battery. The circuit including the control unit 3 is shown in detail in Fig. 2. A flow rate signal from the flow rate sensor 2 provided in the gas meter 1 is inputted through an interruption input terminal iNT1 to the microcomputer 6 of the control unit 3. A signal indicative of abnormality from the abnormality sensor 5 is supplied through an abnormality sensor processing circuit 7, an OR gate 11, and an interrupt input terminal iNT2 to the microcomputer 6. The abnormality sensor processing circuit 7 comprises, for example, a chattering absorption circuit if the abnormality sensor 5 has a contact output. The shut off output is applied from an output terminal In order that the shut off valve 4 is of the one shot self hold type, for example, magnetic force of a permanent magnet is used for maintaining the shut off valve 4 to the opening condition, and for setting the same to the closing condition, an one shot current is applied to an electromagnetic coil so as to generate the magnetic force having a polarity inverse to the polarity of the permanent magnet and the shut off valve 4 is set to the closed condition by means of both the electromagnetic force and the force of a spring and then maintained in the closed condition by the aid of only the force of the spring. Setting the same again to the opening condition is achieved by an external force such as manual force. At this time, the electromagnetic coil generates counter electromotive force. Therefore, this counter electromotive force developed across the electromagnetic coil of the shut off valve can be used as the return signal. When this counter electromotive force is applied to a junction type N channel FET 10 making up the return signal detecting circuit 10, this FET 10 becomes OFF during the time period that the counter electromotive force is below cut off voltage. The output of the return signal detecting circuit 9 is supplied through the OR circuit 11 and the input terminal iNT2 to the microcomputer 6 and therefore only one OR circuit 11 can be used as a logic circuit. The reference numeral 19 represents a light emitting diode which is one kind of indicators for indicating that the shut off valve 4 is in the shut off condition, only one diode being used. The light emitting diode 19 is controlled through an output terminal The operation made in accordance with such an arrangement will be described hereinbelow. When the shut off valve 4 is set to the opening condition, the first output terminal Fig. 3 is an illustration of the arrangement of the microcomputer 6. The microcomputer 6 has a standby mode as described above and the standby control is performed as follows. A stop command from a CPU stops the operation of a system clock generator 21, and therefore the system clock ø is stopped and the microcomputer 6 is set to the standby mode. Thereafter, in response to the application of an interrupt signal through the input terminal iNT2, the system clock generator 21 is again energized so that the microcomputer is returned to the operating mode. The power supply current I A timer 14 comprises a generator for oscillating a crystal 12, a divider for dividing the frequency of the generator, and a counter for counting time base signals produced by the divider. Fig. 4 is a timing chart in terms of the circuit of Fig. 2. This timing chart represents the condition that the shut off valve 4 is closed in response to the flow rate sensor 2 detecting that the gas flow becomes more than a predetermined flow rate. Before a time tø, the shut off valve 4 is not closed and therefore an output terminal In response to the flow of gas, the flow rate sensor 2 is turned on and off in accordance with the gas flow rate. When the flow rate sensor is turned on at the time tø the input signal to the input terminal iNT1 of the microcomputer 6 is changed from Lo to Hi and the microcomputer 6 allows an interrupt to occur in response to the positive edge, and therefore the microcomputer is transferred from the standby mode to the operating mode. The microcomputer measures the time Tø between the previous iNT1 interrupt and the present interrupt by means of a timer and then compares the measured time Tø with a shut off condition T When the shut off valve is manually opened at a time t7, a counter electromotive force negative voltage is developed in the coil of the shut off valve. The FET 10 is turned off by the negative voltage and therefore a positive edge from Lo to Hi is inputted to the input terminal iNT2 of the microcomputer. Thereby, the microcomputer 6 is set to the operating mode, confirms that the shut off valve 4 has been opened, and returns the outputs of the output terminals An output terminal Fig. 5 is a timing chart for explaining the conditions when the abnormality sensor 5 of Fig. 2 circuit is energized. When abnormality has been detected by the abnormality sensor 5, the detection signal is inputted as an interruption signal to the input terminal iNT2 time 12 . In this case, the microcomputer is set from the standby mode to the operating mode to check a signal supplied to the input terminal iNT2. The shut off condition that the shut off is performed when abnormal state is continued over a predetermined time T Here, a detailed description is made in terms of the indication by the light emitting diode 19. Only one light emitting diode is used for indicating the shut off and return. The shut off is indicated by turning on and off the diode, while the return of the shut off valve is indicated by lighting the same for a long time. The shut off, as indicated in Figs. 3 and 4, is roughly divided into shut off caused by flow rate and shut off caused by the abnormality sensor. Because the shut off cause is different, it is desirable that the shut off cause can be estimated in accordance with the indication. Therefore, the turning on and off pattern for indicating the shut off condition is made as shown in Fig. 6, for example. In Fig. 6, the reference character Now, a light emitting diode which has one package and enables to emit two different colors generally, red and green is available. If the diode is used, the output of the microcomputer 6 is increased by one and, in accordance with the pattern of Fig. 6 With the shut off valve 4 being opened, only when the flow rate sensor 2 is varied from off to on and the abnormality sensor 5 detects abnormality, the microcomputer 6 is set to the operating mode. Furthermore, even if it is in the operating condition, after the termination of predetermined processes, it is again returned to the standby mode. Therefore, the time period T where For example, when It will be seen from the above equation that the current I On the other hand, with the shut off valve 4 being closed, the output of the output terminal In addition, because the light emitting diode 19 is turned on and off, it is possible to reduce the average consumed current as compared with lighting. Fig. 7 illustrates another embodiment of the present invention. A logic circuit 15 receives a signal from the abnormality sensor 5 through the abnormality sensor processing circuit 7 when the shut off valve 4 is opened and then inputs the signal through the input terminal iNT2 to the microcomputer 6. On the other hand, when the shut off valve 4 is closed, a return signal from a return signal generating section 16 comprising a reed switch and so on is inputted through a return signal processing circuit 20 to the microcomputer 6. In the embodiment of Fig. 2, the outputs of the output terminals A further embodiment of the present invention will be described with reference to Fig. 8. The arrangement shown in Fig.8 does not include the above described abnormality sensor 5. A control unit 3 includes a microcomputer 6 having a standby mode function. The microcomputer 6 is switched between the operating mode and the standby mode in accordance with software. Here, the operating mode means the condition that the microcomputer 6 is normally operating, and in this case all functions are set to the operating conditions. On the other hand, since the functions are almost set to the stop condition in the standby mode, the consumed current is reduced to about several percents of that of the operating mode. After the microcomputer 6 is once set to the standby mode, it maintains the standby mode until a return signal from a return signal generating section 16 is inputted to its interrupt input terminal iNT2. In response to the input, the microcomputer is again set to the operating mode. Namely, as shown in Fig. 9, when the microcomputer 6 is in the operating mode, a shut off signal is generated at a time t1. When the shut off valve 4 is set to the closed condition at a time t2, the return signal generating section 16 is switched from on to off. When time goes on to t3, that is, a predetermined time period has elapsed from the time t1, the generation of the shut off signal is stopped. Thereafter, the microcomputer 6 is switched from the operating mode to the standby mode at a time t4. When the shut off valve 4 is set to the opened condition at a time t5, the return signal generating section 16 is set to on and a return signal is inputted to the interruption input terminal iNT2 of the microcomputer 6, and therefore the microcomputer 6 is again switched from the standby mode to the operating mode to start to read a signal from the flow rate sensor 2. A still further embodiment of the present invention will be described with reference to Fig. 10. In Fig. 10 arrangement, the disconnection of the shut off valve 4 can be detected. In Fig. 10, the reference numeral 13 represents a battery and the on and off of a reed switch of a flow rate sensor 2 are converted into Hi and Lo voltage signals which are in turn inputted to the input terminal iNT1 of the microcomputer 6. Numeral 16 designates a return signal generating section which uses a reed switch , and a return signal processing circuit 20 converts the on and off of the reed switch 16 into Hi and Lo voltage signals and inputs them to an input terminal iNT3 of the microcomputer 6. In the shut off condition, the reed switch 16 is off and the output of the return signal processing circuit 20 is Lo. Numeral 17 represents a disconnection detecting section which has a transistor 18. The microcomputer 6 receives a signal from the flow rate sensor 2, processes the signal in accordance with a predetermined process procedure, and checks whether or not the shut off should be performed. If the shut off condition is satisfied, a shut off signal is outputted from the output terminal As understood from the above, the present invention relates to a system which is more effective in preventing gas accidents such as explosions resulting from the separation of a rubber tube from a gas cock and the intentional opening of a gas cock and a fire and oxygen deficiency resulting from the forgetting of turning off of devices, as compared with conventional countermeasures. Furthermore, the system is combined with a gas meter and uses a battery having long time reliability as a power source. Therefore, it is possible to maintain high reliability for a long time and to employ the system for existing houses.