# APPARATUS FOR OBTAINING DERIVATIVE OF CHARACTERISTIC CURVE, AND METHOD OF CONTROLLING OPERATION, OF ELECTRONIC DEVICES

## Claims
Vorrichtung zur Gewinnung einer Ableitung für eine Kennlinie eines elektronischen Gerätes 40 mit einer ersten Einrichtung 41 zur Bereitstellung einer elektrischen Vorspannung für das Gerät zwecks Bestimmung eines Arbeitspunktes auf der Kennlinie,

## Description
This invention relates to apparatus for obtaining a derivative of a characteristic curve, and to methods of controlling the operation, of electronic devices, e.g. semiconductor lasers. Semiconductor laser diodes are frequently used as radiation sources in optical fiber communications, as well as in other fields of technology. In many cases, the laser is operated in a pulse mode, e.g., having a two level output, with the levels corresponding to logical one and logical zero, respectively. For instance, digital laser transmitters for optical communications frequently are driven by a high frequency modulation current superimposed on a dc bias current. The magnitude of the dc bias current is typically chosen so as to bias the laser near threshold. This practice results in a laser output such that the logic zero corresponds to no, or essentially no, radiation emitted from the laser, and the logic one level to a finite radiation intensity emitted from the laser. The dc bias current serves several purposes, but foremost among these are the functions of minimizing turn on delay and minimising the amount of current that must be switched at the data rate. Because of possible drift in laser threshold due to aging and temperature variations, it is typically necessary to stabilize the bias current using feedback. Several methods are known for achieving stabilization. In systems applications, it has been the practice to use optical feedback, with an external photodetector either at the backside of the laser or at the front, using an optical fiber tap. See, for instance, pp. 182 186 of the article by P.W. Shumate and M. DiDomenico, Lightwave Transmitters , of Based on these and other considerations, it would be advantageous to have available a method for stabilizing of the bias point at or near threshold. The invention will be described by way of example with reference to the accompanying drawings, in which Analogous features occurring in different figures are generally identified by the same reference numeral. As is well known, the dynamical resistance of a laser, i.e., the first derivative of its V I characteristic, typically has a kink at threshold. This is illustrated in FIG. 1, which shows the quantity dV dI as a function of the forward current through a semiconductor laser. Section 10 of the curve is the dynamical resistance below lasing threshold, and section 11 above losing threshold, with 12 referring to the kink in the dynamical resistance which coincides with the losing threshold. See, for instance, R.W. Dixon, First and second derivative measurements of semiconductor laser I V characteristics have been reported. These measurements were typically accomplished by injecting a sinusoidal low frequency test current ΔI cos ωt into the laser. The first derivative dV dI was measured by synchronously detecting the component of the voltage response at frequency ω. The second derivative d²V dI² was measured similarly by detecting the component of the voltage response at 2ω. Higher order derivatives can, in principle, be measured by detecting additional harmonics of the test response. Unfortunately, the unavoidable presence of harmonic distortion in the signal source leads to difficulty in accurately measuring second or higher order derivatives. Furthermore, this method requires relatively elaborate instrumentation. Methods are known for tracking and stabilizing the laser bias at threshold. For instance, D.W. Smith and P.G. Hodgkinson, An all electronic method of threshold detection was disclosed by A. Albanese, The above method requires the detection of the modulation signal by the feedback circuit, necessitating the use of high frequency electronic circuitry. The method is also sensitive to the frequency of occurrence of logic ONE pulses in the data, requires careful tuning out of the laser series resistance, which must track with temperature, and is hampered especially by the fact that many lasers do not show strong junction voltage saturation at threshold. Canadian patent 1,101,923 discloses a method of operating an injection laser that involves applying a single component sinusoidal test signal of frequency f U.S. patent 4,106,096 discloses a dual frequency technique for electronically measuring a higher order derivative of the I V characteristic of a semiconductor device. The technique involves applying a test signal to the device, the test signal having two phase locked sinusoidal components of frequency f₁ and f₂, respectively. It further involves detecting the response of the device to the test signal at the difference frequency f₁ f₂ . As shown by the above discussion, such methods for stabilizing the bias current of a laser at or near threshold have considerable drawbacks. Due to the importance of reliably stabilizing the bias current of a laser at or near threshold, over a wide range of operating temperature and other operating conditions, a simple and inexpensively implemented method that is substantially free of the drawbacks associated with such methods would be of considerable interest. According to one aspect of this invention there is provided apparatus as claimed in claim 1. According to another aspect of this invention there is provided a method of controlling the operation of an electronic device, as claimed in claim 13. In its application to a laser the invention relies on the electrical characteristics of the laser, but does not require saturation of the laser junction voltage, and is insensitive to both laser series resistance and data pattern. In one embodiment of the invention, controlling an electronic device includes dithering the bias with the nonsinusoidal test signal and synchronously detecting the responsive signal. For instance, if the bias is a bias current, the test signal is advantageously a test current having first and second nonsinusoidal preferably square wave components, whereby the derivative of the V I characteristic can be determined at two points close to the bias point, and d²V dI² determined in a way that is analogous to the fundamental definition of the second derivative. Still higher derivatives can easily be obtained by extension of this procedure, including addition of further nonsinusoidal components to the test signal. The invention can also be embodied in apparatus for measuring a device characteristic, e.g., a higher order derivative of the voltage across an electronic device for instance, a semiconductor laser or a tunneling diode as a function of the current through the device, or of the light output of a semiconductor laser as a function of bias current. The invention may also be embodied in a communication system comprising a semiconductor laser radiation source, an optical fiber transmission medium, means for modulating the output of the laser at a signal frequency, means for coupling the output radiation into the optical fiber, and means for detecting the radiation, after transmission through a length of fiber. The laser has a V I characteristic that relates the voltage across the laser to the current therethrough. The system also comprises means for providing a bias current to the laser, and means for changing the current through the laser. Furthermore, the system comprises electronic means for regulating the bias current, typically such that the bias current is maintained equal to the current corresponding to a particular point on the V I characteristic, e.g., at or near the lasing threshold of the device. The current that corresponds to the laser threshold typically changes as a function of temperature and or time. It is to be emphasized that in a system embodying the invention the bias current is not necessarily maintained constant, but instead, the system is regulated such that the bias current tracks the threshold current, or other appropriate point on the V I characteristic. The means for regulating the bias current comprise first means for providing a test current to the laser, the test current comprising a nonsinusoidal first component of frequency f₁ substantially lower than the signal frequency, and also for obtaining a first signal that is substantially proportional to the test current caused variation of the voltage across the laser. The regulating means further comprise second means for obtaining a second signal that is substantially proportional to a derivative of the V I characteristic at the point corresponding to the bias current provided to the laser, third means for obtaining a third signal that is substantially proportional to the difference between the second signal and a reference signal, and fourth means for changing the bias current in response to the third signal. Controlling the operation of a communication system in this manner is a particular example of a broader process control technique. In general, a process can be described by specifying one or more variables X The general technique comprises determining a derivative of a process variable as a function of a process parameter, i.e., determining d In stabilizing a semiconductor laser, for example, the invention may use a novel real time digital technique for determining voltage derivatives d Unlike the known harmonic detection scheme, the present invention, to be referred to as Phased Digital Derivative Extraction PDDE , uses test currents that need not be sinusoidal, and which preferably are square wave currents. This is a significant departure from the prior art, which results in the possibility of using well established digital technology in the implementation of the method. We will next demonstrate the principles of PDDE by reference to the determination of the first order voltage derivative, followed by discussion of the determination of second and third order voltage derivatives. From this, the general principle for determining any order derivative will emerge. The first voltage derivative versus current is measured by applying a small amplitude typically square wave test current ΔI₁ of frequency f₁ to the laser, while typically slowly sweeping the bias current I An exemplary circuit for determining ΔV₁ in response to the test current is schematically depicted In FIG. 4. Current source 41 causes dc bias current I In a circuit as depicted In FIG. 4, only signal components varying at the same frequency as the test current add in phase at the output. All other components are mixed to some nonzero frequency and then eliminated by the low pass filter. From the definition of the derivative, dR The second voltage derivative can thus be determined by applying a two component test current to the device. One of the components, of amplitude Δ ₁, has frequency f₁ and is employed as previously described. The other component has amplitude ΔI₂ and frequency f₂ and is employed to establish two measurement points A and B, separated by ΔI₂. As before, these components typically are nonsinusoidal, advantageously being square waves. For instance, the former might be a 1 kHz dither of amplitude 500 µA, while the latter could be a 125 Hz dither of amplitude 1 mA. FIG. 7 shows an exemplary test current for use in determination of the second voltage derivative. Superimposed on the bias current I An exemplary circuit for determining the second voltage derivative of a laser V I characteristic is shown schematically in FIG. 5. The close similarity of this circuit to the previously described circuit for determining the first derivative is apparent. The normal output of clock 42 is fed to N digital counter 51, voltage scaling summing junction 52, and the A input of 2 1 multiplexer 53. The purpose of 51 us to generate the ΔI₂ signal at frequency f₂. Clock 42 also has inverted output 50 which is fed to the B input of 53. The multiplexer steers either the normal or the inverted clock signal to the comparator input of synchronous detector 45. The selection of the normal or inverted clock signal is controlled by the signal at frequency f₂, shifting the phase of the comparator input by 180⁰ at intervals of 1 2f₂. This has the effect of multiplying the detector input by both an f₂ and an f₁ component, resulting in multiplication of any voltage component at frequency f₁ by 1 during the interval 0 t 1 2f₂, and by 1 during the interval 1 2f₂ t 1 f₂. The detector output, after lowpass filtering, is proportional to ΔV The third voltage derivative can be computed in similar fashion. Selecting four points A, B, C and D on the I V curve where resistance is to be measured, with, for simplicity, points B and C chosen to coincide, it is easy to show that An exemplary test current useful for determining the third derivative is illustrated in FIG. 8. The waveform consists of four components a dc bias I FIG. 6 schematically illustrates an exemplary circuit capable of determining the third voltage derivative of the V I characteristic of a device 40. The similarity of this circuit to the one illustrated in FIG. 5 is evident. The sole difference is a digital 2 counter following 51. The output of 60 changes once during a complete cycle in f₂. When the output of 60 is summed with the signals varying at f₂ and f₁, the staircase function of FIG. 8 is generated. The signal detection is synchronous as before, and the subtraction operation required for determining the third derivative will be accomplished by clocking the synchronous detector 180⁰ out of phase during the B and C intervals relative to the A and D intervals. From the preceding discussion, it is apparent that derivatives of arbitrary order can be produced. For example, a fourth order voltage derivative can be generated using the exemplary test current illustrated in FIG. 9, with the appropriate phasing of the detecting mixer. The current illustrated in FIG. 9 consists of four square waves superimposed on the dc bias current. The exemplary ac components have frequenices 3f₂, 2f₂. f₂, and f₁. It is also possible to measure several derivatives simultaneously, by using the same test current and dedicated mixers. For example, using the test current illustrated in FIG. 8 with test intervals, respectively, A, B, D and C, dV dI is measured by applying 1 1 1 1 phasing to the mixer, d²V dI² by applying 1 1 1 1 phasing, and d³V dI³ by applying 1 1 1 1 phasing. This scheme also can be extended to derivatives of order higher than the third, as will be apparent to those skilled in the art. Mathematical analysis of the PDDE method shows that the method in principle can be highly accurate, with the magnitude of the error increasing as the order of the derivative increases, and as the ratio of ΔI₁ and or ΔI₂ to I Although the PDDE method can be used to form the voltage derivative of any I V device characteristic, and can, in principle, be used to determine the derivatives of one system parameter with respect to another system parameter, a particularly advantageous application of the method is in the stabilization of a semiconductor laser at or near the threshold of the laser, as will now be described. FIG. 2 shows d²V dI² of a laser V I characteristic, as a function of I The functional diagram of an exemplary feedback loop is shown in FIG. 10. Block 100 produces a voltage proportional to either the second or third order derivative, measured in response to a test current produced by current generator 43. The output voltage of 100 is inverted and summed with a reference voltage V In a particularly advantageous stabilization scheme, the second derivative is used to locate threshold. This can be achieved as follows when power is applied to the laser, the current is pre biased to a point known to be above threshold, e.g. point C in FIG. 2. Using feedback with an error signal produced by the second derivative, the bias current is forced to converge to point B in FIG. 2, just above threshold. At this time, second derivative stabilization is complete, and laser bias could be maintained at this point. However, it may be desirable to go to third derivative stabilization and force the bias current to point G, precisely at threshold, in FIG. 3. In that case, one can switch to a third derivative based error measurement, and apply a negative kickback current to push the laser bias into a region of third derivative stability near point G in FIG. 3. This kickback current will initially force the bias from somewhere near point I in FIG. 3 to somewhere between points J and H. Feedback will then cause bias to converge to point G. This advantageous combined second third derivative stabilization scheme will now be described. With component 100 set to produce a voltage proportional to the second derivative, and power applied to the circuit of FIG. 10 at time t 0, I If, at time t 0, after attainment of a stable second derivative stabilization point, the operation of component 100 is switched to provide an output proportional to the third derivative, then at time t 0 , This shows that I where C₃ is a constant proportional to the slope of the third derivative curve at threshold. For stabilization at threshold, V An exemplary laser stabilization circuit was implemented, using only standard, commercially available, components. The ICs used are listed in Table I. The portion of the circuit of FIG. 6 that is enclosed by dashed line 61 is shown in greater detail in FIG. 11. Circuit details that are well known to, or easily derived by, those skilled in the art are generally not shown. Such detail includes, for instance, pin numbers of ICs, supply voltages, some blocking or by pass capacitors, some current limiting or voltage dividing resistors, and the like. The circuit of FIG. 11 can operate in two modes second derivative and third derivative. The operating mode is determined by monostable IC4 and IC4 and is indicated by STATUS OUT . When power is applied, IC4 generates a 30 second power on pulse. During this time, STATUS is high, indicating second derivative operation. At the conclusion of this pulse, STATUS goes low, indicating third derivative operation. The circuit may be forced into second derivative operation by closing switch SW1. System timer IC1 operates at about 50 kHz. Flip flop IC2A divides this clock down to 25 kHz with a 50 duty cycle. This is the critical timing component in the circuit, producing the clock signals f₁ and IC6 is a balanced modulator clocked by IC2B, with the frequency f₂ fed to its signal input. When the circuit is in a second derivative mode, flip flop IC2B is held at 0, and the output of IC6 is the same as its input, i.e. a train of 0 V, 15 V, 0 V, 15 V, ....pulses at frequency f₁ 4. When the circuit is in the third derivative mode, flip flop IC2B is clocked by IC3 as a 2 counter block 60 in FIG. 6 . This causes the output of IC6 to invert every other pulse from IC3. In this case, the output of IC6 is the following repeating pattern 0 V, 15 V, 0 V, 15 V, 0 V, 15 V, .... The part of the circuit enclosed by broken line 100 in FIG. 11 corresponds substantially to components 52 and 43 of FIG. 6. The negative input of operational amplifier IC10 is incrementally grounded by feedback around IC10. Test current ΔI₁ of peak to peak amplitude about 0.5 mA is produced by IC2A. Step current ΔI₂ is produced by IC6, its amplitude being about 1 mA. R₁₃ provides an offset to keep the total injected test current always positive. Finally, R₁₄ and the status signal balance the test current so that its average value is approximately 1 mA, independent of the operating mode. IC5 is a digital 2 1 multiplexer corresponding to 53 in FIG. 6, functionally equivalent to analog switches connected to form a single pole double throw switch. The resulting SYNCH output is fed to the synchronous detector. Those skilled in the art will appreciate that an EXCLUSIVE OR gate could be substituted for IC5. FIG. 12 shows in greater detail the circuit corresponding substantially to the components enclosed by broken line 62 in FIG. 6, in addition to component 41 of that Figure. As will be appreciated by those skilled in the art, not all passive components required for satisfactory operation of the circuit are shown. The practitioner can easily provide such design detail. The core of this circuit section is the synchronous detector IC7, a precision component that provides the entire detector function on a single chip. V IC9 adds offset V The voltage on C₈ is directly proportional to d²V dI² or d³V dI³, depending on the circuit status. IC11 which corresponds to amplifier 103 in FIG. 10 amplifies this voltage by x100. The output of IC11 is summed with two other signals at the input of IC12. The first of these signals is proportional V The above described device stabilization technique has broad applicability, with laser stabilization being an exemplary application. A preferred application of a laser stabilized in this way is in a lightguide communication system. Such systems are well known and do not require detailed description. FIG. 13 schematically depicts such a system, in which laser 40 emits radiation 137 that is coupled by coupling means 130 into optical fiber 131 and is detected, after transmission through the fiber, by detector 132. A bias current is provided to the laser by means of bias supply 133, and a high frequency modulation current by means of modulation current source 132. Bias regulator 134 receives signals indicative of the laser voltage and of the dc bias by means of connections 135 and 136, respectively, and feeds a control signal to 133, whereby the dc bias level is controlled. As previously indicated, the instant technique for controlling the operation of a communication system is a particular example of a broadly applicable process control technique. FIG. 14 schematically illustrates this process control technique. Block 140 represents a general process, e.g. a chemical, electrochemical, pharmaceutical, or other technological process, which is characterised by variables X₁, X₂, ...., the variables being functions of parameters Y₁, Y₂, .... The value of a variable X It is frequently desirable to measure a derivative, especially a higher order derivative, of a device characteristic, and PDDE can also be advantageously used for this purpose. The elements of the technique as recited, for instance, in the above description, except the means for obtaining an error signal and the means for changing the bias in response to the error signal, are also present in measuring apparatus embodying the invention. In addition, the measuring apparatus comprises means for displaying the value of the derivative, or other means for indicating the measurement result. Such means may comprise a visual read out, electrical read out means that provide a digital or analog signal, or go no go indicators such as signal ights. Such means are conventional and well known in the art.