# Ignition timing control system for an internal combustion engine.

## Abstract
In an ingnition timing control system which utilizes a knock sensor, a malfunction detecting circuit 50 detects sensor malfunction in response to which a malfunction de tection signal is generated. The system comprises switching means 11 for inter rupting the power supply to an ignition coil 12 in response to an ignition signal ignition signal generating means 9 for generating said ignition signal in synchronism with the rev olution of said engine an acceleration sensor 1 for detect ing the vibratory acceleration of said engine and control means 7, 8 for controlling the timing of said switching means 11 . The malfunction detection signal may initiate control of the timing of the switching means 11 independently of the presence or absence of engine knocking in order to avoid damage to the engine.

## Claims
Claims 1. An ignition timing control system for an internal combustion engine and comprising switching means 11J for interrupting the power supply to an ignition coil 12 in response to an ignition signal ignition signal generating means 9 for generating said ignition signal in synchronism with the revolution of, said engine an acceleration sensor 1 for detecting the vibratory acceleration of said engine and control means 7,8 for controlling the timing of said switch ing means 11 by said ignition signal in accordance with engine knocking as determined by said acceleration sensor 1 , characterized by malfunction detecting means 50 for generating a mal function detection signal in response to detection of an ignition timing control malfunction. 2. An ignition timing control system according to claim 1, wherein there is provided means in said control means 7,8 responsive to said malfunction detection signal for controlling the timing of said switching means It independently of the presence or absence of engine knocking. 3. An ignition timing control system as claimed in claim 2, wherein said control means 7,8 is arranged to adjust the timing of said switching device to a prcdettrmined timing angle in rcsponse to said mal function detection signal. 4. An ignition timing control system as claimed in claim 3, wherein said predetermined angle is variable in accordance with engine operating conditions. 5. An ignition timing control system as claimed in claim 4, wherein said control means comprises timing signal generating means for generati.ng said ignition signal with a timing in accordance with engine operating conditions, and phase shift means 18 for shifting the phase of said ignition signal in accordance with detected engine knock, said phase shift means providing a predetermined phase shift in response to said malfunction detection signal. 6. An ignition timing control system as claimed in ay one of claims 1 to 5, wherein said malfunction de tection means 50 comprises gate means 14 for receiving said sensor output and for intermittently blocking the passaye of said sensor output in synchronism with operation of said switching means ill and di.scriminating means 16 for detecting sensor malfunction in accordance with the output of said gate means 14 . 7. An ignition timing control system as claimed in claim 6, wherein said switching means 11 supplies power to said ignition coil 12 during intervals each beyinning with a starting time and terminating with a blocking time, and said gate means 14 blocks said sensor output in response to gate control signals, said malfunction detection means 50 further comp.ci.sing gate control means 17,18,19 for generating said gate cont ol signals at one of said starting times or blocking times. 8. An i9nition timing control system as claimed in claim 7, wherein said gate control means 17,18,19 is arranged to generate said gate control signals at both said starting and blocking times. 9. An ignition timing control system as claimed in claim 7 or 8, wherein the duration of said gate control signals is variable in accordance with an engine operating parameter. 10. An igiiition timing control system as claimed in claim 6 or 7, wherein said discriminating means 161 comprises means for generating a substantially d.c. signal corresponding to the amount of detected vibration represented in said gate output signal, and means for generating said malfunction detection signal when said d.c. signal is below a threshold value. 11. An ignition timing control system as claimed in claim 10, wherein said threshold value is variable in accordance with an engine operating parameter.

## Description
Ignition timing control system for an internal combustion engineThe present invention relates to an ignition timing control system for an internal combustion engine and comprisiny switching means for interrupting the power supply to an ignition coil in response to an ignition signal ignition sigal generating means for generating said ignition signal in synchronism with the revolution of said engine an acceleration sensor for detecting the vibratory acceleration of said engine and control means for controlling the timing of said switching means by said ianition signal in accordance with engine knocking as determined by said acceleration sensor. Such a system can be used to restrain knoc cing of an internal combustion engine. It is desired that the ignition timing of an interrial combustion engine be set so as to be most efficient for the running mode of the engine. it is also generally desired that the ignition timing be so set as to fall within a range, in which the engine is free from any knocking, as close as possible to the MET i.e., Minimum advance forBest Torgue . However, most of the ignition timing control systems accerding to the prior art are of such mechanical type that their ignition angle advancing characteristics are unstable due to variation in materials and due to aging.In order to prevent knocking, therefore, the actual igni ion timing is set at a considerably retarded angle with respect to the aforementioned desirable ignition angle advancing characteristics. At this retarded angle, the efficiency of the engine is degraded. Moreover, , even if an ignition timing control system is used having neither significant materials variation nor aging problems,the knocking phenomena are influenced by the temperature and moisture of the intake air as well as the airy eel ratio of the engine As a result, even if the ignition timing is so set that no knocking takes place under a certain condition, there is a danger that knocking will nevertheless occur under different running conditions. If, with this in mind, a control function is conducted to detect the knocking and retard the ignition timing if knocking occurs, the ignition timing can be so adjusted that little knocking takes place even if an error is caused in.the ignition angle advancing characteristics due to the material characteristic variations inherent in the mechan cal type or due to the difference in running conditions, as has been described hereirbefore. Thus, the ignition timing control system of the above type is able to achieve the optimum ignition timing by setting in advance the reference ignition angle advancing characteristics at a more advanced angle so as to come closer to the MBT and by effecting an angle retarding control at a proper time in response to the occurrence of knocking. In case, however, the knocking detecting system malfunctions, there arises a problem. Specifically, if the knocking detecting system malfunctions, no knociing information is obtained so that the proper angle retarding control cannot be accomplished. Thi.s results in a serious problem that the engine is so highly vibrated by the knocking that it may possibly be damaged.In order to cope with this problem, it is desired to control the ignition timing such that no knocking takes place, or to generate a warning signalAccording to the invention, there is provided an ignition timing control system for an internal combustion engine and comprisina. switching means for interrupting the power supply to an ignition coil in response to an ignition signal ignition signal generating means for generating said ignition signal in synchronism with the revolution of said engine an acceleration sensor for detecing the vibratory acceleration of said engine and control means for controlling the timing of said switch ing means by said ignition signal in accordance with engine knocking as determined by said acceleration sensor, characterized by malfunction detecting means for generating a malfunction detecting signal in response to detection of an ignition tming control malfunction,With use of the present invention, it is possible thugs to provide an ignition timing control system for preventing knocking and for detecting the malfunction of a vibratory accelerai,ion type knocking detecting system, said ignitioii timing control system being able to detect the malfunction in the output si signal line of time vibratory acceleration sensor or the acceleration sensor of the engine and to detect that malfunction without difficulty. An embodiment of the invention will now be described by way of example making reference to t1te accompanying drawings, in which Fig. 1 is a block diagram showing an entodiment of the present invention Fig. 2 is a graph illustrating the output characteris tics of the acceleration sensor of Fig. I Fig. 3,4 and 5 are diagrams illustrating the operat ing waveforms of the respective portions of Fig. 1 andFig. 6 is a graph illustrating the characteristics for explaining the operations of Fig. 1.The present invention will now be described in connection with one exemplary embodiment thereof with reference to the accompanying drawings. First of all, inFig. 1 reference numeral 1 indicates an acceleration sensor which is attached to the engine for detecting the vibratory acceleration of the engine numeral 2 indicates a frecjuency filter for passing that signal component of the output signal of the accelerating sensor I which has a frequency highly sensitive to the knocking numeral 3 indicates an analog gate for blocking noise in the output signal of the frequency fil ter 2 which interferes with the knocking detection numeral 4 indicates a gate timing controller for commanding the opening and closure of the analog gate 3 in response to the generation timing of the interfering induced ignition noises numeral 5 indicates a noise level detector for detecting the level of mechanical vibration noises of the engine other than knocking numeral 6 indicates a comparator for comparing the output voltage of the analog gate 3 and the output voltage of the noise level detector 5 for generating knocking detection pulses numeral 7 indicates an integrator for integrating the output pulses of the comparator 6 to generate an integrated voltage according to the intensity of the knocking numeral 8 indicates a phase shifter for shifting the position of a reference ignition signal in response to the output voltage of the integrator 7 numeral 9 indicates a rotary signal generator for generating na ignition signal in accordance with predetermined ignition angle advancing characteristics numeral 10 indicates a waveform shaper for simultaneously shaping the wave fern of the output of the rotary signal generator 9 and controlling the break of the power supply to an ignitiol coil 12 and nulltere 11 indicates a switching circuit for interrupting the power supply to that ignition coil 12 in response to the output signal of the phase shifter 8. Reference numeral 50 indicates a malfunction detecting circuit which is constructed as follows. Specifically numeral 13 indicates an amplifier for amplifying the output of the frequency filter 2 numeral 14 indicates an analog gate for blocking the output signal of the amplifier 13 in response to the output of an OP circuit 19 numeral 15 indicates a fail safe signal generator for generating a fail safe detection signal from the signal blocked rnimer al 16 indicates a malfunction discriminating circuit for discriminating the malfunction of the vibratory acceleration detecting system by comparing the levels of the output of that fail safe signal generator 15 and a reference voltage V and minerals 17 and 18 indicate pulse generators for generating pulses of predetermined durations at the starting and blocking of the power supply to the ignition coil 12, respectively, in synchronism with the rise and break of the output of the phase shifter 8. The aforementioned OR circuit 19 generates its OR signal from the outputs of the pulse generators 17 and 18.Moreover, the aforementioned malfunction discriminating circuit 16 generates its voltage output at a predetermined level, when the acceleration sensor I malfunctions, to effect the phase shift of the phase shifter 8 by a predeter mined retarded angle through tEle integrator 7. The frequency characteristics of the output sic .nai of the acceleration sensor 1 are shown iu Fig. 2 Curve A corresponds to the case in which there is no knocking, wherear curve B co responds to the ca in whicl s knocking takes place. The outp t of acceleration sensor 1 contains a knock signal which is generated as a result of knocking , other mechanical noises of the engine, and a variety of noise components, such as ignition noises, which are to be carried in signal transmission passages.The comparison of the curves A and B of Fig. 2 will reveal that the knock signal has intrinsic frequency characteristics. This dis tribution is clearly different, depending for example upon the differences in tlle engine type and in the attached position of the acceleration sensor 1. By passing the frequency component belonging to the knock signal, therefore, the noises of other frequency components can be filtered out so that the knock signal can be efficiently detected. The operating waveforms of the respective portions ofFig. 1 are shown in Figs. 3 and, in which identical reference characters indicate waveforms of identical portions. Fig. 3 illustrates operation in which knocking of the engine does not take place, whereas Fig. 4 illustrates operation in which the knocking of the engine takes place. The operation of the embodiment of Fig. 1 will now be described in detail. The rotary signal, which is generated by the rotary signal generator 9 in accordance with ignition timing characteristics which have been predetermined in dependence, for exam , upon the r.p.m. of the engine, has its wavefona shaped by the auction cf the wavefci m shaper 10 into on and off pulses haviIg a desired breaking angle The signal thus shaped drives the switching circuit 11 through the phase shifter 8 thereby to interrupt the power supply to the ignition coil i.2 so that the engir e is ignited and run RTI ID 7.28 by the ignition voltage of the ignition coil 12, which is generated when the power supply current is blocked. The vibrations of the engine, which are caused during the running operation of the engine, are detected by the action of the acceleration sensor I. If there is no knocking of the engine, the vibrations of the engine due to knocking are not generated. Other mechanical vibrations will result in an output signal of the acceleration sensor 1 as illustrated in Fig. 3 a , containing mechanical noises and ignition noises which are to be carried on the signal transmission passage at an ignition timing F. That output signal can have its mechanical noise component considerably filtered out as illustrated inFig. 3 b , after it has passed through the frequency filter 2. However, the ignition noise component is so intense that it may continue to be present at a high level even after it has passed through the frequency filter 2.Since such ignition noises may be misjudged as a knocking signal, the analog gate 3 is closed for a time period after the ignition timing by the output which is illustrated inFig. 3 c of the gate timing controller 4, which is to be triggered by the output of the phase shifted 8 This will block the ignition noises which occur during the periods of the pulses shown in Fig. 3 c . As a result, at the output of the analog gate 3, there pre left only low level mechanical noises as indicated at in Fig. 3 d . On the other hand, the noise level detector 5 responds to the change in the peak value of the output signal of the analog gate 3 to generate, in this case, a d.c. voltage which can respond to the relatively gentle change in the peak value of the usual mechanical. noises and which is slightly higher than the peak value of the mechanical noises as indicated at fj3 in Fig. 3 d . Since the output of the noise level detector 5 is higher than the average peak value of the output signal of the analog gate 3 no output uX,is generated from the comparator 6, as illustrated inFig. 3 e , so that all the noise signals are eliminated.As a result, the output voltage of the integrator 7 is left at a zero level, as illustrated in Fig. 3 f , and the phase angle which corresponds to the phase difference of the input from shaper 10 shown in Fig. 3 a and output of phase shifter 8 shown in Fig. 3 1i remains at zero. As a result, the on and off phases of the switching circuit 11 which is driven by that output, i.e., the interruption phases of the power supply to the ignition coil 12, are in phase with the reference ignition signal of the output of the waveform shaper 10 so that the ignition timing is the same as the reference timing. In case knocking takes place, on the other hand, the output of the acceleration sensor 1 contains the knocking signal which occurs during an interval a certain time after the ignition timing, as illustrated in Fig. 4 a . After passing through the frequency filter 2 and the analog gate 3, the signal will include knocking signals superimposed upon the mechanical noises, as indicated inFig. 4 d . Of the signals having passed through the analog gate 3, the knocking signal has a steep rise which is faster than can be tracked by the noise detector 5, so that the level of the output voltage of the noise level detector 5 is delayed in responding to the knocking signal.As a result, the inputs to the comparator 6 are as indicated at alpha and in Fig. 4 d so that pulses illustrated in Fig. one are generated at the output of the comparator 6. The integrator 7 integrates those pulses and generates an integrated voltage as illustrated in Fig. 4 f . Moreover, since the phase shifter 8 shifts the reference ignition signal of Fig. 4 g to a retarded angle in accordance with tb.e output voltage of the integrator 7, the phase shifter shown in Fig. 4 h has its phase retarded with respect to the phase of the reference ignition signal of the waveform shaper 10 so that the switching circuit 11 is driven with the phase illustrated in Fig. 4 h . As a result, the ignition timing is retarded to obtain a state at which the knocking is prevented. It should be noted that the ignition timings F in Figs 3 and 4 are not fixed and that the timings F of Figure 3 are not the same as those in Fig. 4.Rather, the timings F are defined by the trailing edges of the pulses in Figs. 3 h and 4 h . In the absence of a malfunction detection circuit according to the present invention, it will be apparent that correct operation of Figs.. 4 a 4 h is not achieved if the knocking signal portion of Fig. 4 b is not generated.Thus, if a knock occurs but is not detected, the circuit will always function as in Figs. 3 a 3 h and the knocking will not be corrected. Next, the operation of the malfunction detecting circuit 50 will be described with reference the op rating waveform diagram of Figs. 5 a 5 f2 . Fig. 5 a illustrates the on and off outputs of the phase shifter 8 corre sponging to Figs. 3 h and 4 h Fig. 5 b illustrat s an electric current flowing through the ignition cos 12 Figs. 5 c and 5 d illustrate the output pulses of the pulse generators 17 and 18, respectively and Figs. 5 c1 and 5 e2 , and 5 f1 and 5 f2 illustrate the outputs of the amplifier 13 and the outputs of the anal g gate 1 I, respectively, Figs. 5 e1 and 5 f1 corresponding to the case in which the acceleration detecting system is normal and Figs. 5 e2 and 5 f2 corresponding to tile case in which the acceleration detecting system is abnormal First of all, ill case the vibratory acceleration detecting system is normal, the amplifier 13 is fed with the output of the acceleration sensor 1 through the frequency filter 2.As a result, the output of the amplifier 13 is fed to the gate 14 in the form of the signal which contains both the vibrations and ignition noises detected in the acceleration sensor 1, as illustrated in Fig. 5 e1 . On the other hand, the pulse generators 17 and 18 generate, in synchronism with the rising and falling edges of the pulses output from the phase shifter S, pulses having a predetermined time width as shown in Figs. 5 c and 5 d . These are combined in the OR circuit 19 to thereby control the aforementioned analog gate 14.As a result, the output of the analog gate 14 becomes a signal of the form shown inFig. 5 f1 , which is prepared by blocking tile output el of the amplifier in synchronism with the starting and blocking of the power supply to the ignition. coil 12. The signal thus prepared is converted into a d.c. voltage, which has its peak value detected by the fail safe signal generator having an integra ing function. The fail safe signal generator 15 has the same operation as that of the aforementioned noise level detector 5 and functions to respond to the relatively gentle fluctuations in the peak value. The characteristics of the generator 15 output signal may be as illustrated in Fic . 6. If the vibratory acceleration detecting system is normal, a vibration detection signal is generated as illustrated in Fig. 5 e1 , and there will be a vibration signal present in the output of the analog gate 14 during the passing interval of the gate as illustrated inFig. 5 f1 . Thus, the output of the generator 15 may be as shown at C in Fig. 6. Incidentally, the vibratory acceleration of the engine becomes higher for higher r.p.m., but the signal generator 15 is selected such that its output characteristics are saturated substantially all over the r.p.m. range.This output is compared wit the set voltage V by the discriminator 16 but is higher than that voltage V under normal conditions, so that no abnormal output is indicated by discriminator 16 and the ignition timing control circuitry functions as described above. If a malfunction such as a break or a short circuiting of the vibratory acceleration detecting system takes place, the vibratory acceleration cannot be detected. As a result, the input of the amplifier 13 is nothing but. induction noises such as ignition noises, and the input of the analog gate 14 becomes such an intermittently generated signal as is illustrated in Fig. 5 e2 . Since the induction noises are practically restricted to the ignition noies, tho output signal of the amplifier 13 is generated, as illustrated in Fig. 5 e2 , at the starting and blockln of the power supply to the ignition coil 12.Moreover, since the analog gate 14 blocks the signal at the starting and blocking of that power supply, the input of the fail safe signal generator 15 in an abnormal state has no signal, as illustrated in Fig. 5 f2 , so that its output assumes a block level as illustrated at D1 in Fig. 6.The discriminater l then generates a malfunction detection signal to maintain the output of the integrator 7 at a predetermined lc vcl, since its output is ove r than the predetermined voltage V . and the angle of retaration by the pease shifter 8 is controllcd to a predetermined value to retard the ignition timing by a predetermined angle. Since the induction level of the ignition on noises changes with the conditions of the wiring harness, the performance of the ignition system, the gap of the ignition plug or the like, the noise generating time period will change accordingly. It is, therefore, desired that the signals of the pulse generators 17 and 18 as illustrated inFigs. 5 c and 5 d be pulses of long duration so as to completely block the noises. In order to prevent a reduction in the level of curve C of Fig. 6 even when the system is operating normally, and especially to prevent an excessive level reduction within a low r.p.m. range where the vibratory acceleration may be low, the pulse width is restricted.As a result, the amount of blocking of ignition noises in an abnormal state of operation may be low enough that the characteristics D1 of Fig. 6 may sometimes rise or fall more or less in proportion to the r.p.m. In order to increase the output level difference for the set voltage V in the aforementioned manner, it is preferred that in the normal state the gains of the ampli fier 13 and the fail safe signal generator 15 be hlgher ailed that the pulse widths of the pulse generators 17 and 18 be the smaller. In the abnormal state, on he other hand, it is preferred that those gains be lower and pulse widths be the wider. When striking a proper balanc e, it is necessary that those settings be determined taking the actual mounting states into consideration.It has been confirmed by our experiments that a practical and sufficient level difference including variation in the detecting performance of the acceleration sensor 1 can be obtained, as illustrated at C and D1 in Fig. 6. However, even if the level reduction of the characteristics C of.Fig. 6 which occurs during knocking becomes so considerably high that the level its elf becomes lower than the reference voltage V within a low r.p.m range, no really serious problem arises. Specifically, an actual vehicle is hardly ever run with a low r.p.m. over a long period of time. At the start, for example, the r.p.m.of the engine is instantly raised to a value at which the level is saturated. As a result, the discriminator 16 compares the signal from the signal generator 15 with the predetermined voltage V so that it can accurately detect a malfunction in the vibratory acceleration detecting system.By this output, moreover, the integrated voltage can be generated from the integrator 7 to effect a predetermined angular retardation of the ignition timing. As has been described hereinbefore, the system of the present invention is a system by which the output signal from the vibratory acceleration sensor is discriminated to detect the malfunction of the same, but it is not a system by whic ine malfunction is detected from the level of the voltage drop based upon the internal resistance of those vibratory acceleration sensor. As a result, the malfunction can be detected irrespective of the kind of vibra ory acceleration sensor used. Typical known vibratory acceleration sensors include the magnetic strain sensor and the piezoelectric ceramic sensor. However, since the former detects the change in the magnetic flux due to the internal strain of a magnetic strain element by meals of a cc malfunction can be detected if a d.c. current is fed to the internal resistance of that coil so that the voltage drop may be discriminated. According to the latter, on the contrary, since the piezoelectric ceramic element has the characteristics of a capacitor, it is difficult to detect the change in the voltage drop. According to the present invention, however, the malfunction can be detected accurately for either kind. Incidentally, it is desired in the embodiment tus far described that the pulse width of the pulse generators 17 and 18 be set independently of each other in accordance with the generating state of the induction noises at the starting and blocking of the power supply to the ignition coil.Noreover, those pulse widths can also be controlled by an operating parameter such as the r.p.m. of the engine. Still moreover, if the comparison voltage V of the discriminat or 16 is controlled in accordance with an operating parameter of the engine such as the r.p.m., the malfunction discrimination can be effected more reliably. In the foregoing embodiment, furthermore, the analog gate 14 is blocked at both the starting and blocking of the power supply to ignition coil.However, even if the analog gate 14 is so constructed as to be blocked only in synchronism with either the blocking or the starting, operation will not be adversely effected, since tlle induction noises in the abnerma state of time acceleration sensor can still be substantially removed although not completely. Thus, it is possible to discriminate the normal function and malfunction of the acceleration sensor. As has been described hereinbefore, according to the present invention, in the system for detecting the vibra tions cf the engine by means of an acceleration sensor to thereby control the ignition timing in response to the knocking signal obtained from the detected output, the malfunction of the acceleration sensor is discriminated on the basis of the output of a gate which is made operative to block the passage of the output of the aforementioned acceleration sensor for a predetermined time period in synchronism with the switching operation of the power supply circuit of the ignition coil.A sensor malfunction can be accurately detected while attenuating or removing the noises which are induced in the output circuit portion of the acceleration sensor. As a result, it is made possible by this malfunction detecci.on signal to retard the excessive advance in the ignition timing or to generate a warning signal. Morecver, such malfunction can be detected irrespective of the .kinds of the acceleration sensor used. Tlle invention can also easily detect a malfunction even if the acceleration sensor is a piezoelectric ceramic element in which it 5 difficult to detect malfunction bi the voltage drop method.Thus avibratory acceleration sensor may be used which may be a magnetic strain sensor or a piezoelectric ceramic sensor