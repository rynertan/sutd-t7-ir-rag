# Image enhancement.

## Abstract
A method and apparatus for enhancing an image represented by digital data defining the colour content of one or more pluralities of pixels constituting one or more colour separations is described. The apparatus comprises a Fast Fourier transform circuit 3 which transforms the digital data for at least one of the pluralities of pixels into the frequency do main. A store 5 stores data defining a predetermined position invariant operator representing a mask. A multiplier 4 multiplies the transformed data with the position invariant operator. An inverse transform circuit 6 carries out an inverse Fast Fourier transform on the multiplied data to transform this back into the spatial domain. The arrangement is such that negative or positive grip is applied to edges of features in the image.

## Claims
CLAIMS 1. A method for enhancing an image represented by analogue signals or digital data defining the colour content of one or more pluralities of pixels constituting one or more colour separations, the method comprising for at least one of the pluralities of pixels transforming the signals or data into the frequency domain multiplying the transformed signals or data with a predetermined position invariant operator and transforming the multiplied signals or data back to the spatial domain, the transformed signals or data and the position invariant operator being such that negative or positive grip is applied to edges of features in the image. 2. A method according to claim 1, wherein the image is represented by optical signals which are passed through a suitable filter whose transmission characteristic corresponds to the transform of a mask. 3. A method according to claim 1 in which a two dimensional transformation is carried out on digital data representing the image. 4. A method according to claim 1 or claim 3, in which digital data defining the image is divided into a plurality of smaller blocks of pixels, each of the steps of the method being carried out separately on each small block of pixels. 5. Apparatus for enhancing an image represented by digital data defining, the colour content of one or more pluralities of pixels constituting one or more colour separations, the apparatus comprising transformation means 3 for transforming the digital data for at least one of the pluralities of pixels into the frequency domain a store 5 for storing data defining a predetermined position invariant operator multiplying means 4 for multiplying the transformed data with the position invariant operator and inverse transform means 6 for transforming the multiplied data back to the spatial domain, the transformed data and the position invariant operator being such that negative or positive grip is applied to edges of features in the image. 6. Apparatus according to claim 5, the apparatus comprising a suitably programmed computer. 7. Apparatus according to claim 5 or claim 6, wherein the transforming means 3 comprises a fast Fourier transform means. 8. Apparatus for enhancing an image represented by digital data defining the colour content of one or more pluralities of pixels constituting one or more colour separations, the apparatus comprising a store 5 for storing data defining a position invariant operator and a computer programmed to transform the data for at least one of the pluralities of pixels into the frequency domain, to modify the transformed data with the position invariant operator defined in the store, and to transform the multiplied data back to the spatial domain, whereby negative or positive grip is applied to edges of features in the image.

## Description
CROSFIELD ELECTRONICS LIMITED IMAGE ENHANCEMENT The invention relates to a method and apparatus for enhancing an image represented by analogue signals or digital data defining the content of one or more pluralities of pixels constituting one or more colour separations. In the field of printing, images are represented by one or more colour separations, such as cyan, magenta, yellow, and black. Where an image, typically a high resolution or text image, is to be included within a lower resolution or graphics image and the colour of the text image is such that one or more colour separations are required then, typically, a suitable gap is generated in those non required colour separations, the gap corresponding in shape to the high resolution image. Problems arise when the separations are registered since for various reasons such as paper stretch and mis registration, the colour separation s providing the high resolution image do not exactly register the image with the corresponding gap on one or more of the other colour separations. This results in the generation 6f a white border around at least part of the image. In the past, this problem has been solved by interposing a clear sheet between the colour separation or separations carrying the high resolution image and the contact print so that the high resolution image is slightly diffused and the generation of borders is prevented. This practice is technically known as grip . With the advent of modern imaging apparatus in which colour separations are generated using sets of laser beams it is desirable to deal with the misregistration problem during production of the separations. In general, with this modern imaging apparatus, the application of grip has been relatively easy since the edges of features to be gripped are normally known to the imaging apparatus. However, we have recently developed a system described in EP A 0151353 in which relatively high resolution features, such as text, are included within low resolution features and the location of the high resolution features is not easily determined by the imaging apparatus. In this case, it is the text in the image which is to be gripped. In accordance with one aspect of the present invention, a method for enhancing an image represented by analogue signals or digital data defining the colour content of one or more pluralities of pixels constituting one or more colour separations comprises for at least one of the pluralities of pixels transforming the signals or data into the frequency domain multiplying the transformed signals or data with a predetermined position invariant operator and transforming the multiplied signals or data back to the spatial domain, the transformed signals or data and the position invariant operator being such that negative or positive grip is applied to edges of features in the image. When the image is represented by analogue signals, these may be optical signals which are passed through a suitable filter whose transmission characteristics correspond to the transform of a mask. The invention is primarily concerned, however, with images represented by digital data and the remainder of the specification will be concerned with that. The transformation of the digital data representing the image into the frequency domain automatically locates the edges of features since these will be represented by relatively high frequency components. Thus, there is no necessity to determine the spatial location of such edges. Although, in some limited circumstances, a one dimensional transformation could be carried out on the data this would only locate edges of features running in one particular direction. It is therefore preferable if a two dimensional transformation is carried out. The transformation is preferably a Fourier, sine or cosine transformation although other transformations such as Hadamard, or Karhunen Loeve transformations might be suitable. The type of grip, negative or positive, depends upon the circumstances involved. In general, where text is involved, it will be required to apply positive grip to cause the edges of the features to grow. This will then enable the text characters to overlap the surrounding graphics image and prevent the occurrence of a border if mis registration of the colour separations should occur.In some circumstances, however, negative grip may be appropriate in which case edges of the features will be moved to cause the feature to shrink in size. The choice of positive or negative grip is determined by the desire that the appearance of a feature should be unchanged, hence for light text on a dark background the background is grown into the space. In order to achieve negative grip, the method further comprises inverting the transformed image data prior to multiplication with the predetermined position invariant operator. Furthermore, grip may be applied to low resolution or graphics images. The position invariant operator defines in transform space a mask. Preferably, where a relatively large image is to be enhanced, the digital data defining the image is divided into a plurality of smaller blocks of pixels, each of the steps of the method being carried out separately on each small block of pixels. The memory limitations of conventional processors and the complex computations necessary to perform a two dimensional transformation on large images means that it eases processing if the image is broken down into a number of small blocks. It is important to overlap the blocks, however, so that no block boundaries appear. In accordance with a second aspect of the present invention, apparatus for enhancing an image represented by digital data defining the colour content of one or more pluralities of pixels constituting one or more colour separations comprises transformation means for transforming the digital data for at least one of the pluralities of pixels into the frequency domain a store for storing data defining a predetermined position invariant operator multiplying means for multiplying the transformed data with the position invariant operator and inverse transform means for transforming the multiplied data back to the spatial domain, the transformed data and the position invariant operator being such that negative or positive grip is applied to edges of features in the image. Conveniently, the apparatus is provided by a suitably programmed computer. Furthermore, where a large number of pixels are to be transformed, the transforming means preferably comprises a fast Fourier transform means FFT . The FFT may conveniently be defined by a computer programmed to carry out a FFT algorithm. The shape of the mask may be, in the spatial domain, one of a continuous outline square, a solid square, a continuous outline circle, a solid circle, a continuous cross, a four point cross, and a five point square.Other shapes, particularly asymmetric shapes, may also be used. It should be appreciated, that the mask has no physical existence, its effect simply being represented by the position invariant operator. Preferably for grip the mask is a solid square or circle, but other shapes give special effects. For example a line gives a 3D effect i.e. perspective. Typically, the apparatus will form part of scanning apparatus such as the Crosfield 860 system. The digital data may be generated at the same time as the colour separations are generated or alternatively, the digital data may have been previously generated and stored.Furthermore, the enhanced data may be stored or fed directly to the colour separation generating apparatus. An example of a method and apparatus in accordance with the invention, will now be described with reference to the accompanying drawings, in which Figure 1 illustrates different forms of mask and the effect of positive grip using each mask Figures 2a, 2b and 2c illustrate part of a text image, a mask, and the gripped image in the spatial domain and the transform domain Figure 3 is a block diagram of apparatus for carrying out an example of the invention Figure 4 is a flow diagram illustrating the operation of a computer for carrying out an example of the invention and, Figure 5 illustrates examples of positive and negative grip produced by methods according to the invention. Figures la ld illustrate four different types of mask and the effect of applying the mask to a text image such as a square full stop 1. In each case, the outer boundary of the text feature has been moved outwards to enlarge the feature. This is an example of positive grip. In negative grip, the outer boundary will be moved inwardly to decrease the size of the image. Figure 2a illustrates for one colour component a solid square at high resolution, such as part of a text image, in the spatial and Fourier transform domains. In this context, a high resolution image may have a density of about 810 thousand pixels per square inch. Grip can be applied to each colour of a graphic image or to the monochrome text image. The colour of each pixel in the image will be represented by digital data indicating the intensity of colour components such as cyan, magenta, yellow, and usually also black. Thus, each image is represented by three or four sets of digital data. If the intensity of the one colour component is given by f x,y then the two dimensional Fourier transform is defined as F u,v rl m f x,y exp j2s ux vy dxdy The graphical representation of the Fourier transform shown in Figure 2a illustrates how the colour component intensity has been broken down into a number of different frequencies. The zero order component corresponds to the average intensity of the entire image while the high order frequencies are needed to generate the edges of the text feature shown in Figure 2a. It will be seen therefore that the edge of the text feature has effectively been separated out from other features in the image by carrying out the Fourier transform. For clarity, the part of the Fourier transform corresponding to non zero values of both u and v has been omitted. The next stage in the method is to multiply theFourier transform F u,v by a position invariant operator corresponding to a desired mask. The position invariant operator can be determined by selecting the appropriate mask in the spatial domain as illustrated in Figure 2b and then transforming the selected mask into the frequency domain. The two Fourier transforms are then multiplied together and the resultant function Figure 2c is inversely transformed back into the spatial domain. The resultant affect on the text feature is that the edge of the text feature will have been moved outwardly to increase the size of the text feature. Figure 3 illustrates in block diagram form a hardware version of apparatus for carrying out the invention. This may be incorporated into our Crosfield 860 system. Alternatively the hardware components can be realised in software form in a suitable programmed computer operating in accordance with the flow diagram ofFigure 4. The apparatus comprises a disc store 2 on which is stored digital data representing the intensity of each of three or four colour components for each pixel of an original text or high resolution image. This data may have been generated electronically or result from a conventional scanning system. In turn, the data for each colour component is fed to a Fast Fourier transform circuit 3 which carries out a two dimensional Fourier transform on the data the resultant transformed data being fed to a multiplier 4. A store 5 is provided containing data representing the Fourier transform of a desired mask. The multiplier 4 multiplies the Fourier transform from the circuit 3 with the transformed mask from the store 5 and the resultant data is fed to an inverse transform circuit 6 which carries out an inverse two dimensional Fast Fourier transform.The data from the inverse transform circuit 6 is then fed to further processing apparatus or a store as desired. The Fourier transform circuit 3 and the inverse transform circuit 6 carry out fast Fourier and inverseFourier transforms on the data since this requires far fewer computations than in a conventional Fourier transform. Usually, the invention will be realised in a suitably programmed microcomputer. The operation of such a microcomputer is illustrated by the flow diagram shown in Figure 4. Initially, a mask defined spatially is loaded into the microcomputer and is then transformed into the frequency domain by the application of a two dimensional Fast Fourier transform algorithm. A block of image data comprising a plurality of pixels defined in terms of the intensities of a colour component is then read into the microcomputer and the Fast Fourier transform algorithm is applied to that data. The transformed image data is then multiplied by the transformed mask. The resultant multiplied data is then transformed back into the spatial domain by applying an inverse Fast Fourier transform algorithm. The retransformed data is then written to a store such as a disc or directly fed to an output scanner.This series of steps is then repeated for each block of image data until the complete colour separation has been gripped. This may be repeated using the same or a different shaped mask for the other colour separations of the image where a coloured image is concerned. By subtracting an original from a grown or shrunken image, casing can be made which fits inside or outside text. Figure 5a illustrates an original line of text whileFigure 5b illustrates the same line of text after the application of positive grip in which the text characters have been grown by 11 text pixels using a method according to the invention. Figure Sc illustrates the application of a similar degree of negative grip in which the text symbols have been shrunk by 11 text pixels.Figure 5d illustrates part of the results of substracting the shrunk version of Figure Sc from the grown version of Figure 5b to generate outline characters. Figure 5e is similar to Figure 5b but with a growth of 12 text pixels.