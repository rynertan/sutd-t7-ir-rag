# A DUAL ACCESS DIGITAL STORAGE DEVICE

## Claims
Digitale Einchip IC Speichereinrichtung mit Zweifach Zugriff, mit mindestens zwei Eingangsports DATA IN A , DATA IN B zum Empfangen von Mehrfachbit Datenwörtern, und mindestens zwei Ausgangsports DATA OUT A, DATA OUT B zum Erzeugen von Mehrfachbit Wörtern, mit

## Description
The present invention relates to a dual access single chip integrated circuit digital storage device. There will be described storage elements used in programmable digital devices and, more particulary, an expandable dual access register file having two read ports and two write ports providing independent read write access of any register from any port. Many programmable digital devices, such as microprocessors, have a shared dual access scratch pad memory. For example, when two such microprocessors share a message buffer between them, each processor needs both a read and a write port. Thus, so called dual access memories are commonly employed in programmable digital devices. Presently, these memories are constructed from a number of separate integrated circuit chips which will typically include a pair of separate single access memory chips with a multiplexer on a third chip connected to the input ports of the memories. Access to one or the other of the memories is controlled by a memory switching signal applied to the multiplexer. The presence of an external multiplexer has a number of undesirable consequences an overhead time penalty is added to all memory accesses and more complex timing control requirements are necessitated by the need to apply the memory switching signal sufficiently in advance of the access to allow stabilization of the signal paths passing through the multiplexer in many instances a separate multiplexer switching clock was used. Even if these undesirable consequences are considered manageable, a further difficulty with the use of two single access memories and the inter memory switching multiplexer is that this arrangement does not permit independent reading and writing, from both the input ports and the output ports, as may be needed in a particular application. Presently, another off chip multiplexer is used to switch from read to write address. The use of an external read write multiplexer entails further difficulties additional timing signals were necessitated, usually supplied by a separate write clock which had a critical ten nanosecond timing window during which the address signal must stabilize in order to avoid race conditions. This was a major nuisance in the design of a working memory. Further, since it is desirable to be able to access the data stored in any given location from either port, the data must be replicated in both single access memories. In prior art memories of this construction, an additional clock phase is typically added to transfer data written into a given location in one of the single access memories to the other single access memory, thereby imposing a significant time overhead in the cycle time of the memory. The use of a number of separate chips to form the dual access memory increases the cost of fabrication due to the large number of terminal pins which must be interconnected and decreases the access speed, over and above that already mentioned, due to inter chip signal propagation delay. Additionally, present dual access memories use bi directional busses to connect the individual storage locations to a single set of terminals used for both input and output. This technique is slow in that it requires a reversal of the bi directional busses for each access cycle. Finally, present memories support byte oriented operations through the use of separate memories, one for each byte. This method involves duplication of much of the peripheral elements supporting the memories resulting in more expensive device with a greater number of pin interconnections. In another application, a four read port, two write port memory is to be shared by a two input arithmetic logic ALU and a two input multiplier processor. In this case, two read ports are connected to the input of the ALU and the remaining two read ports are connected to the inputs of the multiplier. The ALU output is connected to one of the memory write ports and the multiplier output to the other write port of the memory. Thus it is desirable to be able to expand in a parallel manner a dual access memory so that arithmetic addition and subtration by the ALU can be performed in parallels with multiplication and division by the multiplier. WO A 8 402 222 and corresponding United States Patent Specification No 4,656,614, discloses a random access memory arranged for the simultaneous reading and writing of information from or to two memory cells in a memory matrix as described in the first part of Claim 1. The present invention provides a dual access single chip integrated circuit digital storage device having at least two input port means, for receiving plural bit data words and at least two output port means, for generating plural bit words, comprising A four port register file in preferred arrangements of the present invention may be expandable to form a two write port, four read port register file, for example, as required to perform parallel address and data computation. The register file may permit dual read write access through an A side and B side and employs dual on chip address multiplexers to affect independent transitions from read to write on the A and B sides. The presence of these on chip multiplexers improves access time and elminates the need for a second separate write clock and removes the attendant timing critically concerns. Furthermore, the novel single array on chip dual access RAM utilised in the register file of the present invention eliminates the need for a memory switching multiplexer on the input ports because the RAM used in the present invention is of a novel design employing storage cells all of which are in direct communication with all four ports. Hence data at either input port can be written into any register within the RAM or read from any register via either output port. The related copending US application serial number 667 022 filed 31 October 1984, issued as US Patent 4,623,990 on behalf of Michael Allen and Lee Hirsch entitled Dual Port Read Write RAM with Single Array and assigned to us contains a complete description of the RAM and the novel storage cell employed therein. The RAM consists, in one embodiment of the invention, of 64 eighteen bit registers, each having an individually writable low and high order byte. A pair of on chip AND gates at each of the A and B sides receive write low byte and write high byte signals. Using the A side for illustrative purposes, the A side receives a write clock signal conducted to the A side read write multiplexer and to the A side AND gates where it does double duty by controlling the write enable AND gates, simultaneous permitting a write address to pass the multiplexer, in one phase and in the other phase disables the write enable gates, simultaneously permitting the read address to pass the multiplexer. The register file of the present invention thus permits byte oriented operations by providing independent access of the upper 9 bits and the lower 9 bits of any register to be written individually. The use of unidirectional busses and the two independent input ports provided by the single array dual access RAM, permits two register files of the present invention to be operated in parallel to form a two write port, four read port register file. Fig. 1 is a block diagram of the expandable single chip four port register file of the present invention. Fig. 2 illustrates the parallel connection of two register files of the present invention to form a two write port, four read port register file. The expandable dual , simultaneous , random access integrated circuit register file of the present invention consists of a novel configuration of on chip peripheral elements and a novel single array read write dual , random access memory. The number of read ports and write ports, the size in words of the register file and the number of bits per word in the file may vary from implementation to implementation while still providing the various benefits of the invention. Fig. 1 illustrates one such implementation of an expandable register file 10 constructed in accordance with the teachings of the present invention. It is realized as a single integrated circuit chip and, as illustrated, comprises a two read port, two write port, single array, random access memory 12 having dual read write access provided via an A side, and a B side, address control consisting of AND gates 20 and 22 and multiplexer MUX 24, and AND gates 30 and 32 and multiplexer MUX 34, respectively. Memory 12 receives at a write port DATA_IN_A₀ ₁₇ an eighteen bit data word conducted to the memory via a unidirectional data bus 14a and at a write port DATA_IN_B₀ ₁₇ an eighteen bit data word conducted in the memory via a unidirectional data bus 14b. Memory 12 presents at a pair of read ports, DATA_OUT_A₀ ₁₇ and DATA_OUT_B₀ ₁₇, eighteen bit data words which are conducted from the memory 12 via a pair of unidirectional data busses, 16a and 16b, respectively. The A side and B side of memory 12 provide independent, simultaneous, random access to any register within the memory. As the A side and B side address controls function identically, only the operation of the A side address control will now be described. Memory 12 comprises a single array of 64 addressable registers, each register capable of storing an eighteen bit word consisting of a low order byte comprising bits 0 through 8 and a high order byte comprising bits 9 through 17. Either the low or high order byte of a register can be independently accessed during writing via an inverted write enable low byte In a typical application, the four port register file 10 would be used in a programmable digital device such as a microprocessor which employs a system clock to effect synchronous operation of the microprocessor. The signal generated by the clock is communicated to the register file 10 as an inverted write enable clock During the period when the WRITE_EN_A_CLK signal is a HIGH, the AND gates 20 and 22 conduct the WRITE_EN_A_L and WRITE_EN_A_H control signals, respectively, to the memory 12 and the MUX 24 conducts the 6 bit ADDR_WRITE_A₀ ₅ address to the memory 12. When the WRITE_EN_A_CLK signal is a LOW, the AND gates 20 and 22 are disabled and LOW write enable control signals are conducted to the memory 12 and the MUX 24 conducts the 6 bit ADDR_READ_A₀ ₅ signal to the memory 12. The application of a HIGH write enable A control signal for a low and or high order byte of a register specified by a write A address applied to the memory 12 causes the low and or high order byte, respectively, of the data word at the DATA_IN_A₀ ₁₇ port to be destructively written to the specified byte s of the specified register within memory 12. Similarly, the application of a LOW write enable A control signal for a low and or high order byte inhibits writing of the low and or high order byte, respectively, at the DATA_IN_A₀ ₁₇ port to the corresponding byte of the specified register. When the WRITE_EN_A_CLK signal is a LOW, the eighteen bit contents of the register specified by a read A address applied to the memory 12 is non destructively read out and conducted to the DATA_OUT_A₀ ₁₇ port of the memory 12. Since the register file 10 of the instant invention permits the application of independent clock signals at the A and B sides, a given register could be written into, from side A for instance, and read from, from side B for instance, simultaneously. In this case the value read is the value written. Alternatively, a given register could be written from both the A side and the B side at the same time. In this case the value written is undefined. Of course, a given register can be read from both sides simultaneously with consistent resulting values. The single array dual access memory 12 is preferable constructed from emitter coupled logic ECL integrated circuitry and can be fabricated to be externally compatible either with transistor transistor logic TTL or ECL. The preferred embodiment of memory 12 is described in our related copending European Patent application no. 85307866, published under EP A 180 467 , filed 30 October 1985, and entitled Dual Port Read Write RAM with Single Array and assigned to the assignee of the instant application. Since the instant invention provides a register file 10 with two write ports, parallel interconnection of the register files of the present invention is possible resulting in a dual write port register file expandable to any number of read ports. Fig. 2 illustrates the parallel interconnection of two of the dual access register files shown in Fig. 1, providing a four read port, two write port register file 40. As shown, two four port dual access register files 50 and 60 of the instant invention are interconnected in parallel so that the A side write enable control signals The DATA_A_IN₀ ₁₇ ports of register files 50 and 60 are similarly connected in parallel to form a D_IN_A₀ ₁₇ port for expanded register file 40. The DATA_B_IN₀ ₁₇ ports of register files 50 and 60 are similarly connected in parallel to form a D_IN_B₀ ₁₇ port. As illustrated in Fig. 2, the expanded two write port, four read port register file 40 can provide storage for a multiplier 90 and a data ALU 92, as might be typically used in a microcomputer. Two data values stored in register file 50 and conducted there from via the DATA_OUT_A₀ ₁₇ and the DATA_OUT_B₀ ₁₇ ports to the inputs of the multiplier 90 are combined and the resulting address is then conducted from the output of multiplier 90 to the D_IN_A₀ ₁₇ port for subsequent storage in register file 40. Similarly, two data values stored in register file 60 and conducted there from via the DATA_OUT_A₀ ₁₇ and the DATA_OUT_B₀ ₁₇ ports to the inputs of the data ALU 92 are combined and the resulting value is then conducted from the data ALU 92 to the D_IN_B₀ ₁₇ port for subsequent storage in register file 40. Operating two register files 10 of the instant invention in parallel as shown in Fig. 2, permits treating addresses and data interchangeably, a considerable programming convenience.