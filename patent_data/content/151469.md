# HIGH SPEED AND HIGH ACCURACY ANALOG TO DIGITAL CONVERTER

## Claims
Hochgeschwindigkeits Analog Digital Wandler zum Umwandeln eines analogen Eingangssignals bei 12 in eine digitale Darstellung mit einer Anzahl von Bits, die eine erste Menge höherwertige Bits und eine zweite Menge niederwertige Bits aufweist, wobei der Wandler 10 enthält

## Description
The present invention relates to analog to digital converters. There are numerous techniques for converting an analog signal to a digital representation. However, previous analog to digital converter circuits employing these techniques have tended to be either relatively slow or inaccurate, or both. For example, one type of analog to digital converter circuit, known as a successive approximation converter, has an addressable latch in which successive digital approximations to the analog input signal are made. The analog value of the digital latch output is compared to the analog input signal after each approximation. The approximations are usually made starting with the most significant bit of the addressable latch, and trying a binary zero or one in each bit position. The binary value in that bit position is kept or changed depending upon the comparison of the associated analog value with the analog input signal. After all the bit positions have been tested, the binary code remaining in the addressable latch is a digital representation of the analog input voltage. These successive approximation converters can, depending upon the number of bit positions in the addressable latch, provide an accurate, high resolution digital output. However, because the bits are computed one at a time, these circuits are often too slow for many high accuracy applications. Other types of converters include parallel analog to digital converters such as flash converters which compute all the bits or a group of bits of the digital output in parallel such that the conversion is done very quickly. However, the accuracy of these circuits is often not very great and the circuits tend to be very large for applications requiring a high resolution output. For example, a typical design for a 2 bit flash converter has four equal series connected resistors connected to a reference voltage, and four comparators, with one input of each of the comparators connected to a corresponding resistor. The voltages across each of the resistors provide four distinct reference voltages to the four comparators which compare these voltage levels to the analog input signal. Combinational logic converts the outputs of the four comparators to a 2 bit digital representation of the analog input signal. As seen above, a 2 bit parallel flash converter has four comparators. In general, the number of comparators utilized in a flash converter increases by a factor of two for each additional bit of accuracy. Thus, a 3 bit flash converter typically has eight comparators and a 4 bit flash converter has sixteen converters. Accordingly, it is readily seen that for high accuracy applications requiring a large number of bits, a flash converter can grow unrealizably large and complicated. Some converter circuits have utilized sequentially operated flash converter circuits to reduce the complexity of the circuits, but this approach is not readily adaptable to high resolution converters of twelve bits or more. The prior art document INTERNATIONAL SYMPOSIUM ON NUCLEAR ELECTRONICS, Versailles, 10th 13th September 1968, pages 88 1 88 15, Desgrandchamps, Paris, FR C. BONSIGNORI et al. A new 4096 channel fast converter for nuclear spectrometry describes an analog to digital converter circuit which includes a high speed parallel converter and a successive approximation converter. The analog input signal is converted in a first step to an approximate digital representation by the high speed parallel converter wherein the parallel converter provides a plurality of the most significant bits of the digital representation. These most significant bits are loaded into an addressable latch or register of the successive approximation converter which provides the remaining least significant bits thereby completing the conversion of the analog input signal. It is an object of the present invention to provide an improved high resolution analog to digital converter which is fast, accurate and relatively uncomplicated. The object is solved by an analog to digital converter according to the features of claim 1. A preferred embodiment of the converter according to claim 1 is claimed in claim 2. It has been found that an analog to digital converter circuit in accordance with the present invention can perform the conversion faster than can a successive approximation converter of equal resolution, and is significantly less complicated than a typical parallel converter of comparable resolution. Referring now to Figure 1, a schematic block diagram is shown illustrating an analog to digital converter circuit in accordance with a preferred embodiment of the present invention. The analog to digital converter circuit is indicated generally at 10 and is hereinafter often referred to as the converter 10 . The convertor 10 converts an analog input voltage V In accordance with the present invention, the analog input signal V Both the parallel A D converter 16 and the SA converter 18 are controlled by a control logic circuit 20 via control lines indicated at 34 and 36, respectively. The conversion of the analog input signal V In the illustrated embodiment, the eight most significant bits are computed in two sequential substeps in which the four high order bits are computed in parallel and then the remaining four low order bits of the first eight bits are computed in parallel as will be more fully explained below. Once the parallel conversion is completed, the bits are loaded into the eight most significant bit positions of an addressable latch. In the illustrated embodiment, the addressable latch includes a 12 bit successive approximation register 22 of the SA converter 18. Because there may be an inaccuracy in the 8 bit result computed by the 8 bit parallel A D converter 16, a quantity representing the maximum possible error is first subtracted from the 8 bit result by an 8 bit full adder 24 before the 8 bit result is loaded into the register 22. This quantity is provided by an error range input circuit 26. Subtracting the known maximum error from the 8 bit result ensures the accuracy of the converter circuit 10 as will also be more fully explained below. The SA converter 18 includes a comparison circuit 28 which compares the analog input signal V The SA converter 18 is now ready to compute the remaining four bits of the 12 bit output. The control logic 20 successively tests each of the remaining four bit positions one at a time and changes each tested bit position as necessary until the analog value of the SAR 22 output matches the analog input signal V Because a majority of the bit positions of the 12 bit digital output are computed by the 8 bit parallel A D converter 16, the converter 10 provides a very fast conversion of the analog input signal V In one embodiment of the present invention, the converter 10 can be implemented utilizing available integrated circuits as shown in Figures 2 and 3. Referring particularly to Figure 2, the 8 bit parallel A D converter 16 is implemented with a National Semiconductor ADC0820 integrated circuit IC chip as indicated at 16 in Figure 2. The 8 bit conversion is initiated by the parallel A D converter 16 when the It is believed that the ADC0820 IC chip is constructed and operates as follows. The converter 16 has two 4 bit flash converters, a high order 4 bit flash converter and a low order 4 bit flash converter, to give a full 8 bit output. The high order 4 bit flash converter compares the analog input signal V The positive reference voltage at 44 is applied to sixteen series connected resistors of equal resistance to provide sixteen incremental reference voltages across the sixteen resistors. The sixteen comparators each have one input connected to an associated resistor and the other input connected to the analog input signal V Upon completion of the high order 4 bit conversion, a 4 bit digital to analog converter within the converter 16 generates a discrete analog voltage from the results of that conversion. This discrete analog voltage is subtracted from the analog input signal V The results from each of the high order and low order conversions are entered into an 8 bit latch and are outputed to the 8 bit output line designated B₇ B₀. At this time, the output signal As shown in Figure 1, the eight bits computed by the parallel converter 16 are outputed to the 8 bit full adder 24. Because there way be an inaccuracy in the 8 bits computed by the converter 16, the 8 bit full adder subtracts a quantity equal to the known maximum error of the converter 16. The error range input circuit 26 is programmed to provide this known maximum error to the adder circuit 24 for subtraction from the 8 bit output of the converter 16. Referring now to Figure 3, the 8 bit full adder 24 is shown to include a first 4 bit adder circuit 50 and a second 4 bit adder circuit 52. In the illustrated embodiment, each of the 4 bit adder circuits may be implemented utilizing a 74LS83 integrated circuit chip. The A inputs of the adder circuits 50 and 52 are connected to the output lines B₇ B₀ from the parallel converter 16. In the illustrated embodiment, the known maximum error of the parallel converter 16 is 1₂. Since adding the 2 s complement of 1₂ to the output of the converter 16 is the same as subtracting 1₂ from the output of the converter 16, the B inputs of the adder circuits 50 and 52 are all connected to the logic one voltage 5 volts indicated at 26 providing an input of 11111111₂ the 2 s complement of 1₂ at the B input. If, for example, the known maximum error of the converter 16 is instead 10₂, the 2 s complement of 10₂ is inputed at the B inputs to subtract 10₂ from the output of the converter 16. The resulting sum or difference is outputed at 54 to a plurality of AND gates 56. One input of each AND gate is connected to the carry out output Cl of the adder circuit 50. The carry out output Cl of the adder circuit 50 is a zero only if the output of the parallel converter 16 is all zero s. Thus, the AND gates 56 ensure that the output of the adder circuit 24 is zero when the output of the parallel converter 16 is zero to prevent a negative number from being outputed by the adder 24. The output 58 of the adder circuit 24 is provided to the eight most significant bit positions B₁₁ B₄ of the successive approximation register indicated at 22. In the illustrated embodiment, the eight most significant bits of the successive approximation register 22 are latched by two 4 bit 74LS163 integrated counter circuits 60 and 62, respectively. The remaining four least significant bits will be computed and latched in the J K flip flops 91 94 of the SA register 28. These four least significant bit positions are designated B₃ B₀. The 8 bit output of the 8 bit full adder 24 is loaded by the counters 60 and 62 on the rising edge of a load signal inputted at the input LD from the control logic 20. The control logic 20 generates this load signal and other control signals as described below. The initial state of the control signal at control signal line 76 designated SHIFT The logic one state of the Q When the logic state of the control signal line 76 changes to a logic high, the contents of the shift registers 80 and 82 are shifted one position. The control logic 20 generates the SHIFT signal on line 76 as follows. The When the SHIFT signal goes high, the outputs of the shift registers 80 and 82 are shifted one bit position at the next clock pulse as shown in Figure 4. The input of the shift register 82 is connected to the last bit position output Q As previously mentioned, the eight most significant bit positions B₁₁ B₄ of the successive approximation register 18 are provided by the counters 60 and 62 in which is loaded the 8 bit output of the parallel converter 16 after subtraction of the maximum error by adder 24 . The remaining four least significant bits positions B₃ B₀ provided by four JK flip flops 91 94 are preset to a logic one. The 12 bit output of the successive approximation register 22 is inputed by the comparison circuit 28 which is shown in greater detail in Fig. 2. The comparison circuit 28 compares the analog value of the 12 bit SAR output to the analog input signal V Referring now to Figure 3, the output 32 from the comparison circuit 28 is connected to the inputs of two NAND gates 100 and 102, respectively, the outputs of which are connected to the inputs of a third NAND gate 104. The output of the third NAND gate 104 is connected to the pulse input of the counter 62. As previously mentioned, the counters 60 and 62 are allowed to settle after the logic one is shifted to the Q The eight bits stored in the counters 60 and 62 are tested one more time on the next clock pulse when the logic one is shifted to the Q Two tests of the output of the counters 60 and 62 are provided since the maximum possible error of the parallel converter 16 is 1₂, and 1₂ is subtracted from the output of the parallel converter 16 in the illustrated embodiment. For example, if the result of the parallel conversion should have been 00000011₂, but instead due to an error was 00000010₂, a 0000001₂ will be stored in the counters 60 and 62 after a subtraction of 1₂ by the adder circuit 24. Consequently, after two tests and two increments, the output of the counters 60 and 62 will be the correct value 00000011₂. Thus, after two tests, the latching of the correct eight bits B₁₁ B₄ in the first eight bit positions of the SA register 22 is assured and the converter 10 is then ready to compute and latch the remaining four bits B₃ B₀ of the digital representation of the analog input signal V The J input of the JK flip flop 91 for the B₃ bit position is connected to the output of an AND gate 110, one input of which is connected to the comparison circuit output line 32 and the other input is connected to the Q The clear input CL of the JK flip flop 91 for the bit position B₃ is connected to the output of a NAND gate 120, one input of which is connected to the TEST signal line 122 and the other input is connected to the Q After the logic one has been shifted into the Q The successive approximation conversion continues successively setting each of the remaining bit positions to a zero, comparing the SA register output to the input signal V As shown in Fig. 3, clock input of a JK flip flop 140 is connected by a line 142 to the Q Referring now to Figure 2, the comparison circuit 28 is shown in greater detail. The comparison circuit 28 includes a digital to analog converter 150 which has 12 inputs connected to the 12 bit output B₁₁ B₀ of the successive approximation register 22 Figure 3 . In the illustrated embodiment, the digital to analog converter 150 may be implemented with an Intersil AD7541 integrated circuit chip. The converter 150 has an input connected to the analog input signal V The voltages of the outputs IOUT₂ and IOUT₁ are compared by a comparator circuit 152, the output of which is inverted by an inverter circuit 154. The output of the inverter circuit 154 is connected by the comparison circuit 28 output control signal line 32 to the control logic 20 Figure 3 . A simplified equivalent schematic diagram of the Intersil AD7541 integrated circuit chip 150 is shown in Figure 5. The circuit 150 includes an R 2R resistor ladder network 160 and a plurality of NMOS single pole double throw SPDT switches 162a 162l. The resistor ladder network 160 has 12 resistor branches or legs 164a 164l. Each resistor leg 164a 164l is connected to one of the switches 162a 162l. Interconnecting each pair of adjacent resistor legs is a resistor 168a 168k which has half of the resistance of the resistors in the legs. In the illustrated embodiment, the resistor of the legs 164a 164l are 20k ohms and the resistors 168a 168k are each 10k ohms, hence the designation R 2R ladder. An additional 20k ohm leg 164m is connected to the junction of the leg 164l and the resistor 168k. The reference voltage V As previously mentioned the converter circuit 150 has two outputs designated OUT₂ and OUT₁ with output OUT₂ externally coupled to ground as indicated in phantom. Output OUT₁ is connected to one pole of each of the switches 162a 162l and the other output OUT₂ is connected to the other pole of the switches 162a 162l. The state of the switches 162a 162l is controlled by the logic states of the 12 bit output B₁₁ B₀ respectively, of the successive approximation register 22. For example, if the logic states of the outputs B₁₁ B₀ of the SA register 22 are all logical one, each of the legs 164a 164l will be connected to the output OUT₁ as shown in Figure 5. However, wherever the logic state of an SA register 22 output is logical zero, the associated switch 162a 162l will connect the associated network leg to the output OUT₂. Thus, the outputs OUT₁ and OUT₂ form summimg junctions for summing selected individual currents through the network legs 164a 164l, depending upon the states of the switches 162A 162L. The output OUT₁ is coupled to the analog input signal V In summary, the analog input signal V It will, of course, be understood that further modifications of the present invention are possible. For example, the converter 10 may be constructed as a single monolithic integrated circuit chip. In addition, the analog to digital converter of the present invention may use other types of parallel converters.