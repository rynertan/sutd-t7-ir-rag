# A voice detector.

## Abstract
A voice operated switch detects the presence of human speech by comparing the received electrical signals with a delayed version of themselves and assessing the degree of similarity which exists. The received signals are passed to a correlator 4, which compares undelayed signals applied to terminal 3 with delayed signals applied to terminal 5. If the degree of correlation as determined by a level detector exceeds a threshold value applied over terminal 12, a pulse generator 9 controls a switch 10 to enable the speech signals to be transmitted over a communication link 13 to 15. The sensitivity of the voice detector is dependent on three time durations T1, T2 and T3. Typical values of these durations are given.

## Claims
Claims 1. A voice detector including means forreceiving an input signal means for comparing signals received at a ,particular time with thosesignalsreceived at a previous time nd for providing an output signal having a duration which is significantly longer than the time interval between the reception of the two signals if the degree of similarity between the two received signals exceeds a threshold level, so that the output signal is indicative of the presence of voice signals. 2. A voice detector including means for receiving input signals means for delaying for a first predetermined duration said input signals correlation means for continuously comparing them for a second predetermined duration with undelayed received signals and for producing a control signal representative of the instantaneous result of said comparison and means for producing an output signal having at least a third predetermined duration when said control signal exceeds a threshold value, said third predetermined duration being longer than either said first or second predetermined duration. 3. A voice detector as claimed in claim 2 and wherein said first predetermined duration is less than said second predetermined duration. 4. A voice detector as claimed in claim 2 or 3 and wherein said threshold value is adjustable. 5. A voice detector as claimed in claim 2, 3 or 4 and wherein said correlation means includes a plurality of multipliers for multiplying successive delayed signals with sucsessive undelayed signals, and means for summing the results of the individual multiplications to produce said control signal. 6. A voice detector as claimed in any of the claims 2 to 5 and wherein said means for producing an output signal comprises a re triggerable monostable which provides a contin uous output signal so long as said control signal exceeds said threshold value at intervals which are less than said third duration. 7. A voice detector as claimed in any of claims 2 to 6 and wherein said output signal is used to determine the transmission direction of a communication link. 8. A voice detector as claimed in any of the claims 2 to 5 and wherein said control signal is filtered by a narrow band pass band filter prior to being applied to a threshold circuit. 9. A voice detector as claimed in claim 8 and wh√®rein said pass band extends from 1 Hz to 5 Hzapproximately. 10. A voice detector as claimed in claim 8 or 9 and wherein pulse generating means are provided for generating a pulse each time the filtered control signal exceeds the threshold value. 11. A voice detector as claimed in claim 10 and wherein means are provided for generating a second control signal if the time spacing between adjacent pulses produced by said pulse generating means is less than a predetermined value related to said third predetermined duration. 12. A voice detector as claimed in claim 11 and wherein said second control signal is used to control the passage of said received input signals only if said second control signal is continuously present for a certain time.

## Description
A voice detector The invention relates to a voice detector. A requirement exists to detect the presence of human speech, but it is difficult to provide a suitable detector, which responds reliably and quickly to a voice and which is insensitive to other sounds or interference. For example, in a two way communication link in which speech is carried by electrical signals over a single channel, it is necessary to ensure that signals are sent in only one direction at a time to avoid interference and possibly disturbing feedback effects. Thus it would be desirable to detect the presence of voice signals travelling in one direction on a communication link so as to prevent electrical signals being sent in the opposite direction at the same time.A requirement of this kind particularly arises when a two way telephone conversation, for example is to be transmitted over a single wire or in a single frequency channel.The voice signal should be rapidly detected so that the initial portions ofthe speech are not lost. The detector should not easily respond to noise, or other signals which are not derived from voice information, since this could otherwise inhibit the correct transmission of voice signals. The present invention seeks to provide a voice detector in which this requirement is met. According to one aspect of this invention a voice detector includes means for receiving an input signal means for comparing signals received at a particular time with those signals received at a previous time and for providing an output signal having a duration, which is significantly longer than the time interval between the reception of the two signals if the degree of similarity between the two received signals exceeds a threshold level so that the output signal is indicative of the presence of voice signals. According to a further aspect of this inventison, a voice detector includes means for receiving input signals means for delaying for a first predetermined duration said input signals correlation means for continuously comparing them for a second predetermined duration with undelayed received signals and forproducing a control signal representative of the instantaneous result of said comparison and means for producing an output signal having at least a third predetermined duration when said control signal exceeds a threshold value, said third predetermined duration being longer than either said first or second predetermined duration. The invention is further described with reference toFigure 1, which illustrates a voice detector in accordance with the present invention, Figure 2 illustrates part thereof in greater detail, Figure 3 is an explanatory diagram relating to Figure 1, Figure 4 illustrates an alternative embodiment of the invention, and Figures 5, 6 and 7 are explanatory diagrams relating to Figure 4. The voice detector is intended to control a two way communications link, which. utilises only a single signal path.It is important to ensure that voice signals are not along the link simultaneously in both directions along the signal path since this would cause interference. Additionally, a person speaking at one end of the link would hear his own voice amplified and returned to him, and in practice this could be very disconcerting. Consequently, the voice detector is used to monitor the presence of voice signals on the link. When a voice signal is detected the required interconnections are set up so as to enable the person who is speaking at one end of the link to be heard by the user at the other end of the link.When the first user stops speaking, typically at the end of a sentence, the voice detector is then able to allow the other user to reply and be heard by appropriately re setting the link interconnections. In order to provide satisfactory and reliable operation, the voice detector must be able to distinguish the human voice from background noise and extraneous signals which are invariably present. The voice detector is provided with an input terminal 1 at which the information provided by one of the two users is received. The signal received at terminal 1 is passed to a bandpass filter which has a pass response extending from 300 Hz to 2700 Hz. By this means extraneous out of band frequencies are removed leaving only signals in the wanted band which includes voice frequencies. The frequency band selected corresponds to a normal telephone frequency band. The filtered frequency signal is applied to one input 3 of a correlator 4.It is also applied to a second input 5 of the correlator 4 via an analogue delay line 6 having a controllable delay T1. The output of the correlator 4, which serves to compare the two signals applied at its inputs 3 and 5 in a manner described in connection with Figure 2, is in the form of a control sgnal which is representative cm the degree of similarity between these two signals. The control signal obtained in this way is applied to an adjustable level detector 7 over line 8. By adjusting the threshold level of the detector 7, an acceptable degree of similarity can be selected as required. The required threshold can be adjusted by applying a variable signal to the level detector via terminal 12. The level detector 7 acts to compare the magnitude of the control signal on line 8 with the threshold level applied via terminal 12.When the control signal present on line 8 exceeds the threshold value, the level detector7 provides an output to a pulse generator 9.The pulse generator 9 comprises a re triggerable monostable.When the level detector 7 provides an output, the monostable is set so as to provide an output pulse for a predetermined minimum duration T3, which operates a switch 10. The switch 10 is held in one state for the duration of the pulse provided by the pulse generator 9 so as to connect the input terminal 1 to an output terminal 13. This period is determined by the relaxation tirneof themonostable. However, if a further signal is obtained from the level detector before the expiry of the relaxation timeor the original signal is still present, the level of the output pulse provided by the pulse generator 9 does not change. In effect, the monostable is re triggered for as long as output signals are continually present at the level detector 7.When the output signal disappears the pulse generator 9 remains in the same state until the relaxation period T3 of the monostable has expired. The correlator 4 is illustrated in greater detail inFigure 2. It consists of two shift registers 20 and 21, each having respective input terminals 3 and 5. Signals applied to either of the input terminals 3 and 5 are progressively clocked along the shift registers 20 and 21 under the action of a clock signal applied to clock inputs 25 from a source not shown. The shift registers 20 and 21 are such as to periodically sample the amplitude of the signals present at the input terminals 3 and 5 and to pass an analogue signal having a corresponding amplitude from one stage of a shift register to the next stage at each clock period. The shift registers thus each act as a delay line having a total delay period ofT2. Conveniently, the shift registers 20 and 21 could comprise charge coupled devices.Each stage of the shift registers 20 and 21 is connected to respective inputs of an analogue multiplier 22. Although only four such stages and multipliers are indicated in Figure 2, in practice a large number would be provided typically sixty four stages. The outputs from each of the multipliers 22 are fed to a summation unit 23, which provides an output signal on line 8. The correlator 4 is itself a known device and is made by Reticon Inc. under type number R5403 in this form each device contains shift registers having thirty two stages each, so two devices coupled together are required to give the delay of sixty four stages referred to above. Since the signal applied to input terminal 5 is delayed by the delay line 6 for a period T1 relative to the signal applied to terminal 3, the action of the correlator 4 is to continuously compare the received signal with a delay version of itself. If the signal received at terminal 1 consists until ely of random noise, there will exist no consistent correlation with time between the two signals at terminals 3 and 5 and the effect of multiplying particular elements of the received signal with preceding elements will produce a summation signal having a relatively low value. However, in the case of a human voice, there is a good degree of correlation between signal amplitude and time over short periods and it is found that a human voice produces an output on line 8, which is substantially greater than would be obtained with a completely uncorrelated signal provided that time durations T1 and T2 are suitably related. The output signal is present on line 8 only whilst voice signals are actually being received and the purpose of the pulse generator 9 is to bridge the silent pauses in normal speech, i.e. the gaps between adjacent spaced syllables of a sentence and pauses between sentences etc. The quality of the correlation obtained is dependent on the length T1 of the delay line 6, the length T2 of the shift registers 20 and 21 and the number of multipliers 22.Additionally, the relaxation time T3 of the monostable forming part of thepulse generator 9 must be set so as to give a subjectively acceptable effect to users. Typically the delay T1 of the delay unit 6 is between 0.3 mS and 3 mS, the delay T2 provided by a shift register 20 or 21 is 32 6S, and the relaxation period T3 of the monostable ofthepulse generator 9 is about 0.3 second to 1 second. These figures are, of course, give only by way of example, and in practice the values of T1 and T3 will be set up empirically. When the pulse provided by pulse generator 9 terminates, the switch 10 operates to connect terminal 13 to terminal 14.The communication path is represented by the broken line between terminals 13 and 15. It is a single two way link, in which signals can travel in only one direction at a time.A person atthe terminal 15 can therefore speak only when the person at terminal 1 is silent thus the person at terminal 1 assumes control of the link. Figure 3 is an explanatory diagram illustrating the waveforms which are present at various points in the circuit diagram shown in Figure 1. The topmost line in Figure 3 represents the waveform which is applied to input 3 of the correlator 4.It consists of two bursts of speech signals, the first speech signal lasting for a time indicated by reference numeral 30 and being spaced from the second burst of speech by a time 31.It is assumed thasduring the time 30, signal components are present which have a significant non zero amplitude The same signal is applied to terminal 5 of the correlator 4, but is delayed by a time T1 equal to the delay provided by the delay unit 6. This waveform is illustrated in the second line of Figure 3.The output of correlator 4, which is the control signal present on line 8 is shown in the third line and it will be seen that this waveform is substantially zero except forthoseperiods of time when the product of thewaveftorms in the first and second lines possess a significant value. It is assumed that the magnitude of the reference signal applied to terminal 12 and which arts as the threshold level exceeds the zero value of the waveform by an amount designated by the arrows 32. The output of the pulse generator 9 is shown in the fourth line of Figure 3 and the relaxation period of the monostable which forms part of te pulse generator 9 is indicated as period T3. It is assumed in Figure 3 that the second speech burst follows the first within the period T3. Consequently, the monostable is triggered for a second period so that the state of the switch 10 remains constant until a further period T3 has elapsed from the commencement of the second rising edge identified with the waveform on line 8. The corresponding switching action of the switch 10 is shown in the bottom line ofFigure 3, from which it can be seen that the path from terminal 1 to terminal 13 is held open whilst a pulse output is applied by the pulse generator 9.Whilst no speech is present at input terminal 1, the switch 10 reverts to the condition in which terminal 13 is connected to terminal 14 to allow speech signals to travel from the other end 15 of the communication link to terminal 14. The effective amplitude of the waveform on line 8 is a function both of the period T2 and the number of individual multipliers 22 forming part of the correlator 4. Figure 4 shows an alternative embodiment of the voice detector which is able to operate with greater reliability in the presence of certain kinds of noise. The voice detector is provided with an input terminal 41 at which the signal carrying speech is received. The signal is passed to an initial processor 42 which corresponds exactly to, and tmprises, the bandpass filter 2, the correlator 3 and the delay unit 6 shown inFigure 1. These items are represented by the single block 42 merely for the sake of simplicity. The output of the initial processor 42 this output signal corresponds exactly to the output ofthe correlator 4 is passed to a bandpass filter 43 having an extremely narrow pass band frequency range. Typically, the pass band extends from 1 Hz to 5 Hz.In view nf the difficulty of designing such a filter having sharp cut off characteristics, itmay be desirable, in practice, to constitute the filter as a number of separate filtering stages. It is believed that the signal provided by the processor 42 is likely to be indicative of the presence of speech at terminal 41 if it contains significant frequency components within this very narrow pass band. The signal is related to the syllabic rate, but because of the previous processing to which it has been subject within the processor 42 it is, in general, not exactly equal to the received syllabic rate. The output signal produced by the bandpass filter 43 is illustrated in Figure 5 in which the variation of signal amplitude with time is shown.As the bandpass filter 43 has a lower cut off frequency of 1 Hz, it is, of course, a.c. coupled and consequently its output signal is centred on zero volts. The portion of Figure 5 to the left of the broken line 46 represents the kind of signal which is produced by the bandpass filter when a signal which does not contain speech is applied to input terminal 41. The signal will, however, contain noise to a greater or lesser extent. A rapidly varying low amplitude signal is provided which does not cross the two threshold levels 44 and 45 except upon very rare occasions. Conversely, the signal produced when speech is present is shown to the right of the broken line 46 and it will be seen that a signal having an irregularly varying amplitude is produced. This signal has periodic high amplitude excursions which are arranged to exceed the threshold values 44 and 45, which are set accordingly. A window detector 47 is arranged to receive the output of the bandpassfilter 43 and it incorporates two threshold levels 44 and 45. These two threshold levels may be pre set or they may be variable during operation in accordance with a required sensitivity or false alarm rate. Each time the signal crosses either threshold 44 or 45. The window detector 47 generates an output pulse. A typical train of such pulses is illustrated in Figure 6 and these pulses are applied to a charge pump circuit 48. The charge pump circuit 48 is simply a circuit containing a storage capacitor which is charged relatively rapidly via a forward biassed diode whilst a pulse is applied to it, but the charge on the capacitor subsequently decays relatively slowly at a rate determined by the time constant of a discharge resistor, or the like.The output signal produced by the charge pump 48 is illustrated diagrammatically in Figure 7 and itwill be seen that each time a pulse from the window detector 47 is received, the output level increases rapidly bit then decays slowly until the next pulse is received.If a number of pulses are received in rapid succession, the charge level rises cumulatively hence the term charge pump.A referencelevel 50 is incorporated in a further level detector 51, which provides an output only whilst the output of the charge pump circuit 48 exceeds this reference level. This means that the level detector 51 does not provide an output if the waveform shown in Figure 5 exceeds one or other of the threshold levels 44 or 45 on rare occasions or spasmodically. This reduces the suceptibility of the speech detector to certain kinds of noise. Thus the level detector 51 provides an output only when a continuous stream of syllabic pulses is produced in a sufficient number to pump the charge storage level of the charge pump 48 to a sufficiently high value i.e. to the level 50. The decay time of the charge pump 48 is arranged to take into account the naturally occurring pauses in speech so that a continuous signal is generated by the level detector 51 whilst speech is present.In order to avoid the system responding to bursts of noise, the output of the level detector 51 is passed to a time out circuit 52, which is arranged to provide an output only ifthe signal applied to the level detector 51 exceeds the threshold value 50 for a predetermined. time, which is typically about one second. Thus, the time outscircuit 52 provides an output only when its input signal has tees present for this predetermined time, and providing that its signal is present so as to satisfy this requirement, the time out circuit 52 generates a control signal which renders the switch 53 conductive. The switch 53 routes the speech signal received at terminal 41 to an output terminal 54 for utilisation. It will be apparent that the various filter and control circuits introduce significant time delays and a compensating delay S provide by the delay circuit 55 this ensures that the switch 53 operates on the speech signal which generated thecontrol signal at that instant. Typically the delay provided by circuit 55 is in excess of one second. The initial processor 42 contains the same two time constants T1 and T2 as described with reference to Figure 1.However, the time T3 is represented by the decay characteristics of the charge pump 48 and corresponds approximately to the time necessary for its signal level to decay to the level which it had immediately before the preceding charge pulse. This periodT3 is indicated at a convenient portion of the waveform shown in Figure 7 and is typically of the order of a half to one second.