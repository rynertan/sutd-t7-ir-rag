# METHOD AND APPARATUS FOR CONTROLLING A ROBOT HAND ALONG A PREDETERMINED PATH

## Claims
Verfahren zur Steuerung einer Roboterhand entlang einer vorbestimmten Bahn mit einer vorbestimmten Geschwindigkeit, folgende Schritte umfassend

## Description
This invention relates to a method and an apparatus for controlling a robot hand, according to claims 1 and 6, respectively. Recently, the robots have been more and more introduced to various industrial fields for automating a work or promoting a labor welfare. This wide application of the robots needs controlling the robot hand precisely along the predetermined path at the predetermined speed. An interpolating method is known as one of the effective control techniques for precisely moving the robot hand, which interpolates the path of the robot hand between teaching points. Methods of interpolating the path of the robot hand include a method based on position controlling operations and a method based on speed controlling operations. In the method based on position controlling operations, actual position data obtained by subjecting an actual pair displacement which indicates the actual position of the robot hand to coordinate conversion, and target position data are used to compute a target position for a subsequent sampling operation. In this specification the expression pair displacement means the relative displacement of a pair of robot members which are connected together as by a joint. The actual pair displacement is subtracted from a target pair displacement obtained by subjecting the target position to coordinate conversion, and the resultant value is multipled by k to determine an instruction pair displacement, the target value, for each rotary pair, and these instruction pair displacements are input to a driving system. The driving system is provided with the same number of driving circuits of the same construction as the number of degrees of freedom of the robot hand. On the other hand, the method based on speedcontrolling operations is carried out as follows. Namely, when an instruction for moving a robot hand from its present position to a target position is given, a target speed for a subsequent sampling operation is computed on the basis of the actual position data and the target position data, and the target speed is subjected to coordinate conversion to determine a pair speed for each rotary pair, and these pair speeds are input to a driving system. In the method of interpolating the path of a robot hand which is based on speed controlling operations, one of the conventional methods, a speed curve with respect to a predetermined path is established in advance, and the target position for the subsequent sampling operation is determined by using the speed curve. However, the speed of the robot hand deviates constantly from a pre set speed curve, since it varies with load. Consequently, the robot hand moves off the path, or the speed of the robot hand varies to prevent the robot hand moving at a constant speed. Once the robot hand has moved off the path, it is impossible to return it thereto. This means that it is difficult to move the robot hand correctly along the path. Another path interpolating method has been developed with a view to eliminating the drawbacks encountered in the above methods. In this method, the deviation of the robot hand from a pre set path is computed, and the value of a controlling speed proportional to the requltant deviation is added to a command speed value to improve the accuracy with which the robot hand moves along the pre set path. However, this method of interpolating the path of a robot hand cannot improve to a fully satisfactory extent the accuracy with which the robot hand moves along the pre set path. The object of the present invention is to provide a method and an apparatus for controlling a robot hand along a predetermined path which can enable the robot hand to move along the path at a predetermined velocity with a high degree of accuracy. This above object is achieved by the features of method claim 1 and apparatus claim 6. Dependent claims are directed on preferred embodiments of the invention. According to the present invention a high path correcting accuracy can be obtained and a high ability of moving a robot hand at a predetermined speed can be achieved, when the robot hand is moved along a designated path. The invention is effectively applicable to the control of a robot having a plurality of axes of motion. The principle of the present invention will now be described with reference to Fig. 1. A straight line extending from a start point A to an end point B is the given path. A point which the robot hand passes during its movement is designated by the letter P, and a point at which a perpendicular from the point P meets the given path is designated by the letter Q. Position vectors of the positions A,B,P,Q are designated by respectively, and the direction vector of the path by can be expressed as follows In these equations v A vector In this equation, the symbol Σ A method of determining the proportional coefficients will be described later. The present invention will now be described in more detail with reference to an embodiment thereof shown in the accompanying drawings. Fig. 2 is a block diagram of an example of a control apparatus used to practice the method of controlling a robot hand according to the present invention.Referring to Fig. 2, a processor 11 is connected to a memory 13, a table 14, a multiplier divider 15, an output port 16, an input port 17, and a teaching box 18 by a bus 12. The output port 16 and the input port 17 form output and input units between a robot 19 and the bus 12. The processor 11 executes various different computation and controlling operations, and supervises the operations of the memory 13, table 14, multiplier divider 15, output port 16, input port 17 and teaching box 18 over the bus 12. The memory 13 holds computation control programs and various other data. The table 14 is a data table which holds trigonometric functions and reciprocal trigonometric functions. The multiplier divider 15 is dedicated hardware used for multiplication and division. The teaching box 18 is a console acting as a man machine interface during teaching, teaching data obtained from a drive system or sensors of the robot are stored in the memory in accordance with instructions from the teaching box 18. In accordance with instructions from the teaching box 18, a predetermined part of the robot 19 is driven to a predetermined position. The displacement of an actuator at this position is detected by a rotary displacement detector, and the position of the robot hand in space is computed from the value of this displacement, the position of the robot hand being stored as teaching data in the memory 13. In order to operate the robot hand in practice, teaching data is first read from the memory 13, in accordance with the operational mode being used. The teaching data is then subjected to point to point interpolation according to an instruction for example, a speed instruction from the teaching box 18. The interpolation of the path between points will now be described with reference to Fig. 3. First, the path direction data The coordinates of the command velocity Now will be described a method which can determine optimum values of the proportional coefficients k₁ k₄ to obtain the most accurate path during playback. Fig. 4a 4c show actual data on the relationship between the values of proportional coefficients and the accuracy of a path, which was obtained during an operation in which two points at some distance apart were taught to a robot, and then the robot played back a straight line movement between those two points. The robot used to obtain this data has an upper arm length of 800mm, a forearm length of 600mm and 5 degrees of freedom. A changed proportional coefficient is used for proportionally feeding back actual positional deviation in the subsequent sampling period, and corresponds to the coefficient in a proportional compensation term in PID control. The other three proportional coefficients are set to zero. In Fig. 4a 4c, the proportional coefficient is substituted by a variation k. When the proportional coefficient is small k 4 , the positional deviation varies as shown in Fig. 4a. When the proportional coefficient is 24, i.e. k 24, the deviation varies as shown in Fig. 4b in this case, the positional deviation is reduced to about 1 5 that of the case shown in Fig. 4a. Fig. 5 is a graph in which the ordinate denotes the direction of the average positional deviation per sampling period, which is determined by dividing the sum of the absolute values of the positional deviations shown in Fig. 4a 4b in all the sampling periods by the number of samples, with the proportional coefficient along the abscissa. As shown in this graph, when the proportional coefficient increases, the absolute value of the positional deviation gradually decreases but starts to increase again at a certain position. Namely, the curve in Fig. 5 projects downward at one side . The same results can be obtained for the other three proportional coefficients. Accordingly, in order to determine the value of proportional coefficient which enables the reduction of the corresponding positional deviation to the lowest level, the proportional coefficient must be increased from zero gradually to determine the point at which the monotonous decrease in positional deviation changes into a monotonous increase therein. The value of the proportional coefficient thus determined is called an optimum value of the proportional coefficient. When the value of one proportional coefficient is varied after the optimum value of another proportional coefficient has been determined, the previously determined optimum value varies slightly. Therefore, if the optimum values of four different proportional coefficients are determined in sequence, and the same operations are repeated in the vicinity of these optimum values, eventually the true optimum values can be determiend. Accordingly, in order to determine the optimum values of the four proportional coefficients used when the operation of a robot hand is played back linearly between two predetermined points, an apparatus which will now be described can be provided. Namely, an apparatus can be used that gives the robot hand an instruction for the playback with the four proportional coefficients set at arbitrary levels, measures the positional deviations between the predetermined path and the path along which the robot hand actually moved within each of sampling periods during playback, determines a sum of the absolute values of the positional deviations, compares the sum of absolute values of the positional deviations with that in other cases in which the proportional coefficients have other values, determines the optimum values on the basis of a graph such as that of Fig. 5, and stores the optimum values thus obtained in a memory. In the circuit of Fig. 2, the four proportional coefficients within the memory 13 are initially set at small values by an instruction from the teaching box 18. Playback along a path is then done in accordance with the program data stored in the memory 13. During this operation, a value on a displacement detector for the actuator is read and stored in the memory 13 during each sampling period as data on the path of the robot. After the playback has been completed, the position of the robot hand in space is determined by calculations based on the data on the path of the robot stored in the memory 13, and distances between the position thus determined and the theoretical path of the robot during the playback is then determined. The absolute values of these distances are added during each sampling period, and the results are stored in the memory 13. The value of any one of the four proportional coefficients is doubled, and the same operation is repeated. The sums of the absolute values obtained and the values stored in the memory 13 are compared, and the following operations done This operation is repeated until the optimum values of the other three proportional coefficients have been determined. This procedure is then repeated once again based on these optimum values to determine the final optimum values of the proportional coefficients which are stored in the memory. Thus these final optimum values can be extracted as the proportional coefficients during the execution of the regular playback operation, i.e. as part of the data required for the playback between the predetermined points. When the optimum values of these proportional coefficients are stored in an instructions area for this playback, which requires a highly accurate path within the playback programs in the memory, a plurality of playback operations with highly accurate paths can also be carried out. This method enables a large improvement in the accuracy of a linear path, and the accuracy with which a robot can be kept at a constant speed can be improved up to a level corresponding to the upper limit of the capacity of the robot controller. Moreover, the control of the path and the speed of the robot can be done automatically, so that the operational efficiency of the robot driving means can be improved greatly. Fig. 6 is a graph of results of actual measurements of the accuracy with which a robot hand moves along a pre set path, using conventional path interpolating methods. These examples show the accuracy with which an articulated robot with five degrees of freedom, an upper arm length of 800mm, and a forearm length of 600mm, moves along a linear path which extends for 160mm between two separated points, at a designated speed of 100mm sec, in various ways. The abscissa represents time seconds , and the sampling time is set to 30 milliseconds. The ordinate represents a deviation expressed as an absolute value of displacement of the robot hand from the designated path. Referring to the graph curve a represents the results when the speed of the robot is controlled in a regular manner, without any correcting operations, and curve b the results when the position of the robot hand is corrected by the use of a speed control which is proportional to the deviation of the robot hand from the designated path. The results of an example of controlling the robot hand in practice, using the present invention, are shown by curve c in Fig. 6. The various control conditions of this example are exactly the same as those used in the examples of the conventional methods, the results of which being shown by the curves a and b in Fig. 6. In the example of the curve c , the proportional coefficients in equation 5 are set so that k₁ 0.6, k₂ 0.03, k₃ 0 and k₄ 0. As is clear from Fig. 6, the conventional methods do not correct the path of the robot hand with a sufficiently high accuracy but the present invention can provide a path correcting accuracy which is about 3 4 times that of the curve b in Fig. 6. According to the present invention, a high path correcting accuracy can be obtained, and a high ability of moving a robot hand at a constant speed can be displayed, when the robot hand is moved along a designated path.