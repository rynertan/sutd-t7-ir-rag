# Color display system.

## Abstract
The color display system includes one or more all point addressable APA buffers 22 for storing color information of each pixel constituting a graphic pattern as a plurality of color specifying bits additionally it comprises a pattern memory 40 for storing possible character patterns, a pointer memory 42 for storing address information of the pattern memory, in which character patterns to be displayed are placed, in correspondence with character display positions on a screen, and a color information memory 44 for storing color information of the character patterns to be displayed in correspondence with the character display positions on the screen, whereby a character pattern read from the pattern memory according to the content of the pointer memory is written into a specific storage location of APA buffer specified by the content of the color information memory, so that a color graphic pattern and a color character pattern can be simultaneously displayed on the screen 38 with a simple configuration.

## Claims
1. Color display system including a graphic buffer memory 22 for storing color information of each pixel on a screen 38 to represent a graphic pattern as a plurality of color specifying bits, characterized in that there are provided

## Description
This invention relates to a color display system in accordance with the preamble of claim 1, and to a method to operate such a system more particularly it concerns a color display system that can simultaneously display independent color graphic patterns and color character patterns on a screen. Recently, there has been a rapid development of small information processing equipments such as word processors or a personal computers which include cathode ray tube CRT color display systems. Such an information processing equipment has required two CRT driving assemblies 18 and 24 as shown in Figure 2 to simultaneously display independent color graphic patterns and color character patterns. In Figure 2, 10 is an ordinary microprocessor MPU , 20 and 26 ordinary CRT controllers CRTC , 22A 22C all point addressable APA buffers each of which has a plurality of storage locations, each of the storage locations storing color specifying bits of the corresponding pixel, for example, three bits of R red , G green and B blue corresponding to the three primary colors, 28 a code buffer for storing codes of characters to be displayed, 30 a font buffer for storing patterns of possible characters, 32 a attribute buffer for storing attribute codes of characters to be displayed, 34 a attribute controller for controlling the manner of display for characters read from the font buffer 30, 36 a synthesizing controller, 38 a CRT color display device of raster type. The MPU 10 is connected to a read only memory ROM 12 for storing microcodes or the like, a random access memory RAM 14 for storing programs and data, and an I O device such as magnetic diskette file 16. In such a configuration, display and attribute information from the MPU 10 are previously stored in the APA buffers 22A 22C, the code buffer 28 and the attribute buffer 32. Then, graphic patterns are read from the APA buffers 22A 22C under the control of CRTC 20, while the character patterns are read from the font buffer 30 under the control of CRTC 26. These patterns are supplied to the synthesizing controller 36 that may contain an ordinary parallel serial converter circuit not shown , synthesized therein and then displayed on the CRT color display device 38. However, in such a conventional information processing equipment, it is required to provide two series of driving assemblies, that is, the graphic driving assembly 18 and the character driving assembly 24 in order to simultaneously display the color graphic patterns and the color character patterns onto a CRT display device. Therefore, there is a drawback in that the cost of the entire information processing equipment becomes much higher than desired. This makes it difficult to apply the above mentioned conventional system to a small information processing equipments such as personal computers. Accordingly, this invention intends to provide a color display system of the aforementioned kind and a method to operate it that eliminate such drawback in the prior art and make it possible to simultaneously display the color graphic patterns and the color character patterns with a simple configuration. These objects are achieved by the invention described in claims 1 and 4 embodiments of the invention are characterized in the dependent claims. The color display system includes one or more all point addressable APA buffers for storing color information of each pixel constituting a graphic pattern as a plurality of color specifying bits additionally it comprises a pattern memory for storing possible character patterns, a pointer memory for storing address information of the pattern memory, in which character patterns to be displayed are placed, in correspondence with character display positions on a screen, and a color information memory for storing color information of the character patterns to be displayed in correspondence with the character display positions on the screen, whereby a character pattern read from the pattern memory according to the content of the pointer memory is written into a specific storage location of APA buffer specified by the content of the color information memory, so that a color graphic pattern and a color character pattern can be simultaneously displayed on the screen with a simple configuration. This invention allows to display a color graphic pattern and a color character pattern simultaneously with a simple configuration, it can be easily applied to a small information processing equipment such as a personal computer, and is very effective in practical use. An embodiment of the invention is now described in detail with reference to the accompanying drawings, where Figure 1 shows an embodiment of the color display system according to the invention, wherein 40 is a pattern memory R1 , 42 a pointer memory R2 , and 44 a color information memory R3 . Other numerals correspond to those in Figure 2. The R1 memory 40 is preferably a RAM that can store patterns of all characters displayable on the screen. As is well known in the art, each character pattern consists of m x n bits m and n are integers larger than one , which correspond to pixels of m x n constituting each character display location on the screen. Alternatively, the R1 memory 40 may be constituted by a RAM of cache type that stores a predetermined number of character patterns read from a magnetic diskette file 16 on a demand base, or a ROM that stores possible character patterns. If the R1 memory 40 is constituted by the RAM, it is used to receive the character patterns read from the magnetic diskette file 16 through the bus of MPU 10, and to transfer given character patterns read therefrom to the APA buffers 22A 22C through the bus of MPU 10. The R2 memory 42 is a RAM that has a plurality of storage locations corresponding to character display locations on the screen. Each of these storage locations stores address information of the R1 memory 40 in which a character pattern to be displayed at the corresponding character display location is placed. For example, if a given character pattern placed at address 1 of the R1 memory 40 is to be displayed at character display location 50 on the screen, address information specifying address 1 of R1 memory 40 is stored in storage location 50 of R2 memory 42. The R2 memory 42 is used to receive these address information through the bus of MPU 10, and to address the R1 memory 40 and the APA buffers 22A 22C with the given address information read therefrom to transfer the character patterns from the R1 memory 40 to the APA buffers 22A 22C. The R3 memory 44 is a RAM similar to the R2 memory 42 that has a plurality of storage locations corresponding to the character display locations on the screen. Each of these storage locations stores color information of character patterns to be displayed at the corresponding character display location. For example, if a given character pattern read from the R1 memory 40 is to be displayed at character display location 50 on the screen, color information specifying green is stored in storage location 50 of R3 memory 44. The R3 memory 44 is used to receive these color information through the bus of MPU 10, and to select specific APA buffers 22A 22C by given color information read therefrom. Although, in the above description, the memories 40 44 are described as physically separate RAMs, it may be possible to constitute them with a single RAM, or to use a predetermined area in the RAM 14 used as a normal main storage instead of these memories. Since the configuration of the graphic driving assembly 18 is known in the art, its detailed description is omitted herein. For convenience of description, it is assumed in the following that a circular graphic pattern is displayed in yellow on the screen, then a green character A is displayed as a part of the graphic pattern, and finally a blue character B is displayed at the same location as the character A. Figures 3A 3C show a flowchart in such exemplary operations, while Figure 4A 4B show display on the screen and the content of each memory at its major steps. As clearly seen from the following description, these operations are mainly performed by the MPU 10 under the control of microcodes stored in the ROM 12 or RAM 14 . In the embodiment of Figure 1, the steps of Figures 3A 3C according to the above exemplary operations are executed as follows According to the initializing microcode in the ROM 12, the MPU 10 reads a program from the magnetic diskette file 16, writes it into the RAM 14, reads a series of character patterns and writes them into the R1 memory 40. At the same time, the correlation between each character pattern written into the R1 memory 40 and its storage location is recorded in the work area in RAM14. Then, the MPU 10 decodes a graphic display command in the program. In this case, since the graphic pattern is assumed to be a yellow circle, the command includes as its parameters an indication specifying a circle, the center of the circle, its diameter and color information specifying yellow. The MPU 10 calculates locations of an arc to be displayed according to a predetermined algorithm bit by bit so as to map the circular graphic pattern in the APA buffers 22A 22C in accordance with the result of decoding in Step 2. As described, since the circle to be displayed is assumed to be in yellow, the MPU 10 writes the bit information indicating the arc calculated in Step 3 into predetermined storage locations of APA buffers 22B and 22C corresponding to G green and B blue , respectively. Therefore, when this step is completed, a yellow circle as shown in Figure 4A a is displayed on the screen. And the APA buffers 22B and 22C are written with the bit information indicating the arc, respectively. Then, the MPU 10 decodes a character display command in the program. In this case, since the character to be displayed first is assumed to be a green A, the character display command includes as its parameters a character code identifying the character A, color information specifying green, and address information specifying the character display location on the screen. The MPU 10 determines a storage location of R1 memory 40 where the pattern of character A is stored by checking said work area in the RAM 14 according to the decoding in Step 5, reads address information indicating the storage location from said work area, and writes the address information into a storage location of R2 memory 42 which corresponds to the character display location specified by the character display command in Step 5. For example, assuming that the pattern of character A is stored in storage location 1 of R1 memory 40, and it is specified to display the character at character display location 50 on the screen, storage location 50 of R2 memory 42 receives the address information specifying storage location 1 of R1 memory 40. Similar to Step 6, color information specified by the character display command is written into a storage location of R3 memory 44 which correspond to the character display location specified by the command. For example, if it is specified to display the green character A at character display location 50 on the screen, storage location 50 of R3 memory 44 is stored with color information specifying green. Figure 4A b shows the display on the screen and the contents of the memories R1 R3 when steps 6 and 7 are completed. The MPU 10 reads contents of storage locations of APA buffers 22A 22C corresponding to the character display location for the character A, and writes them into the work area of RAM 14. This operation is shown in Figure 4A c . The MPU 10 reads the pattern of character A from the R1 memory 40 by using the address information written into the R2 memory 42 in Step 6, and writes the pattern into the work area of RAM 14. In addition, since it is determined by reading the color information written into the R3 memory 44 in Step 7 that the character A is in green, the MPU performs an exclusive OR XOR operation of the pattern of character A read in this step and the graphic pattern read in Step 8 from the APA buffer 22B for G green . In this case, the intersection of both patterns is erased because of the characteristic of XOR. In this step, the MPU 10 writes the result of XOR operation in Step 9 into the original storage location of APA buffer 22B. When this step is completed, since the APA buffer 22B is stored with the pattern of character A and the pattern of arc corresponding to its character display location in an overlapped manner, the desired overlapped pattern as shown in Figure 4A d is displayed on the screen. However, since the original graphic patterns stored in the APA buffers 22A 22C is selectively erased by color unit according to XOR operation with the character pattern, the intersections of both patterns displayed on the screen have the color listed in the following table. Now, operation is described to display a blue character B instead of the above character A at the same location. The MPU 10 decodes a character display command similar to that in Step 5. However, in this case, since the character to be displayed in second time is assumed to be B in blue, the character display command contains a character code identifying the character B, color information specifying blue, and address information specifying the same character display location on the screen as that for the character A as its parameters. According to the result of decoding, the MPU 10 reads the contents of those storage locations of APA buffers 22A 22C which correspond to the character display location for the character B, and writes them into the work area of RAM 14. This operation is shown in Figure 4B e . The MPU 10 reads the current content of the storage location of R2 memory 42 address information specifying the storage location of R1 memory 40 where the character A is stored which correspond to the character display location specified by the address information in the character display command, reads current content of R1 memory 40 the pattern of character A specified by the former content, and writes the latter content into the work area of RAM 14. Then, the MPU 10 reads current content of the storage location of R3 memory 44 the color information specifying that the character A is in green which correspond to the character display location specified by the address information in the character display command, and, by using this, selects the specific content of APA buffers 22A 22C read in Step 12, that is, the content of APA buffer 22B corresponding to G green . Then, the MPU 10 performs an XOR operation between the content of APA buffer 22B and the pattern of character A read in Step 13, and writes the result of the XOR operation into the APA buffer 22B. Since the pattern of character A written into the APA buffer is erased by this XOR operation, the original circular graphic pattern is reproduced on the screen as shown in Figure 4B f . In this step, operations similar to Steps 6 and 7 are performed. That is, the address information, specifying the storage location of R1 memory 40 storing the pattern of character B , is written into the storage location of R2 memory 42 which corresponds to the specified character display location. In addition, the color information of character B is written into the storage location of R3 memory 44 which correspond to the specified character display location. Figure 4B g shows the status of R1 R3 memories in an assumed example where the character B is stored in storage location 2 of R1 memory 40, and the blue character B is to be displayed at character display location 50. In this step, operation similar to Step 8 is performed. This causes the MPU 10 to read the contents of APA buffers 22A 22C at their storage locations which correspond to the display location of character B , and write them into the work area of RAM 14. In this step, operation similar to Step 9 is performed. This causes the MPU 10 to perform an XOR operation of the pattern of character B read from the R1 memory 40 and the graphic pattern read from the APA buffer 22C. In this step, operation similar to Step 10 is performed. This causes to display an overlapped pattern as shown in Figure 4B h on the screen. Although, in the above description, the APA buffers 22A 22C storing the graphic patterns are described as comprising three buffers corresponding to the primary colors, it is needless to say that they can be replaced with one APA buffer that stores in its each storage location one set of color specifying bits for each pixel, or an equivalent memory. In addition, it can be understood that the principle of the invention is suitable to a CRT color display, but is not limited thereto.