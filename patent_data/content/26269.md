# Digital colour data display system.

## Abstract
A digital data display system in which graphic pictures are displayed on a colour cathode ray tube. Each character is defined in a character cell and the user or application program has the options of deciding the colour at the crossing point of two different coloured lines or areas.

## Claims
CLAIMS WHAT WE CLAIM IS 1. A digital data display system including an electronic display device capable of presenting pictures on a screen in more than one colour, and means controlled by an operator to construct pictures on the screen characterized in that means are provided to allow an operator to determine the colour of points at which two or more different coloured lines or areas of a picture intersect. 2. A digital data display system as claimed in claim 1 in which characters to be displayed are constructed in a processing unit and each character comprises an array of discrete pels and including means to store three arrays of bits one each associated with the primary colours used in the display device and means to determine, when a character includes more than one colour, which of the three array bits will be on and which off . 3. A digital data display system as claimed in claim 2 in which the means to determine which of the three array bits is on and which off includes a microprogrammed control system.

## Description
DIGITAL DATA DISPLAY SYSTEM This invention relates to digital data display systems and particularly to such a system as described in our copending UK Patent application No. 7933533 and in which a display unit is used that can display in more than one colour. The widespread use of interactive display terminals connected to digital data processing units has led to a demand for information to be displayed not only in the form of alphanumeric characters but in the form of graphical pictures, such as graphs, bar and pie charts which illustrate relationships between values in a way that is easy to understand. A review of some of the prior art techniques used to display graphical pictures is found in the Communication of the ACM, Feb 1974 Vol. 17, No. 12 pp 70 77, a paper entitled A Cell Organized Raster Display for Line Drawings by B W Jordan and R C Barrett. This paper discussed the differences between random scan or directed beam displays and raster scan displays and then describes an implementation of a raster scan display using a screen that is notionally divided into a number of cells each cell having a matrix of bit positions. As described in the paper, the display system has four basic sections, a display screen, a display output buffer, a character generator and a refresh memory. The character generator which is said to be the heart of the graphics terminal is a special purpose processor dedicated to the preparation of graphical figures. The use of such a special purpose processor is obviously an expensive item in a graphic terminal. UK Patent Specification 1,330,748 Applied Digital DataSystems Inc. and US Patent 3,891,982 Adage Inc. both describe apparatus for forming a display of graphical and alphanumeric data. The UK Patent Specification describes a system in which alphanumeric and graphical data are treated separately until they are applied to a screen through a video signal generator. In the US Patent, the apparatus described operates to repetitively generate a video signal for driving a raster scan display from data encoded in data words representing image components. The raster scan is considered as being divisible into a rectilinear array of rows and columns of cells, each image component, as encoded, lying within a single cell. More than one image component can be provided in each cell. The apparatus includes a serial refresh memory for holding, in cell order, data words defining an image to be displayed. The contents of the memory are selectively advanced to read out all data words relating to a given cell and as those data words are successively read out they are decoded to generate signals defining corresponding image elements. An accumulation register accumulates the picture elements defined by a succession of data words relating to a given cell and means are provided for storing and serially reading out the accumulated data as a video signal to the raster scan display. US Patent 3,293,614 and 3,351,929 both assigned toHazeltine Research Inc. relate to digital data systems, the first 614 describes a system in which the screen is divided into a plurality of illuminable dot elements, or picture elements pels and the associated storage means has a separate storage element for each pel. This entails using a very large storage device. The second patent 929 describes an attempt to reduce the amount of storage required by storing character information according to address information included with each character word. The addresses are divided into a coarse address and a fine address. The coarse address determines within which character sized segment of the display the character is to begin and the fine address locates the character within the segment. The combination of the coarse and the fine address allows the character to be located at any point on the display. In the copending Application No. ...... UK9 78 034 there is provided a digital data display system for presenting a graphical picture on an output device in which the area or screen from which the picture is to be viewed is notionally divided into a plurality of character cells each of which comprises a predetermined number of picture elements pels , the system comprising means for creating, in response to input in formation, a first level description of all the elements of a picture to be presented, means for storing a screen definition table having an entry for each character cell of the display area, means for calculating for each element of the picture the pattern of pels in associated character cells required to display the elements, storing the calculated pattern in a table in a character cell store and associating the respective entry in the screen definition table with the required pattern in the character cell store, means to determine when a particular character pel pattern has already been calculated as required for a picture and to associate the respective screen. definition table entries with only one copy of the particular character cell pel pattern and means for transferring the screen definition table to a screen definition buffer store and the character cell pattern table to a character cell buffer store in the display device whereby the contents of the screen definition buffer store and character cell buffer store control the construction of a picture presented by the display device. When a display unit that can display in more than one colour is used in such a system a problem arises when lines in a picture are drawn of different colours and they cross or meet. The problem is what colour should be displayed at the cross over or meeting point. According to the present invention there is provided a digital data display system including an electronic display device capable of presenting pictures on a screen in more than one colour, and means controlled by an operator to construct pictures on the screen characterized in that means are provided to allow an operator to determine the colour of points at which two or more different coloured lines or areas of a picture intersect. In order that the invention may be fully understood it will now be described with reference to the accompanying drawings in which Figure 1 shows in schematic form, the main components for implementing a digital data display system. Figure 2 shows in schematic form a display unit with a random access store. Figure 3 shows in schematic form the system control services which control the operation of the digital data display system. Referring now to Figure 1 there is shown a central processing unit 1 which may for example be an IBM System 370 168 machine IBM is a Registered Trade Mark . The central processing unit 1 performs the main processing tasks required to control the display unit and also includes means for processing the display information in accordance with the invention. The central processing unit may have a direct connection to a display controller 2 and or may be connected remotely to such a display controller 3 through a network controller 4 which is connected remotely to another network controller 5 which in turn may be connected to several display controllers 3. Only one shown. Each of the display controllers controls a plurality of display devices 6. The display devices usually comprise a visual display unit, such as a cathode ray tube and a separate keyboard, by which a user enters commands into the system. In order to implement the present invention the display devices 6 each include a random access store as will be described below. In prior art display terminals such as the IBM 3270 series there is a buffer store in the display unit which contains one entry for each character position on the screen. A character position may either contain a character which may not actually be displayable i.e. it may be blank or null , or a field attribute which displays as a blank, but contains attribute information about how the characters in the following field are to appear, e.g. highlighted, invisible, etc. . In the former case the entry in the character buffer contains an index which is used by the hardware character generator to access the definition of the pel pattern for that character. The definitions themselves are held in read only storage, so they may not be altered. Figure 2 shows in schematic form a display head incorporating the principles of the present invention.Instead of just a single set of read only storage character definitions the head contains one or two sets of character definitions held in read only stores 7 and 8 and up to six sets of character definitions contained in random access stores 9, 10 and 11 each of which in the drawing represents two random access stores . The definitions contained in these stores 9, 10, and 11 can be changed by input information from the central processing unit 4 Figure 1 . In this specification these character definitions which can be stored in the random access stores 9, 10 and 11 are referred to as programmed symbols. The character buffer 12 is supplemented by an extended attribute buffer 13, which contains, again on a character basis except for the positions at which field attributes occur , additional information about the highlighting for that character position. If the display head uses a colour tube, this information will include the colour of the character and also the number of the character set from which the character definition is to be taken. Of course while the present description of the preferred embodiment refers to a display head including a cathode ray tube, other embodiments using printers and other output display devices may be envisaged. The display head may have provision for displaying character cells in a single colour or a plurality of colours, using for example combinations of red, green and blue. With a single colour display the character definition buffers 9, 10 and 11 storing the programmed symbols contain one bit for each pel in a character cell i.e. a single definition for a 9x16 character cell may be held in 18 bytes of storage . The pattern defined by the 18 bytes will be displayed in a single colour of necessity in a monochrome display, though not necessarily the same colour in a colour display , in each display position where it is referenced by the character buffer 12. The actual colour where a single colour character display is used is determined by the colour bits in the appropriate position in the extended attribute buffer 13. If there is to be more than one colour within a single screen cell position then triple character cells are used.There are then three bits for each screen pel, one for each of the primary colour guns, red, green and blue. When only the red bit is on for a particular pel, that pel will be displayed in red if red and green bits are on the pel will be yellow and so on. As the colour definition is now within the character definition rather than in the extended attribute buffer 13, a triple referenced in more than one screen position by the character buffer 12 will always appear with the same combination of colours. Methods of using programmed symbols may be divided into two main categories firstly they may be used to define different character fonts e.g. italic or Greek and secondly they allow graphic objects to be drawn, to pel accuracy.These methods may be combined in the same picture display.The preferred embodiment described in this specification will be concerned with the drawing and displaying of graphic objects. Using programmed symbols enables pel accurate graphics to be displayed on a refresh screen, or printed by a printer, without requiring the quantity of storage which would otherwise be necessary in the display unit to hold a complete pel buffer. This is because for all but the most complex pictures, there are a substantial number of screen character cell positions which are either empty, or contain exactly the same pel pattern as other cell positions, so that the definition need be held only once. The use of programmed symbols is well suited to applications which are concerned with graphical presentations of data, making use of such features as area shading and the use of colour. Also for those applications in which the interaction is through the use of associated alphanumeric or function keys on a keyboard. In general terms the system that comprises the preferred embodiment of the present invention operates as follows. A user of the digital data display system Figure 1 communicates interactively with a particular application program through a display unit 6. The application program will normally be stored in a back up store connected with the central processing unit 1. When a user has identified the application programs required the system control services of the digital data display system will load the application program into the central processing unit s 1 working store and perform all the control and supervising services needed to run the application. The application program will, typically, have been written so that at some point it will require the system control services to display data at the display unit 6. The data may have been supplied to the application program by the user directly from the keyboard contained in display unit 6 or it may have been obtained from a file in a data base to which the central processing unit 1 has access. The application program will request that the system control services display the data in a particular form, say for example a bar chart. Having received the request and the data from the application program the system control services then perform the necessary functions to display the data as required at the particular display unit 6 which the user is using. The system control services which control the operation of the digital data display system are shown schematically inFigure 3. The central processing unit 1, which as mentioned above may be an IBM System 370 168, has an operating system 14 which may be IBM Virtual Machine Facility 370 VM 370 described generally in the Introduction to IBM VirtualMachine Facility 370 GC20 1800 9 published by InternationalBusiness Machines Corporation. VM 370 manages the resources of an IBM System 370 in such a way that multiple users have a functional simulation of a computing system a virtual machine at their disposal. That is, the virtual machine runs as if it were a real machine simulating both hardware and software resources of the system. These simulating resources can be either shared with other virtual machines or alternatively allocated to each machine for a specified time. Virtual machines can run the same or different operating systems simultaneously, thus a user can create and adapt a virtual machine to meet the users needs. A description of the component parts and how VM 370 operates is found in the above referenced manual. A user at a remote terminal 6 Figure 1 communicates with the central processing unit through the network controller using the services of a communications access control system 15 Figure 3 . The communication access control system 15 operates under the control of the operating system and organises the transmission and reception of information commands and data to and from the remote network controllers. An example of a communication access control system is the Virtual Telecommunications Access Method VTAM described in ACF VTAM General Information Manual GC38 0254 published by International Business Machines Corporation. A third part of the system control services is the interactive or data communication system 16. The on line real time data base data communication differs from batch processing systems in the amount and types of concurrent activities that are likely to occur within the processing system at a given time. Whereas a batch processing system schedules each application independently and provides data support unique to each application, a DB DC system controls many transactions arriving on a random non scheduled basis and provides an integrated data base supporting each application. To do this a DB DC system requires the interactive or DC system 16 in addition to the basic operating system. An example of such a system is theCustomer Information Control System CICS described inCustomer Information Control System CICS GeneralInformation Manual GH20 1028 4 published by InternationalBusiness Machines Corporation. The system control services which have been described above as blocks 14, 15 and 16 of Figure 3 perform the basic control of a large scale data processing system enabling a user at a remote terminal to run specific application programs which are also stored in a storage device to which the processing unit has access. These are indicated at 17 inFigure 3. Application programs can be directed to many different and diverse requirements from weekly or monthly accounting and payroll routines to planning analysis and tracking of space satellite systems. Such applications can be run on the same digital data processing system simultaneously with users at adjacent terminals 6 Figure 1 using the system for very different applications. One thing that most applications require or result in is the presentation of data to the user often during the running of the application. The present invention is directed towards facilitating the presentation of data at the display units either visual display units or printers represented as the units 6 ofFigure 1. To this end the central processing unit has two further parts to the system control services. These are shown as a graphics manager 18 and graphics routines 19 inFigure 3. The operations of the graphics manager and the graphics routines and how they interact with the character definition buffers 7 11 of Figure 2 will be described in more detail below. When an application program reaches a point in its processing that requires data to be displayed at a display unit call statements may be issued by the application which involve the graphics manager 18 and the graphics routines 19 of the system control services. With the call statements the application program passes the address of the data to be displayed, together with information concerning the form that the display is to take, whether as a bar chart, pie chart, venn diagram etc., together with the axes where appropriate and the area of the particular display device where the data is to appear, eg. a graph may appear in only the top half of the display with an alphabetic character explanation in the bottom half. The graphics routines 19 and graphics manager 18 perform the following functions which are described in general terms. The graphics routines 19 accept information passed by the application program in the call statements and then decides how the picture is to be drawn. If the picture is not to be a full screen or page this information is passed to the manager. If the axes of the graph are to be drawn then the coordinates relating to two lines are passed to the manager.The data to be displayed is then fetched from the storage address given in the call statements and the appropriate processing carried out. For example the graphics routines 19 include several sub routines for manipulating and processing data so that the appropriate picture can be drawn. A full description of the operation of the graphics manager is found in our copending Application No ........ UK9 78 034 The present invention is concerned with presenting pictures in multicolours and particularly with determining the colour to be displayed at the crossing and meeting points of two different coloured lines or areas. When two different coloured lines meet the user or application program has the options of displaying the cross point as the colour of the first line, underpaint, or the colour of the second line, over paint, or a colour which is the result of mixing the two colours. Depending upon which option is chosen so the graphics manager constructs the character cell definition. Figures 4 10 illustrate the operations involved in determining which colour a particular pel in a character cell definition should be. Figure 4 shows one cell with all three options in use.The cell which is a matrix of 9 x 16 pels has a red line 40 drawn first. A green line 41 is then drawn with the overpaint option which means that at the meeting point 42 a green pel will be on. A blue line 43 is then drawn with the underpaint option so that at point 44 a red pel will be on.A second blue line 45 is drawn with the mix option so that at point 46 both the red and blue pels will be on giving in a crt a pink colour. When, as described in our aforementioned copending application, the red line 40 is to be drawn, the graphics routines pass the coordinates to the graphics manager and a series of character definition cells are constructed. By way of example, the construction of the cell shown in Figure 4 will be described. The information passed to the manager will include the fact that the line is to be in red and the graphics manager will work out that at screen buffer position 48 it will require a definition cell that has pels on as is shown in Figure 5. If there is already a cell definition having the same on pel pattern then the manager will construct a screen buffer pointer to that pattern in buffer position 48 and will update the extended attribute buffer to indicate that the colour at cell 48 is to be red. If the cell pattern does not exist then one will be constructed and stored in the character cell definition array. Because at this point only one colour is used in the cell then only a single cell definition is required. The graphics routines then pass to the graphics manager the request to draw a green line 41 as shown in Figure 4 with the overpaint option. Figure 9 shows a flowchart of the steps that are taken. Step 90 is the recognition of the need to generate a cell definition. When the manager has the coordinates of the green line 41 it determines that it must pass through screen buffer cell position 48. The first decision that then has to be taken is shown as step 91, that is Is there anything previously in that screen buffer cell position 2 . If there is not, as there was for the drawing of the red line 40 then step 92 is entered, which was explained above. If there is already something in the cell then the next step 93 is to determine if the new line is to be in the same colour. If the colours are the same then at step 94 a new definition is generated and OR d with the previous definition to give a single cell definition with two lines of the same colour.The extended attribute buffer is not altered unless the new definition is stored in a different Programmed Symbol Set but the new definition will be stored at a new address in the character definition array so the screen buffer pointer is updated to point to the new address. If the colour is different, as in the example, then at step 95, a definition is constructed. A triple definition is three 9 x 12 bits one for each of the cathode ray tube colour guns, red, green and blue. The extended attribute buffer 13 Figure 2 for each screen buffer point has three bit positions which are allocated to determine colour. If only one colour is used, as when only the red line was drawn, then only the bit associated with red is on and only a single definition is required, when red and green are required then the red and green bits are on and blue off and a triple definition is used. Having allocated a triple definition in the character definition array, then for each pel, which has three storage positions, at step 96 the decision as to whether any one of the three is on is taken according to the decision table shown in Figure 10. The decisions are as follows, if the pel was previously off and the new cell pel in that position is also off then all three colours bits for that pel are off . If the new colour pel is off and the previous is on then no change is made. If the underpaint option is in use and the previous colour pel bit is off and the new colour pel bit will be on . If the previous colour pel bit is on this remains on and the new colour pel bit is off . If the overpaint option is in use, as in drawing green line 41, then at pel position 42 the green bit is on and the red pel bit previously on is switched off. This gives a character cell definition as shown in Figure 6. The decision for whether a pel bit is on or off is made for each pel in the cell. Finally at step 97 the screen buffer pointer is updated to point to the new address of the triple definition. The drawing of the blue line 43 with the underpaint option follows the same procedure. When pel position 44 is being determined the decision ON, overpaint in the decision table Figure 10 are taken. This will result in a cell definition as shown in Figure 7. The extended attribute buffer 13 will have all three colour bits on now for cell 48 as all three colours are used. However, so fa r each pel is only being displayed in one primary colour. When the line 45 is drawn with the mix option then the bits at pel position 46 will be on according to the ON MIX row of the decision table. That is both red and blue bits will be on giving a mix which results in pink. The final definition will be as shown in Figure 8. By using the above technique a user or application program can determine what colour is to appear when lines or areas of different colour overlap, merely by specifying which of the three options overpaint, underpaint or mix is required. Although the technique has been described using straight lines in the example, it will apply equally to shaded areas meeting and overlapping.