# HIGH CAPACITY DATA CARTRIDGE SYSTEM

## Claims
Diqitaldaten Speicherksssette mit einem Gehäuse und einem in dem Gehäuse längs einer Transportbahn bewegbaren, maqnetischen Speicherband 10 , dadurch gekennzeichnet, daß auf dem Band 10 voraufgezeichnete Muster 16, 18, 20 vorgesehen sind, die sich gleichmäßig über mindestens einen Teil der Breite des Sandes erstrecken und eine Steuerung des Ortes von danach in dem genannten Teil auf einer Vielzahl von Spuren aufzuzeichnenden Daten ermöglichen, daß die genannten Muster ein erstes und ein zweites, spezifisches Muster 15 bzw. 18 umfassen, die in der Nähe je eines Endes 12 bzw.14 des Bandes angeordnet und dieses Ende bezeichnen und danach zur Kennzeichnung je eines der Enden des Bandes ablesbar sind, sowie eine Mehrzahl von Schlüsselmustern 26, 28, 30, 32 , die zwischen dem ersten und dem zweiten Muster in gleichen Abständen voneinander längs des Bandes angeordnet und für je eine Aufzeichnungsstelle einer Mehrzahl von Aufzeichnungsstellen spezifisch sind, den Beginn der Aufzeichnungsstelle bezeichnen und danach zur Anzeige des Anfanges derselben ablesbar sind.

## Description
This invention relates to magnetic tape recorders and preformatted tapes adapted for use therein, and in particular, to such recorders adapted for data recording purposes utilizing magnetic recording tapes preloaded in data cartridges. Data recording cartridges and recorders adapted for their use are notably disclosed and claimed in U.S. A 3,692,255 Von Behren . In the cartridge there disclosed a magnetic recording tape is preloaded in a reel to reel type enclosure together with an endless flexible belt in frictional contact with the tape on both reel hubs for incrementally bidirectionally driving the tape, including rapid accelerations and decelerations, such as are encountered in digital data recording and playback. While the system there set forth represents many advantages such that data cartridges are filling an important need in the computer industry, especially as backup storage for mini computer and microprocessor based systems, heretofore they have not been able to offer sufficient capacity to backup fixed mounted rigid disk systems. In contrast to the tape cartridge disclosed in the above cited patent, the present invention is directed to a cartridge system, and to several specific portions thereof, by which a marked increase in storage capacity is achieved. Unlike the prior art cartridge recorders, the present invention is directed to a multitrack recorder in which a preformatted tape i.e., a tape prerecorded with particular code patterns, is utilized to effect subsequent control over data recording and playback operations. One aspect of the present invention is, therefore, directed to a digital data cartridge comprising a housing and a magnetic recording tape movable along a transport path therein, characterized by said tape having prerecorded patterns extending uniformly across at least a portion of the width of the tape to enable control over the spatial location of data to be subsequently recorded on a multiplicity of tracks within said portion, said patterns including first and second unique patterns located proximate to each end of the tape, indicative of and subsequently detectable and identifiable of each end thereof, and a plurality of key patterns located at uniformly spaced locations along the tape and between the first and second patterns, each of which is unique to and subsequently detectable to identify the beginning of a given one of a plurality of record locations. The key patterns thus enable control of the spatial location of data to be subsequently recorded at any given one of the record locations. In one embodiment, the first and second unique patterns are constructed so as to be detectable using relatively simple and inexpensive detector logic, as opposed to the more sophisticated logic circuits required to locate and decode the actual digital data itself. In such an embodiment, the first unique pattern comprises an extended length of tape having impressed thereof a pulse train having two components which alternate sequentially at a first predetermined spatial frequency, the first component being characterized by a unidirectional magnetic state, and the second being characterized by two subcomponents which alternate sequentially between oppositely directed magnetic states at a second spatial frequency which is different and higher than said first spatial frequency. Somewhat similarly, the second unique pattern comprises an extended length of tape having impressed thereon a continuous pulse train having two components which alternate between oppositely directed magnetic states at the second predetermined spatial frequency. Another aspect of the present invention is a system according to claim 8. According to a further aspect of this invention there is provided a method according to claim 12. In yet another aspect of this invention there is provided a system for controlling the transverse position of a magnetic recording playback head according to claim 16. Figure 1 is a view of the surface of a preformatted magnetic tape used in the present invention, with the magnetic patterns shown as though made visible through a magnetic viewing device Figure 2 is a similarly visible expanded view of a portion of the tape shown in Figure 1, showing a porton of three parallel tracks Figure 3 is an expanded view of a portion of one of the tracks shown in Figure 2, showing the details of a key pattern area along one of the tracks Figure 4 is an expanded view of another portion of the pattern shown in Figure 2 showing the details of the manner in which data within each frame is formatted Figure 5 is an expanded view of a portion of Figure 4 showing the details in which header information within each frame is formatted and Figure 6 is a combined pictorial and block diagram showing a system according to the present invention for utilizing the preformatted tape showing in Figures 1 through 5. As discussed above, the present invention is preferably directed to a recorder adapted for use with data recording cartridge of the type set forth in U.S. Patent 3,692,255 Von Behren . In the present invention, such a recorder enables a substantial increase in the storage density of such tape cartridges by making use of information which is pre recorded on a blank cartridge at the time of manufacture. Such a preformat enables one to subsequently record data on the cartridge with no inter record gap IRG in which the head must be stopped. Such a capability enables enhanced tape utilization. The preformat is independent of the number of tracks to be subsequently recorded. Further, the preformat enables the beginning of tape BOT and end of tape EOT to be sensed with the signals prerecorded on the tape, thereby eliminating the need for optical sensing techniques. Furthermore, the format enables the use of a redundant code for subsequent error detection and correction. A preferred embodiment of such a pre recorded format is shown in Figure 1. As there shown, a magnetic tape 10 extending from end 12 to end 14 would desirably be preloaded in a data cartridge not shown in the manner set forth in the above referenced patent. Using an appropriately energized head having a gap which preferably extends across the entire width of the tape, the tape is then recorded with three sets of magnetic patterns such that the patterns similarly extend uniformly across the width of the tape. A first set of patterns 16 thus represents the beginning of tape BOT, a second set 18 represents the end of the tape EOT, and a third set 20, extending the majority of the length of the tape comprises a plurality of magnetic key patterns each of which is located at uniformly spaced locations along the tape. The first and second patterns l6 and 18 respectively, each comprise a separate and unique pattern which is subsequently detectable and identifiable as the beginning of tape and end of tape, respectively, and which are preferably so detectable at various tape velocities utilizing a relatively unsophisticated and inexpensive logic system. Accordingly, the BOT pattern 16 consists of a section of tape approximately 90 cm long onto which is recorded a succession alternating at a first spatial frequency of, for example 15 alternations per cm, in which the succession consists of unidirectionally magnetized areas 22, interspersed with areas 24 in which the magnetization is periodically reversed at a second and higher spatial frequency, such as at a rate of 1970 flux reversals per cm. Such a pattern is readily provided at a recording tape speed of 76 cm per second by utilizing a succession of digital 1 s and 0 s, i.e., 101010... utilizing a conventional Modified Frequency Modulation MFM encoding system. Similarly, the end of the tape pattern 18 is conveniently provided from the same succession of digital 1 s and 0 s, thereby providing a spatial frequency of 1970 flux reversals per cm, but in which such a pattern is recorded continuously over approximately a 90 cm long section near the end of the tape 14. The manner by which such BOT and EOT patterns 16 and 18 are unambiguously detected and distinguished from actual subsequently recorded digital data is discussed hereinafter in conjunction with Figure 6. As mentioned above, the third pattern 20 comprises a plurality of magnetic key patterns 26, 28, 30 and 32 respectively, which follow the BOT pattern 16, and which are uniformly spaced. Between each of the key patterns are unrecorded record locations 34, 36, 38, etc. onto which digital data may subsequently be recorded. This succession of key patterns and record locations thus extends the entire length of the tape, culminating in a series of key patterns 40, 42, 44 and 46, respectively, between which are the final record locations 48, 50 and 52. located between the end of the BOT pattern 16 and the first of the key patterns 26 is a portion of tape 54 which is dedicated for recording thereon drive test data. Similarly, following the final key pattern 46 and preceding the end of tape pattern 18 is a second region 56 which is also dedicated to having test drive data recorded thereon. Regions 54 and 56 are formatted similar to patterns 26, 28, etc and thus are indistinguishable from digital data. As discussed above, the pre recorded patterns 16, 18 and 20 desirably extend across the entire width of the tape 10 and thereby enable the detection of the BOT and EOT patterns 16 and 18, and key patterns 20 regardless of where a single track head may be positioned over the width of the tape. Similarly, the data locations between each of the key patterns 20 cause the record locations on each track to be positioned in columns extending transversely to the length of the tape. In a preferred embodiment of the present invention, a 6 mm wide tape 10 is adapted to have recorded thereon 16 tracks of data, each track subsequent to the proceeding one being recorded in an opposite direction onto the tape, resulting in a serpentine track pattern, each track extending over a 0.375 mm width. Thus, for example, during digital recording operations, when an end of tape pattern 18 is detected, the direction of travel of the tape 10 may be automatically reversed and a single track recording head transversely moved across the tape surface to a second transverse location onto which a second track may then be recorded in the opposite direction. When the BOT pattern 16 is subsequently sensed, the direction of the tape may again be reversed and the head advanced to a third track location and a third track recorded in the same direction as that of the first track as discussed here above. Figure 2 shows an expanded view of the manner in which three such tracks 58, 60 and 62, respectively, may be thus recorded. Each of the record locations, for example, location 34, is preceded by a key pattern 26 identified with that record location and is followed by second key pattern 28 which is identified with the next succeeding record location 36. The key patterns 26, 28, etc., extend across the width of the tape, so as to encompass all of the tracks subsequently recorded thereon. Tracks 58, 60 and 62 are recorded in the serpentine manner discussed above, such that each block of data, i.e., that within record location 34, begins with a key pattern which consists of a block of data 22 bytes in length, as will be described in more detail hereinafter. In this and subsequent examples, each block is formulated in bytes, each containing 8 digital bits. The next portion of the data block comprises an initial erase delay gap G₁. Following that gap, a succession of six frames F₁, F₂, F₃, F₄, F₅, and F₆, each 272 bytes long may be recorded. Following the last frame F₆, a final erase delay gap G₃ may be recorded, thus completing the data block within the record location 34. Once the direction of the tape is reversed, the track 60 may then be recorded in the opposite direction such that key pattern 28 K An expanded view of a typical prerecorded key pattern 26 is shown in Figure 3. As may there be seen, each key pattern consists of an MFM encoded, symmetric pattern in which unit cells are recorded at 3,937 bits per cm. The pattern includes preambles 64 and 66, each of which consists of six bytes, forward keys 68 and 70, each of which are two bytes long, and cyclic redundancy check CRC code words 72 and 74, each of which are also two bytes long. All of the respective portions are symmetrically positioned about a two byte gap 76. Thus, for example, the 6 byte preamble may consist of a train of 47 digital 0 s followed by a single digital 1, which thus enables synchronization at the beginning of each key pattern. The 2 byte keys 68 and 70 desirably consist of binary representations of numbers ranging between 0 and 65,536, and thus uniquely identify each of the record locations 34, 36, 38 48, 50 thru 52 shown in Figure 1, each of the record locations being given a different binary number. Finally, the 2 byte CRC pattern 72 and 74 is generated in a conventional manner using the following serial calculation X¹⁶ x¹⁵ x² 1, operating on the data stream, excluding the preamble. The CRC is subsequently used in reading the data to detect the presence of errors. As is further shown in detail in Figure 4, each of the data frames F₁ through F₆ in each of the tracks 58 through 62 of the record locations 34, like that of the frames in all of the other record locations, consists of a 6 byte preamble 78, a 6 byte header 80, a 256 byte data portion 82, a 2 byte CRC code word 84, and a two byte inter frame gap G₂ 86. The 6 byte preamble 78 is like the preamble 64 in the key patterns 26, 28, etc. in that it comprises a succession of 47 digital zeros followed by a single 1 and is used for synchronization of a phase lock loop for accurate decoding of digital data during playback. Thus, during the playback of a given record location, synchronization is possible both during the playback of the key pattern and also at the beginning of each of the frames F₁ through F₆. The header portion 80, shown in more detail in Figure 5, consists of a 1 byte track and frame number 88, a 2 byte record number 90, a 1 byte record type number 92, and a 2 byte character count 94. This information may be retrieved and used to uniquely identify the data recorded within each of the frames of a given record location. Digital data may be recorded in the data location 82 in a conventional manner, particularly as is set forth in U.S. Patent 4,145,683 Brookhart . As is there set forth, digital data is conveniently grouped into a block containing a succession of six frames. Data contained in certain frames is utilized to form parity words, and those words spatially recorded on portions of the tape which are sufficiently remote from the spatial locations of the data words from which those parity words are formed. Accordingly, a drop out or other defect resulting in an erroneous signal during playback operations will not result in the loss of both the data and the parity words formed from that data. Corrected data words may thus subsequently be constructed from the spatially remote parity words. Unlike the format disclosed in the Brookhart patent referenced above, in the present invention, such parity information is desirably recorded in the frames 5 and 6 of each of the groups of data within a given record location. Thus, a parity word in a given frame F₅ is desirably formed from the logical EXCLUSIVE OR combination of the data in frames F₁ and F₃, while the parity word in frame F₆ is formed from the data words in Frames F₂ and F₄, respectively. Except for this manner of formatting the parity words and grouping them together at the end of a given record location, the process for forming the parity words, and correcting the data is the same as disclosed in the Brookhart patent referenced above. The CRC code word 84 is formed in an identical fashion to that provided in the key pattern discussed in conjunction with Figure 3. The manner by which the pre recorded patterns are utilized to control recording operations during subsequent recording of digital data is best described in conjunction with Figure 6. As may there be seen, the tape 10 within a data cartridge not shown is provided with the pre recorded BOT patterns 16, EOT patterns 18 and key patterns 20, it being recognized that such patterns are shown symbolically and are not accurately representative of the actual spatial configuration or position of the respective patterns. Positioned along a transport path occupied by the tape is a motor driver 100 which is adapted to contact a drive roller within the tape cartridges as discussed in the U.S. Patent 3,692,255 referenced above. The driver 100 is conventionally driven by a drive motor 102, the speed of which is monitored by a digital tachometer 104, all of which components are of conventional construction. Also positioned along the transport path is a record playback head 106. The head 106 is adapted for tansverse motion across the width of the tape by means of a mount assembly 108 which is in turn movably supported on rod 110. The assembly 108 is coupled to a stepper motor 112, which when sequentially energized moves the assembly and the head in minute steps across the width of the tape. The output from the record playback head 106 is coupled by lead 114 to a preamplifier 116 which produces an amplified voltage level corresponding to that provided by the head 106. The output of the amplifier 116 is applied to a threshold detector circuit 118. Signals below a predetermined level, desirably approximately 20 percent of the normal output level, are thus ignored. Conversely, signals passing through the circuit 118 are coupled on output leads 120 to provide an output for the digital data and are also coupled to a retriggerable one shot circuit 124. The circuit 124 has incorporated therein an RC circuit having a time constant which is long relative to the spacing between pulses resulting from the high frequency portion of the BOT pattern 16 or the continuous alterations in the EOT pattern 18 as shown in Figure 1. Accordingly, so long as such high frequency signals are present, the output of the one shot circuit 124 will remain high. Conversely, the time constant within the circuit 124 is short relative to the duration of signals resulting from the unidirectional portion 22 of the BOT signal 16 as shown in Figure 1 or gap portions with the record locations. Accordingly, upon the absence of such high frequency signals, the retriggerable one shot circuit times out , and produces a pulse on output lead 126. A comparison of the number of such pulses on lead 126 as opposed to those provided by the digital tachometer 104 on leads 128 during a given time period thus enables the detection of the BOT and EOT patterns as distinct from digital data in the manner described hereinafter. The processing of the pulses appearing on leads 126 and 128 are preferably done within a local microprocessor 130. As is shown in Figure 6, the microprocessor 130 may be functionally viewed as containing a first counter 132, a second counter 134, a preloader 136, a command capture network 138, a tape drive motor control 140, a head position control 142, a stepper motor control 144, and an interface network 146. The manner by which such functional equivalents are performed within the microprocessor 130 is as follows. Upon initiation of a given sequence of operations, the preloader 136 places a digital number into counters 132 and 134. As signal pulses are applied from the respective inputs on leads 126 and 128, they are subtracted from the preloaded number within each of the respective counters. An output on lead 148 from counter 134 is provided when the number of pulses provided from the tachometer 102 is equivalent to the passage of approximately 7.5 cm of tape, thereby enabling a sufficient redundancy to ensure the presence of either a BOT or an EOT signal pattern, as opposed to digital data within the respective record locations. This is achieved by preloading the counter 134 with a digital number such that when the number of pulses received on lead 128 equals the preloaded number, an output is produced which in turn stops the count within counter 132. At that time, the number within counter 132 is in and of itself indicative of the type of pattern detected. If the number remaining in counter 132 is still the same as that initially placed into the counter from the preloader 136, for example, a preload of the number 100, it is evident that no pulses on lead 126 have occurred thus indicating a continuous succession of high frequency signals, i.e., an end of tape signal such as reproduced from the pattern 18 as shown in Figure 1. Conversely, if the number is negative, such that more pulses than the preloaded number of 100 have been subtracted, it is indicative of the presence of a large number of gap pulses such as produced by a succession of the unidirectional pulse regions 22, and is thus an indication of a BOT pattern is present. On the other hand, if the number within the counter is between zero and 100, an indication that normal digital data is present is provided. These three command indications are coupled on leads 150, 152, and 154 to the command capture network 138. As is shown, this network is coupled through interface network 146 to an external controller 156. Depending upon the instructions from the controller, the command capture network may then send an appropriate signals on lead 158 to the tape drive motor control 140 and thence apply drive signals on leads 160 to drive the motor 102 in the appropriate direction, depending upon whether a BOT or EOT signal has been sensed. Similarly upon sensing of either a BOT or EOT signal, a signal from counter 132 is coupled on lead 162 to the head position control 142. Again in response to instructions from controller 156 through the interface network 146, the head position control 142 provides an output signal on lead 166 to the stepper motor control 144, which in turn provides drive pulses to the stepper motor 112 and thereby steps the head 106 to an appropriate track location. While the respective functions described above within the microprocessor 130 have been described in functional terms, it must be recognized that such functions are desirably performed by means of software instructions within a microprocessor as is now conventionally effected. In the preferred embodiment described herein, a microprocessor type MC 6803 manufactured by Motorola Semiconductor Corp. has been implemented. The actual interpretation of data appearing on output lead 120 will also be coupled to the controller 156, within which is another microprocessor. It is thus the function of the controller processor to read the data at output 120 and to manage the interpretation of the format. However, the recognition of the key patterns identifying the begining of each of the record locations must first be accomplished, prior to writing digital data within a given record location. Accordingly, the master controller 156 instructs the command capture network through interface 146 to initiate tape motion and transverse head motion so as to cause the head to traverse the appropriate track on the tape until the appropriate record location is detected. Once the appropriate key pattern is found, the controller allows the drive to run for a brief time, after which write current is coupled to the head 106 via amplifier 168. After a short delay needed for the gap within the head 106 to reach an area within the initial gap G₁, the writing of digital data within the record location actually begins. After completion of the writing of the data block, a constant current is applied to the head to obliterate all previously recorded data within that data block. The current is then turned off prior to the appearance of the next key pattern. The pre recorded patterns extending the width of the tape are further utilized during initial loading operations to determine the precise edge of the tape and thereby provide a reference position for the head 106 from which all subsequent track locations may be indexed. The manner by which such an operation is effected is as follows. When a cartridge is first inserted into the system, the controller 156 initiates a conditioning sequence during which the tape is repacked by running to the end of tape and back to the beginning of the tape. Upon detection of the beginning of tape signal, the head position control is then instructed to cause the stepper motor 112 to sequentially step the head toward one edge of the tape. This sequential stepping operation continues until the signal coupled to the threshold circuit 118 drops below a predetermined threshold level. The position of the head when the signal drops below the threshold level is then defined as the zero or reference position, and forms a reference point from which the head is subsequently instructed to be stepped so as to define future track locations.