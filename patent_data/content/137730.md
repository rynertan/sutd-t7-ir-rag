# Discrete fourier transformation method and apparatus for carrying out the same.

## Abstract
A discrete Fourier transformation apparatus is provided with a circuit for effecting discrete transformation of a square wave 2 and an input signal 1 by a digital process, and a digital filter arranged after the circuit. Discrete Fourier transformation components are obtained as an amplitude and a phase of a sine wave 4 which is output from the digital filter without using a digital multiplier.

## Claims
CLAIMS 1. A discrete Fourier transformation method comprising the steps of effecting discrete transformation of a square wave and an input signal by a digital process supplying results of said discrete transformation to a digital filter and obtaining a discrete Fourier transformation component as an amplitude and a phase of a sine wave which is output from said digital filter. 2. A discrete Fourier transformation method according to claim 1, wherein said digital filter is a comb filter. I 3. A discrete Fourier transformation method according to claim 1, wherein said digital filter is a moving average filter. 4. A discrete Fourier transformation apparatus comprising an A D converter which converts an input analog signal to a digital signal x o , x l ,.... x N l J an input memory for storing a. converted digital signal i 0 , x l , , x N l therein an adding and subtracting address generation circuit which generates a matrix Hk of a square wave Hk H o, H k., H 2k., H 3k., ...., H N l k. wherein H o ho, hl, .... hN 2 1, hN 2, hN 2 1.... l, l, ..... l, o, o, ...... o T and H j k HI. c C j N l k is obtained by successively shifting the elements in H O toward the right by j mod N , H o and H j each becoming a row vector in H2 an adder and subtracter which is connected to an output of said input memory and to the adding and subtracting address generation circuit so as to calculate the product of said H k and said x 0 , x l , , an output memory for storing an output of said adder and subtracter a digital filter which is connected to an output of said output memory and removes third, fifth, seventh, and higher odd number harmonics included in the output of said output memory and a peak detecting circuit which is connected to an output of said digital filter and detects a peak value of the output of said digital filter. 5. A discrete Fourier transformation apparatus according to claim 4, further comprising another input memory which is connected in parallel to said input memory, said input memory and said another input memory being operable alternately to store the output of saidA D converter and to provide an input of said adder and subtracter. 6. A discrete Fourier transformation apparatus according to claim 4 or 5, further comprising another output memory which is connected in parallel to said output memory, said output memory and said another output memory being operable alternately to store the output of said adder and subtrater and to provide an input of said digital filter. 7. A discrete Fourier transformation apparatus according to any of claims 4 to 6, further comprising a zero cross point detecting circuit which is connected to the output of said digital filter and detects a zero cross point of the output of said digital filter. 8. A discrete Fourier transformation apparatus comprising an A D converter which converts an input analog signal to a digital signal x 0 ,x i ,...,x N i , and a plurality of transformation circuits, each comprising a plurality of input memories for storing a converted digital signal x O , x 1 ,.., x N 1 therein an adding and subtracting address generation circuit which generates a matrix Hk1 representing a square wave, wherein Hk H o, H k., H 2k., ... H N 1 k. and H o h0, h1,... hN 2 1, hN 2 hN 2 1 ...hN 1 T and HIj keje N 1 k is obtained by successively shifting elements in H o to the right by j mod N , Hj0 and H j each becoming a row vector in an adder and subtracter which is connected to outputs of said pluralities of input memories and to the adding and subtracting address generation circuit so as to calculate a product of said Hk and said Hk and said x 0 , x 1 ..., x N 1 a plurality of output memories for storing an output of said adder and subtracter a digital filter which is connected to outputs of said plurality of output memories and removes third, fifth, seventh, and higher odd numbered harmonics in signals output from said plurality of output memories and a peak detecting circuit which is connected to an output of said digital filter and detests a peak value of the output of said digital filter. 9. A discrete Fourier transformation apparatus for carrying out a method according to any of claims 1 to 3.

## Description
DISCRETE FOURIER TRANSFORMATION METHOD AND APPARATUS FOR CARRYING OUT THE SAME The present invention relates to a discrete Fourier transformation method and apparatus for the same Conventional methods for rapidly carrying outFourier conversion include Fast Fourier Transformation FFT and the Winograd algorithm. While these methods feature less multiplication than with direct execution of discrete Fourier transformation, they still require a multiplication process per Be. The hardware for effecting these methods, therefore, must include a multiplier, both increasing the size and cost of the equipment. An embodiment of the present invention can provide a method for discrete Fourier transformation in real time using only addition and subtraction and no multiplication and thus realizable by apparatus which is simple, small in size, and inexpensive. The present invention takes note of the fact that a square wave is expressed by just two values EO, 13. It executes discrete convolution of a square wave and an input signal by difference calculation, that is, by 2.5N addition and subtraction calculations where N represents the number of samplings of the discrete input signal .The third and higher odd numbered harmonics included in the waveform obtained above are removed acomb filter or other digital filter so as to obtain a sine wave.The discrete Fourier transformation of the input signal is obtained from data on the amplitude and the phase of the above mentined sine wave. To realize the above, the present invention provides a discrete Fourier transfor mation apparatus including a circuit for effecting discrete transformation of a square wave and an input signal by a digital process and a digital filter arranged after the circuit and for obtaining a discrete Fourier component as an amplitude and a phase of a sine wave output from the digital comb filter. Reference is made, by way of example, to the accompanying drawings, in which Fig. 1 is a diagram explaining discrete convolution of an input signal and square wave Fig. 2 is a diagram of the relationship between a discrete Fourier transformation component and an output sine wave Fig. 3 is a diagram of one example of a matrix H Fig. 4 is a diagram of one example of a difference conversion matrix Fig. 5 is a diagram of the construction of an embodiment of the present invention Fig. 6A is a diagram of the construction of an example of a digital filter shown in Fig. 5 Fig. 6B is a diagram of a characteristic of the filter shown in Fig 6A Fig. 6C is a diagram of the relationship between an order m of the digital filter and an error of the discrete Fourier transformation apparatus according to the present invention Fig. 7 is a diagram of a characteristic of another example of the digital filter shown in Fig. 5 and Fig. 8 is a diagram of a parallel type embodi ment of the present invention. sampled at N points An input signal discreted at a point N is expressed as x 0 , x l , ..... x N l 1. Vectorized, this becomes x 0 , x l x N l The discrete Fourier transformation DFT of is for example, as shown an Fig. 1 1. On the other hand, a square wave having a basic angular frequency K 0 k N l has a DFT as shown in Fig. 1 commat . The waveform obtained from the result of the discrete convolution of these waveforms has a DFT as shown in Fig. 1 3. When the period of the convolution is adjusted, the DFT as shown in Fig. 1 commat is obtained.After this step, the basic frequency component of angular frequency in Fig. l is the DFT of the input signal, that is, the Kth DFT component Xk in Fig. 1 1. In Fig. 1 4, the odd order higher harmonic components 3w, 5w, .... appearing in Fig. 1 4 are removed by using a digital filter such as formed byseveral comb filters in cascade, and a sine wave having an angular frequency is obtained.As shown in Fig. 2, the amplitude of the sine wave corresponds to Xk , and the phase angle thereof corresponds to arg Xk The above mentioned discrete convolution can be executed over one period of the sine wave, that is, the section period 2 k . this can be carried out by multiplying with a matrix Hk representin a square wave shown in equation 1 . H, k h 0K, H k., H 2k., H 3K., ....., H N l k. wherein T H 0 h0, h1, ..... hN 2 1, hN 2, hN 2 1, ...., hN 1 1, 1, .... 1, 0, 0, ....., 0 T and H j. k j N 1 k is obtained by successively shifting the elements in HI toward the right by j mod N, H o and H j each becoming a row vector in H . The waveform formed by the sampled values at point N, obtained from the results of the discrete convolution, is expressed as Wk 0 , Wk 1 , .....Wk N 1 . This is vectorized and expressed as W k in equation 2 . W k Hk ... 2 wherein W k Wk 0 , Wk 1 , ....., Wk N 1 TOne example of Hk is shown in Fig. 3 in the case whereN 8, k 0, 1, 2, 3. In the matrix Hk , NÃª elements 2 are 1 and the remaining N 2 elements are 0 , therefore, equation 2 can be executed by N2 2 additions. This number of additions can be decreased by the following method. In the matrix Hk the difference between elements of the i row and i 1 row is found. A matrix AH having this as the i row elements 1 tn row element is defined as in equation 3 0 i N 1 . This matrix is called a difference conversion matrix. An example of Hk is shown in Fig. 4, in the case where N t 8 and k 0, 1, 2, 3. Hk i, j Hk i, j Hk i 1, j when i 0 ... 3 Hk 0, j 0, j Hk N 1, j In equation 3 , it is assumed that the suffixes i, j, which denote the matrix, start from 0 and end at N 1. The signal shown by equation 4 is obtained by multiplying the matrix Hk and . This signal is expressed as Wk 0 , Wk 1 , ..... Wk n 1 as shown at the right side of equation 4 .EMI4.1 In equation 4 , when Wk N 1 is known, Wk O is obtained from the following equation. Wk N 1 Wk 0 Wk 0 ... 5 Further, when Wk 0 is known, Wk l is obtained from the following equation. w o bWk l Wk l ... 6 That is, when Wk n 0 n N l is added to Wk N l successively, Wk O , Wk l are obtained successively. Wk N l , which is known at the beginning, can be obtained by calculating equation 2 with respect to only the N l th column of Hk This requires N 2 additions. Further, when Wk n is obtained from equation 4 , 2N additions and subtractions are required.This is because, in AHk , 2N elements are 1 or 1 and the other elements are 0 . Thus, the discrete convolution of the square wave and the input signal can a total of be executed by 2.5N additions and subtractions, so that the number of calculations can be considerably decreased from the N2 2 times required for directly executing equation 2 . The construction of an embodiment of an apparatus according to the present invention is shown in Fig. 5.In Fig. 5, an input signal is converted by an analog to digital A D converter 1 to a digital signal.This digital signal corresponds to Fig. 1 Qi, that is x 0 , x l , , x N l , and is written in one of two memories 2 and 3. The two memories are provided so that the input signal can be received smoothly when one memory is occupied by providing a signal for an adding and subtracting circuit 4. The two memories may each be alternately operated to read the input signal and to write a signal to the adding and subtractingAn adding subtracting address generation circuit 5 generates the matrix Hk shown in Fig. 1 commat , that is, expressed by equation 1 .The adding and subtracting circuit 4 calculates the product Hk x 0 , x 1 , ....., x N 1 by the addition and subtraction processS i entuEnpeut aOt ve the circuit 4 corresponds to Fig. 1 commat . That is, the adding and subtracting circuit 4 first executes equation 2 on the N l th column for 1 3. in the input memory so as to calculate Wk N l . Second, based on this Wk N l and using the above mentioned difference conversion matrix, the circuit 4 calculates all the values Wk 0 , Wk 1 ,...... Wk n 1 . By this, the convolution waveform of the input signal and the square wave shown in equation 2 can be obtained. In the calculating process, addition or subtraction is selected by an address generation circuit 5 shown inFig. 5. The obtained waveform is successively trans ferred to an output memory 6 or 7.Two output memories are provided for a similar reason as w th the two input memories, that is, to allow input writing of the content of one output rtnDry to a digital filter 8, z hile the other output memory may be occupied by reading from the adding and sutracting circuit Each output memory may alternate between these two types of operation. For the purpose of removing the 3rd, 5th, 7th, and higher odd number harmonics included in the obtained convoluted waveform, a filter formed by a cascading comb filter 8a shown in Fig. 6A is used. The characteristic of the comb filter is shown in Fig. 68. In Fig. 6A, there are N 2n delayed samplings in the comb filter for removing n th harmonics In is 3 or higher odd number .N 2 is not always an integer. When not an integer, N 2n is rounded off. There are an infinite number of odd number higher harmonics included in the convoluted waveform, however, in the present invention, of comb filters the cascaded comb filter is limited to a finite numbed. The rounding off of N 2n and the finite number of comb filters results in some error in the DFT obtained by the present invention. The error with comb filters for removing an m th higher harmonic m is 3 or a higher odd number is as shown inFig. 6C when m 1 2 comb filters are used. As shown in Fig. 6C, when seven cascaded comb filters are used for removing the 3rd to the 15th higher harmonic, the error becomes lower than 1 . In Fig. 5, the sine wave output from the comb filter 8 is, over the range of one period, input to a peak value detecting circuit 9 and a zero cross point detecting circuit 10 to obtain the amplitude and phase angle thereof. These are equal to IXkl and arg IXkI in the k th DFT component Xk. After a series of the above mentioned operations is executed, all circuits are stopped and enter a reoperation standby mode. For the purpose of removing the 3rd, 5th, 7th, and higher odd number harmonics included in the obtained convoluted waveform, a moving average filter can also be used as the digital filter besilesya comb kilter, With a moving average filter, the process can be carried out, using only adding and subtracting operations, by the operation of successively shifting a series of sampled values and averaging each determined number. That is, when the moving average during the time is expressed as U T, t and the same moving average is repeated n times, the following equation is obtained.EMI7.1 When equation 7 is calculated, the low pass characteristic as shown in Fig. 7 can be obtained. Therefore, by the combination of the convolution with the square wave,DFT can be obtained by just adding and subtracting operations. When the above embodiment of the present invention is used, the DFT of the input signal can be obtained by only few addition and subtraction operations. Figure 8 shows another embodiment of the present invention. The embodiment is different from Fig. 5 in that a plurality of portions corresponding to Fig. 5 with the exception of the AID converter 1, are arranged in parallel. In Fig. 8, the same portions as Fig. 5 are given the same reference numerals with suffixes a, b, and c. In Fig. 5, when a component Xk of DFT is obtained value with respect to a k and then another X k with respect va ue to another k is desired, k is set in the adding and subtracting address generator circuit 5 so as to carry out another operation. However, because the construction of the embodiment shown in Fig. 5 is very simple, the values DFT component with respect to a plurality of k can be calculated in parallel as shown in Fig. 8. In the embodiment shown in Fig. 8, sequential processing similar to Fig. 5 is possible and, usually, combined parallel and sequential processing is possible. In the embodiment shown in Fig. 8, when parallel calculations are carried out on a number P of kvalues, theprocessing time can be decreased by 1 P, compared with when the same number of k values are processed by the embodiment shown in Fig. 5. According to the present invention, k th components a DFT 0 k N 1 can be obtained for an input signal Lx O , x l , , x N l J formed by N sample values with only 2.5 N adding and subtracting processes and a digital filter. Therefore, DFT can be carried out in real time by a very simple apparatus which uses no multiplier.