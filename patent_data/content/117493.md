# DIGITAL CONTROLLER

## Claims
Programmierbare digitale Steuerung, mit

## Description
The present invention relates to a programmable digital controller as described in the preamble of claim 1. Such a controller is known from WO A 80 00758. The control of a plurality of objectives by means of a digital controller has the disadvantage that the overall processing speed is slow when the control is performed serially on a time division basis and the number of objectives to be controlled is high. In the above mentioned reference, a programmable signal processor is disclosed which comprises a common instruction memory, a plurality of processors executing processings in parallel with each other in accordance with a program from a common instruction memory, each processor including a data memory and arithmetic control means. There is performed a parallel operation in which the common instruction memory supplies control data to the individual processors for performing respective operations, wherein each processor simply performs an operation on the data furnished by the associated data memory. From US A 3 815 095, there is further known a system wherein a common operand address is supplied to individual processors which are arranged to perform operations in parallel on a common data array, but not on arbitrary data arrays which usually differ from one to another processor. The address register of this system serves simply for designating the identification numbers of processors between which data transfer is to be carried out. In summary, the conventional multi processor system is so arranged that the individual processors perform independent processings in parallel. As a consequence, the waiting time in reading a program through a common bus presents a problem. Besides, time loss due to the overhead of a control program for supervisory control of the multi processor system gives rise to another problem, providing an obstacle to the realization of the expected high speed operation. In case the processings have to be performed by controlling the timing among the processors, waiting time involved among the processors as well as complicated programs for maintaining synchronism among operation of the processors provides disadvantages. In case the outputs of the individual processors of the multi processor system have to be compared with one another for assuring an increased reliability, it is necessary to provide the erroneous operation detecting period with a margin for disposing of timing difference among the processors, involving complexity and rendering it impossible to accomplish detection with high precision. It is the object of the present invention to provide a digital controller for process control with improved high processing speed. For accomplishing the above objects, the present invention starts from the fact that when a plurality of processes or objectives of a like nature are controlled, a number of like arithmetic operations equal to the number of the objectives or processes to be controlled are often performed by using same operands and proposes that instruction is stored in a common memory while the operands are stored in memories incorporated in processors, respectively, which are provided separately for the objectives or processes to be controlled. The above object is solved by the features described in the characterizing part of claim 1. According to a further aspect of the invention, a dummy processing no operation is effected for those of the objectives or processes for which the like arithmetic processing is not required, to thereby maintain the parallel processing consistently. The present invention will be apparent from the following detailed description taken in conjunction with the accompanying drawings, in which Now, the invention will be described in more detail in conjunction with an exemplary embodiment shown in Fig. 1. For simplification of description, it is assumed that two processing units, i.e. master processing unit hereinafter referred to as MPU in abridgment 3 and a slave processing unit hereinafter referred to as SPU in abridgment 4 are provided and share between them an instruction memory 1 and an input output device 2 for inputting outputting process signals, wherein the MPU and SPU are operated in parallel in accordance with a program placed in the instruction memory 1 to control processes in concern through the input output device 2. In the case of the digital controller illustrated in Fig. 1, it is assumed that the number of the objectives or processes to be controlled is two. However, the number of the objectives to be controlled may be increased by correspondingly increasing the number of the SPU 4. Although the objective to be controlled is expressed simply by the term process in conjunction with the embodiment shown in Fig. 1, it will be understood that a plurality of control objects or objectives of like type or nature may be connected to the digital controller. More specifically, the MPU 3 and SPU 4 include, respectively, processors 81 and 82, operand address memories 61 and 62, input output buffer memories 71 and 72, and dual port memories 91 and 92. The MPU 3 is further provided with a program controller 5. The operand address memories 61 and 62 serve to store the addresses which designate the operands in the input output bufer memories 71 and 72 on the basis of the indirect address of an instruction stored in the instruction memory 1, while the input output buffer memory 71 and 72 serve as the buffer for a main memory of the input output device 2 in realizing a high speed operation. Further, the dual port memories 91 and 92 are provided for allowing the direct data transfer to be effected between the MPU 3 and the SPU 4. Fig. 2 shows a program for executing two sets of multiplications through the parallel processing. By referring to this figure, the basic control for the parallel processing and functions of the various memories in the digital controller shown in Fig. 1 will be described in concrete. There is illustrated in Fig. 2 relationship between the contents of arithmetic operations and the addresses. The MPU 3 is instructed to execute an arithmetic operation of On the other hand, when the instruction address signal 301 designates the address 0001 , arithmetic operation of Fig. 4 shows a time chart for illustrating the operations described above for the assumed example illustrated in Figs. 2 and 3. When the instruction address signal 301 is updated in response to a step up signal 300 to allow the succeeding instruction signal 302 to be read out, the execution timing is established by an execution command signal 303. Namely, the MPU 3 responds to the execution command signal 303 to fetch the input output data 305, i.e. 10 from the address Next, the arithmetic operation performed according to the teaching of the invention as described above will be compared with that of the conventional parallel computation system. It is assumed that the conventional parallel computation system is of such a structure as schematically shown in Fig. 5 and includes processors or MPUs 3a and 3b and instruction memories 1a and 1b provided in association with these processors, respectively. Fig. 6 shows a time chart for illustrating the parallel computation processings effected in the manner described above in conjunction with Figs. 1, 2 and 3 in comparison with the parallel computation processings performed by the MPU 3a and 3b shown in Fig. 5. In Fig. 6, I denotes a period in which instruction is executed, II denotes a time interval for which completion of the operation performed by the counterpart processor is awaited, and III denotes a time loss involved by the procedure for synchronization. Since there exist a number of points at which the synchronization may be established, data is required for determining at which point the synchronization is to be established. The time required for the data transfer and determination of the synchronizing point is regarded as loss in time or dead time when considered from the standpoint of execution of the instruction. In contrast to the conventional parallel computation system, instructions can be executed successively with the dead time intervals II and III being reduced to minimum in the case of the processing system according to the illustrated embodiment of the invention, as will be seen from Fig. 6. Fig. 7 illustrates in a flow chart a procedure for parallel processing the data shown in Fig. 3 for the two multiplications shown in Fig. 2 by the system according to the illustrated embodiment of the invention. At a step 100, the instruction Fig. 3 is read out from the instruction memory 1 at the address 0000 under command of the program controller 5 incorporated in the MPU 3. At that time, the SPU 4 is in the stand by state step 200 . At steps 101 and 201, the processors 3 and 4 fetch and decode the instruction. Since the instruction code resulting from the decoding indicates the multiplication, it is determined that two operands must be fetched and that the result of the operation be stored at another address. Accordingly, succeeding steps 102 and 103 correspond to the operand fetching operation of the MPU 3. More specifically, at the step 102, the address Now, consideration will be made on the parallel processing of Fig. 8 shows data storage locations and data flows in the case the above arithmetic operation is executed in accordance with the teaching of the present invention, while Fig. 9 shows in a time chart the processing procedures as a function of time. Further, Fig. 10 to 13 illustrate locally the data locations and the data flows at each of processing steps I to IV, respectively. Referring to Fig. 8, the contents of the instruction memory 1 and the operand address memories 61 and 62 are previously stored in these memories as the programmed data. Input data x₁ to x₄ of the input output buffer memories 71 and 72 are constituted by the process information which varies from time to time in dependence on the changes in the processes to be controlled. The input information is constantly transferred between the input output device 2 and the buffer memories 71 and 72, whereby the process information stored in the input output buffer memories 71 and 72 is updated from time to time. On the other hand, output information supplied from the processors 81 and 82 are temporarily written in the input output buffer memories 71 and 72 and subsequently transferred to the input output device 2. The processing of the arithmetic operation in accordance with the expression 1 is so programmed as to be executed at four steps in total, inclusive of two steps for addition and two steps for multiplication, as will be seen in Fig. 9. More specifically, at the step I, multiplications of x₁ x G₁ and x₃ x G₃ are executed in parallel by the MPU 3 and the SPU 4, respectively, the results of which are, respectively, stored in the registers WORK 11 and 12 incorporated in the processors 81 and 82, respectively. This operation is completed by executing once the basic operation described hereinbefore in conjunction with Figs. 2 and 3. The contents of the memories relating to this execution step I are illustrated in Fig. 10. In more detail, in accordance with the instruction of the content X, B stored in the instruction memory 1 at the address Upon completion of execution of the step I shown in Fig. 9, the program control means 5 issues to the instruction memory 1 a request that the succeeding instruction be read out from the next address i 1 , whereby the multiplications are performed in the similar manner at the step II. The data as well as the data flow at that time is shown in Fig. 11. Operations of G₂x₂ 20 and G₄x₄ 30 are executed in parallel by the MPU 3 and the SPU 4, respectively, the results of which are stored in the registers WORK 21 and 22, respectively. The processing performed at the step III of Fig. 9 is same as the one described hereinbefore in conjunction with the flow chart shown in Fig. 7. In the instant case, however, the contents of the registers WORK 11 and WORK 12 incorporated in the processor 81 are added together by the MPU 3, while the contents of the registers WORK 12 and 22 of the processor 82 are concurrently added together by the SPU 4. Accordingly, the contents at the addresses B 6 and B 7 of the address registers 71 and 72 represent only the addresses of the registers. Data and data flow at that time are shown in Fig. 12. While the result of the addition performed by the MPU 3 is stored in the register WORK 31, the result of the addition performed by the SPU 4 is stored at an address D. PORT 12 of the dual port memory 92, to thereby allow the operation result of the processor 82 to be fetched by the processor 81 at the next step IV where the operation results of the processors 81 and 82 are added with each other. At the step IV, the results of the arithmetic operations performed by the processors 81 and 82 are added with each other to determine In the foregoing, operation of the exemplary embodiment of the invention has been described. In general, processing of the processes to be controlled includes frequently regular repetitions of multiplications and additions. Accordingly, the embodiment of the invention can be realized in a simplified hardware structure, while the program as well as the control by the program can be correspondingly simplified. By increasing the number of the processors which perform processings concurrently in parallel with one another, the overall processing speed can be made high correspondingly. In case the MPU 3 and the SPU 4 shown in Fig. 1 are caused to perform processings of the same content, respectively, for the purpose of comparing the results of the processings with each other, accurate comparison can be readily made with high precision because the individual processing steps are executed perfectly in parallel or synchronism, as is illustrated in Fig. 9. Thus, a processing system of high reliability can be readily realized. In the application where the comparison mentioned above is intended, a common memory may be used for the operand address memories 61 and 62 to thereby simplify the hardware structure. The data transfer among the input output buffer memory, the input output device and the processes under consideration can be effected in the manner disclosed in US A 4 497 569.