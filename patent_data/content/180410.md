# LIQUID QUALITY MONITOR

## Claims
Einrichtung zur Überwachung der Güte einer Flüssigkeit, mit einer Zelle, durch die die zu überwachende Flüssigkeit zu fließen veranlaßt werden kann, einer mit einer Seite der Zelle gekoppelten Lichtquelle, einem oder mehreren Detektoren, welche unter entsprechenden Winkeln bezüglich eines von der Lichtquelle emittierten und quer durch die Zelle gerichteten Lichtstrahles angeordnet sind, um Licht wahrzunehmen, das von Verunreinigungen in der zu überwachenden Flüssigkeit gestreut wird, wenn diese zum Strömen in der Zelle veranlaßt wird, und um ein entsprechendes Detektorausgangssignal oder entsprechende Detektorausgangssignale zu erzeugen, einer Anordnung, die es ermöglicht, die Zelle mit einer sauberen Flüssigkeit durchzuspülen, wobei das Detektorausgangssignal oder die Detektorausgangssignale dann einem Streulicht hintergrund niveau entsprechen und eine Offsetspannung oder spannungen enthalten, und einer Anordnung zum Errechnen des Verschmutzungsniveaus aus dem ersterwähnten Detektorausgangssignal oder den ersterwähnten Detektorausgangssignalen und der Offsetspannung bzw. den Offsetspannungen,

## Description
This invention relates to liquid quality monitors and in particular to monitors for boiler condensate water of a power station. A major source of oil in boiler feed water is turbine lubricating oil from sealing glands. On 500 MW fossil fired units an oil level of 0.50 pm is the maximum acceptable. High oil levels incur cost penalties by contamination of condensate polishing plant, feed heaters and are also suspected of increasing the risk of boiler tube failure. In our co pending United Kingdom Application No. 8126175 Serial No. 2105028 there is disclosed a basic oil in water monitor for use with such boiler condensate water. The present invention is particularly concerned with a low oil concentration boiler condensate monitor, e.g. 0 to 2 ppm. In the British Patent Specification 1,180,480 an apparatus for monitoring the contamination in liquids is described, comprising a cell through which the liquid to be monitored can be caused to flow. This known apparatus is based on the scattering principle. The scattered light is detected by a detector delivering an output in which on offset voltage is included. The contaminant level of the liquid to be monitored is calculated from the output of the detector and the measured offset voltage. According to the present invention in its broadest aspect there is provided a liquid quality monitor of the kind comprising a cell through which the liquid to be monitored can be caused to flow, a light source coupled to one side of the cell, one or more detectors, arranged at respective angles to a light beam output from the light source and directed across the cell, to detect light scattered from contamination in the liquid to be monitored when it is caused to flow in the cell and producing corresponding detector output or outputs, means for enabling the cell to be flushed with a clean liquid, the detector output or outputs then corresponding to the background scattered light level and comprising offset voltage or voltages and means for calculating the contaminant level from the first mentioned detector output or outputs and the offset voltage or voltages, characterized in that means are provided for measuring the temperature of the clean liquid and that of the liquid to be monitored and means for compensating the offset voltage or voltages for difference in temperature between the liquid to be monitored and the clean liquid. In the U.S. Patent Specification 3.617,757 an apparatus for determining the concentration of solids in suspension in fluid is described. A reference sensor is used for minimizing the effects of changes in temperature of the detector. Embodiments of the present invention will now be described by way of example with reference to the accompanying drawings, in which The monitor of the present invention employs a multi angle scatter cell which may be as illustrated schematically in Figures 1 and 2. The monitor employs the scattering of pulsed near infra red radiation, for example 900 nm, As described in the above mentioned application, the forward scattered light from an LED 1 is detected at various cell angles by photodiodes 2, each directly connected to a respective AC pre amplifier 3 only one of which is indicated in Figure 2. The preamplifiers 3 and photodiodes 2 are mounted on the cell 4 in a housing 5. Each preamplifier has a potentiometer which allows each channel gain to be adjusted during calibration. The pre amplified photodiode signals are amplified, digitised and processed to give an oil content reading. Contributions due to particulates in the water, such as rust, may be removed or alternatively the signals may be processed for particulate content readings. Associated with each preamplifier stage 3 is a respective main amplifier stage 6 only one of which is shown comprising an amplifier 7 providing AC gain, a phase sensitive detector 8, and an amplifier 9 providing DC gain with a variable DC offset 10. The outputs are applied to processing means such as a microprocessor not shown . Even with clean water in the cell some light scatter occurs from the walls and windows. This gives rise to an offset value which is adjusted out at 10 in the D.C. amplifier stages. A baffle 11 extends across the cell to prevent any light directly illuminating the photodiodes 2. The light transmitted directly across the cell is measured by a direct detector photodiode 12 and used in an automatic gain control circuit to maintain the drive for the LED 1 and thus maintain the illumination constant. The cell 4 is incorporated in the overall monitor as indicated in the plumbing layout of Figure 3. The monitor is in use coupled to two water supplies, one being the water to be monitored, which is coupled to the sample inlet, and the other being a clean mains supply, which is coupled to the flush inlet. The mains supply is used to flush out the monitor and provide a calibration supply. The supply is selected by an inlet solenoid valve 13 which, for example, selects the flush supply when energised. The supply is coupled to the cell 4 via a line 14 including a pump 15 and a sample input valve 16. The pump inlet pressure P In order to permit the windows of the cell to be washed a window wash system including a window wash solenoid valve 24 is incorporated in the monitor. An orifice plate is inserted in the line to the cell at 25, that is after the line to the window wash system. This gives a pressure drop between the water in the window wash line and the sample stream so that, when the window wash solenoid valve is open, a stream of sample water at a higher velocity than the bulk flow is directed over the optical windows to maintain cleanliness. A drain valve 26 is partially closed in normal operation to apply a back pressure to the system, preventing cavitation and forcing any entrained air into solution. Air bubbles will give erroneous readings since light is scattered by them. An output solenoid valve 27 determines where the sample stream is routed, either to a drain or recirculated in the boiler condensate system or otherwise from which it is sampled. In order to prevent calibration particules being discharged into the boiler condensate system the software may be configured so that the valve 27 selects DRAIN when the input solenoid valve 13 selects FLUSH and selects RECIRCULATE when the input valve selects SAMPLE. The valves 16, 19, 20 and 26 are manually operated valves. The pump 15 may be a centrifugal pump and serves to provide a head for the window wash pressure, a higher flow rate during flushes and some degree of emulsification for larger oil droplets. For example the software may be configured so that the pump is only on during flush , window wash or when the scattered light level exceeds a pre set threshold. This latter feature may energise the pump any time in the sampling process and is included to provide emulsification of any large oil droplets that might be present. Provided there is sufficient head to drive the sample through the monitor the pump need not be on. If, however, the scatter signal exceeds a preset threshold, the pump is energised to provide further emulsification of the sample, increasing the signal levels in accord with the calibration. This feature increases pump lifetime and lowers sample throughput for those installations where the sample is discarded rather than restored to the recirculating system. The monitor further includes a temperature sensor mounted close to the photodiodes which allows the offset voltages scattered light levels with clean water or background scattered light levels to be compensated for temperature variations. When the temperature of the flush supply clean water is very different to that of the sample, supply errors can arise in the computed levels of oil or particulate contamination. A software algorithm for such temperature compensation will be described hereinafter. This algorithm is such that any gain changes made during routine calibration do not necessitate change to the algorithm, which is thus independent of the pre amplifier. This allows a factory calibration of the temperature dependence of the offset which does not need to be subsequently changed. The temperature dependence may arise from the LED, the photodetectors, or geometrical size changes of the cell itself. The derivation of the algorithm will now be described with reference to Figure 4 which shows the linear variation of offset voltage Z scattered light level with clean water with the temperature T as sensed by the above mentioned temperature sensor. Defining S as the fractional change of offset with temperature, then At any temperature T₁, the corresponding Z₁ is given by At any other temperature T₂, the corresponding Z₂ is given by Both K and S can be determined in a factory calibration, and entered into the monitor microprocessor. Thus with the flush water at T₁, the offset Z₁ at T₁ can be measured. Then with the sample at T₂, the offset Z₂ can be calculated from the above expression 1 . Since the temperature sensor output is of the form T mt Preferably the monitor operates automatically such that with a control switch turned to sample it goes through a predetermined cycle which is repeated until the monitor is turned off. Any manual interruption to this cycle such as a flush , window wash or operation of a test switch causes the cycle to be extended for the length of the manual interruption. A one hour operating cycle may comprise a four minute flush with the clean flush water a twenty second window wash initial system checks described in greater detail hereinafter offset measurement sampling routine, comprising continually monitoring the oil level. After thirty minutes the sampling routine may be interrupted by a twenty second window wash. One hour after turn on the cycle recommences with a four minute flush. The initial flush sequence is long enough for the cell to reach temperature equilibrium with the water. The offset voltages are measured and stored together with the temperature at which they are measured. The sample water supply is automatically selected and the scatter voltages measured. The temperature of the sample water is measured to allow the offset voltages, which are subtracted from the sample voltages, to be compensated for any temperature change. The scatter voltages may be smoothed with a digital filter to reduce noise, the filter time constant being approximately one minute. The scatter signals are then input to the algorithm for calculating the oil concentration and particulate concentration therefrom. If the calculated oil level exceeds a preset alarm level then this can be used to illuminate an oil high warning light or to operate an alarm at a remote location. The main signal processing system control functions are controlled by the above mentioned microprocessor which is mounted on a main printed circuit board in a control box not shown . On a front panel of the control box are all the controls and indicators necessary for routine operation of the monitor. Inside are further switches necessary for the calibration procedure and also a number of self diagnostic LED error indicators. The front panel layout is shown in Figure 5 and includes a meter 28 upon which the oil concentration can be displayed, a system flush lamp 29, an oil high lamp 30, a system error lamp 31, a window flush switch 32, a test switch 33, an off sample flush switch 34 and a power on lamp 35. In normal operation switch 34 is set to sample and the system continually repeats the one hour operating cycle. In the flush position of switch 34, the flush water input is selected either for a manual flush or for the calibration routine. Depressing the button of switch 32 turns the pump on and opens the window wash solenoid valve. These are turned off on releasing the button. On depressing the test switch 33 all of the indicators are illuminated and the set alarm level on the meter is displayed. This serves to check that the microprocessor is functioning correctly and that no bulbs have failed. The system flush lamp 29 is illuminated whenever flush is selected, whether manually or by the microprocessor. Unless in the calibration routine, when this lamp 29 is illuminated the meter reading will be zero and the scattered light levels are not measured. The oil high lamp 30 is illuminated if the meter level exceeds the level set by an internal set alarm potentiometer. Preferably the alarm has in built hysteresis of 0.1 ppm so that the oil high alarm will be set if, say, the level exceeds 0.5 ppm but will not be cleared until the level is below 0.4 ppm. After fifteen seconds of oil high a delayed alarm relay will close to give a remote alarm signal. The lamp 30 may flash every second under certain error conditions. The system error lamp 31 is illuminated if the monitor is in a condition which prevents display of the true oil content. The various causes for this and the self diagnostics associated with it are described hereinafter. Lamp 31 may also flash every second under certain error conditions. The meter 28 displays oil concentration 0 2 ppm . In the calibration mode, however, the meter can display other values. One of the above mentioned internal switches allows display of oil or particulate concentration. The system error lamp will light whenever an error that prevents the monitor from giving reliable readings occurs. Some situations will allow the monitor to continue if the fault clears, whereas others require attention from site personnel. To aid the fault diagnosis seven LED s may be included on the main printed circuit. These correspond to various error conditions. Preferably the seven LED s are arranged in a horizontal row and they correspond respectively, from left to right, to preamplifier error microprocessor fail calibration error direct beam fail adc fail t In describing the detectable errors in the following the status of the LED s will be shown as a 7 digit code. In the case of no flow, that is the pulses from the flowmeter indicate that the flow is below a threshold value, for example 2 litres min ¹, the pump, if on, will turn off and the system error lamp will be illuminated. This is indicated on the LED s as 000000X. Thus the diagnostics are 000000X SE X. If sufficient flow is re established the error will clear and normal operation resumes. Initial system checks are performed approximately five minutes and twenty seconds after the monitor is initially switched to sample, and every hour thereafter. In the case of an error in the pulsing circuit, that is no pulses are present to drive the transmitter LED, the system error lamp will be illuminated and the monitor will stop its cycle. The diagnostics are 0000000 SE X. If the amplitude of the current pulses through the transmitter are below a preset threshold, the system error lamp will light and the monitor will stop its cycle. The diagnostics are 00000X0 SE X. The direct beam level is normally maintained approximately constant by the automatic gain control circuit. This level may not be able to be maintained if the light output from the transmitter is too low even at maximum drive current or the direct beam window is excessively dirty. Should the latter be true it may be possible to clean the window by prolonged flushing. Thus if the direct beam level is too low the monitor will repeat its critical flush sequence and then the checks made so far. If the direct beam level is still too low the flush is repeated again. If the level is still low after three flushes the system error lamp will light and the monitor will stop its cycle. A symptom of this fault will thus be a prolonged flush time. The diagonostics after the final flush only are 000X000 SE X. Following these checks the two offset voltages are measured and compared to a preset threshold. If the offset voltages are higher than this level the dynamic range of the monitor may be limited and inaccurate calibrations result. This error may occur because of excessive fouling of the scatter detector windows, a foreign body adhering to them but not the direct beam windows or because of a preamplifier fault. The monitor will attempt to clean the windows to remove the errors by performing the same routines as for direct beam level error and if this fails the monitor will stop with the system error lamp lit. The diagnostics are X000000 SE 0 as soon as the error is found and X00X000 SE X after three flushes fail to clear the error. System checks are performed during the sampling routine. These comprise the flow, pulsing circuit, transmitter circuit and direct beam level checks as well as the following checks. For the preamplifier overload, if either channel is saturated the signal processing algorithm will no longer give the correct oil concentration and yet the calculated value might still be on scale. To indicate that this is occurring the system error lamp will flash once every second and the meter will be set to zero. If the voltages drop below saturation, the error will be cancelled and normal operation will continue. The diagnostics are 000000 SE . If the algorithms give concentration readings which are negative, the meter would give a zero reading which will be misleading. To overcome this, if a negative reading below a preset threshold to avoid very small errors occurs or a negative value occurs at any stage of the algorithm, the system error lamp will flash once every second. The error will be cancelled when the reading becomes positive. The diagonistics are 00 0000 SE . For a system using digital processing some means of indicating negative signals is required, since otherwise erroneous readings where negative signals are processed as zeros can easily occur. If the calculated oil concentration or particulate concentration exceeds 2ppm the meter will read 2ppm unless the preamplifiers are saturated. To indicate that the reading is correctly overrange the oil high and system error lights will flash once every second. The error will be cancelled when the reading comes back on scale i.e. 2ppm. The diagnostics are 0000000 SE OH . Other checks are for microprocessor failure, ADC failure and calibration error. If the main software loop is not being cycled the microprocessor must not be functioning properly. A hardware circuit is used to check this. In conditions of high electrical interference this may give an erroneous state. The diagnostics are 0X00000. If the analogue to digital converter ceases operation there will be no scatter voltages to process. The diagnostics are 0000X00 SE X. A calibration error has the diagnostics 00X0000. The error diagnostics are summarised in the following table. The calibration routine will now be described. It uses the internal switches which are shown in Figure 6. There is a calibration on off switch 36, a use of particulate algorithm switch 37, a signal or offset switch 38, a scatter voltage switch 39 corresponding to 10 Power can only be supplied to the injection pump 21 when front panel switch 34 is switched to flush . This prevents possible injection of contaminants into the sample stream. To enable a quick, low accuracy check of the instrument calibration, the voltage levels can be displayed on the front panel meter 28 by using the internal switches. To do this the calibrate switch 36 is turned to the on position and the offset position of the signal or offset switch 38 selected. According to which channel is selected, using the V₁₀ V₃₀ switch 39, the ADC input is displayed on the meter. If oil particulates are injected the total signal including offset is displayed. If the signal position is selected the meter reads the present voltage level minus the voltage level stored prior to the offset signal switchover. If clean water was used this will be a true offset subtraction. Should the signal mode be selected priot to calibrate being turned on , the calibration error LED will light since no offsets have been measured to give a meaningful subtraction. Diagnostics 00X0000 . The offsets set in this mode are stored temporarily and are lost once calibrate is turned off. To ensure accuracy the instrument must be turned off briefly then to sample to restart the operating cycle and thus store the new offset levels.