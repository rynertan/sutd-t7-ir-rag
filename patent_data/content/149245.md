# PCM DATA RECORDING SYSTEM

## Claims
Verfahren zum Aufzeichnen von Daten auf einem Magnetband unter Verwendung eines PCM Signalaufzeichnungsgerätes mit Rotationskopf, in dem m PCM Signale ausgebildet werden, denen ein Synchronisiersignal 1 , Steuersignale 5 10 , die die PCM Signale betreffende Steuerdaten darstellen, und ein Paritätssignal 4 zur Fehlererfassung und korrektur unter Ausbildung eines Aufzeichnungsblockes angehängt werden, wobei Signale von n Blöcken auf einer Spur des Magnetbandes aufgezeichnet werden und wobei Daten auf einer Spur mehrfach aufgezeichnet werden können,

## Description
The present invention relates to a data recording technique for a PCM data recorder having a rotary head and, particularly, to a method and apparatus for recording PCM data suitable for arranging appended information in a recording medium area without increasing the redundancy of PCM data. A PCM audio recording and reproducing system, which converts an analog audio signal into PCM digital signals, records the digital signals on a recording medium, and thereafter reproduces the digital signals and converts them back into the analog audio signal, achieves a drastic improvement in the reproduced sound quality as compared with the conventional analog audio recording and reproducing system. However, this system needs the amount of information to be transmitted approximately 50 times as much as the case of the analog audio system, and when the magnetic tape is used as a recording medium, it is necessary to increase the amount of information transmitted in unit time length by increasing the number of tracks or increasing the tape speed against the head as practiced in the rotary head tracking system. Currently known PCM recording and reproducing recorder systems fall into the stationary head digital audio tape S DAT recorder system using multiple tracks, and the rotary head digital audio tape R DAT recorder system. The R DAT system has much possibilities for the prevalence of PCM audio recorders among home users from the viewpoints of cost reduction, running economy and versatility of function. One of functions that are practicable for the R DAT system, but infeasible for the S DAT system is a fast address search function at a high speed mode. This function appends a specific address code to each block of PCM data recorded on the tape, so that it is used to indicate the block position among several music programs in normal playback mode and also used to search for a specific block of record in the fast address search mode. In the R DAT recorder, PCM signals are partitioned in units of a certain number of symbols or word e.g. one symbol consists of 8 bits , e.g., 12 symbol units, so that each unit of symbols forms a block. A certain number of blocks, e.g., 128 blocks, are recorded on one track of the tape. See, for example, an article by Kotaka A Rotary Head High Density Digital Audio Tape Recorder in the Institute of Electronics and Communication Engineers of Japan Electroacoustic Conference Data EA82 46. Fig. 1 shows a format of PCM data recording applied to a R DAT system. The format includes a synchronizing signal 1 providing a reference timing in the playback operation, control signals 2 including information necessary to reproduce the recorded PCM signal, PCM signals 3, and a parity signal 4 for error detection and correction. See, for example, a literature by Iwashita Activity in DAD conference in Japanese periodical Electronics published by EIAJ, October, 1984. Fig. 2 shows, as an example, the detailed format of the control signals 2 shown in Fig. 1. In the control signal format, a 1 bit signal 5 separates the head of music programs recorded on the tape, taking two signal levels 0 during a program, and 1 between adjacent programs, and this signal is used to search for a program. PCM signal information 6 includes the sampling frequency, the number of quantization bits, the quantization mode linear, non linear, etc. , the analog characteristics emphasis, noise reduction, etc. , the dubbing inhibit code, the mute signal, and the signal type. Recording of these information in BCD code would need as many as 24 bits. Track identification signal 7 is used to detect the occurrence of track jump during the playback operation, and it needs as many as 4 bits. Block address 8 is a signal for preventing the interleave displacement during the playback operation, and it needs at least 7 bits for the case of recording 128 blocks in one track. As described above, control signals need a total of about 36 bits, that almost amounts of 40 of each PCM signal 12 symbols count 96 bits , resulting in the impairment of redundancy. A method of recording digital computer data on a magnetic tape corresponding to the preamble of claims 1 and 3 is known from the publication US A 4 375 101. This publication deals with the recording of digital computer data and teaches the repetition of maindata three or more times to increase redundancy and to improve the error detection capability. Further, a method for subcoding cue data on compact discs is known from the publication EP A 0 074 814. This publication discloses that cue data may be recorded on a tape in a track which is different from the tracks in which information is recorded. It is an object of the present invention to provide a method of recording data on a magnetic tape and a rotary head PCM tape recorder, wherein the redundancy of the digital signals recorded is reduced and control signals appended to said PCM signals may easily be detected, said method and recorder having high error detection capability. This object is achieved by the inventive methods according to claims 1, 3 and 6 and the inventive PCM tape recorder according to claim 7. According to one aspect of the present invention, the data recording method for a PCM tape recorder with a rotary head uses control signals that are dispersed in blocks of data recorded on one or more tracks, so that the control signals are less redundant and yet easily detected. Information needed only for every track is expressed in control signals formed in data bits distributed in several blocks or tracks, whereby the number of bits needed in each block for the control signals can be reduced. Information expressed in bits distributed in several blocks or tracks can be compensated for dropout in reproduction due to scars etc. on the tape by being recorded repeatedly in several locations on the track. This method enables the recording of information related to PCM signals in less amount of data and also allows easy retrieval of information against a dropout of reproduction signal. By reducing the number of repetition of recording for the control signals, the variety of information can be enriched in exchange. According to another aspect of the present invention, appended information recorded together with PCM signals on a recording medium such as a magnetic tape includes the maximum value of PCM signals recorded on one track, so that abnormal signals are removed in the playback operation on the basis of comparison of each reproduced PCM signal with the maximum value. Consequently, abnormal data which would be created by miscorrection or track jump in the playback operation is eliminated, whereby acoustic noises in the PCM audio system can be prevented from occurring. The present invention will now be described with reference to the attached drawings. An embodiment of the present invention will be described with reference to Figs. 3 and 4. In Fig. 3, control signals formatted in 24 bits includes a search signal 5, a track identification signal 7, a block address 8, as in the case of Fig. 2 and a parity signal for error detection. The search signal 5 is preferably appended to every block so as to facilitate the search to a program at random. The track identification signal 7 and block address 8 naturally need to be appended to every block. Sections 9 and 10 in the format form a sub code area which may contain the program time length, title, search items, and the like. PCM signal information 6 suffices the purpose by being appended to every track or every group of tracks, because its contents, called ID code, varies in a long period at least as compared with the unit length of field, i.e., track. On this account, in the case of appending the PCM signal information or PCM data identification signal 6 to every track, it is arranged at the second bit position of control signals 2 of 32 consecutive blocks, i.e., using 32 bits, as shown in Fig. 4. The PCM signal information 6 is recorded in several locations on a track. In this example, the same PCM signal information is recorded in four group locations of blocks 0 31, blocks 32 63, blocks 64 95 and blocks 96 127. In another case, where the PCM signal information 6 is recorded at every group of tracks, it is recorded at the second bit position of control signals in blocks of 32 consecutive tracks, i.e., using 32 bits, as shown in Fig. 5. The same part of the PCM signal information 6 is repeatedly recorded using 128 locations of blocks 0 127. In Fig. 6, the 32 bit complete PCM signal information 6 includes the items of the sampling frequency 6 1, number of quantization bits 6 2, quantization mode linear non linear 6 3, emphasis specification 6 4, dubbing inhibit code 6 5, mute signal 6 6, and signal type 6 7. Item 6 8 may be the maximum value of PCM signals. Namely, PCM signals recorded on one track are checked for the absolute value, and high order 8 bits excluding the sign bit of a PCM signal having the maximum absolute value are recorded in this section. During the playback operation, each PCM signal is compared with the maximum value recorded in the section 6 8, and if a signal in excess of the maximum value is detected, it is removed so as to prevent an acoustic noise caused by the abnormal data. This test may be carried out for PCM signals of 2 channel stereo audio signals separately. The last item 6 9 is a parity signal for error detection for the bits of the complete information 6. Information of items 6 1 through 6 8 may of course be arranged differently. By integrating information of PCM signals of several blocks, the number of bits needed for each block of the PCM signal information 6 can be reduced. Furthermore, by provision of error detection parity data, system malfunctioning caused by erroneous data can be prevented. As mentioned above, the same PCM signal information 6 is recorded in four locations on one track in the case of the format shown in Fig. 4, or in 128 locations of one track in the case of the format shown in Fig. 5, whereby the information 6 can be retrieved correctly even if part of the reproduced signal drops out due to scars on the tape and the like. The third and fourth bits referred to by 9 and 10 in Fig. 3 contain other information, and this section may be shared among several blocks so that much information can be recorded. Track identification signal 7 is used to find out which track includes a specific bit position of PCM signal information shown in Fig. 6. The 4 bit signal 7 can discriminate 16 different tracks. In actual, one of two adjoining tracks can be distinguished based on the azimuth angle of recording head, and therefore, 32 tracks can be discriminated by the 4 bit track identification signal 7. Fig. 7 shows the general circuit arrangement of the rotary head PCM data recorder by which the control signal according to this invention is recorded. The arrangement includes a synchronizing signal generator 13, a control signal generator 14, a timing generator 15, an A D converter 16, a signal processor 17, a signal switching circuit 18 and a recording circuit 19. In operation, 2 channel audio signals entered through input terminals 11 and 12 are converted into PCM digital signals by the A D converter 16, and the signals are added with the interleaving and parity signals in the signal processor 17. The control signals are produced by the control signal generator 14, in which a search signal generating circuit 21 produces the search signal 5. A PCM signal information generating circuit 22 is formed of a 32 bit shift register with its output linked to the input so that data is circulated by the shift operation. The shift register 22 is loaded in advance with the 32 bit data shown in Fig. 6 from the signal processing circuit 17. In recording the control signals, the shift register 22 is clocked so that the PCM signal information 6 to be recorded in each block Fig. 4 or on each track Fig. 5 is generated. Circuits 23 and 24 generate information to be recorded in sections 9 and 10 in Fig. 3, and they operate similarly to the PCM signal information generating circuit 22. In the recording operation, the signal switching circuit 18, which is formed of a multiplexer, selects the synchronizing signal 1 produced by the synchronizing signal generator 13, the signal produced by the control signal generator 14, the track identification signal and block address signal produced by the timing generator 15, the PCM signal and parity signal provided by the signal processor 17 sequentially so as to arrange a block of data as shown in Figs. 1 and 3. The block signal is processed into a certain signal form by the recording circuit 19 and recorded on a magnetic tape 26 by a magnetic head 25 mounted on the rotary cylinder. Fig. 8 shows the arrangement of the signal processor 17, which includes a bus line 105, a memory RAM 106, a memory address control circuit 107, a parity signal generating circuit 108, and a maximum value detecting circuit 109. Input terminal 101 receives the PCM signal provided by the A D converter 16, and it is fed through the bus line 105 and stored in the memory 106. The input PCM signal is also fed to the maximum value detecting circuit 109 so that the maximum value among PCM signals recorded on one track is detected. The maximum value detected by the circuit 109 is sent out through the output terminal 104 and loaded to the PCM signal information generator 22. The PCM signal stored in the memory 106 is read out to the parity signal generating circuit 108, in which a parity signal is generated and it is stored in the parity signal area of the memory 106. In the recording operation, the PCM signals and parity signal are read out of the memory 106 and fed through the output terminal 102 to the signal switching circuit 18. Another terminal 103 receives control signals produced by the timing generator 15 to control the circuit 17. The signal processor 17 further comprises a control data setting circuit 110 such as a keyboard, which generates and sets a control information 6 to the shift register 22. Fig. 9 shows another format of control signals according to another embodiment of the present invention. The control signals are divided into two 8 bit forms, one being control signals shown by A appended to even numbered blocks, the other being control signals shown by B appended to odd numbered blocks. The first bit of each format indicates either even or odd numbered block 0 for an even numbered block and 1 for an odd numbered block. The format A contains the block address in the remaining 7 bit positions the lowest bit of block address is indicated by the first bit of the format . The format B for odd numbered blocks contains the search signal 5 in the second bit position, the PCM signal information 6 in the third bit position, other information in the fourth bit position, and the track identification signal 7 in the fifth eighth bit positions. The PCM signal information 6 and other information 9 are arranged to be shared by 32 blocks as in the case of Fig. 4. Because of 64 odd numbered blocks containing the information signals 6 and 9 on one track, they are recorded twice on each track. The number of repetition of this information recorded on one track can be determined arbitrarily depending on the number of blocks and the amount of information. For example, in the case of a track made up of 240 blocks, the PCM signal information can be formed in 40 bits and recorded three times on each track. Fig. 10 shows the general circuit arrangement of the rotary head PCM data recorder adapted to record the signal in the format shown in Fig. 9. In Fig. 10, the identical components to those shown in Fig. 7 are referred to by the like references. The signal switching circuit 18 receives input control signals in accordance with the lowest bit of the block address provided by the timing generator 15. Namely, a subsidiary signal switching circuit 27 is provided to select all signals except for the lowest bit when the lowest bit of the block address is 0 , or selects the outputs of the control signal generator 14 and the track identification signal provided by the timing generator 15 when the lowest bit of the block address is 1 . Thus, the control signals are assembled by combining the output from the subsidiary signal switching circuit 27 and the lowest bit of the block address. Through the arrangement of information, which is not needed at every track, using control signals of several tracks, the bits count of control signals can be reduced. By recording the same section of information in several locations of a track, the dropout of reproduced data due to scars etc. on the tape can be saved. Fig. 11 shows in block diagram a PCM data reproduction system intended to reproduce digital signals recorded on a recording medium by the inventive recording system. The arrangement includes a signal reproducing circuit 30, a signal processing circuit 31, a control signal processing circuit 32, a latch circuit 33, a comparator 34, an error conceal circuit 36 operating in the principle of data holding or interpolation, and a D A converter 37. The signal picked up from the magnetic tape 26 by the head 25 is amplified and subjected to synchronizing signal detection by the signal reproducing circuit 30. PCM signals are processed for error detection and correction by the signal processing circuit 31, and correct PCM signals are fed to the following stage through the output terminal 40. If error correction has failed, an incorrectable flag is produced on the output terminal 41, and a further error correcting process such as mean value interpolation is carried out by the error conceal circuit 36. The control signal 2 is delivered to the control signal processing circuit 32, in which error detection takes place using the parity signal 6 9, then the cleared control signals 6 1 through 6 7 are fed to the signal processing circuit 31. The maximum value 6 8 of PCM signals is held in the latch circuit 33 until the whole data on one track is picked up. The comparator 34 compares the absolute value of each PCM signal with the value held in the latch circuit 33, and if a PCM signal in excess of the maximum value is detected, it is determined to be abnormal data, with the incorrectable flag being set by the OR gate 35, and the error conceal circuit 36 is activated for error concealment. The output of the error conceal circuit 36 is reconverted into 2 channel analog signals by the D A converter 37 and sent out through the output terminals 38 and 39.