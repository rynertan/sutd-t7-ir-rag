# An automatic vending machine with ice preparation.

## Abstract
An automatic vending machine is disclosed having an ice machine FR with a storage chamber CH in which the ice produced is stored and from which the ice is supplied whenever a sale requires it. A counter 8 is provided and supplied with digital signals which represent quantities of ice produced for and discharged from the storage chamber. The counter produces an output signal S₈ when its count is not less than a predetermined minimum value. As soon as this output signal of the counter 8 disappears sales are vetoed.

## Claims
C L A I M S 1 An automatic vendor having an ice machine for with a storage chamber CH, 213 in which the ice produced is stored and from which the ice is supplied whenever a sale requires it, and which is provided with a sensor 1, X1 229,230,233,232 producing a signal when the ice quantity in the chamber reaches a predetermined full storage level, c h a r a e t e r i z e d by means 42,5,6 41,41a,12,13 producing digital signals which represent quantities of ice produced for and discharged from the storage chamber a counter 8 supplied with the signals which dynamically registers the balance between them,and which produces an output S8 when its registration is not less than a predetermined minimum value and vend control means 9,10,X1O responsive to the counter output to veto sales when and only when the output is stopped. 2 The vendor as set out in claim 1, further c h a r a c te r i z e d in that a sellout indicator 11 is responsive to the counter output, to show the situation in which no ice can be served. 3 The vendor as set forth in claims 1 and 2, further c h a r a c t e r i z e d by means 42,5,6 to produce stepwise ice production signals S5 to a number increasing in proportion to the supply of ice by the ice machine to the storage chamber CH means 41 41a,12,13 to produce stepwise ice release signals 841, S13 to a number increasing in proportion to the discharge of ice from the storage chamber whereby the stepwise ice production signals serve as the digital signals which represent quantities of ice produced, while the stepwise ice release signals serve as the other digital signals which represent quantities of ice discharged said counter 8r. being an electronic up down counter in which an addition of one to its count is made in response to a pulse signal arriving at its count up input terminal, and a subtraction of one is made from the count in response to a pulse signal arriving at its countdown input terminal, and which produces an output S8 in so far as it has a content not less than the predetermined minimum value, and which is connected to receive the stepwise ice production signals at the count up input terminal 801 and to receive the stepwise ice release signals at the count down input terminal 802 and said vend control means including a NOT circuit 9 responsive to the absence of counter output, to produce an output which energizes a relay lO to operate the sale veto with the sellout indication. 4 The vendor as set forth in claim 3, c h a r a c t e ri z e d in that the stepwise ice production signals are pulse signals each of which is produced whenever the ice machine feeds ice in a predetermined unit quantity, and then a momentarily increasing quantity of ice produced is represented by a lapse of running time of the ice machine s operations and that the stepwise ice release signals are produced in conjunction with the operation of the outlet gate OG of said ice storage chamber CH . 5 Vendor as set out in claim 4, characterized in that a signal representing the outlet gate operation is identif ied with a sale signal prQduced in response to an external manual action intended for a sale dperation. 6 The vendor as set forth in claim 4, characterized in that each stepwise ice release signal is produced whenever er the ice storage chamber outlet OG discharges ice by a unit storage quantity which is identical with the said predetermined unit quantity of ice produced, and then a momentarily increasing quantity of ice is represented after discharge by a lapse of time during which the outlet gate was maintained in the open position. 7 The vendor as set forth in claim 3, characterized in that the up down counter is provided with an auxiliary output circuit 831 in addition to a primary output circuit 821 which serves to supply said counter output to said NOT circuit 9 and the auxiliary output circuit produces an output when the counter content is above a predetermined median value less than the full count and that the ice machine FR begins to operate when an interruption of the auxiliary output appears. 8. The vendor as set forth in claim 7, characterized in that the primary output circuit is an OR ircuit composed of a set of parallel diodes 821 , each of which is connected to one of the cascaded flip flops FF1 FFi in the updown counter 8 said auxiliary output circuit is an additional OR circuit composed of another set of parallel diodes 831 each connected with one of the flip flops which operate to represent values not less than said median content value less than the full count and an auxiliary NOT circuit 19 is connected to receive the auxiliary output and responsive to its absence to produce another output energizing another relay 20 to start the ice machine. 9 The vendor as set forth in claims 1,2 or 3 characterized in that the ice storage sensor 1 includes means for setting the levels to switch the sensor output on and off with hysteresis and that the means comprise a a first mechanical member 233 moving upward and downward as the ice quantity in the storage chamber 213 varies, b upper and lower flanges 233a, 233b mounted on the mechanical member vertically spaced from each other, c a second mechanical member 236 also movable,having a portion within the space between the upper and lower flanges with adequate idling, d an electrical switch 232 turned on and off by the motion of said second mechanical member, and e a pair of magnetic members 237 mounted on the second mechanical. member 236 and on a stationary member facing it, and which are in contact with each other so as to produce a force to hold the second mechanical member 236 in the position to close the electrical switch,whereby when said second mechanical member 236 arrives at such position by a downward motion of the upper flange 233a of said first mechanical member 233 , it remains there until the lower flange 233b abuts it, thereby driving it upwards.

## Description
AN AUTOMATIC VENDING MACHINE WITH ICE PREPARATIONThe invention relates to an automatic vending machine to serve beverages with ice according to the precharacterizing clause of claim li and specifically to its vending service control device for ice storage therein.A typical iced beverage vendor has an ice machine with an ice storage chamber.Whenever a sale signal is received, an adequate quantity of ice is supplied from the storage chamber to a cup to serve a beverage, while other materials such as cold water, soda water, syrup, coffee, milk and or sugar are supplied from storage boxes via mixing means to the cup. The ice storage chamber has the capacity to serve a number of cups of the beverage i.e.it can supply repeated sales ,whereas the ice machine requires a fairly long period to produce the quantity of ice needed to fill the storage chamber, as compared with the time taken by the vending machine to supply one cup of the beverage with ice.A conventional beverage vendor of this type has simply a limit switch for its ice storage chamber, so that when the ice supplies are finished, sales are stopped and the ice machine starts to operate, which continues until the stor age chamber is again filled with ice. In such a vendor, however, if successive sales are repeatedly made within a short period, it often happens that a purchaser must wait a fairly long time, since sales are suspended as soon as the ice machine starts up, until the ice making process ends.That is a great inconvenience to the purchaser.The invention as claimed is intended to remedy these drawbacks.It solves the problem of how to design a device wherein the vending service can be restarted when an ice quantity sufficient to serve at least one cup of beverage has been produced.This problem is solved by an automatic vending machine with the features of claim 1.One embodiment of this invention comprises specifically means to produce stepwise ice production signals the number of which increases in proportion to the quantity of ice which the ice machine feeds to the storage chamber means to produce stepwise ice release signals the number of which increases in proportion to the discharge of ice from the storage chamber an up down counter, which is connected so as to receive the stepwise ice production signals at the count up input terminal and to receive the stepwise ice release signals at the count down input terminal, and whose content is increased by one each time in response to each ice production signal which reaches its count up input terminal, and is decreased by one each time an ice release signal is given and reaches its count down input terminal, and which produces an output of on state as long as it has a minimum value of not less than a predetermined lower limit or minimum value e.g. one and control means to make the vending service available as long as the counter has its output in the on state.The stepwise ice production signals may be pulse signals each of which is produced whenever the ice machine feeds product ice in a predetermined unit quantity e.g. the quantity needed to serve a cup of beverage to the ice storage chamber. This can be accomplished by detecting each lapse of time of the ice machine s operation by a predetermined unit length, which results in the production of that predetermined unit quantity of ice.The stepwise ice release signals may be produced in conjunction with the operation of an outlet gate of the ice storage chamber. Or specifically they may be derived from sale signals. The sale signal is one produced in response to a customer s action, and intended for vending machine operation. It is directly or indirectly supplied to the ice storage chamber outlet gate actuator for the delivery of ice to serve the beverage . In one embodiment of the invention, each of the stepwise ice release signals may be produced directly in response to each sale signal, or in response to each opening of the ice storage chamber s outlet gate.In another embodiment, each stepwise ice release signal is produced whenever the ice storage chamber outlet delivers ice in a quantity of unit storage which is identical with that predetermined unit quantity of product ice an assembly of plural fractions, each representing that unit storage quantity of ice constitutes the ice quantity for a cup of the beverage. See descriptions below of specific embodiments .Usually in modern automatic vending machines,a one chip microcomputer is used for operational control, while a random access memory is provided in part of the microcomputer. There a region of the random access memory can serve as the counter used to register the ice storage quantity.Therein the control and operation take place as follows 1 Assume an initial situation in which the ice machine is operating to supply ice to the storage chamber, which is provided with an ice level sensor. When the ice quantity reaches a predetermined upper level, the sensor is actuated to produce a signal.A presetting means associated with the counter is responsive to this signal, so as to set the counter to a predetermined full count.In this situation because the counter has a content not less than the predetermined minimum value, e.g. one, in one embodiment ,the counter continues to produce an output of on state, as a result of which the control means makes the vending machine ready for service.2 After the sale of a cup or cups of iced beverage, a certain decrease in the ice storage switches off the sensor whereupon the ice machine starts up. The counter operates in accordance with changes in the ice storage amounts this means that a When sale of a cup of beverage is made with ice, the counter counts a certain number n1 downward. In a first embodiment of the invention, where the stepwise ice release signal is the sale signal itself, the n1 number is one, i.e the counter counts 1 . Another case will be explained below, with respect to a second embodiment.b With each pulse of the stepwise ice production signal, resulting from the ice machine s operations,the counter counts 1 . In the first embodiment, a count of one in the up down counter corresponds to the ice storage quantity needed to serve one cup of beverage while in a second embodiment, it corresponds to one of the fractions of that quantity .3 If successive sales occur, serving a number of cups of beverage with ice in a relatively short period of time so that the ice storage decreases far more rapidly than ice is produced by the ice machine , the counter decreases its content consecutively. When at last its content falls to below the predetermined lower limit value, the counter switches the output off. In response to the cessation of output,the control means operate to stop the vending service. Then a display panel shows customers a sold out indication.4 After such cessation of sales, when a first pulse or first pulses of the ice production signal is are generated to restore the registration content to not less than that minimum value, it they cause s the counter output to be switched on, so that the vending service is released from suspension, and the sold out indicator is no longer displayed. In a modified embodiment of the invention, the above stepwise ice release signal production means can be formed to generate pulse trains, each of which consists of pulse signals, the number of which is proportional to the duration of the opening of the outlet gate of the ice storage chamber, and which serve as the stepwise ice release signals.Such means may be an AND gate and an oscillator, specifically mentioned later. It is also preferable to supply the up down counter with a dynamic information flow of variable ice quantities per cup. This is suitable for a kind of automatic vending machine recently in demand, which serves several types of beverages, or different sizes of cups, for instance.The invention is described in detail below with reference to drawings which only illustrate specific embodiments,in which Fig.1 is a schematic block diagram of a first embodiment of the vending service control device with ice storage counting according to the invention,Fig. la is a typical up down counter per se, to be used in the invention,Fig. ib is a modification to the output circuit of the updown counter of Fig. la,Fig.2 is a typical operation chart showing signals and performance of the device in the first embodiment,Fig. 3 is a block diagram similar to that of Fig.1, of a second embodiment of the invention,Fig. 4 is a typical operation chart thereof,Fig. 4a is an expanded diagram in part A of Fig. 4,Fig. 5 is a block diagram showing an electronic control device including the device of the invention,using a onechip microcomputer,Fig. 5a is an enlargement in part of 107 of Fig. 5,Fig. 6 is an embodiment of mechanical means to set the levels for switching the ice storage sensor output on and off by hysteresis,Fig. 6a is the same as Fig. 6, but shows it in a position different therefrom, andFig. 6b is an alternative in part thereof. Fig.1 is a schematic block diagram showing a first embodiment of a vending service control device with ice storage counting for the automatic vending machine according to the invention. Miscellaneous parts which are not essential have been omitted. Reference numeral 1 denotes an ice storage sensor mounted in an ice storage chamber CH, which produces a continuous output signal S1 in so far as a predetermined full quantity of ice exists in the chamber and stops the signal when the ice stored reaches less than a predetermined short storage level. The difference between the full quantity level and the short storage level may be almost zero, as in the case of conventional devices, or it may be of an adequate value, as mentioned below. Reference numeral 2 denotes an actuator for the ice outlet gate OG mounted in the ice storage chamber. When a vend signal S responds v to a customer s action to require ice supply, a switch X2 is closed, so as to energize actuator 2 in order that the gate OG is opened. The actuator 2 may be an electromagnetic solenoid. Reference numeral 3 denotes a motor of a compressor of an ice machine FR. Whenever the ice storage sensor 1 detects that the ice stored is quantitatively less than the predetermined short storage level, i.e. whenever the sensor output signal S1 disappears, a switch S3 is closed, starting the motor 3.When the sensor 1 detects that the ice storage quantity is at the predetermined upper level showing full ice storage, sensor 1 produces the signal S1 to open switch X3, stopping the motor 3 of the ice machine. Up to this point the operation is substantially similar to the other known techniques. But the device of the invention is featured by a counter 8, which is one type of the above mentioned up down counter well known per se, and for which a portion of a random access memory,as normally installed in an automatic vending machine,can be used as mentioned above.Fig. 1a shows a typical up down counter which may be used as counter 8.The up down counter of Fig. la includes flip flops FFo,FF1, FF. and gate circuits CG1, CG2 . . .CG. 1 1 each of which is connected between two successive ones of the cascade connected fiipflops. 801 is a count up input, 802 is a count down input. 803 to 806 and 821 are diodes, 841 to 842 are resistors. The J and K terminals of the flip flops are all connected to a supply voltage terminal V not shown . The diodes may be connected in respective reverse directions. 861 is the output terminal of the counter.Counter 8 is provided with a presetting circuit 81 Fig.1 responsive to an input signal to preset counter 8 to the predetermined content of a full count corresponding to the number of cups bf beverage served with ice which the total ice storage allows. Such a presetting circuit can be formed by plural switch elements which are respectively associated with flip flops of the up down counter. The content of the full count to which the counter is preset can be adjusted in advance. The input signal to the presetting circuit 81 is fed from an auxiliary DC voltage supply VDD when a switch X1 is closed.The switch X1 is closed in response to the leading edge of the sensor output signal S1, lndic ating full ice storage.When the full count content is recorded or more precisely, a content not less than the predetermined minimum value the counter 8 produces an output A A NOT circuit 9, which may be a transistor, is connect ed to the counter 8, and is responsive to the output to deenergize a sell out relay 10 so as to open a contact X11 which is associated with the relay 10. Opening the contactX11, a sold out signal lamp 11 is switched off, to indicate that the vending machine is ready for service.Moreover when the sell out relay 10 is deactuated, another contactX10 is closed, supplying power to the vending mechanism.Reference numerals 41 and 42 denote first and second AC DC signal converters, each transforming an AC input signal of a certain duration into a DC output signal. Specifically the second converter 42 is to produce a sustained DC output signal identical in duration to the AC input signal. Each of the signal converters 41 and 42 can be, as is known per se, composed of a current transformer, a rectifier, condensers and resistors, or can be composed of a relay and contact connected with an auxiliary DC voltage supply.The first signal converter 41 is connected to detect the energization of or the terminal voltage of the solenoid of ice outlet gate actuator 2. Whenever a sale signal 5v appears which requires ice supply,closing the switch X2 for the ice outlet gate actuator 2, an input is supplied to the converter 41, which in response thereto produces an outlet pulse. The output of the converter 41 is supplied to a count down input terminal 802 of the up down counter 8 which in response thereto counts minus one 1 ,i.e. it decreases the content by one. Thus in this embodiment the ice storage is decreased by the quantity needed for a cup of beverage served. The other signal converter 42 is connected to detect power supply to the ice machine motor 3 for example, a current transformer may be inserted in the power supply line to the motor, or a voltage relay may be connected across the motor terminals .When motor 3 is running, a continuous input is supplied to the converter 42, and it produces its continuous output signal which is supplied to a repetitive pulse generating circuit 5. This circuit 5 is also connected with a timing means 6,and produces output pulses at predetermined regular intervals after the start of the continuous output signal of the converter 42, as long as that contin ues i.e. as long as motor 3 is in operation . The timing means 6 serves to set the length of the regular time interval.Each output pulse of the repetitive pulse generating circuit 5 is supplied to a count up input terminal 801 of the up down counter 8, which in response thereto counts plus one 1 , i.e. it increases the content by one.Thus in this embodiment the ice storage is increased by the quantity needed for a cup of beverage served. By adjusting the setting of the length of said regular time interval provided by timing means 6,it is possible to adjust the quantity of ice which is represented by each of the repetitive pulses from the citcuit 5. Specifically the circuit 5 can be formed as a duration comparison means with a trigger, so that it compares the momentarily increasing time lapse of an on state of its input signal from the converter 42 with the reference time interval set by the timing means 6, to produce an output pulse whenever that time lapse becomes equal to an integer multiple of that reference time interval.The content of the counter 8 moves up and down according to respective input signals to the count up and count down input terminals as above. If the content falls lower than the minimum value in this case, one due to a number of successive instances of downward counting for example,the counter ceases to produce its output, so that the NOT circuit i.e.transistor 9 energizes the sellout relay 1O.Then the associated contact X11 is closed, lighting up the soldout signal lamp 11, while the other contact X10 is opened, to veto the vending service. As an alternative, it is of course çossible to use the signal lamp 11 solely for a noice indication, and to omit the other contact X10, provided that non iced beverages can be served . This operation will be described below, in conjunction with Fig.2.On the other hand, if few sales are made while the ice machine produces sufficient ice for full storage,the resulting output signal S1 of the ice storage sensor 1 causes the setting of the counter to the predetermined content of full count as mentioned above.As to the capacity of the up down counter 8 in the above embodiment, if it is of x bits in binary code,it suffices for the ice machine to have ice storage for y cups of beverages i.e. y times one vending service where y oo 2x 1 here 1 means the count of zero below the above mentioned minimum value .As to the setting of levels for the ice storage quantity at which the ice storage sensor is switched on and off, they should preferably not be identical with each other, but show an adequate difference a kind of hysteresis between them, in order to prevent too frequent stopping and starting of the ice machine, so as to increase its durability. Such a hysteresis setting may be obtained by mechanical or electrical means the mechanical means will be described later with reference to Fig. 6 6b .Otherwise, the up down counter 8 can provide means to produce auxiliary output initiating the start up of the ice machine,when the content of the counter falls below a predetermined intermediate value from its full count situation.In an updown counter formed by cascaded flip flops provided with diodes 821 in Fig. 1a connected respectively to the flipflops and to produce the counter output, the above means can be composed of additional diodes 831 Fig. 1b connected with one of the flip flops which is located in a position corresponding to that intermediate value,at one end, and to a second output terminal 871 at the other end, with an additional NOT circuit 19 a transistor for instance , and an additional relay 20.In so far as the counter content is not less than the intermediate value, the output through the additional diodes 831 is in on state so that the transistor 19 is conductive and prevents operation of the relay 20. When the content falls below the intermediate value, the output through the additional diode 831 becomes off state, so that the transistor 19 is rendered non conductive and the relay 20 is energized to initiate the ice machine s operation. For stopping the operation of the ice machine, the sensor output signal is used as mentioned above .Fig. 2 is a chart showing some typical sequential signals and operations in the device of the first embodiment, responsive to ice discharges and variations in the ice storage. It operates as follows Let us assume that the ice storage QCH reaches its full level at a time t11. Then the ice sensor signal S1 moves to on state and the motor operation WRF is stopped . At a time t12 if an ice discharge from the storage chamber takes effect, an actuator operational signal S2 is given, so that the first signal converter 41 produces a DC pulse signal S41 in response to which the counter content REG decreases by one.Similar events take place for example at times t13 and t14.Assume now that the ice storage quantity falls to the predetermined short storage level at the time t14 or the content REG falls to less than the intermediate value, not shown, at t14 . Then the ice machine starts to operate because the sensor output is switched off or because of the auxiliary output of the up down counter, as mentioned the situation of the ice machine with motor running is represented by WRF in Fig 2. When the ice machine starts, an ice motor operation signal S3 is sent and is sustained during the running period, so that the second signal converter 42 produces a sustained DC signal S42 for the same period.At a time t15 when a predetermined time interval p0 has elapsed after the time t14 a pulse of signal S5 is produced by the repetitive pulse generating circuit 5 in receipt of the sustained DC signal S42. In response to the signal S5 the counter content REG increases by one.After that, successive pulses of signal S5 are produced at the same intervals pO, in so far as signal S42 is sustained,during which when an ice discharge occurs for example at a time t16, it produces similar responses to those at the time t12. Thus the counter content goes up and down, while the actual ice storage variation proceeds and when the ice quantity QCH reaches the full storage level, the ice storage sensor detects it and switches its signal S1 on at a time t22,so that the ice machine is stopped, and at the same time the signals S3 and S42 are switched off. But on the other hand, if the downward countings exceed the upward countings in the counter, and at last the content comes to zero for example, at a time t32, then the counter output S8 is switched off and the sold out signal or no ice signal S10 is transmitted.At an interval not longer than p0 after the time t32, a first pulse of signal S5 of the repetitive pulse generating circuit 5 is produced, consequently the counter content increase of one switches on its output S8 and the sold out signal S o stops. The further operations are similar. Fig.3 shows a second embodiment of the device of the invention. It includes parts similar to those used in Fig.1, and they are denoted by the same reference numerals But the second embodiment is featured by an additional pulse generator 12 with an AND gate 13 connected before the count down input terminal 802 of the up down counter 8.An AC DC signal converter 41a connected before the ANDgate 13 to detect the energization or the terminal voltage of the outlet gate actuator 2 is also a means to produce a sustained DC output signal identical in duration to theAC input signal, similarly to the other signal converter 42.The second embodiment of the invention is aimed at optimal application to vending machine service using a variable quantity of ice supply per cup of the beverage. Here an ice quantity for a cup of service is perceived as a mass consisting of a plurality of unit assemblies, each of which is a fractional unit quantity of ice. Thus a variable ice quantity for one cup served can be represented by the number of the unit assembliestor of the fractional unit quantities comprised therein.Therefore if pulse signals to the count up and count down input terminals 801t802 of the updown counter 8 are produced as described later in detail whenever the fractional unit quantity of ice is produced to be added to the storage chamber or discharged for service from the storage chamber, the content of counter 8 represents the ice quantity in the storage chamber more accurately than in the first embodiment.In the second embodiment, the inventors show a concept in which an ice quantity supplied from the storage chamber is proportional to the time during which the ice outlet gate of the storage chamber is opened. Then those pulse signals to the counter inputs are obtained in relation to the duration of the operations of the ice outlet gate as well as of the ice machine.In other words, here the counter 8 serves to store a representation of the ice storage quantity translated into an allowable residual duration of the ice supply operation. This means that the up down counter 8 registers digitally the length of time of ice supply operation which the remaining ice quantity in the storage chamber can provide. It may be noted that a presetting circuit 81a,which is substantially similar to the circuit 81 in the first embodiment of Fig. 1, is in response to its input signal intended to set the counter 8 to a predetermined content of full count which corresponds to the duration taken by the emptying of full ice storage when the ice outlet gate is continuously opened.The substantial difference between the counters of the first and second embodiments is in their capacities the second one requires a counter of larger capacity i.e. more bits in binary code than the first one, in order to deal with the fine variations in its content. For example, in the event that the duration of 30 .seconds is needed to empty the full ice storage, and the average time taken to serve ice for a cup of beverage is 2 seconds,the full content comes to 30 2 15, which corresponds to 4 bits in binary code, in the first embodiment while in the second embodiment, if the fractional quantity of units is chosen as the quantity to be discharged through the ice outlet gate for a time of 0.1 seconds, the full content comes to 30 0.1 300, and this requires 9 bits in binary code.When operating the second embodiment of Fig. 2, the counter 8, when it has a full count content or some count not less than a predetermined minimum value,which is for example a count corresponding to the expected maximum quantity of ice required per cup of beverage produces an out put similar to that mentioned in the first embodiment, so that the NOT circuit 9 deenergizes the sellout relay 10, to open the contact X11, switching off ibe sold out signal lamp 11 and putting the vending machine in readin ess for service. When a sale signal 5v is received which results in ice supply being carried out by opening the ice outlet gate for a duration of d1 sec., i.e. by energizing the solenoid 2 for the duration of d1 sec., the converter 41a receives an input sustained for the duration of d1 sec., and thus produces its output for the same duration. For that durat ion, the AND gate 13 which receives the output of convert er 41a is in a position to pass pulses supplied from the additional pulse generator 12.This pulse generator 12 is a kind of oscillator, which produces pulses at predetermined regular intervals of p1 sec.Then the number of pulses passing the AND gate 13 for the duration d1 is proportion al to the length of said duration.Such pulses reach the count down input terminal 802 of the up down counter 8. So in response to them, the counter 8 counts downward by the number identical to that of the pulses, i.e. it de creases the content by a value proportional to the length of the duration of d1, which corresponds to the ice quanti ty delivered through the outlet gate from the ice storage chamber caused by the sale signal. While the ice machine motor 3 operates to produce ice, a continuous input is supplied via signal converter 42 to the repetitive pulse generating circuit 5, which is con nected with timing means 6, as in the first embodiment of Fig.1.Then the circuit 5 produces output pulses at predet ermined regular intervals of p2 sec,during reception of the input,i.e. while motor 3 is running.In this context the difference between the two embodiments lies in the length of the pulse interval defined by the timing means 6 the second embodiment has a pulse interval p2 far shorter than that pO in the first embodiment and which is determined in reference to the other pulse interval P1 at which the additional pulse generator 12 produces pulses, and more specifically is determined so that p1 p2 q2 q1 where p1 and p2 are the respective pulse intervals in the pulse generator 12 qnd in the circuit 5, and q1 and q2 are the respective ice quantities per second passing through the outlet gate of the ice storage chamber and produced by the ice machine.Then when the ice machine is in operation, the count up input terminal 801 of the counter 8 receives those output pulses from the circuit 5, so that the counter 8 counts upward by the number identical with the number of pulses.i.e.increases the content by a value proportional to the length of time when the ice machine is in operation and corresponding to the ice quantity produced by it. Thus the content of the counter 8 rises and falls in similar proportion to the variations in the ice stored in the ice storage chamber. And if the content falls below its predetermined minimum value for example a number nu.ma.x of count which corresponds to an expected maximum quantity qu. max of ice required per cup of beverage, or which is expressed by numax g q1p1 qu.max q2p2 the sold out signal lamp 11 is lit up and the vending service is vetoed, similarly to the description above of the first embodiment.When adjusting the setting of the length of the time interval provided by the timing means 6, in the second embodiment the device can be arranged to fulfill a variety of. relationships between the ice production quantity per second by the ice machine and the ice delivery quantity per second through the ice outlet gate.The second embodiment of the invention provides the best adaptability to meet the following additional requirements 1 In case the vendor is intended for a variety of services such as several kinds of beverages or of cup sizes, the latter often require a variety of changing. quantities of ice supply per cup of beverage.2 In some cases, it is desirable for a customer to have the option of changing the ice quantities in a beverage.3 A vendor manufacturer uses a variety of ice machines of varying capacity for different types of vendor.In that case changing adaptability to universal ice storage content and control logic is required.Fig. 4 is a chart showing some typical sequences of signals and operations in the device of the second embodiment,responsive to ice discharges and to variations in ice storage. It acts similarly to Fig. 2. The substantial differences are as follows The signal 541a produced by the first signal converter 41a is featured by its duartion proportional to that of the actuator signal S2. Now another signal S13 is produced as the output of the AND gate 13 it is a pulse train which has the same duration as that of the original signal S2 and which consists of pulses occurring at regular intervals of p1 sec.Each of these pulses has the effect of decreasing the counter content by one, and here each count of one in the content represents a much smaller unit of ice quantity than that presumed for each count in the first embodiment. Thus a decrease of the counter content appearing in response to one unit of output of the ice outlet gate actuator signal S2 i.e. in response to one action of the actuator is not always uniform, but is changeable in proportion to the duration of each output signal S2. Moreover the pulse interval p2 in the signal S5 produced by the repetitive pulse generating circuit 5 is far smaller than that pO in the first embodiment, though the attached drawings are not necessarily to scale in this context.As to the signal carrying data of the ice discharge quantity on each vend operation, it is a pulse generated at each sale of a cup of beverage in the first embodiment above, while in the second embodiment, it is a pulse train which comprises pulses generated at regular intervals and which are sustained for a time proportional to the duration of the opening of the ice storage chamber s outlet gate.Further an alternative,intermediate between the first and the second embodiments,is possible. It can be applied in cases where some variation of ice quantity per cup of beverage is required, but the changes are not numerous. There it is possible to specify several predetermined durations or degrees of the ice outlet gate actuator operation corresponding to such changes.Correspondingly the same plurality of types of signals can be specified to darry information as to what quantity of ice is discharged from the ice storage chamber at each sale operation. Then if in advance the combinations of the varieties of ice discharge quantities and the corresponding signals are stored in a memory region of the one chip microcomputer, the specified variety in the number of the downward count can be made in the updown counter.In this alternative,the drawing is not appended,as the configuration is easily found without it. Fig. 5 is a block diagram of an electronic control system in an automatic beverage vending machine,provided with a one chip microcomputer and other members comprised in the invention. Necessary elements such as a read only memory,a random access memory, input output ports and a clock pulse generator are all comprised in the one chip entity 101.The system is also provided with an input connection circuit 107 to feed the microcomputer with various input information such as data for selection of commodities, price setting for commodities, setting of quantities of materials to be served,setting of timings for discharge or to process materials and other miscellaneous timings,with those from the sensors for material quantities.As to the details of the input connection circuit 107, it is composed of a number of couples of on off contacts 121 each shown as a cruciform ,and diodes 122, as in Fig. 5a . The on off contacts 121 are associated with various setting switches which give the above types of information, and for which dip or digital switches can be used in practice. These contacts 121 are designed as a dynamic key scan network in a matrix, wherein an output voltage from a decoder 106 Fig. 5 is supplied consecutively at every row of contacts which are connected via diodes 122 and lateral lines to the input port terminals of the microcomputer 101. Thus the input port voltages changing in response to the changes in the on off situations of the contacts 121 give the information on external settings to the microcomputer.The diodes 122 prevent any interference between the contacts belonging to different rows at their output side.The microcomputer 101 is also connected with a deposition sensor 113,which detects deposited coins and their denomination, so that the computer 101 accumulates the sum of the coins and passes it to a display 4 via a display control 105.When one of the selection switches associated with the input connection circuit 107 is actuated after the deposit of coins adequate for the sale selected, the microcomputer 101 operates to produce the necessary electronic outputs to initiate the sale, so that the outputs are led through an amplifier 102 to manipulate the necessary vending mechanisms 103 to feed materials, to process them etc.The mechanisms 103 include for example cup serving motors, several syrup supplies, cold water supply, soda water supply, ice outlet gate actuator, ice machine motor, water cooler, various control valve actuators, various auxiliary counters and various drive elements such as change issuing solenoids for the coin mechanism etc.Their operations are initiated by electronic outputs directly or via certain magnetic relays.The microcomputer 101 further includes means to produce signals for the initiation of operations to stop coin deposits when their amount exceeds a required value,or to return the change, as well as signals to initiate various controls for the refrigerator and valves to maintain a predetermined cold water temperature, its quantity and the ice storage quantity. The microcomputer 101 is also connected with various indicator lamp circuits which include the no ice signal lamp indicating a shortfall in ice storage together with various other indicator lamps showing no coin storage for change, sellout due to under storage of materials such as syrups, soda water, cold water and cups, as well as lamps to indicate available commodities corresponding to the amount of coins deposited which are switched off when subsequent operations have taken place of the various vending mechanisms so that for example when a selection switch is actuated for a commodity, a lamp corresponding to it remains in on state but others are switched off.In the case of a vending machine for twelve kinds of commodities, or beverages,provided with both indicator lamps for availability and for sellout of each of them, they require 24 indicator lamp units,and in addition several lamps are required for other purposes such as indicating that the vendor is in service,lacking coins for change, etc. In consequence about 30 indicator lamp units are required, together with electronic circuits connected to them.The number of the circuits exceeds the number of control output terminals with which the usual one chip microcomputer is equipped.Therefore the device as shown in Fig.5 is provided with a group of shift registersSR1, SR2 etc., connected to the microcomputer 101. This computer 101 includes means to supply clock pulses CL.The number of kinds of control data is sent to the shift registers SR1, SR2 etc., shifting consecutively with every generation of the clock pulse CL. Thus an effect equivalent to an increase in the number of control output terminals of the microcomputer 101 is produced. Each of the circuits connected after the shift register comprises an amplifier 109,an AND gate 110, an indicator lamp 111 and a vend counter 112.When a selection switch is actuated to sale of a commodity or beverage, the corresponding lamp at 111 remains in the on state while the others are switched off as mentioned after that, when a signal is produced to inform the computer that the sale has been completed, a pulse CT is supplied to the AND gate 110, resulting in a count of one in the associated vend counter 112, so that it registers the number of sales of that particular commodity.Ice supply quantity setting means,as mentioned in other embodiments, as well as various other vend quantity setting means, are connected with the device although they are not shown in Fig. 5 and they operate similarly to the means already mentioned above. Fig 6 is to show an embodiment of mechanical means for setting the levels to switch the ice storage sensor output on and off with hysteresis as mentioned in relation to the first embodiment. Here the means comprise a hysteresis setter i.e. a first mechanical member 233, a lever second mechanical member 236 and a microswitch 232, which are shown with an essential portion 212 of an ice machine 211 and its ice storage chamber 213. A coolant coil 215 of the ice machine cools water fed through an inlet 216. A screwed shaft 218 with a motor 217 scrapes out ice flakes produced on the inside of cooling cylinder 214, and carries them upward into the storage chamber 213 through a crushing ring 220, which breaks the ice flakes into small pieces 221.A floating disk 229 is placed over the upper surface of the storage of the ice pieces, moving vertically with the variation of the ice storage quantity. A movable rod 230 is linked with disk 229, and on top of the rod 230 the hysteresis setter 233 is removably mounted with a screw bolt 234. When the ice storage quantity is decreasing and falls to a predetermined level, an upper flange 233a of the setter 233 thrusts the lever 236 downward, so that it causes the closure of the microswitch 232, at a position shown as in Fig. 6.A pair of magnetic members 237 is mounted on the lever 236 and a stationary part of the mi croswitch 232,prbducing an attraction force between them, so that contacts of the microswitch 233, once placed in the contact making position, are then kept in that position without the continuation of the thrusting force of the upper flange 233a of the setter 233. On .the other hand, when the ice storage quantity is increasing,rod 230 moves upward with the setter 233.At last at another position as in Fig.6a, a lower flange 233b moves the lever 236 up, to break contact with microswitch 232.The upper and lower flanges 233a and 233b are vertically spaced.The hysteresis setter 233 can be changed so the distance between the upper and lower flanges 233a and 233b is also changeable.In an alternative, the setter 233 comprises two pieces 239 and 240 as shown in Fig. 6b, and they have upper and lower flanges 239a and 240a respectively then they can provide optimal adjustment of the distance between them.