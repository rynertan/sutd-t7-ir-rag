# Decision feedback adaptive equalizer acting on zero states following a non zero state.

## Abstract
In an adaptive equalizer of the decision feedback type for reducing intersymbol interference in subsriber loops of a telephone system, the corrected digital signal is applied to means 80 for detecting the occurrence in the signal of a zero state following a non zero state. When that occurs, a correlator 26, 126 28, 128 30, 130 samples the signal during the zero bit period and applies the sample to an integrator 50, 150 60, 160 76, 176 . The integrator output varies the coefficients of the feedback signal applied to the input means 10 for addition to the incoming digital signal S to provide the corrected signal S

## Claims
1. An adaptive equalizer for a digital communications system having decision means 38 , for comparing a digital signal, in a bit period, with a threshold level and providing an output having either a non zero or a zero state in dependence upon whether or not said signal exceeds the threshold, said equalizer comprising

## Description
The invention relates to adaptive equalizers for digital communications and is especially, but not exclusively, applicable to adaptive equalizers of the decision feedback type for reducing intersymbol interference in subscriber loops of telephone systems. During transmission, digital signals are attenuated and distorted by the filter characteristics of the transmission path. Usually such attenuation and distortion are equalized by a so called F equalizer . However, such an equalizer cannot compensate for reflections or echoes which are caused by discontinuities, such as wire gauge changes or bridged taps, in the transmission path. These echoes or reflections arrive at the end of the path later than the pulse which initiated them possibly several bit periods later. As a result, for example, a digital zero following a digital one will not be truly zero because of the presence in its bit period of energy from the preceding pulse, and possibly earlier pulses. This and the attenuation of the main pulse, may make it difficult for the usual threshold or decision circuit to decide accurately whether a particular symbol should be a 1 or a 0. This phenomenon of intersymbol interference, generally known as closing of the eye , is much worse in the loops because of the common occurrence of bridged taps open ended lines or stubs connected to the loop between its ends. To reduce intersymbol interference an additional equalizer is provided at each receiver. Typically the additional equalizer includes a transversal filter through which the received signal is passed. Various proportions of the filter outputs are chosen to map the interference and are fed back as a correction signal for subtraction from the incoming signal. The amplitude and timing of the echoes or reflections vary with each different transmission path or loop and it is preferable for the equalizer to be adaptable to compensate for the variations. This has led to the development of adaptive equalizers in which the coefficients which determine the feedback or correction signal are continuously adapted and optimized during transmission. In making such adaptive equalizers for digital signals, problems are encountered due to hunting or fluctuations in the absence of intersymbol interference, limited precision due to D A quantization, or random variation of coefficient values due to additive noise. Also they are not particularly immune to fixed offset and misalignment effects. Solution of these problems tends to increase complexity and cost. As digital telephony has now developed to the stage that digital transmission in the ordinary two wire subscriber loops is desirable, so considerable numbers of equalizers are involved there is a need for an adaptive equalizer which not only mitigates aforementioned problems but is relatively simple, cheap to make, and rugged. The present invention aims to satisfy this need. According to one aspect of the present invention an adaptive equalizer for intersymbol interference in a digital communications system having decision means, for comparing a digital input signal, in each bit period, with a threshold level and providing an output having either a non zero or a zero state in dependence upon whether or not said signal exceeds the threshold, comprises An advantage of integrating the corrected signal samples is that it avoids the need to measure the actual interference and greater precision may be achieved as compared to known equalizers using purely digital techniques or digital analogue conversion with discrete quantization steps. In preferred embodiments of the invention using bipolar input signals the input means provides not only the corrected digital signal, but also its inverse. Correlation between each of these signals and the appropriate detection means output advantageously results in virtual elimination of d.c. offsets and misalignment. It is then possible to use a very high gain in the feedback loop. The equalizer may have a plurality of said feedback stages, each responding to a different one of a corresponding plurality of successive said later bit periods in which a zero state occurs and providing a corresponding feedback signal in that bit period. According to a second aspect of the invention, a method of adaptively equalizing intersymbol interference in a digital communications system having decision means, for comparing a digital input signal, in each bit period, with a threshold level and providing an output having either a non zero or a zero state in dependence upon whether or not said signal exceeds the threshold, comprises summing a digital input signal and a feedback signal to provide a corrected digital signal for application to said decision means detecting the occurrence in the corrected signal of a non zero state in a first bit period and a zero state in a later bit period and on such occurrence providing an output signal indicative thereof in response to said output signal sampling said corrected signal samples to provide a control signal and in response to said control signal controlling said feedback signal so as to tend to reduce the actual corrected signal in said later bit period. An embodiment of the invention will now be described, by way of example only, with reference to the accompanying drawings, in which The adaptive equalizer shown in Figure 1 is intended to equalize intersymbol interference for three successive bit periods following the original bit or digital pulse which generated the interference. Accordingly the equalizer has three substantially identical feedback loops or stages, each for a different bit period. Corresponding signals in the different stages are identified by the same reference letters but suffixed A, B and C, respectively. Also, for reasons which wil become apparent later, the equalizer uses the input signal inverted and non inverted. It must also accommodate input signal pulses of opposite polarity and in each case the interference tail may have the same or opposite polarity as compared to the original pulse see Figures 4 i to 7 i . Consequently each stage of the equalizer comprises two similar branches in parallel. To facilitate the description, therefore, identical components in different branches of a feedback stage generally are identified by reference numerals differing by 100. Referring to Figure 1, input means 10, for generating an inverted corrected signal S The input means 10 comprises two summing and inverting amplifiers 14 and 114, respectively, connected in series. Amplifier 14, has its input 18 connected to the adaptive equalizer input 12 by a resistor 20, and its output 22 connected to the input 118 of amplifier 114 by a resistor 120. The amplifiers 14 and 114 have feedback resistors 24 and 124, respectively. The outputs 122 and 22 of the summing means 114 and 14 carry, respectively, the corrected input signal S Summing means output 122, alone, serves as the output from the equalizer and is also connected to a threshold or decision circuit 38, which provides positive pulses Q and negative pulses Q depending upon whether or not the original pulses exceed the appropriate threshold which determines whether it is a 1 or 0 . The positive and negative outputs Q and Q of the decision circuit 38 are connected to shift registers 42 and 142, respectively, which serve as digital delays. Each shift register provides three outputs Q The Q and Q outputs direct from the decision circuit 38 are also applied to a sequence detection means 80. The sequence detection means 80 comprises a pair of shift registers 81 and 181 see Figure 8 to which are applied signals Q and Q , respectively, from the decision circuit 38. As shown in Figure 8, the shift registers 81 and 181 are controlled by clock C and each provides three outputs Q The outputs Q , Q , and Q , and their inverses, are applied in various combinations to a set of gates 83, 85 and 87, the outputs of which provide, via a drive transistor, gating signals P The sequence detection means 80 detects the occurrence in the input signal of the bit sequences 10, 100 and 1000, for either polarity, and provides corresponding outputs P Referring again to Figure 1, the gating signals P Referring again to Figure 1, the input signal to the pulse shaping network 34 is a current I The input of amplifier 114 is connected, in similar manner, to pulse shaping network 134 which shapes a second current which also constitutes the sum of outputs of the three equalizer stages. This second current is designated I The P The third gating signals P Figure 3 shows feedback stage A in more detail. The other stages B and C are identical. The correlators 26, and 126 comprise two pairs of analogue switches 82, 84 and 182, 184, controlled by the P The delayed gating signal P In operation, an interference tail of the same polarity as the original pulse will give like correlation between the original pulse, as represented at the output of sequence detection means 80 by gating signal P or P and the sample of the corrected signal S An interference tail of the opposite polarity to the original pulse will give unlike correlation between gating signals P and P and S Figure 3 shows both coefficient circuits 46 and 146 in more detail. Circuit 46 comprises three transistors 86, 88 and 90 connected with their emitters in common to the collector of a fourth transistor 92. The emitter of transistor 92 is connected to a supply rail and its base is connected by a resistor 52 to receive the output signal from integrator 50. Transistor 90 has its collector grounded and its base connected to a reference voltage supply. These transistors generate a unidirectional feedback current, the amplitude of which is controlled by the output signal, V Transistors 86 and 88 have their collectors connected to output lines 54 and 154, respectively, which convey currents I The clock enables the gates 94 and 96 with a 50 percent duty cycle in the first half of a bit period. The shaping networks 34 and 134 Figure 1 delay the gated pulses of feedback current by a further quarter period so the bell pulses are applied to the summing points at amplifier inputs 18 and 118 in the middle of the later bit period as mentioned previously. The other coefficient circuit 146 is similar in construction, except that in this case Q and Q are transposed so that Q controls applicaiton of I In operation, the control signal V Consider, for example, an input signal as shown in Figure 4 i , comprising a positive original pulse in a first bit period with a positive interference tail in the next, zero , bit period, i.e. like correlation with a positive pulse. When applied to the decision circuit 38, such a signal will result in an output Q to the positive shift register 142, but no Q output to the negative shift register 142. A corresponding gating signal pulse P Accordingly, in the next 2nd bit period, positive gating signal P Therefore, as shown in Figure 4 iv , the corrected signal sample applied to the integrator 150 will be interference tail portion of the non inverted input signal S As this signal is positive, the capacitor in integrator 150 will receive a small increment of charge, tending to drive the output control signal V Such decrease turns on transistor 192 Figure 3 , increasing the amplitude of the current I This current on line 154 is added to those from the second and third feedback stages of the equalizer derived in a similar manner but due to original pulses in earlier bit periods and applied by way of the shaping network 134 to the summing point at the input 118 to amplifier 114 as a bell shaped pulse in the middle of the second bit period. The effect of increasing this current into the summing point 118 is to reduce the amplifier output S Referring again to the correlators 26, 126 at the same time that S Operation with the other three combinations of original pulse and interference tail, as illustrated in Figures 5, 6 and 7, is analogous and can be determined by reference to Table 1. It should be noted that the integrators 50, 150 60, 160 and 76, 176 have a relatively high open loop gain, for example 70 dB, so over a large number of bit periods even a very small error signal can build up a high charge on the integrator capacitor. Consequently, the equalizer affords a high degree of precision and no significant overcorrection. It is not prone to hunting when the error or interference signal is close to zero. A further advantage is that the integrator substantially eliminates noise from the signal giving a high level of immunity. It will be appreciated that improving the precision by employing high gain feedback circuitry will tend to exacerbate any problems of d.c. offsets or misalignment. A significant advantage of adaptive equalizers embodying the invention which operate on both the non inverted signal and its inverse is that they will also reduce d.c. offset and misalignment errors. Thus, consider an input signal having a positive d.c. offset. When sampling a zero period after a positive pulse, the equalizer will treat the offset voltage as a positive interference error occurring after a positive original pulse, and increment the charge on the capacitor of like correlation integrator 150. When next a zero bit period is sampled after a negative pulse, the inverted signal S will be applied to that integrator 150. However, the d.c. offset voltage is now inverted and so produces a corresponding decrement in the charge on the capacitor. Consequently, over a number of bit periods the d.c. offset voltage is eliminated. It should be noted that integration over a large number of bit periods enables the equalizer to converge even when there is a high error rate or interference level. This is because the circuit utilizes the decision circuit or slicer output which, though only an approximation, will be correct on average. An advantage of embodiments of the invention in which correlation is removed by detecting zero levels following a non zero level, and sampling the signal directly during such zero interval to determine unwanted correlation, is that they obviate the need to measure the error signal directly. For the specific application described, telephone subscriber loops, equalization over three bit periods has been found sufficient. However, for other applications, a greater or lesser number of bit periods could be equalized, the number of feedback stages being adapted accordingly. It should also be appreciated that the equalizer will operate with binary rather than bipolar signals, in which case corresponding halves of the various parts of the circuit could be omitted. Although described specifically as applied to telephony, the invention comprehends adaptive equalizers for other digital communications systems which are susceptible to intersymbol interference.