# NUMERICAL CONTROL SYSTEM

## Claims
Verfahren zur numerischen Computersteuerung einer Werkzeugmaschine oder dergleichen mit einer numerischen Steuereinheit, die einen internen Speicher 2 2 zur Speicherung von NC Programmen sowie eine externe Speichereinrichtung 4 zur Speicherung von Programmen aufweist, wobei das Verfahren das Aufsuchen eines vorbestimmten Programms aus einer Mehrzahl von Programmen entweder in dem internen Speicher 2 2 oder in der externen Speichereinrichtung 4 umfa√üt,

## Description
This invention relates to a numerical control method for numerically controlling a machine tool or the like, Fig. 4 is a block diagram illustrating features of a numerical control system. A conventional control system will now be described based on this drawing. An NC machine is controlled by an NC unit. The NC unit selects the required NC program from among a plurality of NC programs read into an internal memory of the NC unit from an external memory device such as a bubble cassette, NC tape or host computer, and the NC unit controls the operation of the NC machine while reading this program out of the internal memory. The drive of the NC machine is equipped with a drive section of a table, tool rest and the like, and with a control section for controlling spindle rotation on off and the like, relay operation and sequence operation. The NC unit performs automatic monitoring and adaptive control of the NC machine. Specifically, status information such as workpiece dimensions and tool wear is fed back from the NC machine and appropriate control is carried out based on the feedback information. When it is attempted to execute, e.g., a series of NC programs in such a numerical control system, conventionally the first step is for the operator to designate the number of a program. When this is done, the NC unit performs a search to determine whether or not the designated NC program is present in the internal memory. If the number does not exist, the NC unit causes an error to be displayed. Thus, the conventional control method is disadvantageous in that when a desired NC program does not exist in the internal memory of the NC unit, an alarm error display is generated and the operator must take measures to manually store the desired NC program in the internal memory. In other words, irrespective of the fact that the NC unit has an internal memory and a bubble cassette, paper tape reader or host computer is provided as external memory means, a problem encountered is that a method of having these units cooperate with and back up the internal memory is inadequate. There is also a need to expand the function of the internal memory. An object of the present invention is to provide a numerical control method in order to solve the foregoing problems, which method seeks to achieve cooperation between an internal memory of an NC unit and external memory means and to expand the function of the internal memory. According to the present invention, there is provided a method of providing computer numerical control for a machine tool or the like in which a numerical control unit comprising an internal memory for NC program storage further comprises external memory means for program storage, said method comprising finding a predetermined one of a plurality of programs in either said internal memory or said external memory means, characterised in that said predetermined program is selected by comparing an external selection signal, which provides an indication of said predetermined program, with file headings of each program located in said internal memory, and if a match is made then the matched program is executed, but if no match is made then file headings from said external memory means are compared with said external selection signal and if a match is made then contents of said internal memory are deleted and the program corresponding to the matched file heading is written into said internal memory and executed, and in the absence of a match being made in either said internal memory or said external memory means then an alarm is executed. By providing the present invention, a desired NC program can be executed even if the NC program does not exist in the internal memory of the numerical control unit, this being accomplished by automatically accessing the external memory means and reading the desired NC program, which is stored in the external memory means, into the internal memory. Accordingly, the operator need not perform a troublesome operation, economy is improved by reducing labor costs and production efficiency is raised by automation. Further, according to the present invention, even though the internal memory has a small capacity, achieving cooperation between the external memory means and the internal memory is functionally equivalent to physically increasing the capacity of the internal memory. In other words, the present invention has the effect of essentially expanding the function of the internal memory. Fig. 1 is a block diagram showing features of a numerical control system employing the present invention, Fig. 2 is an explanatory view illustrating the relationship between files and cassettes in a bubble cassette serving as external memory means, Fig. 3 is a flowchart showing the automatic loading of an NC program according to the present invention, and Fig. 4 is a block diagram showing features of a conventional numerical control system. An embodiment of the present invention will now be described in detail in conjuction with the drawings. Fig. 1 is a block diagram showing features of a numerical control system embodying the present invention. In the Figure, numeral 1 denotes a processor CPU for executing numerical control processing based on a basic control program and machining program. Numeral 2 denotes an operating system O.S. equipped with a relocation unit 2 1 and a program memory 2 2. Numeral 3 designates a random access memory RAM storing workpiece data and the like. Numeral 5 represents a manual data input unit MDI for entering a program selection signal and the like. Shown at numeral 8 is a display unit. The MDI 5 and display unit 8 ordinarily are arranged in integrated form. Numeral 9 denotes a data memory for reading machining data from a punched NC data 10. Numeral 11 denotes a tape puncher for punching NC data, which is obtained from the NC unit, into an NC tape. Numeral 13 denotes a position control unit of a servomotor 15, 14 a servoamplifier, 15 a servomotor, and 16 a sensor for obtaining position information fed back to the position control unit 13. In the Figure, numeral 6 represents an interface interconnectingthe NC unit and a magnetics control circuit 7. Fig. 2 is a view for describing the relationship between cassettes and files in a bubble cassete used as an external memory. A cassette includes the concept of a file. The term file as used herein refers to a unit of data input or output between the NC unit and a cassette by a single input output operation on the NC unit side. The files are numbered starting with 1 for the first file, 2, 3, 4 ... and so on. This is followed by establishing correspondence between the files and the data in the cassette, based on the file numbers. For example, correspondence is established between NC program O0100 and file 1, NC program O0200 and file 2, ... NC program O0600 and file n 1. The relationship between such files and cassettes will now be described. As an example, a first cassette includes file 1, file 2,... file E a second cassette includes file E 1, file E 2,... file K 1, file K and an M th cassette includes file K 1, file K 2,... file n 1, file n. It is permissible for one file to be arranged to extend over a cassette. Fig. 3 is a flowchart showing the automatic loading of an NC program in accordance with the present invention. Let us now describe the present invention on the basis of this flowchart. In a case where a workpiece is to be machined by using a series of NC programs, the first step is for the operator is to designate an NC program number by an external selection signal. The external selection signal is obtained by operating the manual data input unit MDI 5. In response to designation of an NC program file number, the processor CPU 1 executes a search of the internal NC program file stored in the internal program memory 2 2 built in the operating system O.S. 2 of the NC unit. If the result of the search is that the desired file is absent, the processor automatically accesses the external memory means 4 and executes a search of NC program files in the external memory. If the result is that the desired file is present, the processor deletes the NC program in the internal memory. When the deletion had been made, the processor reads the NC program from the external memory into the internal program memory 2 2. When the reading in of the program ends, the processor CPU 1 executes the desired NC program. Note that if the desired NC program is present in the internal program memory 2 2 when the internal program memory 2 2 is searched, the processor CPU 1 executes the NC program immediately. Further, if the result of accessing the external memory means 4 is that it does not contain the desired NC program, the processor CPU 1 executes an alarm error display . Control between the internal program memory 2 2 and the external memory means 4 is executed by the relocation unit 2 1 in the operating system 2. In the illustrated embodiment, a bubble cassette is described as being the external memory means. However, a data reader or host computer may serve as the external memory means. Thus, as set forth above, the present invention enables a designated NC program to be executed even if the NC program does not exist in an internal memory, this being accomplished by automatically accessing external memory means and reading in the designated NC program from the external memory means. Accordingly, the invention is well suited for application to a machine tool numerical control system for performing control based on various NC programs.