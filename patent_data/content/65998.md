# Pulse detection circuit.

## Abstract
A pulse detection circuit receiving two encoder output signals A, B which are shifted in phase with each other contains rise up detectors 20, 22 , fall down detectors 21, 23 , and gates 24 31 and two or gates 32, 33 . Combining the states of the two encoder output signals A,B with pulses derived from the rise up and the fall down edges of the encoder output signals A,B leads to four different possible combinations of modes in one period of the encoder shaft rotation. These four combinations of modes produced during a rotation in one direction are different from those combinations produced during a rotation in the opposite direction. Counting with high accuracy will be performed even if noise is included in the encoder output signals A, B or if the phase relation between the two signals A, B is temporarily inverted.

## Claims
New Claims 1. A pulse detection circuit comprising a a first and a second input terminal 201,202 , each for receiving either one of encoder output signals A,B containing pulse trains being shifted in phase with respect to each other, b detector circuits 2022 operated by at least one edge of the pulses of the pulse trains to be counted, c a first gate circuit composed of AND gates 24 31 to logically combine the output signals of the detector circuits, and d a second gate circuit composed of OR gates 32,33 for logically combining the output signals of the AND gates, characterized in that e the detector circuits are composed of first and second rise up detectors 2022 for detecting the rise up edges of the pulses of the pulse trains, and of first and second falldown detectors 2123 for detecting the fall down edges of the pulses of the pulse trains, g the first gate circuit composed of AND gates 24 31 is for obtaining a logical product of the output signals of either one of the first rise up and fall down detectors 2021 , and the signal level at the second input terminal 202 , or a logical product of the output of either one of the second rise up and fall down detectors 2223 at the signal level and the first input terminal 201 , h the second gate circuit composed of OR gates 32,33 is for obtaining a logical sum of the logical products obtained by the AND gates in the first gate circuit, i each combination of the first rise up and fall down detectors 2021 and of the second rise up and fall down detectors 2223 is constituted by a gate circuit including a time delaying element or elements. 2. A pulse detection circuit as claimed in claim 1 wherein said second gate circuit comprises a first OR gate 32 which issues a logical sum of the outputs of the AND gates 24,26,28 and 30 , representing a clockwise rotation of the encoder shaft, and a second OR gate 33 which issues a logical sum of the outputs of the AND gates 5,27,29 and 31 representing an anti clockwise rotation of the encoder shaft. 3. A pulse detection circuit as claimed in claim 1, wherein each combination of first rise up and fall down detectors 2021 , and of second rise up and fall down detectors 2223 is constituted by a two stage shift register, a clock oscillator which feeds a clock pulse to said shift register, and a gate circuit which receives the outputs of said shiftregister. 4. A pulse detection circuit as claimed in claim 3, wherein the output terminals of said gate circuit is connected to an RS flip flop which is adjusted to be reset by said clock pulse. What is claimed is 1. A pulse detection circuit which comprises a first and a second input terminals 201 and 202 , each for receiving either one of encoder output signals A and B containing succession of pulses being shifted in phase with each other a first and a second rise up detectors 20 and 22 for detecting the rise up edges of the pulses being fed to said first and second input terminals a first and a second fall down detectors 21 and 23 for detecting the fall down edges of said pulses a first gate circuit composed of AND gates 24, 25, 26, 27, 28, 29 30 and 31 , each for obtaining a logical product of the output of either one of said first rise up and fall down detectors 20 and 21 , and the signal level at said second input terminal 202 , or a logical product of the output of either one of said second rise up and fall down detectors 22 and 23 and the signal level at said first input terminal 201 and a second gate circuit composed of OR gates 32 and 33 3 each for obtaining a logical sum of the logical products obtained by said AND gates in said first gate circuit. 2. A pulse detection circuit as claimed in Claim 1 wherein, said second gate circuit comprises a first OR gate 32 which issues a logical sum of the outputs of theAND gates 24, 26, 28 and 30 , representing a clockwise rotation of the encoder shaft, and a second OR gate 33 which issues a logical sum of the outputs of the AND gates 25, 27, 29 and 31 representing an anti clockwise rotation of the encoder shaft. 3. A pulse detection circuit as claimed in Claim 1, wherein each combination of said first rise up and falldown detectors 2021 , and of said second rise up and fall . down detectors 2223 , is constituted by a gate circuit including a time delaying element or elements. 4. A pulse detection circuit as claimed in Claim 1, wherein each combination of first rise up and fall down detectors 2021 , ana of second rise up and fall down detectors 2223 is constituted by a two stage shift register, a clock oscillator which feeds a clock pulse to said shift register, and a gate circuit which receives the outputs of said shift register. 5. A pulse detection circuit as claimed in Claim 4, wherein the output terminals of said gate circuit is connected to an RS flip flop which is adjusted to be reset by said clock pulse.

## Description
Title of the Invention Pulse Detection CircuitBackground of the Invention 1. Field of the Invention The present invention generally relates to the pulse detection technique. Particularly it is concerned with a pulse detection circuit for detecting pulses contained in output signals derived from an encoder such as rotary encoder which coverts any physical quantity like spetial position, displacement or length into an electric signal.2. Description of the Prior Art In general, the rotary encoder is embodied to generate output signBls A and B of different phase simultaneously in response to the rotation of a shaft 2 being projected from a body 1.thereof as shown by FIG. 1. Numbers of the output pulses of the signals A and B issued from the terminals 3 and 4 of the encoder, respectively, corresponds to the rotational angle of the shaft 2, which is then detected by counting the pulses contained in the output signals A and Be In FIG. 1, numeral 5 represent a common terminal. It is needless to say that the larger the number of pulses per rotation of the shaft 2 contained in the output signal of the rotary encoder, the higher the accuracy of the detection of the rotational angle of the shaft 2 will be. Namely, any physical quantity is converted into a rotational motion of the shaft 2 of the rotary encoder, which can convert a change in the physical quantity into a change in an electric signal, usually a digital data composed of the pulses. And by counting these pulses by a counter composed of an IC, an accurate measurement of the physical quantity can be made in an easy and simple manner. Incidentally, the output signals A and Be derived from such the rotary encoder, are usually designed to have pulse sequences of phases being shifted with each other as shown in FIG. 2. By detecting this phase shift, the rotary encoder shown in FIG. 1 can discriminate the rotational direction of the shaft 2 based on a relative phase difference, whether it rotates clockwisely or anti clockwisely.As a pulse detection circuit for detecting the phase shift between the pulses contained in both of the encoder output signal to discriminate the rotational direction, and for generating a control signal, the following circuits have hitherto been known to the art. One example of such a conventional circuit includes the use of an up down counter 6 shown in FIG. 3, wherein one of the encoder output signals is fed to the clock input terminal CF and the other is fed to the updown input terminal UP DOWN of the up down counter 6, respectively. According to this arrangement, the up down counter 6 counts the rise up edge of the pulse contained in the encoder output signal A, which is fed to the clock input terminal CP. Hence the up down counter becomes up state in response to one level, for instance, a high level hereinafter, simply referred to as H level of the encoder output signal B, which is fed to the up down input terminal UP DOWN, while it becomes its down state in response to an opposite level, i.e., a low level L level . As indicated above, if the encoder output signalsA and B are fed to the clock input terminal CP and the updown input terminal UP DOWN of the up down counter 6, respectively, the counter 6 counts downwardly by the clockwise rotation of the encoder shaft and counts upwards by the anticlockwise rotation shown in FIG. 2, discriminatively.The cumulated count value of this up down counter indicates the rotational direction and angle of the encoder shaft. Another example of the conventional measure includes the use of logic circuit composed of an exclusiveOR gate 9, three AND gates 10, 11 and 12, and an inverter 13, shown in FIG. 4. In this logic circuit, the rise up edge of the pulse contained in the encoder output signal A is detected by the exclusive OR gate 9 in combination with the AND gate 10 to generate a pulse signal at the output terminal of the AND gate, which output signal is fed to the one input terminals of the AND gates 11 and 12. This output signal therefore causes either of the AND gates 11 and 12 to issue a pulse signal, on the basis of the level in the encoder output signal B at each time when the rise up edge of the signal A is detected.Namely, a pulse signal is issued from the AND gate 11, if the encoder output signalB is in its H level. whereas the pulse signal is issued from the AND gate 12, if the signal B is in its L level.An output terminal 7 of this logic circuit therefore issues an output signal if the encoder shaft rotate anti clockwisely and another output terminal 8 issues an output signal if the encoder shaft rotate clockwisely. These output signals are then counted by a conventional counter to give a desired control signal. Two major disadvantages are, however, inherent to those conventional arrangements, and will be described below. One of the major disadvantage is a liability of causing an erroneous counting. In general, the encoder as shown in FIG. 1 may be embodied in an optical or mechanical contact system, from which an output signal in an ideal rectangular waveform as depicted in FIG. 2 cannot usually obtained. On the contrary, it cannot avoid an incident of chattering sudden burst of noise chattering noise at or adjacent to rise up or fall down edge of the pulse contained in its output signal because of the instability or the like in the contacts at the times of its close or opening. If the chattering noise occurs, erroneously many numbers of pulses would be contained in the encoder output signal, which is to be received by, for instance, the clock input terminal CP of the up down counter shown in FIG. 3 to cause a count value higher than the actual count. In order to prevent such an erroneous count due to the chattering, a use of a low pass filter LPF comprising an integral circuit composed of a capacitor and a resister has higherto been proposed. The encoder output signal is fed to the detection circuit through the SPF. In a case wherein, the period of the encoder output signal is approximately constant, in the other words, the rota tional frequency of the shaft 2 is constant, the abovementioned means of using a LPF is fairly effective, because the time period during which the chattering occurs chattering time is almost constant. However, the len gth of the chattering time generally depends on the length of the period or pulse duration of the encoder output signal, and hence is usually varying. Therefore, if the SPF is adjusted to effective for an encoder output signal in a state of long period corresponding to a low rotational frequency of the shaft by enlarging the time constant of the integral circuit, the response of the detecting circuit will become insufficient when the period is shortened and the circuit itself will be unable to count the pulse properly. Conversely, if the SPF is adjusted to be effective for an encoder output signal in a state of short period a high rotational frequency , the possibility of the detecting circuit for commiting an erroneous counting will be made greater when the period is elongated, because the LPF cannot absorve the chattering. Another major disadvantage of the conventional technique is in a possibility of commiting an erroneous counting at a time of changing the rotational direction of the encoder shaft. This will be elucidated in detail by referring to FIG. 5, wherein the pulse sequences in the encoder output signals A and B are represented by waveforms with respect to relation angles in the first and second lines respectively, while the third line schematically indicates the example of changings , of rotational direction of the encoder. When the shaft of the encoder rotates in the direction indicated by arrows, the circuit counts up at point 14 and 15 which correspond to a rise up edges of the pulses contained in the encoder output signel A.Next, if the rotational direction of the shaft is changed immediately after passing point 15, the circuit counts down not at point 15 but at point 16 which corresponds to a rise up edge with respect to the leftward direction of the pulse contained in the encoder output signal A. Therefore as indicated above, an error represented by m in FIG. 5 which is a distance from point 15 to point 16 occurs during the while the detecting circuit counts up at the point 15 and counts down at the point 16 after the change in the rotational direction. Furthermore, if the rotational direction is changed again before passing the point 16 as indicated by an arrow along a broken line in FIG. 5, the detecting circuit counts up again at a point 17 and returning rotation is not represented by the output.Therefore, if such motion of broken line arrows are repeated, a cumalative error value of will be greater Summary of the Invention It is therefore the primary object of the present invention to provide a pulse detection circuit which obviates the disadvantages inherent to those conventional, arrangements. It is another object of the present invention to provide a pulse detection circuit which will not commit an erroneous counting of pulses contained in the encoder output signals even if chatterings are incidentally contained in the encoder output signals and if the phase relation between the two signals is temporarily reversed, to perform the pulse detection in a very high accuracy. It is still another object of the present invention to provide a pulse detection circuit of high definition, which counts four different combinations of modes obtained for one period T in FIG. 2 of the encoder output signals which had hitherto been treated in one count. According to the present invention there is provided a pulse detection circuit which comprises a first and a second input terminals, each for receiving either one of encoder output signals containing succession of pulses being shifted in phase with each other a first and a second rise up detectors for detecting the rise up edges of the pulses being fed to said first and second input terminals a first and a second fall down detectors for detecting the fall down edges of said pulses a first gate circuit composed of AND gates, each for obtaining a logical product of the output of either one of said first rise up and fall down detectors and the signal level at said second input terminal, or a logical product of the output of either one of said second riseup and fall down detectors and the signal level at said first input terminal and a second gate circuit composed of OR gates, each for obtaining a logical sum of the logical products obtained by said AND gates in said first gate circuit. The second gate circuit may comprise a firstOR gate which issues a logical sum of the outputs of theAND gates representing a clockwise rotation of the encoder shaft, and a second OR gate which issues a logical sum of the outputs of the AND gates representing an anticlockwise rotation of the encoder shaft. Each combination of said first rise up and fall down detectors, and of said second rise up and fall down detectors, may be constituted by a gate circuit including a time delaying element or elements. It may alternatively be constituted by a two stage shift register, a clock oscillator which feeds a clock pulse to said shiftregister, and a gate circuit which receives the outputs of said shift register. The output terminals of said gate circuit may be connected to an RS flip flop which is adjusted to be reset by said clock pulse.Brief Description of the Drawings FIG. 1 is a schematic view elucidating a per formance of a rotary encoder in general use, FIG. 2 is waveform diagrams of the output signal derived from said encoder, FIG. 3 is a circuit diagram showing a conventional pulse detection circuit, FIG. 4 is a circuit diagram showing another conventional pulse detection circuit, FIG. 5 is a schematic view for illustrating the disadvantages of the circuit shown in FIG. 4, FIG. 6 is a circuit diagram showing a fundamental arrangement of the pulse detection circuit embodying the present invention. FIGs. 7 a , 7 b and 7 c are timing charts for elucidating the performance of a rise up fall down detectors in the circuit shown in FIG. 6, FIG. 8 is a set of timing charts representing signals appeared at various parts of the circuit shown in FIG. 6, FIG. 9 is a circuit diagram showing a concrete embodiment of the rise up fall down detector in the pulse detection circuit embodying the present invention, FIG. 10 is a set of timing charts representing signals appeared at various parts of the circuit shown in FIG. 9, FIG. 11 is a circuit diagram showing another concrete embodiment of the rise up fall down detector in the pulse detection circuit embodying the present invention, FIG. 12 is a set of timing charts representing signals appeared at various parts of the circuit shown in FIG. 11, FIG. 13 is a circuit diagram of a partial circuit which may be employed together with the circuit shown in FIG. 11, and FIG. 14 is a set of timing charts representing signals appeared at various points of the circuit shown in FIG. 13.Description of the Preferred Embodiment In the fundamental arrangement of the pulse detection circuit of the present invention shown inFIG. 6, the rise up fall down edges of the pulses contained in the encoder output signals A and B are positively utilized. The modes of the encoder output signals A andB are summarized in the following table by classifying them into the rotation of the encoder shaft in clockwise direction and anti clockwise direction. EMI12.1 tb SEP Output SEP signal tb SEP Direction SEP of SEP appeared SEP at SEP Encoder SEP output tb SEP rotation SEP AND SEP gate SEP of SEP signal tb SEP in SEP FIG. SEP 6 tb SEP Clockwise tb SEP A , SEP B L SEP tb SEP R l SEP 24 SEP Rise up SEP at SEP L SEP level SEP of tb SEP the SEP signal SEP A SEP the SEP signal SEP B tb SEP B SEP SEP A H tb SEP R 2 SEP 28 SEP Rise up SEP at SEP H SEP level SEP of tb SEP the SEP signal SEP B SEP the SEP signal SEP A tb SEP I SEP A SEP SEP B H tb SEP R 3 SEP 26 SEP Fall down SEP at SEP H SEP level SEP of tb SEP the SEP signal SEP A SEP the SEP signal SEP B SEP 1 tb SEP B SEP A L tb SEP R 4 SEP 30 SEP Fall downat SEP L SEP level SEP of tb SEP the SEP signal SEP B SEP the SEP signal SEP B SEP s SEP tb Anticlockwise SEP i SEP SEP I SEP I tb SEP L l SEP 1 SEP SEP 29 SEP B SEP SEP A L tb SEP L 2 SEP 25 SEP A , SEP SEP B H tb SEP L 3 SEP t SEP SEP 31 SEP B SEP SEP A H tb SEP L 4 SEP 27 SEP A SEP SEP B L tb As can be seen from the above table, there is no identical combination of modes between the encoder output signals A and B in the clockwise and anticlockwise rotations of the encoder shaft and the discrimination of the rotational directions can easily be made by positively utilizing the combinations. Therefore, the present invention utilizes the dour combinations of the modes obtained for one period of the signals A and B. In the fundamental arrangement of the present invention shown in FIG. 6, numerals 20 and 22 represent rise up detectors for detecting the rise up edges of the pulses contained in the encoder output signals A and B, respectively numerals 21 and 23 represent fall down detectors for detecting the fall down edges of the pulses contained in the encoder output signals A and B, respectively numerals 24, 25, 26, 27, 28, 29, 30 and 31, each represents an AND gate and numerals 32 and 33, each represents an OR gate. As listed in the above table, the AND gates 24 31 issue output signals corresponding to the modes R l R 4 and L l L 4, respectively. In accordance with these output signals of the AND gates 24 31, an output pulse, which corresponds to the clockwise rotation of the shaft, is issued from the output terminal R of the OR gate 32, and another output pulse, which corresponds to the anticlockwise rotation of the shaft, is issued from the output terminal L of the OR gate 33. The rise up edge detectors 20 and 22 and the fall down edge detectors 21 and 23 perform a function as shown timing charts in FIGs. 7 a , 7 b and 7 c , wherein the encoder output signal A is exclusively taken as an example. Namely, when a signal A shown in FIG. 7 a is fed to the input terminal 201, a positive pulse as shown in FIG. 7 b is issued from the rise up edge detector 20 while a positive pulse as shown in FIG. 7 c is issued from the fall down edge detector 21. By the way, it is to be noted that in the pulse detection circuit of the present invention, the above mentioned operation is applicable irrespective of polarity of the pulse. That is, a negative pulse can equally be treated by simply reversing the logic of the circuit. The performance of the circuit shown in FIG.6 will be elucidated below by referring to the timing charts shown in FIGs. 8 a 8 h , wherein each of the timing charts indicated by a , b , c , d , e , f , g and h corresponds to each of the signals appeared at the points a, b, c, d, e, f, g and h of FIG. 6. When the encoder output signals A and B, each of which contains chattering noises as indicated by the timing charts a and b in FIG. 8, are fed to the input terminals 201 and 202, respectively, the rise up detectors 20 and 22 generate pulse signals in response to the riseup edges of the pulse contained in the encoder output signal as indicated by the timing charts c and e inFIG. 8, while the fall down detectors 21 and 23 generate pulse signals in response to the fall down edges of the pulse contained in the encoder output signal as indicated by the timing charts e and f in FIG. 8. In the results, the pulse signals as indicated by the timing charts g and h in FIG. 8 are obtained from the output terminalsR and L of the OR gates 32 and 33. When it is set that the output terminal R being positive and the output terminal L being negative, the pulse P1 is counted as 1 but is cancelled by 1 corresponding to the subsequent pulse P2 to make the count value 0 Similarly, the count value becomes 1 by the pulse P3 but turns to 0 again by the pulse P4 and then becomes 1 by the pulse P5. As elucidated above, even if the encoder output signals A and B contain any numbers oc chattering noise, an erroneous counting due to the chattering noise can effectively be prevented. FIGs. 9 through 14 inclusive show concrete circuit arrangements of the rise up fall down detectors which may be included in the pulse detection circuit embodying the present invention and, will be elucidated in detail below. An embodiment shown in FIG. 9 comprises a delay circuit 34 having a delay time X, an inverter 35, an AND gate 36 and a NOR gate 37. In FIG. 10, there are shown timing charts of the signals appeared at various part of the circuit shown in FIG. 9. The timing charts a , b , c and d of FIG. 10 correspond to the signals at a, b, c and d of FIG. 9. Namely, when an encoder output signal as shown by the timing chart a is fed to the input terminal of the circuit, an inversed signal with a delay by T as shown by the timing chart b is issued from the inverter 35, thereby a signal including a pulse of the duration as shown by the timing chart c is obtained from the AND gate 36 in response to the rise up edge of the pulse contained in the encoder output signal a , while a signal including a pulse of the duration f as shown by the timing chart d is obtained from the NOR gate 37 in response to the fall down edge. The delay circuit may be embodied simply by a resister and a capacitor. The shown in solid lines circuit might sometimes be unsatisfactory, because it could not respond to an input pulse of a width shorter than T and may cause an erroneous operation due to the difference in threshold levels of each gates in response to an input pulse of a width which approximates to . In order to prevent such a drawback by cancelling input pulse shorter than , a delay circuit 34 of delay time larger than 7 may additionally be provided in the preceding stage of the circuit as shown by bloken line in FIG. 9. Another embodiment shown in FIG. 11 comprises a two stage shift register composed of two D flip flops 38 and 39, an AND gate 36, a NOR gate 37 and a clock oscillator 40. The output signals Q and Q are fed to the AND gate 36 and the NOR gate 37. The output signalQ derived from the D flip flop 39 is an inverted output signal Q from the D flip flop 38 with a delay as long as one period in the clock pulse of the clock oscillator 40.The signal processing by this circuit, other than specifically indicated above, is identical with that shown in FIG. 9. In the embodiment shown in FIG. 11, if an input signal containing pulse the duration of which approximates to the period of the clock pulse is fed to the circuit, an erroneous counting may result therefrom because the output signal from the AND gate 36 is closely followed by that from the NOR gate 37 to make the fall down edge of the former coincide with the rise up edge of the latter as shown in FIG. 12. In FIG. 12, the timing chart a represents an input signal appeared at a in FIG. 11, that b represents an output signal of the AND gate 36 appeared at b in FIG. 11, that c represents an output signal of the NOR gate 37 appeared at c in FIG. 11, and that d represents a clock signal appeared at d in FIG.12, respectively. The above mentioned erroneous counting can be prevented by providing an additional circuit for processing the outputs of the circuit shown in FIG. 11. The additional circuit may be embodied as FIG. 13, wherein. a RS flip flop, comprising four NOR gates 41, 42, 43 and 44 and an inverter 45, is connected to the output terminals of the AND gate 36 and NOR gate 37 respectively and is designed to be reset at the fall down edge of the clock pulse CP from the clock oscillator shown in FIG.11 . In FIG. 14, a timing chart a represents an input signal appeared at a, the input terminal of the NOR gate 41, of FIG. 13, that b represents an input signal appeared at b, the input terminal of the NOR gate 43 of FIG. 13, that c represents a clock pulse CP, that d represents an output signal appeared at d, the output terminal of the NOR gate 42 of FIG. 13, and that e represents an output signal appeared at e, the output terminal of theNOR gate 44, respectively.