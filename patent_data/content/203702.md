# MOVING COIN VALIDATION

## Claims
Verfahren zum Überprüfen einer Münze auf Gültigkeit durch Vorbeibewegen der Münze an einer elektrischen Spule L₁,L₂ , die an einen abgestimmten Schwingkreis angeschlossen ist, Überwachen eines von der Spule L₁,L₂ in Anwesenheit der Münze erzeugten oszillierenden Signales, Ableiten einer für die Münze repräsentativen Messung aus dem oszillierenden Signal und Vergleichen jeder Messung mit einem Referenzwert, um zu bestimmen, ob die Münze gültig ist, dadurch gekennzeichnet, daß das Überwachen für zwei feste Zeitperioden durchgeführt wird, welche in Antwort auf eine Erfassung der Lage der Münze eingeleitet werden, u.zw. für eine erste Periode t₂ t₃ , während der sich die Frequenz des oszillierenden Signales linear in einer Richtung ändert, wenn sich die Münze der Spule nähert, um eine erste frequenzabhängige Messung zu erhalten, und für eine zweite feste Zeitperiode t₅ t₆ , während der sich die Frequenz des oszillierenden Signales linear in der entgegengesetzten Richtung ändert, wenn sich die Münze von der Spule entfernt, um eine zweite frequenzabhängige Messung zu erhalten, wobei eine Linearkombination aus der ersten und der zweiten Messung gebildet wird, wodurch sich der Einfluß der Münzengeschwindigkeit im wesentlichen aufhebt und die für die Münze repräsentative Messung erhalten wird.

## Description
The invention relates to methods and apparatus for validating moving coins. Coin validation apparatus may be self contained or may be associated with a coin freed mechanism or a variety of coin receiving machines such as coin box telephones or vending machines or it may form part of a coin sorting apparatus to check that coins are valid and not counterfeit. Several conventional coin validation methods carry out tests on a coin when it is stationary at a fixed reference point relative to the remainder of the validation apparatus. An example of such apparatus is illustrated in our earlier Patent Application EP A 0062411. One of the disadvantages of these static systems is that the time taken to validate a number of coins can be long since each coin must be brought to rest, validated, and then urged in an appropriate direction depending on the results of the validation. In view of this, there have been some proprosals for validating moving coins. Clearly, if suitable methods can be devised this will increase considerably the processing speed over the static systems. However, the previous proprosals have involved complex electronics to deal with the elimination of the effects of coin velocity which is a largely uncontrollable variable in the coin validation system. US A 4234071 discloses an alternative approach, in which coins are moved in a rotary carrier past an electrical coil connected in a tuned oscillating circuit. Measurements are made at predetermined intervals and compared with a set of time dependent reference values in order to validate the coin. In accordance with one aspect of the present invention there is provided a method of validating a coin by moving the coin past an electrical coil connected in a tuned oscillating circuit, monitoring an oscillating signal generated by the coil in the presence of the coin, deriving from the oscillating signal a measurement representative of the coin, and comparing each measurement with a reference value to determine whether the coin is valid, characterised in that the monitoring is carried out for two fixed time periods initiated in response to detection of the position of the coin, a first period during which the frequency of the oscillating signal is varying linearly in one direction as the coin approaches the coil to derive a first frequency dependent measurement, and a second fixed time period during which the frequency of the oscillating signal is varying linearly in the opposite direction as the coin moves away from the coil to derive a second frequency dependent measurement, a linear combination of the first and second measurements being formed, thereby substantially cancelling out the effect of the coins velocity and deriving the measurement representative of the coin. This invention makes use of the facts that firstly although coin velocities may vary from coin to coin, in general any individual coin moves at a substantially constant velocity along a coin runway, and secondly as a coin approaches the electrical coil it has a linearly increasing effect on the oscillating signal generated by the oscillator circuit until a saturation effect is reached and subsequently, as the coin leaves the vicinity of the electrical coil, the coin has a linearly decreasing effect. If the velocity is substantially constant throughout the coin s passage past the electrical coil these increasing and decreasing effects will be equal and opposite. Typically the coil has an area of influence of similar area to that of the coin, even if some acceleration occurs this will in general result in very little difference in velocity between that of the coin approaching the coil and it leaving. Accordingly even in this case there will be only an insignificant effect on the measurements as long as the velocity change during the coin s passage through the coils is not large in comparison with the mean velocity. Thus, by summing the two measurements a resultant measurement, effectively a mean measurement, is obtained which is substantially independent of the velocity of the coin. A typical property of the oscillating signal which may be monitored is the frequency of the oscillating signal which varies in accordance with changes in the inductance of the coil caused by the coin. This change in inductance is related to the coin diameter and thus represents a method by which the coin diameter can be detected. As a coin enters the vicinity of the electrical coil and the magnetic field generated by the electrical coil, the frequency of the oscillating signal generated by the oscillating circuit gradually increases. The number of cycles of the oscillating signal are then counted for a fixed time period while the frequency is increasing and the number of cycles is also counted for the same fixed time period while the frequency is decreasing as the coin leaves the vicinity of the electrical coil. If another similar coin with a higher velocity passes the electrical coil, then during the first fixed time period there is a greater number of cycles of the oscillating signal since the coin travels a greater distance and so has a greater influence on the coil than the first coin. During the second fixed time period, however, there is a smaller number of cycles since the coin passes out of the vicinity of the coil more quickly. The total number of cycles in both fixed time periods are, however, substantially the same for both coins. Preferably, the method further comprises sensing a trailing edge of the coin at a first position and thereupon causing the first fixed time period to commence and sensing a leading edge of the coin at a second position position and thereupon causing the second fixed time period to commence. The total time during which a coin is causing a linearly changing effect in the oscillating signal varies with coins of different denomination and so conveniently the fixed time period is chosen to be short enough so that a plurality of coins of different denomination may be validated. Preferably, more than one property of the oscillating signal is monitored to increase the accuracy of the validation. For example, in addition to monitoring the frequency of the oscillating signal, the amplitude of the signal can be monitored. According to a second aspect of the present invention, there is provided a method of validating a coin by moving the coin past an electrical coil connected in a tuned oscillating circuit, monitoring an oscillating signal generated by the coil in the presence of the coin, deriving from the oscillating signal a measurement representative of the coin, and comparing each measurement with a reference value to determine whether the coin is valid, characterised in that the monitoring is carried out for two fixed time periods initiated in response to the detection of the position of the coin, a first period during which the peak amplitude of the oscillating signal is varying linearly in one direction as the coin approaches the coil to derive a first peak amplitude dependent measurement, and a second fixed time period during which the peak amplitude of the oscillating signal is varying linearly in the opposite direction as the coin moves away from the coil to derive a second peak amplitude dependent measurement, a linear combination of the first and second measurements being formed thereby substantially cancelling out the effect of the coins velocity and deriving the measurement representative of the coin. The amplitude will change due to the induction of eddy currents in the coin causing loss effects. Conveniently, this change in amplitude is represented by a parameter signal whose frequency is proportional to the change in amplitude and thus this frequency can be monitored during the fixed time periods in a way similar to that described above in connection with monitoring the frequency of the oscillating signal itself. According to a third aspect of the present invention there is provided a coin validation apparatus including a coin runway an electrical coil adjacent the coin runway a tuned feedback oscillator circuit having the electrical coil, in its feedback loop oscillating signal monitoring means for monitoring the oscillating signal generated by the oscillator circuit and deriving a frequency dependent measurement representative of a coin validator means for comparing a measurement representative of the coin with a stored reference value, characterised by timing means to enable the oscillating signal monitoring means to monitor the oscillating signal for two fixed time periods initiated in response to detection of the position of the coin, a first fixed time period during which the frequency of the oscillating signal is varying linearly in one direction as the coin approaches the coil to derive a first frequency dependent measurement and for a second fixed time period during which the frequency of the oscillating signal is varying linearly in the opposite direction to derive a second frequency dependent measurement and by summing means arranged to form a linear combination of the first and second frequency dependent measurements thereby substantially cancelling out the effect of the coin s velocity and deriving the measurement representative of the coin. The timing means, oscillating signal monitoring means, means to combine the measurements, and validator means may conveniently be provided by a suitably programmed microcomputer or microprocessor and associated sensors. Preferably the timing means include a first and second sensors, the sensors being arranged to produce signals to initiate the first and second fixed time periods. It is especially preferred that the first sensor is positioned upstream of the second sensor and is arranged to initiate the first fixed time period upon sensing a trailing edge of the coin and that the second sensor is arranged to initiate the second fixed time period upon sensing a leading edge of the coin. According to a fourth aspect of the present invention there is provided a coin validation apparatus including a coin runway 1 an electrical coil L₁,L₂ adjacent the coin runway 1 a tuned feedback oscillator circuit C₂,5 having the electrical coil L₁,L₂ , in its feedback loop oscillating signal monitoring means 2 for monitoring the oscillating signal generated by the oscillator circuit C₂,5 and deriving a measurement representative of a coin validator means 4 for comparing a measurement representative of the coin with a stored reference value, characterised by timing means 4 to enable the oscillating signal monitoring means 2 to monitor the oscillating signal for two fixed time periods initiated in response to detection of the position of the coin, a first fixed time period t₂ t₃ during which the peak amplitude of the oscillating signal is varying linearly in one direction as the coin approaches the coil L₁,L₂ to derive a first peak amplitude dependent measurement and for a second fixed time period t₅ t₆ during which the peak amplitude of the oscillating signal is varying linearly in the opposite direction to derive a second peak amplitude dependent measurement, and by summing 4 means arranged to form a linear combination of the first and second peak amplitude dependent measurements thereby substantially cancelling out the effect of the coin s velocity and deriving the measurement representative of the coin. An example of a method and apparatus in accordance with the invention will now be described with reference to the accompanying drawings, in which The apparatus shown in block diagram form in Figure 1 may be self contained or may be incorporated into a larger system such as a pay telephone. The apparatus includes a coin runway system 1 of conventional form having a coin entry slot and a runway along which a coin passes having been fed through the slot at an input end of the runway. The runway may include a damper to prevent the coin bouncing as it moves along. A pair of coils L₁, L₂ Figure 2 connected in series are positioned on either side of the runway 1 and are connected with the remainder of a coin validator circuit 2 by a pair of lines 3. In addition, two optical sensors not shown are positioned to detect the passage of a coin along the runway, output signals from the sensors being fed to a microcomputer or microprocessor system 4. Each optical sensor may comprise a light emitting diode positioned on one side of the runway and a photodetector positioned on the other side. The coin validator circuit 2 is shown in more detail in Figure 2. The circuit comprises a tuned oscillator circuit formed by the coils L₁, L₂, a tuning capacitor C2 and an active component 5 formed by a longtail transistor pair T₁, T₂. The tuned circuit oscillates at a frequency given by The amplitude of the oscillating signal generated by the oscillator is controlled by a current mirror configuration of a pair of transistors T₃, T₄. The transistors T₁ T₄ are all provided in an integrated circuit known by the model number CA3046. The oscillating signal is also applied to the base of a transistor T₉ which acts to square up the signal which is then output as a first parameter signal on a line 6 to the microcomputer 4. The coin validation circuit also includes an amplitude monitoring circuit 7 comprising transistors T₅ T₈. These transistors are formed in an integrated circuit known by the model number CA3096. The oscillating signal from the oscillator circuit is fed to the base of the transistor T₅ while the base of the transistor T₆ is fed with a proportion of a constant voltage applied between the lines 8,9 as determined by the resistors R11, R12. If no oscillating signal is applied to T₅ then T₆ will be fully on while T₅ will be off. During an increase in the oscillating signal, T₅ will turn on during the negative half cycle and thus T₇ will start to switch on which causes a negative pulse to be applied to the base of transistor T₈. The output from the transistor T₈ causes a control voltage to be applied to the junction between a resistor R17 and a resistor R20 to control operation of the current mirror transistor configuration T₃, T₄. Thus, if an increase in the losses in the oscillator circuit occurs this will cause an increase in the voltage applied to the resistor R17 and hence an increase in the collector current of the transistor T₄. This is mirrored by an increase in the current fed to the oscillating circuit by transistor T₃. This will maintain the amplitude of the oscillating signal. The control signal represented by the voltage developed over the resistor R17 is also applied to a voltage to frequency converter 10. The converter 10 comprises a timer 11 formed by an integrated circuit Model No. ICM7555 and a ramp generator 12 formed by an integrated circuit Model No. ICL7611. The ramp signal from the generator 12 is fed to two reference inputs of the timer 11 while the voltage signal generated across the resistor R17 is fed to the input of the ramp generator 12. The output of the timer 11 is a signal whose frequency is proportional to the magnitude of the voltage developed across the resistor R17. An output signal from pin 7 of the timer 11 applied to the transistor T₁₀ causes periodic changes in direction of the ramp signal. This signal is fed as a second parameter signal along a line 13 to the microcomputer 4. In use, a coin runs along the coin runway 1 which is so designed to remove some of the coin entry energy using a ceramic insert in a conventional manner so as to reduce bouncing but which also ensures that the coin does not come to rest. The microcomputer 4 is suitably programmed to determine from the output of a leading optical sensor 15 when a leading edge of the coin has been sensed by the sensor t₁ . The microcomputer then senses the time t₂ when a trailing edge of the coin leaves the sensor and starts to monitor output signals from the coin validation circuit 2. When the coin has entered the magnetic field generated between the coils L₁, L₂ the combined inductance L of this magnetic circuit will change in accordance with the equation The coefficient of coupling K between the two coils will be reduced thus reducing the total inductance L of the series connection. This will result in a change in the oscillating frequency of the oscillator circuit. This oscillating frequency, as previously described, is fed along the line 6 to the microcomputer 4. In addition, due to eddy currents induced in the coin additional losses are introduced causing a change in the amplitude of the oscillating signal. This change in amplitude is monitored by the monitor 7 and an appropriate control signal voltage is applied to the transistor pair T₃, T₄ to return the amplitude to its original magnitude. This control signal is converted by the converter 10 to a signal whose frequency is directly proportional to the control signal magnitude and which is fed along the line 13 to the microcomputer 4. The frequency of this signal will be proportional to 1 Q or 1 R where R is a resistive component in parallel with the tuned circuit. The signal on the line 6 thus represents the coin diameter while the signal on the line 13 represents coin resistivity and thickness. Figure 3 illustrates the effect of a coin on the two properties of the oscillating signal which are monitored. The form of the effect is the same although the magnitude may differ. Conveniently, the graph shown in Figure 3 may be taken to represent changes in the first and second parameter signals. Thus, before the coin enters the magnetic field generated by the coils L₁, L₂ the two parameter signals have respectively small frequencies F₁, F₂ respectively. The leading optical sensor 15 senses a leading edge of the incoming coin at a time t₁ and the microcomputer determines the presence of the coin. Shortly afterwards the frequencies of the parameter signals begin to increase in a linear fashion but not necessarily with the same slope . The microcomputer 4 starts to monitor the parameter signals at a time t₂ when a trailing edge of the coin is sensed by the sensor. This monitoring period is for a fixed time period and expires at t₃ at a time when the frequencies of both parameter signals are still linearly increasing. The duration of this fixed time period is less than 1 x 10 ² secs. As the coin continues to enter the magnetic field the effect on the oscillating signal will continue to increase until the coin fully screens the magnetic flux path at which point saturation is reached. A second sensor 16 is positioned to detect the leading edge of the coin downstream of the leading sensor at a time t₅ which is after t₄ when the effect of the coin on the field starts to decrease. The microcomputer 4 then monitors the first and second parameter signals for the same fixed time period t₃ t₂ until a time t₆ during which the frequencies of the parameter signals are linearly decreasing at the same rate as they increased in the time interval between t₂ and t₃. During the monitoring periods, the microcomputer calculates the number of pulses that have occurred in each parameter signal. These two measurements are then summed by the microcomputer to determine two resultant measurements corresponding to the two parameter signals. The microcomputer 4 is connected to an E²PROM device 14 in which are stored upper and lower acceptance limits for the two measurements for valid coins. The microcomputer 4 thus compares the resultant measurements with the stored upper and lower limits and if both resultant measurements fall within respective limits relating to a valid coin, the microcomputer 4 will determine that the coin is valid. If an invalid coin is detected the microcomputer 4 can generate an appropriate signal to cause the coin to be directed to a reject position and or to cause a suitable message to be displayed. If the same coin was passed along the runway at a lower velocity the effect on the oscillating signal would take the form shown by the dashed line in Figure 3. Thus, since the coin is moving more slowly the slope of the linear portions is more shallow. Once again, the leading optical sensor 15 will determine the times t₁, t₂ and hence the microcomputer will determine the time t₃. The shallow slope means that the number of pulses counted by the microcomputer during the monitoring period t₂ t₃ will be less than previously. The saturation period will be longer in view of the slower moving coin so that the second optical sensor 16 will determine a time t 5 much later than the time t₅. However, from this time the microcomputer 4 will determine, as before, the time t 6 so that the time interval t 5 t 6 is the same as that between t₅ and t₆. In view of the different slope, however, the number of pulses of the parameter signals counted will be greater than previously. Thus, when the two pulse measurements for each parameter signal are summed the resultant will be the same as in the previous case with the faster moving coin and thus the effect of velocity has been removed. Figure 4 illustrates the difference in the effect on the oscillating signal when a smaller coin passes the coils L₁, L₂. It will be seen that the linear effect commences at a later time after the leading edge of coin has been detected by the optical sensor so that the time interval between t₁ and t₂ must be chosen to be large enough so that the smallest coins can be validated but small enough so that t₃ is reached before saturation. Similarly the time interval between t₄ and t₅ must be appropriately chosen so that the time t₆ is reached before the coin no longer effects the magnetic field.