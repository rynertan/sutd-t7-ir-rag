# METHOD FOR GENERATING A CIRCULAR OR ELLIPTIC ARC

## Claims
Verfahren zur Steuerung einer digitalen Anzeigevorrichtung für die Erzeugung einer Anzeige eines kreisförmigen oder elliptischen Bogens, enthaltend

## Description
The present invention relates to a method for generating a circular or elliptic arc on a digital display, such as a cathode ray tube display, a digital plotter, or a matrix printer, especially adapted for use in painting tee whole or part of a circle or ellipse. In the prior art, a painted pattern has generally been displayed by drawing the boundary of a pattern to be painted, discriminating the area inside of the boundary, which is to be painted, from the area outside thereof, which is not to be painted, in accordance with the data read out from a display memory, and painting the area inside of the boundary. An example of such a method is disclosed in Jap. Pat. Unexam. Pub. Appln. No. 142585 81. This method is time consuming since it requires to read out data from the display memory one by one. Further, the painting of a pattern by such a method, which largely depends on the contents already drawn on a display screen, may often interfere with another pattern. Another known method for displaying a painted pattern is a scan conversion method. The method is described, for example, in Principles of Interactive Computer Graphics, W. M. Newman, et. al., McGrow Hill, 2nd Edition, 1979, pp.232 243. In this method, all the intersections between the pattern to be painted and the scan lines constituting a display screen are obtained, and the spaces between the odd even paired intersections are painted. Fig. 2 illustrates a typical example thereof. This method effectively utilizes the geometrical nature of the pattern to be painted to enable the painting to be executed independently of the data stored in a display memory, resulting in its improved processing speed. It is the key to the improvement of the scan conversion method to improve the efficiency in the calculation of intersections while retaining its high accuracy. The present invention is directed to the scan conversion method, and introduces a new concept in generating a circular or elliptic arc in order to solve the problems of accuracy encountered in the past. In the prior art, several efficient methods have been proposed for drawing a circle with a designated center and a designated radius or an ellipse with a designated center and designated major and minor axes with high accuracy without employing the calculation of functions such as trigonometric functions. One of the methods is to move a point incrementally from a starting point to a terminating point in order to obtain a desired line segment. The incremental movement of a point means, for example, a movement thereof from one picture element hereinafter referred to as a pel to any one of the pels at the angular positions of 0, 90, 180, and 270 degrees among those neighbouring thereto. The combination is called 4 connected pels. The incremental movement may also be made from one pel to any one of those at the angular positions of 0, 45, 90, ..., and 315 degrees. The combination is called 8 connected pels. In selecting the next pel to which the movement is to be made, a test is performed to select two or three neighbouring pels as candidates. Then, the distances between each of the candidates and the actual line segment concerned are obtained and the pel with the smallest distance therebetween is finally selected. Such a method is described in A Linear Algorithm for Incremental Digital Display of Circular Arcs, J. E. Bresenham, Communications of the ACM, 20 2 , February 1977, pp. 100 106, for example. Although the basic concept of such a method may be applied for painting a circular or elliptic arc by the scan conversion method, such an application must be modified in order to eliminate such problems of accuracy as stated below. For example, when a circle is generated with 4 connected pels, a series of points as shown in Fig. 3 are obtained. Now consider the case of painting using a series of points generated counterclockwise from a point x r on the x axis. As understood from Fig. 2, in case of the scan conversion method, only one point is required to be generated at the intersection between each scan line and the curve concerned. Therefore, when a plurality of points are generated on one scan line at such an intersection, it is necessary to select one of them. For example, if the points displaced in the y axis direction are selected, the points as shown with the black points in Fig. 4 are selected the points shown with double circles must be added in accordance with the sign of differential in the y axis direction, so that an even number of points always exist on one scan line , resulting in producing a distorted circle rather than a true circle. The more vertically depressed is an ellipse of the pattern to be displayed, the more significant effect would be produced Fig. 6 . Considering the symmetry of a circle, assume that a series of points only in the first quadrant quarter circle are generated actually and the coordinates of the points in the other quadrants are obtained only by inverting the sign of the coordinates of those in the first quadrant. With this method, it is possible to obtain paired points immediately after the generation of each point and to paint the space between the paired points, resulting in the reduction of the processing time. This method enables to obtain a symmetrical pattern. However, the obtained circle would be depressed vertically Fig. 5 . The above method would not provide a good solution to the above problems and some other modification would be required to obtain a highly precise scan conversion of a circle or ellipse. The best method therefor would be to obtain a single point nearest to each of the intersections between a circle and each scan line, sequentially. However, in order to obtain such points directly from the equation of a circle, Referring to Fig.7, assume that a point P Assuming that Δ ϑ in the above formulae is a minute angle, cos Δ ϑ 1 and sin Δ ϑ Δ ϑ. Further, assuming However, the x It has already been proposed to apply the DDA method to the scan conversion method, as disclosed, for example, in Jap. Pat. Unexam. Pub. Appln. No. 206884 84. Also, in this case, a plurality of points are generated at the intersection of one scan line and the curve concerned, therefore resulting in producing the same problem as in the case of the above mentioned incremental digital display. The above mentioned Jap. Pat. Unexam. Pub. Appln. No. 206884 84 does not refer to such a problem. As a consequence of the foregoing known difficulties in the prior art, it is an object of the invention to provide a method for generating a circular or elliptic arc, which is adapted for the scan conversion method without the necessity of calculating trigonometric functions and square roots. In order to accomplish the above object, the present invention as set out in the claims, intends to prevent a plurality of points to be generated at the intersection between one scan line and the curve concerned by modifying the recurrence formulae of the DDA method. More specifically, the present invention employs the following recurrence formulae 7 and 8 or 9 and 10 to obtain a series of points for a circle The linear painting with the scan conversion method is performed in the x axis direction, which is orthogonal to the y axis direction. The above formulae 7 and 8 are explained as follows. Consider again the above mentioned recurrence formulae 3 , 4 , 5 , and 6 . In the above formula 11 , since is 1, it is apparent that the series of points generated from the above formula 11 generate a true circle. This is described in On Linear Difference Curves, D. Cohen, Dept. Eng. Appln. Math., Harvard Univ., 1969. When an increment unit in the y axis direction is 1 in the formula 6 , that is, it is desired to generate a single point on one scan line, a problem occurs. Namely, if the increment unit is 1, namely The present invention is based on the following formulae wherein y Of course, the above formula 12 , wherein generates a true circle. Further, if the increment unit in the y axis direction is 1 in the formulae 12 and 13 , namely As apparent from the above description, the formulae 6 and 7 can generate a true circle by plotting a single point at each intersection with a scan line. The formulae 6 and 7 are those for plotting a circle counterclockwise and the formulae 8 and 9 are those for plotting a circle clockwise. In order to draw a circle actually, it is required to make translational movements since the center is not always at the original point. Further, in case of an ellipse, it is required to make scale conversions depending upon the length of the major or minor axis. Referring now to Fig. 1 and Figs. 8 through 12, an embodiment of the present invention applied for painting a circle will be described. In this embodiment, the pels on the scan line passing through the center x Fig. 8 shows generally a personal computer system employed to implement this embodiment of the invention. The system may be IBM 5550 manufactured by IBM Japan, Ltd. In the figure, a CPU 2, a keyboard 3, a floppy disk drive 4, a CRT display 5, a main storage 6, a refresh buffer 7, and so on are connected to a data bus 1. A keyboard interface 8, a floppy disk controller 9, and a CRT display controller 10 are provided as interfaces between the data bus 1 and each of the keyboard 3, floppy disk drive 4, and CRT display 5. In the figure, an address bus, a control bus , ROS, and so on are not shown. The CRT display 5 may be of the 15 inch monochrome type, which is capable of displaying 1024 x 768 points with spots of approximately 0.22 mm. The refresh buffer 7 has a capacity which is able to support the all point addressable graphic mode. The refresh buffer 7 can be addressed by the CPU 2 and the CRT display controller 10, and the graphic data can be written into or read from the refresh buffer 7 by CPU addresses. The CRT display controller 10 accesses the refresh buffer 7 according to the vertical synchronizing signals and the horizontal synchronizing signals for the CRT display 5, and displays the contents on the CRT display 5. The method of the present invention may be implemented, for example, as a package disk for an application program. When the package disk is loaded in a floppy disk drive 4 under the control of a disk operating system, the program is transferred to the main storage 6 and then executed. The method of this embodiment is shown in detail in Fig. 1. In this embodiment, a point p Returning to Fig. 1, the steps of the method of this embodiment will be described. In the step 11, the keyboard 3 is used to input the data of the center. x Next, in the step 13, the data y Namely, in the step 15, the counter C and the value of the y coordinate y of the point on the circle O are respectively incremented by one, and the value of x coordinate x of the point on the circle O is substituted by x y x. Then, in the step 16, y In the steps 18 and 19, the painting is made for the scan line between the point p The above steps 15 through 19 are repeated until the counter C becomes equal to r 1, in the step 20. When the counter C becomes equal to r 1, the steps 21 and 22 are executed, and the operation is completed. In the steps 21 and 22, the painting data are written into the locations of the refresh buffer 7 corresponding to the points r y Next, referring to Figs. 13 through 15, another embodiment of the present invention applied for painting an ellipse will be described. In this embodiment, an ellipse as shown in Fig. 14 is painted. In Fig. 13, the steps that are similar to those in Fig. 1 are identified by the numerals added with 100, and only the portions differing from the preceding embodiment will be explained below. As shown in Fig. 13, in the step 111, the keyboard 3 is used to input the data of the center x In the step 116, x Further, in the steps 121 and 122, the painting data are written into the locations of the refresh buffer 7 corresponding to the points b y According to the sequence as shown in Fig. 13, an ellipse as shown in Fig. 15 is obtained, and the inside of the ellipse is painted. While the above described embodiments of the present invention have been explained in terms of painting the whole of a circle or an ellipse, the present invention could also be used for painting a pie chart as shown in Fig. 16. In such a case, a table is made as to the odd even paired intersections on the scan lines which are to be painted therebetween, and based on the table, the painting data are written into the refresh buffer 7. For example, the intersection between the scan line LS and the circle O may be obtained by the method of the present invention and the intersection between the straight line LL and the scan line LS may be obtained by any known method such as the Presenham s method, and the data are stored in a table. It is also possible to obtain a pie chart made from an ellipse in the same manner. As described above, the present invention enables to generate a highly precise circle or ellipse, and is adapted for use in the scan conversion method since an intersection between a scan line and a curve concerned is defined as a single point but not as a plurality of points. Further, the present invention enables to generate a circle or an ellipse in a short period of time without necessitating the calculation of square roots and trigonometric functions. While the invention has been shown and described with reference to preferred embodiments thereof, it will be understood that various substitutions in form and detail may be made by those skilled in the art without departing from the scope of the invention.