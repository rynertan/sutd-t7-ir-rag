# PLL CIRCUIT

## Claims
Phasenverriegelungsschaltung PLL Schaltung mit

## Description
The invention relates to a phase locked loop PLL circuit comprising As summarized in said publication the initial acquisition of a phase locked loop when used for timing or carrier extraction is a significant practical problem, since the narrow bandwidth generally required for jitter requirements severely restricts the pulling range. In the cited prior art several methods have been used to effect the acquisition. This article further shows an arrangement of a frequency detector for the coarse regulation of a voltage controlled oscillator VCO and a phase detector for its fine adjustment. Both the phase and the frequency detector are receiving the VCO frequency signal and the data input signal. In a PLL circuit used for carrier extraction the data input signal is often interrupted e.g. due to a rather long series of zeroes or movements of a read head in a disk storage medium . As a result of the discontinuous data input signal missing data signals the PLL circuit will detune the VCO. So the PLL circuit will not quickly lock to a new data signal, although it has approximately the same frequency as the interrupted data signal. In the described PLL circuits the acquisition time is relatively long because the phase and frequency detectors regulate the VCO to its maximal or minimal oscillating frequency when the data signal is interrupted. As a result the first received new data signals will be stumbled. A phase locked loop circuit in which a digital phase comparison circuit is used is known from DE A 31 15 057. The digital comparison circuit only reacts to transitions of the data or the VCO frequency signal in one direction and is insensitive to the actual duty cycle or frequency of the incoming signals. In the known circuit no separate frequency detector is foreseen. For a proper operation of the known PLL it is necessary that both the VCO frequency signal and the data signal are present. In the before described use the data signal may be absent during a prolonged period, a situation that can not be handled satisfactorily by the known circuit. It is an object of the invention to provide a PLL circuit that will keep the oscillating frequency of the VCO near the frequency of the next incoming data signal during absence of the data signals and will generate output signals that result in a relatively ripple free control signal for the VCO. The PLL circuit according to the invention is set out in Claim 1. When data signals are absent, the phase detector will not be triggered and thus does not generate an output signal which influences the oscillating frequency of the VCO. After each comparison the phase detector generates a single polarity output signal. In general, several succeeding comparisons will result in succeeding output signals with the same polarity and can easily be filtered by simple filter means to form a relatively ripple free control signal for the VCO. A PLL as defined hereinbefore and comprising a phase detector according to the invention will be tuned to the reference frequency applied to the reference frequency input of the frequency detector. The reference frequency given be chosen as close to the clock frequency of the data signal as possible. Such provisions accelerate the locking of the PLL to the next incoming data signal after an interruption. By itself, US patent 4020422 describes a phase comparator indicating a phase difference range of n x 360 The invention will be described with reference to the following Figures, in which In Figure 1 a PLL circuit is shown which maintains the voltage controlled oscillator VCO of the phase locked loop operating near a frequency to which it will be locked even when the locking signal is absent. In this PLL curcuits it is possible to control the lock and capture range of a phase locked loop. The circuit consists of an interconnection of three principle logic circuits a phase detector 10 , a frequency detector 14 and a VCO 12 . Two resistors R1, R2 and a capacitor CF constitute a loop filter. The phase detector is a design that is insensitive to missing pulses, therefore the circuit is effective in recovering the clock from data that uses Miller, Manchester or other encoding schemes. The operation of the circuit is similar to a standard PLL circuit except that a second control source providing a reference frequency F A phase detector Referring now to Figure 2, it should be noted that the phase detector circuit If a rising edge occurs on data input DATIN, while the VCO signal on a first input VCOIN is low, flip flop 21 is set. While set, the output of flip flop 21 activates inverter 26. As a result the pump up signal PU is active. When the VCO signal on the input VCOIN goes high, the output of inverter 24 goes low resetting flip flop 21, the output of which switching off inverter 26, thus disabling the pump up signal PU . The output of inverter 24 also prevents flip flop 21 from being set by positive transitions on the data input DATIN when the VCO signal is high. If a rising edge occurs on data input DATIN while the VCO signal on input VCOIN is high, the flip flop 22 is set. On the next falling VCO edge, the output of inverter 24 goes from low to high and flip flop 23 is set, thus causing its inverting output to go low and clear flip flop 22. While flip flop 23 is set, its output activates inverter 28 and thus the pump down signal PD is active. When the VCO signal returns to its high state, the output of gate 25 goes low and flip flop 23 is cleared, deactivating the inverter 28 and the pump down signal. This logic causes the pump up signal PU to be active from a rising edge of the data signals on input DATIN that occurs while VCO signal is low until the VCO signal rises. The pump down PD is active for the full low half VCO period that follows a rising edge of the data signal which occurred during a VCO high time. Each output signal, which in a typical application is sent through a low pass filter before being used to control the frequency of a voltage controlled oscillator The detector thus disclosed has a linear relationship between phase error and pump up pulse width, but a fixed pump down pulse width for all phase errors for which the signal is generated. The effect of this operation cam be thought of as follows. A normal linear relationship between phase error for both pump up and pump down results in a phase error probability distribution that is Gaussian, centered at zero error. In the circuit illustrated in Figure 2, the resulting distribution is similar except that for a VCO with a positive characteristic the distribution is centered about a point at which the input is leading the VCO by some phase difference. The exact location is determined by the ratio of two resistors R1 and R2 connected from pump up output and pump down output to the loops s integrating capacitor CF. Figure 3 shows a first embodiment of a frequency detector 14A. A series of flip flops Q7, Q8, Q9, Q10 , a series of NOR gates 32 leading to a pair of tristate drivers 34. The two inputs are labeled F The operation of the circuit is as follows. The starting state is for all four flip flops is to be in their reset or zero state. The description that follows will show that this state will be reached regardless of any arbitrary starting state. A transition on either the F Analysis of the results of this circuit will show that when the reference frequency is greater than the VCO frequency over the course of one cycle of the reference frequency and one cycle of the VCO frequency, there will be a net pump up signal, that is the pump up width will be greater than the pump down width. When the reference frequency is less than the VCO frequency there will be net pump down. These net signals are independent of the phase difference between the reference frequency and the VCO frequency signals. Figure 4 shows a further embodiment of a frequency detector In a starting condition, all three flip flops Q4, Q5, Q6 are in a zero state, meaning that their non inverting outputs are at logical zero value, and consequently their inverting outputs are at one . The AND 42 and NOR 44 gates render the tristate driver 46 inactive, which means that it can be thought of as having a extremely high output impedance HiZ or even as an open circuit. A rising edge in the reference frequency on input F On the next rising edge on the input VCO₂, the flip flop Q6 takes the zero state over from flip flop Q5 and renders the tristate driver 46 inactive. At this instant the first state has been reached again and a new cycle of states may be started. It will be noted that the output FO₂ generates a pump up signal during a full period of the reference frequency and afterwards generates a pump down signal during the following full period of the VCO output signal. By applying these signals to the loop filter, a control voltage for the VCO