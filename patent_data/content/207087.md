# RE REGULATION CIRCUIT FOR AUTOMOBILE TACHOMETER DETECTION CIRCUIT

## Claims
Reregulierungsschaltkreis zur Verwendung mit einem Drehstrom Auflade System eines Fahrzeugs, bestehend aus einem Regler 24 , wodurch ein erstes Steuersignal Vreg zum Steuern des Erregungsstroms eines diesbezüglichen Drehstromerzeugers 10 erzeugt wird, einer an einem Drehstrom Auflader System liegenden ersten Detektorschaltung 70, 72 , wodurch erfaßt wird, daß der Ausgang des Drehstromerzeugers niedriger ist als eine vorbestimmte Höhe V

## Description
This invention relates to the field of regulation circuits for automobile alternator systems and particularly, but not exclusively, to a protection circuit as for the tachometer of a diesel powered vehicle. In some charging systems, an output is taken from one or more phases of the alternator winding and supplied to various devices which operate from an AC output signal. The tachometer is one of the more important of these, and requires an AC signal with a significant amplitude in order to provide an accurate readout of engine speed. There are certain unusual circumstances, however, which can reduce the alternator output to a level which is unusable by the tachometer circuit. For example, if the battery of the automobile is fully or nearly charged, and the load goes from very light to very heavy, e.g., by turning on the headlights, the excitation will be increased in response to the current. If, at that point, the load is removed, there will be a considerable amount of energy stored in the alternator rotor. If the vehicle is a spark ignition engine, the ignition circuit will drain off this excess energy without any problem. However, if the engine is a diesel with compression ignition , there is no equivalent means for dissipating this energy. The system, therefore, must attempt to store the energy in the battery, while the regulator will immediately reduce the field excitation to a minimum. This causes no problem within most automotive circuitry since the battery will be supplying all needed DC power. However, any circuit using the phase or AC output such as the tachometer circuit will be in trouble due to the sharply reduced alternator output. Since this problem is both infrequent and short lived, it would be preferable to prevent the loss of excitation current under these circumstances, even at the expense of slight battery overcharge. It would be advantageous if this prevention capability could be added to an existing circuit which examines the system and detects other fault conditions in the ignition system. In certain automobile markets, it is desired to provide for the detection and indication of a number of possible alternator system faults by means of a single lamp. Such a system must have, not only reliability, but essentially error free operation. That is, temporary conditions of overvoltage or undervoltage which are not due to a fault requiring service are to be ignored, and apparent lack of shaft rotation or the transient pulses which are normal to automobile ignition systems must not cause false indications. There are three main fault conditions which the system is able to detect and indicate non rotation of the alternator , overvoltage and undervoltage , and for any true fault, a lamp will be lit with a single accompanying legend such as CHECK ENGINE . It is apparent that the fault lamp should not be lit for the temporary load change as described above. Apparatus disclosed in US 4477766 prevents the false indication of a fault when a battery is overcharged due to an external condition, such as abrupt cut off of a heavy load. The apparatus ensures that when the battery becomes temporarily overcharged a constant d.c. voltage is still supplied and the fault light remains unlit. The present invention seeks to provide a simple means for preventing temporary loss of alternator excitation due to sudden and momentary loss of battery load, and to prevent a fault lamp from being illuminated under such temporary load conditions. It also seeks to provide this capability in conjunction with multifunction detector regulator with a minimum of added complexity and cost. According to the invention, a re regulation circuit for use with a vehicle alternator charging system comprises a regulator for producing a first control signal for controlling the excitation current of the alternator and first detection circuitry coupled to the alternator charging system for detecting that the output of the alternator is lower than a predetermined level. A first logic circuit is coupled to the first detection means for providing a second control signal in response to such detection, for controlling the excitation current of said alternator, and fault detection circuitry is provided coupled to the alternator charging system to generate a fault signal in response to detection of a fault in the system. A second logic circuit is coupled to the first logic circuit and the fault detection circuitry for disenabling the second control signal in response to a fault signal, both the first and second logic circuits including a latching circuit and a clock signal input for clocking the respective latching circuit in synchronism with the regulation period of the regulator, and means coupling the output of the second logic circuit to the regulator whereby the output signal of the second logic circuit is combined with the first control signal. Thus, in accordance with the invention, detection of a temporary reduction in the phase output, which is not due to a fault in the system, can be utilised to enable a second regulation loop. This second loop acts to override the normal regulation control. The field excitation is thereby maintained during a brief overvoltage of the kind described above. The fault lamp is also prevented from giving a false indication. In published European Patent Application No. 192832A a multifunction fault detector for use with the ignition system of a vehicle is disclosed. The present invention is preferably used in conjunction with the fault detector circuit. The invention will now be described by way of example and with reference to the accompanying drawings wherein Since the circuit of the present invention will typically utilize and be used with the fault detection circuit of the above referenced co pending application, the latter circuit will be described in some detail. While that specific environment is not required, in the present application the present invention can utilize output signals already provided by that circuit, whereby the feature of the present invention can be realized at little added cost. It will be apparent that, if the present invention were used in a different environment, those same signals would have to be derived independently. In the diagram of Fig. 1, an alternator system is shown which includes an alternator 10, battery 12, field coil 14 and rectifiers 16. A tap 20 is connected to one corner of a winding 18 and provides an AC output signal which will be discussed later. A Darlington circuit 22 is the drive circuit for the field coil 14 and is controlled by the output of a standard regulator circuit 24. An ignition switch 25 may be connected to couple the alternator battery output to the rest of the vehicle s electrical system not shown . The field coil 14 and its associated diode rectifier 26 are coupled to the regulator circuit 24 and to an undervoltage input terminal 30 of a logic circuit 32. The logic circuit is shown in and explained with respect to Fig. 2. Another input to the regulator circuit 24 comes from a point 34 on the alternator 10. The signal at this point is sometimes termed the alternator sense signal and is a composite of the rectifier 16 output and the battery 12 voltage. A voltage reference source 36 is coupled to the regulator circuit 24 and to three inputs 38A, 38B and 38C of the logic circuit 32. A clock generator 40 is coupled to the regulator 24 and to two inputs 42,44 of the logic circuit 32. The tap 20 on the alternator winding 18 is coupled to an input 46 of the logic circuit. The tap 20 is also a desirable connection point for a tachometer circuit 47. Since the tachometer provides a readout of engine speed, it requires a dependable AC input signal which is proportional to engine speed. This signal can be the AC signal from the alternator of the charging system unless the AC signal goes too low to be usable in the circuit while the engine is still running. An output from the regulator 24 is coupled to an overvoltage input 48 of the logic circuit 32. Another input 50 to the logic circuit 32 comes from a terminal 52 on the collector of the Darlington drive circuit 22. Terminals 54A,54B from the logic circuit 32 are connected to a second Darlington circuit 56 which controls an indicator 58, typically a lamp. In Fig. 2, the logic circuit 32 is shown with the various input and output terminals numbered as in Fig. 1. The logic circuit was designed to be contained on an integrated circuit chip which, preferably, will include most of the regulator control ciruitry. Thus, for example, few capacitors are required for this circuit. The undervoltage input terminal 30 is coupled through a resistor network R1, R2 to an undervoltage comparator 62. A second input to the comparator 62 comes from the reference terminal 38A, and the output of the comparator is coupled to a NAND gate 64. The overvoltage terminal 48 is coupled through a network R3, R4 to an overvoltage comparator 66. A second input to the comparator 66 comes from the reference terminal 38B, and the output of the comparator is coupled to a NAND gate 68. The tap 20 on the winding 18 is coupled to an input 46 of the logic circuit 32. Terminal 46 is coupled through a resistor network R5,R6 to an input of a rotation comparator 70. A second input to the comparator comes from the reference terminal 38C, and the comparator output is coupled to a differentiator 72. The differentiator not only provides AC coupling, eliminating the possibility of error due to rectifier leakage, but also serves as a frequency doubler which may be necessary in some applications. The output of the differentiator is coupled to the set input of a flip flop 74, and the terminal 42 feeds a clock pulse P1 to the reset input during each regulation period. The flip flop 74 output is coupled to one input of a NAND gate 76. Second and third inputs to the NAND 76 come from the NAND gates 64 and 68, respectively. The logic circuit input terminal 50, which comes from the collector terminal 52 of the Darlington drive circuit 22, is coupled through a resistor network R9,R10 to the base of a transistor T1, the collector of which is coupled to a NAND gate 80. The output of the NAND 80 is coupled to a second input of the NAND 64, and also to an input of a NAND gate 82. The output of NAND 82 is coupled to a second input of the NAND 68. A flip flop 84, which gets its data input from the output of the NAND 76, has its Q output coupled to the indicator control circuit 56. A clock pulse P2 from the clock generator is coupled by way of the terminal 44 to the clock input of the flip flop 84. The not Q output of the flip flop 84 is coupled to an input of a NAND 90, the second input of which comes from the not Q output The operation of the logic circuit 32 will be explained in connection with the waveform charts of Figs. 3 5 which may be seen to relate to the detection of engine faults as mentioned above. The first portion of each chart shows an apparent fault condition, while the second part of the chart represents an actual fault. Fig. 3 is related to the detection of rotation non rotation which, in actuality, can mean any of the following In the circuit of Fig. 2, a signal comes from the alternator winding 18 by way of a tap 20. This signal is represented by R in Fig. 3. This waveform will be something between a relatively pure sine wave 100 duty cycle and a very clipped wave. The minimum duty cycle is never zero, even with maximum regulation. In order to avoid problems with DC voltage due to rectifier leakage, this signal is coupled through the comparator 70 which also has hysteresis for noise suppression. The output of the comparator 70 is the signal A . This signal is coupled through the differentiator 72 which is made up of I²L logic gates and which provides a negative output pulse for each transition as seen in signal B . Whenever there is at least one pulse B during the regulate period, the flip flop 74 will be set, then reset by the subsequent pulse P1 as seen at a point 87 in Fig. 3. The output C of the flip flop 74 is then coupled through the NAND 76 and latched by the flip flop 84. Then, clocked by the next pulse P2 from terminal 44, the flip flop 84 output D is coupled to the lamp control circuit 56. In this portion, since D is zero, the lamp will not be lit, indicating that rotation is still present. The second half of Fig. 3 shows the signals for a true non rotation condition. When the signal R from the alternator goes low and stays low, the output A of the comparator 70 goes high and stays high, and the differentiated signal B goes high and stays high. With no pulse from the differentiator 72 to set the flip flop 74, the Q output signal C again goes low and, at the next pulse P2, the D signal is latched high, thus indicating non rotation . Fig. 4 shows the timing diagrams relating to the detection of an overvoltage condition. Here the problem is to distinguish between a transient voltage rise and a true overvoltage condition. A true fault could be caused by one of the following A transient condition could be caused by a heavy load being removed while the battery was fully charged. In the case of a real fault, the signal H from the NAND 82 will be high, as will be explained later. Therefore, if any overvoltage is detected while signal H is high, a true fault condition is present. In the case of a transient overvoltage condition, when the signal coming from the regulator output terminal 48 into the comparator 66 is higher than the threshold point of the reference voltage on terminal 38B, the output signal G of the comparator goes high. When signal G is NANDed with signal H in NAND gate 68, the result is signal E . When signal E is coupled through the inverting gate, NAND 76, to the data input of the flip flop 84, the Q output signal D stays low when clocked by the signal P2, indicating no fault . In the second part of Fig. 4, again the regulator output signal rises until it passes the threshold of the reference voltage, and the signal G goes high. In this instance, however, the signal H is also high since a true fault of some sort exists. The resultant NANDed signal E goes low and stays low. When E is inverted by NAND 76 and coupled to the data input of the flip flop 84, the flip flop output signal D goes high at the clock pulse P2, accurately indicating a fault condition. Returning now to the signal H and the circuit including NAND gates 80, 82, and transistor T1, the signal received at the terminal 50 is representative of the status of the Darlington driver circuit 22. Since, in each of the true overvoltage conditions, the Darlington collector voltage will be continuously low, the input voltage at the terminal 50 will be low. In the event of a transient overvoltage, the Darlington collector voltage will be high since the circuit will be off at the end of the regulate period. This is proper because the regulator will be working correctly to reduce the output voltage. In Fig. 5, undervoltage conditions are shown the first part showing a low voltage caused by an overload condition, and the second part showing low voltage caused by a true fault. The latter condition would likely be the result of an open circuit in the alternator battery connection. If the regulator output voltage drops below the reference voltage at the comparator 62 input, the comparator output signal I would go high. When signal I is NANDed with the inverse of signal H in NAND 64, the resultant output signal is the signal F . Since the not H signal stays low in the case of a transient overvoltage, due to the fact that the Darlington drive circuit is on and the system is operating at full capacity, the signal F stays high. The D signal also stays low, indicating no fault and the lamp 58 is not lit. In the second part of Fig. 5, again the regulator output voltage drops but, in this instance, due to a true fault. Now, when the threshold is crossed and signal I goes high, the not H signal is also high and the output F of the NAND 64 goes low. The signal F , coupled through the NAND 76 to the flip flop 84, will cause the output signal D of the flip flop to go high, enabling the indicator circuit 56 and lighting the fault lamp 58. Against the background of the above described system and the signals it derives, the operation of the re regulation circuit will be described in more detail with respect to the timing diagram of Fig. 6. The first portion of Fig. 6 illustrates the normal regulation mode of the system. The phase or AC input signal from the tap 20 of the alternator 10 via the terminal 46 may be a square wave as shown here for simplicity in the drawing, a sine wave, or a clipped sine wave. The threshold or reference voltage V During cycle 1, the whole alternator charging system is working normally. During cycle 2, an overvoltage condition has begun, due to some sudden decrease in load while the battery is nearly or fully charged. This rise in V The output of the flip flop 74 provides an indication that there is present a signal of sufficient amplitude to trigger the comparator 70 and the differentiator 72. Thus the flip flop 74 output C can be used to override the normal regulation signal V The re regulation operation as described so far would be quite satisfactory as long as no real fault exists. If, however, the phase connection from tap 20 became disconnected, the circuit could cause a problem since the re regulation circuit would attempt to control the regulator 24, resulting in a potentially serious overvoltage condition. This eventuality has been taken care of by further circuitry. The actual fault situation is illustrated in cycles 6 7 of Fig. 6. The not Q output of the flip flop 84 indicating a true fault in the system will shut down the re regulation circuit after only one cycle of overload, and the fault lamp will be illuminated by the lamp circuit 56. As seen in cycle 8, when the transient overvoltage decays, normal regulation function returns. The re regulation circuit is thus seen to be fail safe and cannot generate an overvoltage due to an externally caused, apparent fault . Thus, there has been shown and described a circuit for preventing inaccuracy in or disablement of the tachometer circuit of a vehicle due to a temporary overvoltage condition. The fault indicator is also prevented from being activated under the temporary conditions. The circuit works in conjunction with a multi function fault detector circuit whereby the temporary overvoltage condition can override the normal regulation control signal as long as no actual fault appears. The entire circuit is particularly adaptable to embodiment on an integrated circuit chip, due to its simplicity and almost total lack of capacitors.