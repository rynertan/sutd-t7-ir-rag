# SEMICONDUCTOR MEMORY DEVICE WITH AN ERROR CORRECTION FUNCTION

## Claims
Halbleiterspeichervorrichtung aufweisend

## Description
The present invention relates to a semiconductor memory device wherein a data storage circuit including a memory cell and an error correction circuit for correcting error data caused by soft errors are formed on a single semiconductor chip and, more particularly, to a semiconductor memory device with an error correction function used in a computer which can reliably prevent storage of data errors. Semiconductor memory devices with a function for detecting erroneous data storage and correcting the detected errors do so in accordance with various methods. Basically, each device comprises one or more redundant bit memory cells in addition to a given number of memory cells. In a data write mode, error correction data calculated by a given rule is written in advance not only in a memory cell group for storing normal data but also in the redundant bit memory cell. Furthermore, in a data read mode, storage data in the memory cell group corresponding to an input address and in the redundant bit memory cell arranged corresponding thereto are read out therefrom and checked. If no error occurs in the storage data in the memory cell group, the data is output without being modified, and if an error occurs, the data is corrected and then output. GB A 2 075 730 describes a memory system using error detection during refresh. Error correction is, however, carried out at a subsequent time requiring a further error detection and an error correction procedure. Such a conventional semiconductor memory device has the following drawbacks. First, such a method for checking memory cells for storage data errors in the data read mode only degrades reliablity. In this method, in a memory cell which has not been subjected to a data read out operation for a long period of time after the data was written therein, data errors occur increasingly often. Therefore, data errors easily occur in more memory cells than the number of bits which can be corrected by an error correction circuit. A second drawback of the conventional memory device is a prolonged data write read period. In the data write mode, data is written in normal data storage memory cells and, at the same time, error correction data calculated by a correction circuit must be written in the redundant bit memory cell in the identical word block. Furthermore, in the data read mode, data read out from, respectively, the memory cell group and the redundant bit memory cell are checked by a decoder. If error data is found, it must be corrected by the correction circuit. Thus, extra time in the data read write modes prevents realization of high speed computers. US A 4 412 314 describes a semiconductor memory having an internal refresh cycle without error detection correction or an external refresh cycle with error detection correction. The device is provided with an error detection correction circuit which operates on all data read out of the memory. When the refresh cycle is generated externally, the error detection correction circuit, therefore, is used both for the refresh cycle and for normally read data. If the refresh cycle is generated internally, the data bypasses the error detection correction circuit. In this case, the data is only corrected when an external read signal is given. The present invention has been made in consideration of the above situation and has as its object to provide a semiconductor memory device with an error correction function which can prevent accumulation of storage data errors due to soft errors, and which has a short data read access time like a normal storage device with no error correction function. According to the present invention, there is provided a semiconductor memory device comprising a memory cell array data read write means for reading out storage data from said memory cell array in data read, data write and refresh modes and for rewriting data thereafter data output means for outputting, to an external circuit, data which is read out in the data read mode by said data read write means and error detection correction means for causing the data read out from said data read write means to be subjected to error detection correction and for supplying the error corrected data to said data read write means as data for rewriting, in the data read, write and refresh modes characterized in that said data output means outputs data not subjected to error detection correction by said error detection correction means. This invention can be more fully understood from the following detailed description when taken in conjunction with the accompanying drawings, in which Fig. 1 is a block diagram showing an overall arrangement when the present invention is applied to a dynamic RAM. In Fig. 1, reference numerals 11A and 11B denote memory cell arrays, each consisting of a plurality of memory cells arranged in matrix in row and column directions. Reference numerals 12A and 12B are row decoders for selecting a column of memory cells from memory cell arrays 11A and 11B in response to n bit row addresses RAl to RAn input from an external circuit. Reference numeral 13 denotes a column decoder sense amplifier which selects one or more memory cells from a column selected by row decoder 12A or 12B in response to n bit column addresses OCAl to OCAn input from an external circuit or n m bit internal column addresses ICA1 to ICA n m , and performs the data read write operation with respect to the selected memory cells. Reference numeral 14 denotes an output buffer which externally outputs, as data Dout, 1 bit of data read out from memory cell arrays 11A and 11B by amplifier 13 in the data read mode. Reference numeral 15 denotes a reference clock generator for generating reference clock signal based on row address strobe signal Amplifier 13 and circuits 18 receive write enable signal Fig. 2 is a detailed circuit diagram of memory cell arrays 11A and 11B together with row decoders 12A and 12B, and column decoder sense amplifier 13. When the present invention is applied to a dynamic RAM, addresses are multiplexed, and row and column addresses are supplied through an identical input terminal. For this reason, the bit numbers of the row and column address must inevitably be the same. For example, when the row and column addresses have an n bit configuration, 2 In this memory device, when row address strobe signal Amplifier 13 is connected to a pair of data input output lines I O and The operation of the memory device with the above arrangement will now be described in detail. The memory device of this embodiment consists of three basic operation modes, i.e., refresh, data read, and data write modes. In the refresh mode, data in memory cells in arrays 11A and 11B is refreshed, while error detection correction of storage data is performed at the same time. The data refresh operation is performed as shown in Fig. 3, such that strobe signal When all word lines WL are selected within predetermined time T, first word line WL is again selected. Note that time T must be shorter than a time within which a signal charge accumulated in each memory cell decreases by a slight level which cannot be sensed by the sense amplifier. Therefore, in the dynamic RAM, the refresh operation is performed during an interval between or during the data read or write operations. In this embodiment, in addition to the refresh operation, one of a plurality of word blocks 23 on selected word line WL in the refresh mode is selected, and the cell data therein is supplied to circuit 19 through lines i o and In this case, the row addresses are cyclically generated by an external circuit e.g., a counter circuit . For this reason, all word lines WL are selected once per cycle. And, all Such column addresses ICA1 to ICA n m are generated from reference clock generator 15 and counter circuit 16. Generator 15 generates reference clock signal at every leading edge of strobe signal Fig. 4 shows a detailed arrangement of counter circuit 16. Circuit 16 consists of a multi staged series circuit of 2n m binary counters 30, and receives signal by counter 30 at the first stage. With this arrangement, upper n m bit count output signals Cm 1 to Cn are produced as column addresses ICA1 to ICA n m . Note that binary counter 30 as shown in Fig. 5 is known to those skilled in the art. Referring to Fig. 5, reference symbols Cj l and Fig. 6 is a timing chart when n 4 and m 1 in the counter circuit in Fig. 4, and 5 binary counters are used. In this case, internal column addresses ICA1 and ICA2 2 bits shown in Fig. 6 are input to amplifier 13. Since internal column addresses ICA1 and ICA2 have 2 bits, 4 combinations of levels thereof can be accomplished. More specifically, ICA1 ICA2 LOW, ICA1 HIGH and ICA2 LOW, ICA1 LOW and ICA2 HIGH, and ICA1 ICA2 HIGH. Meanwhile, when n 4 and m 1, 8 word lines WL1 to WL8 are provided in memory cell arrays 11A and 11B, and 4 word blocks 23, each including two normal data storage memory cells, are provided along each word line WL. The total number of word blocks is 32. In this case, row addresses RA1 to RA3 3 bits are cyclically input from outside the chip at the trailing edge of strobe signal The data read operation of the dynamic RAM is performed in accordance with a timing chart shown in Fig. 8. More specifically, this operation begins such that a row address is fetched in the chip at the trailing edge of strobe signal An error contained in readout data will be examined. In the device of this embodiment, storage data in memory cells in arrays 11A and 11B is periodically corrected using the refresh mode. Therefore, it is considered that almost no errors should be found in the readout data. In other words, it is expected that readout data errors will be found only when an Î± ray incident on a portion of arrays 11A and 11B near a certain cell causes a soft error in the time since the last error correction operation was performed. The probability of such a soft error is expected to be very low. In the device of this embodiment, in the data read mode, word data in one word block 23 including memory cells corresponding to row addresses RAl to RAn and column addresses OCAl to OCAn is subjected to error detection correction. However, output data Dout is generated from amplifier 13 through lines I O and Having the above function, the device of this embodiment requires an access time in the data read mode no longer than that in a normal dynamic RAM having no error detection correction circuit. Fig. 9 shows a detailed arrangement of clock generator 15 which generates clock signal in synchronism with row address strobe signal Similarly, MOSFETs 47 to 49 and inverters 50 and 51 constitute pulse generator 52, which generates LOW level pulse signal CP at the trailing edge of strobe signal Pulse signals RP and CP respectively produced from generators 46 and 52 are input to flip flop 55 consisting of two NAND gates 53 and 54. P channel MOSFET 56 and three N channel MOSFETs 57 to 59 are serially inserted between power sources Vcc and Vss. The gate of MOSFET 56 receives potential Vss to be kept ON. The gate of MOSFET 57 receives output signal Q from flip flop 55. N channel MOSFET 60 is connected between the gate of MOSFET 57 and power source Vss The gate of MOSFET 60 receives strobe signal Figs. 10 and 11 are timing charts showing the operation of clock generator 15 with the arrangement shown in Fig. 9. In the timing chart of Fig. 10, only strobe signal When signal In this way, generator 15 generates LOW level clock signal each time signal In the timing chart of Fig. 11, both signals When word data is read out from arrays 11A and 11B and an error in the data including an accessed bit is to be detected and corrected, an external column address must have priority over an internal column address. In order to accomplish this, signal The data write mode will now be described with reference to a timing chart shown in Fig. 12. The data write operation in the dynamic RAM begins when a row address is fetched in the chip at the trailing edge of signal In the data write mode, after word data including memory cells specified by the external row and column addresses is read out, it must be rewritten. For this reason, a data write time is prolonged when compared to a conventional dynamic RAM having no error detection correction function. However, the data write operation in a dynamic RAM has no access time, unlike the data read operation. More specifically, the data write time is defined only by a cycle time from when signal In a conventional memory device wherein word data accessed in the data read mode is corrected, correct data can be output unless the number of errors exceeds the number of bits which can be corrected by an allocated error detection correction function. However, in such a memory device, the data read time is inevitably delayed. In contrast to this, in the device of this embodiment, since data accessed in the data read mode is output without being subjected to error correction, the data read time is not delayed. In this method, correct data can be read out unless a soft error occurs upon irradiation of an Î± ray between the time the data is corrected in the refresh mode and the time it is next read out. It is assumed that the number of soft errors in identical word data will not exceed an error correction limit. A data error probability in the device of this embodiment will now be quantitatively analyzed. Since the device of this embodiment corrects data in the refresh mode, the following operation is assumed. The refresh operation is performed with respect to a single memory cell at each time tc correction time . If data error is found during this operation, it is corrected. The data write operation is performed at each time tw write time , and the data read operation is performed between two data write operations. Probability Pe of data error caused by soft errors is expressed by In the device of this embodiment, a soft error occurs upon irradiation of an Î± ray between the time an accessed memory cell is corrected and the time it is next read accessed. Therefore, Rc 1 cannot be obtained although the number of errors in identical word data is assumed not to exceed the capacity of error correction. When data is written in a cell and the cell is left unchanged for time Meanwhile, Rc, tc, and tw have the following relationships Î² is expressed by known parameters. More specifically, in a memory device which has no correction circuit i.e., Rc O , and has N memory cells, after time T has passed, a value of Î² is determined such that data in F cells are wrong. From equations 1 and 2, and Rc 0, equation 5 is established Note that Note that the present invention is not limited to the above embodiment. For example, in the above embodiment, the present invention is applied to a dynamic RAM. In general, a dynamic RAM requires a refresh operation so as to recover lost storage data due to leakage of a charge accumulated in cells constituted by small capacitors. In the refresh mode, row addresses are periodically and cyclically supplied to raise a potential of word lines. Thereby, storage data in the cells at an identical row address is sensed by a sense amplifier to be temporarily latched, and is rewritten in the original cell to refresh the data. Therefore, the error correction operation can be easily performed together with the refresh operation. However, in a static RAM which needs no refresh operation, if row addresses are periodically and cyclically supplied, an operation for correcting an error in word data having a given number of bits can be performed independently in addition to the data read and write operations, without using a refresh operation. According to the present invention as described above, a semiconductor memory device which can prevent storage data errors due to soft errors from being accumulated and has a data read time, no longer than that of a normal memory device having no error correction function, can be provided.