# Motor monitor signal analysis system.

## Abstract
A magnetic field motor monitor 10 has a signal analysis system comprising an analog to digital converter 13 for taking instantaneous samples of the motor magnetic field at accurately determined and equally spaced times synchronised with the line frequency driving the motor 12 , a plurality of separate memories, means for adding the current instantaneous sample value to or subtracting it from the contents of each separate memory, addition or subtraction taking place in dependence on which of the samples is being processed, and means for providing from the contents of the memories signals indicative of the amplitudes of respective harmonically related frequency components of the motor magnetic field.

## Claims
1. A magnetic field motor monitor having a signal analysis system comprising means for taking instantaneous samples of the motor magnetic field at accurately determined and equally spaced times synchronised with the line frequency driving the motor, a plurality of separate memories, means for adding the current instantaneous sample value to or subtracting it from the contents of each separate memory, addition or subtraction taking place in dependence on which of the samples is being processed, and means for providing from the contents of the memories signals indicative of the amplitudes of respective harmonically related frequency components of the motor magnetic field.

## Description
This invention relates to apparatus for monitoring the performance of an electric motor. It is known to monitor the performance of an electric motor by detecting stray magnetic flux from the motor and providing corresponding electrical signals, performing a frequency analysis of the flux signals and providing diagnostic information in dependence on variations in the flux signals. For example, for a motor powered by a 50 Hz supply, the amplitude of the flux signal components at 25, 50, 100 and 150 Hz can be monitored and an alarm provided in the event of a large and sudden change. The amplitude of one or more of these components might change by of the order of 100 times when a major fault occurs, such as incipient rotor bar fracture. A known frequency analysis system employs narrow band filters for separating the individual frequency components. However, such devices are costly and are subject to performance degradation with changing temperature and with age they also require extensive calibration by skilled personnel. Another known system involves sampling the magnetic flux to determine its amplitude at a number of points within a line mains cycle and processing the samples with a digital processor to determine the amplitudes of the individual frequency components of interest. Known digital techniques employ correlation or fast Fourier transforms. Apparatus using these techniques is costly because of the storage requirements and high speed arithmetic multiplication functions which must be carried out. It is an object of this invention to provide a motor monitor which is reliable and effective but of low cost. According to the invention there is provided a magnetic field motor monitor having a signal analysis system comprising means for taking instantaneous samples of the motor magnetic field at accurately determined and equally spaced times synchronised with the line frequency driving the motor, a plurality of separate memories, means for adding the current instantaneous sample value to or subtracting it from the contents of each separate memory, addition or subtraction taking place in dependence on which of the samples is being processed, and means for providing from the contents of the memories signals indicative of the amplitudes of respective harmonically related frequency components of the motor magnetic field. A fixed number of equally spaced samples are taken in each cycle of the line supply or a sub harmonic thereof, and the number of the sample within the sequence determines whether addition or subtraction should take place into the respective memories. Since only addition and subtraction operations are performed, the apparatus can be constructed using simple components of low cost. The number of memories is preferably twice the number of frequency components the amplitudes of which are to be determined and the system includes means for providing from the contents of the memories signals representing in phase and quadrature components of these frequencies and for determining the modulus of the in phase and quadrature components. Preferably, eight memories are provided, the accumulated memory contents representing the in phase and quadrature components of four harmonically related frequencies. The frequencies are preferably 0.5, 1, 2 and 3 times the line frequency, i.e. 25, 50, 100 and 150 Hz for a 50 Hz line frequency or 30, 60, 120 and 180 Hz for a 60 Hz line frequency and in order to provide sufficient accuracy a minimum of 48 samples are preferably taken in each sequence, i.e. samples are taken every 833 microseconds 50 Hz or every 694 microseconds 60 Hz . The memories are preferably digital memories, and an analogue to digital converter is provided to convert sampled instantaneous values of the flux into corresponding digital values. Whether the samples are added to or subtracted from the respective memories is preferably determined by a circuit which has the effect of multiplying the samples by the appropriate set of Walsh functions. For example, the lst to 24th samples might be added to the first register which represents the in phase component at the fundamental frequency, and the 25th to 48th samples subtracted therefrom. For the quadrature component at the fundamental frequency samples 13 to 36 would be added to the second memory and samples 1 to 12 and 37 to 38 subtracted therefrom. Similarly, for the in phase component of the sixth harmonic, samples 1 to 4, 9 to 12, 17 to 20, 25 to 28, 33 to 36 and 41 to 44 would be added to the seventh memory and samples 5 to 8, 13 to 16, 21 to 24, 29 to 32, 37 to 40 and 45 to 48 would be subtracted therefrom. Preferably a register having the same number of bits as there are memories is arranged to hold a status word the individual bits of which represent whether the next sample is to be added or subtracted into the respective registers. At each sample point one or more of the bits may be changed so that addition or subtraction into the memories takes place as appropriate. This arrangement has the advantage that the status word can control the addition or subtraction operation in a simple logical manner and the circuit can be implemented simply. The contents of the memories may represent respective in phase and quadrature components of single ones of the chosen harmonically related frequencies however, it is within the scope of the invention for one or more of the memories to accumulate a value dependent on more than one of the frequency components. For example, where two frequency components have an odd harmonic relation, such as the fundamental and the third harmonic, the accumulated value in the register corresponding to the lower frequency may be dependent also on the size of the higher frequency component. With the components mentioned above, one of the accumulated values may represent the amplitude of the fundamental frequency plus one third of the amplitude of the third harmonic. It may therefore be necessary to apply an appropriate correction to obtain a value representative of purely the lower frequency component. In a further development of the invention, the contents of the memories represent in phase and quadrature components of different frequencies, if necessary after correction as mentioned above and circuitry is provided for determining the modulus of the two components at each frequency using only addition, subtraction and shifting operations. The determination of the modulus the square root of the sum of the squares of the two components is a difficult and lengthy operation in digital equipment, even in quite sophisticated microprocessors, because of the need to provide multiplication and square root functions. A look up table becomes excessively large for all but very modest resolutions of the input arguments. A small look up table with linear interpolation is a possible solution but the computational complexity remains relatively high. We propose to estimate the modulus z x² y² It can be determined that the maximum error by using this procedure is of the order of 7.5 which is quite acceptable in a motor monitor where only gross changes in the individual frequency components are to be detected. The advantage of this procedure is that only addition, subtraction and shifting are required the values y 2, y 4 and y 8 can be calculated by shifts of 1, 2 or 3 binary places, the values x 4 and x 8 can likewise be determined by shifts and the values 3x 4 and 7x 8 can be calculated by subtracting x 4 and x 8 from x, respectively. This arrangement enables the modulus to be determined with sufficient accuracy but in apparatus which does not require a multiplication function. The invention can be embodied using hard wired logical components, particularly adders and shift registers, but preferably a suitably programmed microprocessor is employed. An embodiment of the invention will now be described by way of example and with reference to the accompanying drawings, in which Referring to the drawings, the motor monitor 10 comprises a coil 11 which may be positioned so as to detect stray magnetic flux from a motor 12. Flux signals from the coil 11 are supplied to an analogue to digital converter 13 which supplies digital representations of the flux signals to a microprocessor 14 when commanded to do so by the microprocessor. A type 8022 or 68L05 microprocessor is suitable for this application. A line signal which powers the motor 12 is supplied to a synchronisation circuit 15 which operates to synchronise the microprocessor clock pulses with the line signal. In operation, the microprocessor commands the analogue to digital converter to supply digital signals representing samples of the magnetic flux at instants accurately related to the line cycle. For example, a sample may be taken every 15 of the line cycle to provide 48 samples in every two line cycles. The microprocessor performs calculations to determine the amplitudes of various frequency components of the flux signals as will be described and monitors changes in these amplitudes to provide diagnostic information which is displayed on a display 16. Fig. 2 shows in schematic form the signal analysis operations performed by the microprocessor 14. A plurality of accumulators A1I, A1Q, A2I, A2Q, A4I, A4Q, A6I and A6Q are provided for the in phase and quadrature components of the first, second, fourth and sixth order frequencies, respectively. The magnetic flux is sampled by analogue to digital converter 13 every 15 of the line signal and at each sample the detected digital value is supplied to the accumulators. The sample may be simply added to the contents of the accumulator or it may first be complemented at 20 and then added to the respective accumulator. Whether a sample value is complemented before adding to the respective accumulators is determined by a status register 21 which contains an eight bit status word. Each bit controls the complementing function for one of the accumulators. This function may easily be implemented in the 8022 or 68L05 microprocessor as it is able to address, test and complement bits individually in this register. The resulting totals in each pair of in phase and quadrature accumulators are combined at 22 to determine their modulus. The resulting values represent the amplitudes of the components of the magnetic field at 25 Hz, 50 Hz, 100 Hz and 150 Hz for a 50 Hz line frequency and these values are monitored by a monitor circuit 23 which provides an output when a significant change is detected. An example of the sequence of operations under the control of clock control 24 might be as follows a first sample is read and added to the accumulators A1I, A2I, A4I and A6I and complemented and added to the accumulators A1Q, A2Q, A4Q and A6Q. A second sample is read after 15 of the line cycle and added or complemented and added to the accumulators as before. The last bit of the word in the status register 21 is then complemented, i.e. reversed, and so when the third sample is taken the same addition and complementing and addition operations take place except that the sample is added to accumulator A6Q without being complemented. The sixth bit of the status word is then reversed and so on the fourth sample the same operations take place except that the sample is added to register A4Q without being complemented. Similar reversals of the bits of the status register are made to control the complementing operations until 48 samples have been taken over a period of two mains cycles. The reversals of the bits of the status register 21 on the sequential samples time slots are shown in figure 3. It can be seen that these are equivalent to the appropriate set of Walsh functions. After one or more sequences of 48 samples have been processed as described above the contents of accumulators A1I and A1Q are combined to derive the modulus and hence the amplitude of the 25 Hz component. Similarly, the amplitudes of the 100 Hz and 150 Hz components are determined. Because of the odd harmonic relation between the second and sixth order components, the contents of accumulators A2I and A2Q are influenced by the respective amplitudes of the in phase and quadrature components of the sixth order component in fact the contents of register A2I represents the in phase 50 Hz component plus one third of the in phase 150 Hz component, and similarly for register A2Q with the quadrature components. Therefore in the case of the 50 Hz component a correction is carried out by subtracting one third of the 150 Hz component at stage 25. Fig. 4 is a state diagram showing which bits of the status register 21 are reversed in each time slot. The capital letters represent a reversal of the correspondingly lettered bits of the status word where bit It will be appreciated that the control of the addition and subtraction operations into the accumulators may be performed by other means, such as by employing a table of status or control words for the respective states in the sequence. Any procedure which adds or subtracts the samples in accordance with the values shown in Fig. 3 may be used but the procedure described is particularly convenient to implement in a low cost microprocessor. The procedure described has the advantage that it requires only a small amount of storage as compared, for example, to an arrangement in which all of the samples in one sequence are stored and are subsequently processed in accordance with formulae such as the following The sampled values may be added to the accumulators for a number of line cycles before subsequent analysis is carried out. The number, e.g. 25, is suitably chosen to provide improved noise rejection whilst retaining a sufficiently rapid detection of motor faults. As mentioned above, the invention provides a simple method of determining the modulus in step 22. The two arguments x and y are arranged such that x is the larger and the signs of x and y are discarded. The modulus is calculated as