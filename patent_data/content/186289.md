# Electronic ignition system for an internal combustion engine.

## Abstract
An i.c. engine ignition system includes a mechanically driven transducer 10 , zero crossings in the output signal of which mark the required spark instants. The output signal of the transducer is summed with the output of a bias voltage generator 12 and the sum is compared with a fixed reference voltage VREF by a first comparator A1. Zero crossing in the transducer output signal are detected by a second comparator A2. Edge detectors E1, E2 detect rising and falling edges respectively of the outputs from the comparators A1 and A2 and control turning on and interruption of current in ignition coil 14 via an electronic switch 13 . The bias voltage generator is part of a closed loop dwell control, which is disabled at low engine speeds. A minimum coil off timer circuit M operates when the switch 13 is triggered off. The control circuit also includes means for turning switch 13 on if the output of the output of comparator A1 is already high when the timer period expires. Initiation of the timer period by comparator A1 is prevented if the switch 13 is already on and timer period initiation by the comparator A2 is prevented if the switch means is already off.

## Claims
CLAIMS 1. An internal combustion engine mechanically timed electronic ignition system comprising a variable reluctance transducer driven by the engine and including winding which produces an output waveform having zero crossings coinciding with the desired instants of. ignition sparks and a control circuit connected to said winding and controlling current flow in an ignition coil, said control circuit comprising first and second comparators, bias voltage generating means, switch means which is triggered on by the first comparator to commence coil current flow when the combination of the bias voltage generated by said bias voltage generating means and the transducer output signal traverses a threshold value in one direction and which is triggered off by the second comparator to interrupt current flow in the coil when the transducer output signal traverses a threshold value in the opposite direction, said bias voltage generating means forming part of a closed loop dwell control which is operated at higher running speeds of the engine, but disabled at lower engine speeds, and a minimum coil off timer circuit operating when the switch is triggered off with the improvement that the control circuit includes a means for turning on the switch means if the output of the first comparator is already in the state to which it is driven following traversal past said reference voltage in said one direction at the expiry of the minimum coil off timer period b means for preventing initiation of the timer period by the first comparator if the switch means is already on, and c means for preventing initiation of the timer period by the second comparator if the switch means is already off. 2. An ignition system as claimed in claim 1 in which means are also provided for preventing turning on of the switch means at the expiry of the timer period when the closed loop dwell control is disabled. 3. An ignition system as claimed in claim 2 in which said inhibition means operates by setting the bias voltage to a negative value prior to and holding it at a negative value up to the expiry of the timer period.

## Description
ELECTRONIC IGNITION SYSTEM FOR AN INTERNAL COMBUSTION ENGINE.This invention relates to a mechanically timed electronic ignition system for an internal combustion engine.French Patent Application No. 8017811 of 13th August 1980 discloses a ignition system of the kind in which there is used a variable reluctance transducer of known type which is mechanically operated so as to produce an output waveform having zero crossings coinciding with the desired instants of ignition sparks. A winding of the transducer is connected by a passive circuit to voltage comparator means which form a part of an integrated circuit. At cranking speeds i.e. during engine starting the output of the winding is compared with a fixed threshold and the output of the comparator means is used to determine both the commencement and termination of current flow in an ignition coil controlled by the integrated circuit.More particularly the invention is concerned with the known kind of system in which there is a control circuit comprising first and second comparators, bias voltage generating means, switch means which is triggered on by the first comparator to commence coil current flow when the combination of the bias voltage generated by said bias voltage generating means and the transducer output signal traverses a threshold value in one direction and which is triggered off by the second comparator to interrupt current flow in the coil when the transducer output signal traverses a threshold value in the opposite direction, said bias voltage generating means forming part of a closed loop dwell control which is operated at higher running speeds of the engine, but disabled at lower engine spaeds, and a minimum coil off timer circuit operating when the switch is triggered off.Various problems arise, in use, with a system as defined above as disclosed in detail hereinafter. It is an object of the present invention to provide an ignition system in which these problems are substantially overcome.In accordance with the present invention the control circuit includes a means for turning on the switch means if the output of the first comparator is already in the state to which it is driven following traversal past said reference voltage in said one direction at the expiry of the minimum coil off timer period b means for preventing initiation of the timer period by the first comparator if the switch means is already on, and c means for preventing initiation of the timer period by the second comparator if the switch means is already off.Preferably inhibition means are provided for preventing turning on of the switch means at the expiry of the timer period when the closed loop dwell control is disabled. Such means may operate by setting the bias voltage to a negative value prior to and holding the bias voltage at a negative value up to the expiry of the timer period.The accompanying drawings show the application of one example of the invention to an ignition system,Figure 1 being a diagram of the system Figure 2 being a graph showing the output waveform of the transducer, that of the control circuit, and the waveform of a signal contribution provided by a transient feedback path andFigure 3 being a detailed diagram of logic circuitry included in the control circuit.A variable reluctance pickup winding 10 has its two ends connected via two resistors R1, R2 to two terminals 12 of an integrated circuit 11, a load resistor R3 being connected across the winding 10.Within the i.c. 11 the terminal 12 is connected by a resistor R4 to the non inverting inputs of two voltage comparators A1 and A2. The inverting input of comparator A1 is connected to a reference voltage source VREF and the inverting input of comparator A2 is connected to the terminal w via a resistor R5. A voltage follower 12 has its output connected to the inverting input of comparator A2. The input of the voltage follower 12 is connected to a terminal 10 of the i.c. 11, which terminal is connected by a capacitorC1 to ground.A switch S connects the input of voltage follower 12 to the reference voltage source VREF, such that when the switch S is conductive the voltage at the output of voltage follower 12 is the same as the voltage VREF, whereas when switch S is non conductive, the output voltage of voltage follower VREF corresponds to the voltage on capacitor C1. Voltage follower 12 applies a bias to the inverting input of comparator A2 and also determines the voltage at one end of the winding 10.Comparator A1 has its output connected to an edge detector E1 which produces a short positive going pulse for each positive going edge in the output waveform of comparator A1. A similar edge detector E2 is connected to provide a short positive going pulse for each negative going edge in the output waveform of comparator A2. The outputs of these edge detectors E1 and E2 are connected via respective gates G1 and G2 to the respective S and R terminals of a flip flop circuitF. A delay monstable M connected to the output terminals of both gates G1 and G2 is connected to provide a blocking input to both of these gates for a fixed period after either gate has passed a signal from the associated one of the edge detectors E1 or E2.This delay monostable M and the gates G1 G2 ensure that a predetermined minimum time must pass between setting or resetting signals to the flip flop F from the edge detectors E1, E2. The output of the flip flop F is connected to a drive circuit D which provides at terminals 2 of the i.c. an output current to drive a separate Darlington pair 13 in series with the coil primary 14 and current sensing resistor R. A pair of resistors R6, R7 is connected across resistor. A coil current signal is picked up across R7 and is fed back via terminals 13 and 15 of the i.c. to a current limit circuit CL which acts on the drive circuit D to reduce the output current when the coil current reaches a set level so as to maintain the coil current as this set level.The current limit circuit CL also has a logic output which controls a switchable current sink 15 for discharging capacitor C1. An output taken from edge detector E2 controls a switchable current source 16 for charging capacitor C1. The current source 16 and sink 15 are designed to maintain the voltage on capacitor C1 constant if the time for which current limit operation is taking place is a predetermined proportion of the time for which the output of comparator A2 is high. If current limit operation endures for too short a time the voltage on capacitorC1 rises and if it endures for too long a time this voltage falls. For normal speed operation this has the effect of changing the instant in the cycle at which the output of comparator A1 goes high to correct the shortfall or excess.A speed detector 18 is controlled by the output of the comparator A2 via the edge detector E2 and operates the switch S if the time for which the output of comparator A2 is low exceeds a predetermined time. This condition normally arises at speeds less than the engine idling speed, i.e. during cranking. A similar circuit 19 with a much longer predetermined time interval can reset the flip flop F if the engine stops with the flip flop F in set condition. Capacitors C2 and C3 connecting terminals 8 and 9 of the i.c. to ground perform these two latter timing functions in association with two current sources not shown provided within the i.c.A resistor R8 connects the pin 2 to ground and a transient positive feedback path is provided between pin 2 and pin 12 , such path being provided by a resistor Rg and a capacitor C4 in series. Thus it will be seen that whenever the output of the winding 10 rises above the fixed reference voltage VREF and the drive circuit D is operated, the rise in voltage at the output terminal 121 will cause a voltage transient to be fed back to the input terminal 12 , augmenting for a time the voltage at the terminal 12 due to the winding. Similarly, when the output of the winding 10 becomes sufficiently negative to switch comparator A2 and drive circuit D is turhed off, a transient of the opposite polarity is produced at terminal 12 by capacitor C4 and resistor Rg.At normal running speeds this positive feedback has little effect on the ignition system since the amplitude of the transducer winding output greatly exceeds the feedback. At cranking speed, however the amplitude of the transducer winding output is relatively small so that the positive feedback has a significant effect, that is to say, the voltage at terminal 12 is significantly increased by the feedback signal at switch on of coil current so that any audio frequency interference signals arising during this time are swamped by the feedback and hence premature interruption of the coil current is prevented.Furthermore, the time for which the feedback persists is long enough to ensure that feedback is still present at a significant level at the time when the output of the winding 10 changes polarity to provide a spark retarding effect. A greater retarding effect can be obtained in this way than is possible utilising the proposals of French Patent Application No. 8017811 referred to above.The values of components C4 and R9 must be chosen so that the level of the feedback signal at the end of the required coil on time does not exceed the negative peak voltage produced by transducer winding 10 at any speed.Turning now to Figure 3, there is shown therein a detailed circuit diagram of the part of the i.c. 11 enclosed within a broken line 20 in Figure 1. In this diagram solid lines show the standard circuit, whereas the broken lines show modifications made to the circuit to provide an example of the present invention.The example shown makes use of I2L logic elements and each element shown has a single input terminal and one or more output terminals which is or are at a low level if the input is at a high level. The input terminal of any gate may be connected to an output terminal of one or more of the other gates, and if any one of these other gates has its outputs low, the outputs of the first mentioned gate will be high, otherwise the outputs of the first mentioned gate will be low.Elements Nl to N8 in Figure 3 form the edge detector E of Figure 1, the comparator A1 in fact having two antiphase outputs which drive elements N1 and N2 respectively. These elements are cross connected and connected to another cross connected pair of elementsN3 and N4. The remaining four elements N5 to N8 are connected in cascade between an output of element N4 and an output of element N3. The output of element N3 goes high when the output 33 of comparator A1 is high, but the elements N5, N6, N7 and N8 pull the output low again after a short delay determined by the propagation delay of these elements. Elements N21 toN28 similarly constitute the edge detector E2.ElementsN13 and N19 constitute the gates G1 and G2, elementsN15 to N18 and N20 together with a current source 21, an integrated capacitor C5 and a circuit 22 constitute the delay monostable M.As shown an output of each of elements N13 and Nl9 is connected to the input of element N18 which is cross connected with element N17. An output of element N18 is connected to hold capacitor C5 discharged, but this capacitor C5 charges up if either element N13 or N19 receives a high input. The circuit 22 detects when the charge on capacitor C5 reaches a set level when elementN20 provides a low output to element N17 to reset the flip flop formed by elements N17 and N18. The flip flop circuit F is constituted by elements N11 and N12. Two further elements N9 and N10 ensure that this flip flop F and the flip flop N17, N18 are set to the proper state on power up.The element N29 provides the signals required by speed detector 18 and the circuit 19, both of which are similar in construction to circuit 22. Element N14 receives the output of circuit 19 for resetting the flip flop Nll, N12. The output signal of speed detector 18 passes through two elements N30 and N32 in cascade on its way to the switch S. The signal to switchable current source 16 is taken from an output of elementN29. Finally an element N31 is provided in the connection between the current limit circuit CL and the switchable current sink 15.Thus far described the integrated circuit is standard and has been found to have various deficiencies in different applications. Firstly there is a danger that a complete hang up of the logic can occur if, at idling speed or slightly higher, the signal at i.c. terminal 12t remains permanently too high to switch the output of comparator A1 to its low state when maximum bias is provided by the dwell control loop. This would consequently prevent the output of comparator A1 switching back to high thereby preventing coil current switching on and resulting in a total and self sustaining loss of ignition. This type of failure would be avoided by disabling the dwell control loop i.e. making switch S conductive at idling speed or slightly higher but this would give rise to the problem of excessive dissipation at idling speed.Alternatively the pick up could be designed to provide a large enough negative output at low speed to overcome the maximum bias, but this would give rise to difficulty in providing a large fractional dwell value at high speeds as required for constant energy sparks .Secondly, as noted above the resistor capacitor Rg C4 feedback circuit is connected between output terminal 2 of the i.c. and the terminal 12 thereof to supplement the pick up signal with a positive feedback transient with a view to preventing early sparks being produced as a result of a.f. noise on the pick up signal during cranking. When the battery voltage is too low for the coil current to reach its limit in any cycle, the bias rises during the reference time and this rise has the effect of reducing noise immunity. Thirdly, there is a risk that mechanical shocks caused by play in the gear drive to the distributor mechanism in which the pick up is mounted may cause small kinks in the rising part of the pick up waveform, resulting in occasional missed sparks if comparator A2 output is briefly reset and comparator A1 output is already set when the delay circuit M delay subsequently expires.The modifications made to overcome these problems are as follows. i a link is provided from an output of element N15 to the input of element N4. This link enables coil turn on and delay initiaton by the output of comparator A1 when the delay expires if the coil is already off. ii a link is provided from an output of element Nll to the input of element N13. This has the effect of inhibiting delay initiation via element N13 if the coil is already on. iii a link is provided from an output of element N12 to the input of element Nl9. This inhibits delay initiation via element N19 if the coil current is already off. iv an additional flip flop constituted by cross connected elements X and X1 is provided with the input of element X connected to an output of element N32 and the input of element X1 connected to an output of element Nl9. This flip flop is set when the period of speed detector 18 expires and is reset by the next following coil turn off edge from comparator A2.Element X has its output connected to another element Y the output of which is connected to the input of element N31. This supplements the limit time signal if the speed detector period has expired since the last coil turn off edge and the coil is on. A link is provided from an output of element N12 to the input of element Y to inhibit limit time supplement unless the coil current is on.Thus, at cranking speeds, the voltage on capacitor C1 is always lowered to its minimum value before coil turn off, ensuring that the output of the comparator A1 is low when the delay period subsequently expires, thereby preventing coil turn on at this instant, which would otherwise limit spark duration during cranking and cause excessive dissipation because of the very high fractional dwell duration almost 100 . At very high running speeds or at normal running speeds with an abnormally low battery voltage, resulting in failure to reach the current limit level in each cycle, the voltage.on capacitor C1 is raised. The output of comparator A1 is consequently already high at the spark instant. Coil conduction then starts immediately following expiry of the timer delay, which is acceptable under these conditions as limitation of spark duration is less important than ensuring that maximum energy has been stored in the coil for the next spark.