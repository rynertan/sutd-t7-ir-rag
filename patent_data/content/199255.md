# EQUIPMENT FOR SENDING DIGITALLY PRE STORED VOICE ANNOUNCEMENTS TO THE SUBSCRIBERS CONNECTED TO A TELEPHONE NETWORK

## Claims
Anordnung zum Senden digital vorgespeicherter gesprochener Ansagen an mit einem Fernsprechnetz RT verbundene Teilnehmer, bestehend aus wenigstens einer Sprecheinheit U1,U2,...Un , die über verschiedene unabhängige Verbindungsleitungen 6 1 ,...6 32 und ohne Zwischenkonzentrationsstufen mit Schaltvorrichtungen im Fernsprechnetz RT verbunden ist, über die jede Leitung einem der Teilnehmer UT1,...UTx , der eine Durchsage angefordert hat, zugeteilt werden kann, und die folgende Elemente umfaßt

## Description
The present invention refers to supplementary services offered to telephone network subscribers and in particular to an equipment for sending to these subscribers digitally pre stored voice announcements. Since a long time telephone network subscribers can listen, dialling a suitable number, to different voice announcements e.g. time, news, weather forecasts generally, these announcements are recorded on a continuous magnetic tape and are broadcast, through a continuous repetition, to several output units translators the subscriber can listen to the announcement only from the point which is being read at the instant where he has access to the service. Then, the subscriber cannot generally listen to the announcement since the beginning and therefore he must remain connected until the announcement begins again and listen to it at least up to the point where he began the listening. This involves a time loss by the subscriber and a high line occupation. Furthermore, now subscribers are in favour of always new kinds of announcements or in general new voice services e.g. medical information, day record ... and some of the above services require the listening since the beginning. Then, the necessity arises of having equipments whose store is no longer a continuous magnetic tape. These equipments must also allow the subscribers to have an easy access to different announcements and services, and possibly guide the subscribers in the announcement and or service choice. This entails considerable management difficulties, which make it suitable to provide computer based equipments. Some equipments of this kind have already been proposed, based on a digital announcement storage announcement indicates here any information emitted in the voice band, including music . A first equipment is described by R.J. Frank et al. and T.W. Anderson et al. in the articles Mass announcement capability and Mass announcement subsystem , both appeared in The Bell System Technical Journal, V.60, No. 6, July August 1981 pages 1049 1107 . In this equipment, several sub systems store a certain number of announcements or part of them coded in PCM at 64 Kbit s each subsystem presents two magnetic disks with 80 Mbyte capacity, divided into sectors corresponding to 30 s of voice. The two disks contain the same announcements and are read with a 15 s time shift, so as to present on a bus the same announcement every 15 s the output network is synchronized with that announcement repetition rate. This equipment presents some disadvantages, mainly depending on the system synchronous operation Another disadvantage involves reliability and depends on the equipment structure, as in the case of failure of a subsystem the subscribers can no longer have access to the announcements stored therein. Lastly, this known system has been conceived for connection to electronic exchanges and can supply announcements only to the subscribers connected to such exchanges. A second example is described in the paper Prospects for voice signalling in the telephone network presented by D.S. Cheeseman and M.B. Cooper at 1982 International Zurich Seminar on Digital Communications, Zurich, March 9 11, 1982 and published in pages 121 to 127 of the seminar proceedings. This paper describes an equipment where the announcements to be forwarded to the subscribers, coded in delta modulation at 32 Kbit s or in PCM modulation at 48 Kbit s, are stored in a solid state store of 4 Mbit capacity. Each announcement consists in the average of 10 words, and about one hundred announcements, for a total vocabulary of 200 words, are provided. The store is connected to a bus at 32 Mbit s to which 128 channels are connected and where each announcement is presented with 250 ms periodicity. Also this is a synchronous equipment. This second equipment solves the problem of the excessive average wait time as the expense of the announcement length in fact, it has been conceived to supply the subscribers with a speech guidance for the access to some services, but it cannot supply information announcements, unless they are very short. Moreover, the problem of serving subscribers connected to electromechanical exchanges is mentioned, but no solution of this problem is given. In opposition to these known equipments, the present invention supplies a fully asynchronous system which can then send both information announcements of quite long duration and guidance announcements for service access, with a very limited wait time, and which can also supply a very high number of announcements, related to very different services, without problems for the introduction of new services and or new announcements. Furthermore, the above reliability problem is overcome by sharing amongst several units the output lines instead of the announcements, so that a failure in a unit can make more difficult the service access or cause some call loss , but it does not make impossible the listening to a whole announcement group. Lastly, access to the equipment can be obtained also by subscribers connected to electromechanical exchanges. The essential characteristics of the present invention are described in claim 1. Optional features are disclosed in claims 2 to 15. The invention will be now described with reference to the annexed drawings where With reference to Fig. 1, the equipment according to the invention for sending digitally pre stored voice announcements to the subscribers of a telephone network RT consists of several similar units U1, U2...Un hereinafter called voice units , each connected to network RT through a certain number of two way lines, which can be served simultaneously and independently from the other lines. These lines are indicated in the whole by E1, E2,...En. The number of voice units depends on the number of requests to be served at the same time. Each voice unit comprises a centralized part, consisting of a computer EL1, EL2...ELn and an announcement data base AA1, AA2...AAn, and an interface IEC1, IEC2...IECn towards the network. All possible announcements to be supplied to the subscribers are stored in a compressed and digitized from, e.g. with CVSD continuously variable slope deltamodulation coding, in data base AA1...AAn of each unit U. These announcements include informative announcements, related to the different voice services at subscriber s disposal, guidance announcements which ease to the subscriber the service access operations, and error announcements which signal wrong operations by the subscriber. The data base also stores special signals to be used for diagnostic purposes. In these data bases, the announcements related to a given service are gathered in more and more comprehensive groups so as to form a hierarchical or tree structure the root is represented by the service the nodes which are the beginning of the main branches are the main service subjects the nodes of subsequent branch levels are more and more detailed subjects the leaves of a branch are represented by the individual announcements. After access to the service, each successive branch level can be attained through a dialling number. For example, in a service of health announcements, the announcement of child vaccination can be achieved with such a sequence Each data base AA1...AAn consists, e.g., of one or more magnetic disks of suitable capacity and is connected to bus 1 1, 1 2...1 n of the respective computer EL1, EL2...ELn through a conventional control interface CD1, CD2...CDn, respectively. Computer EL1, EL2...ELn of a voice unit has to handle the sending of announcements to subscribers, so that each subscriber who obtained access to the service listens to the announcement since the beginning and receives the announcement within a very reduced wait time, independently from the length of the requested announcement update the data base supervise the system, by detecting malfunctions and disabling, if necessary, out of order parts. In order to carry out these tasks, the computer programs of each unit consist of four parts or modules , namely Access gates IPA1, IPA2...IPAn for announcement updating from a remote centre and consoles CNS1, CNS2,...CNSn for man machine dialogue are also connected to buses 1 1, 1 2, 1 n. Consoles are connected to the buses through serial interfaces IS1, IS2...ISn. These are conventional devices and a detailed description is unnecessary. Interface part IEC1, IEC2...IECn towards the network has to store for a certain time the announcements or parts of them that computer EL takes from data base, to reconstruct the announcement in a form audible by the subscriber in the case of an analog voice network of the exchange , to handle the telephone connection between subscriber and equipment and to carry out diagnostic controls on the good system operation. The structure of block IEC is shown in Fig. 2, under the assumption that the voice unit to which IEC belongs can serve 32 lines 6 1 ...6 8 , 6 9 ...6 16 , 6 17 ...6 32 for connection to network RT. These 32 lines are divided into four 8 lines groups, each associated with a buffer memory M1, M2, M3, M4 which interfaces bus 1 of the computer with eight synchronous digital lines. Two such lines 3 1 , 3 8 and 3 9 , 3 16 are indicated for memories M1, M2, respectively. Memories M1...M4 have essentially to maintain on lines 3 time relationships form which the speech signal quality strictly depends, by compensating access and operation times of announcement data base AA Fig. 1 and different rates and modalities of data transfer from data base to memories M1...M4 and from here to lines 3. Memories M1...M4 are two port memories, i.e. memories with access upon command of the voice unit computer or of a time base internal to the memory. Advantageously, each memory M1...M4 consists of at least a memory unit comprising a plurality of memory elements, where each element can be read and written at addresses supplied by the computer asynchronous operations or by a time base synchronous operations which establishes the times for the two types of operation and, during the time for synchronous operations, establishes the call in or the sending of announcements or messages from or to the different lines, and is characterized in that each line is a bidirectional line, associated with a memory element, which can then store both announcements or messages coming from these lines and directed to the bus, and announcements or messages to be transfered to these lines, the transfer direction being established by a control logic, associated with each memory element, according to the logic value of a first signal supplied by the computer in that the time base, for each line served by the memory unit, is slaved to the computer for the beginning and end of synchronous operations, their temporary stop and their resumption, thanks to a second and a third signal received through the control logic associated with the memory element which serves the line, and generates a first synchronization signal, which has a period equal to a predetermined fraction of the time necessary for the synchronous reading or writing of a whole memory element and establishes the possible instants of beginning or resumption of synchronous operations related to the line, and a second synchronization signal, which controls the alternation between the two operation types in the same part of each memory element and is made available to the computer through the control logic. In general, in a system for sending announcements to the subscribers, data bases are updated by a control centre and updating by the subscribers is impossible therefore, lines 3 are not to be bidirectional and memories M1...M4 are only asynchronously written and synchronously read. Announcement data base consists, as said, of conventional magnetic disks with an access time of the order of some tens of milliseconds. In order to send to a subscriber a voice announcement of a certain duration, the announcement is divided into elementary sections of prefixed duration e.g. 2 s which are transferred one by one to a buffer memory M1...M4. The buffer memory consists of two halves which work alternatively then voice continuity is ensured if each half buffer is updated during the time interval in which the other is read. If each half buffer memory capacity is 2 s and the disk access time is 50 ms, 40 lines can be theoretically served, as data transfer time is negligible if compared to disk access time. As the magnetic disk is a random access unit, each subscriber line can have access to the desired announcement since the beginning and the listening can go on independently of the state of the other lines. Nevertheless, at the announcement beginning, a wait time up to 2 s is unnecessary for obtaining the announcement, as the requests of disk access corresponding to the beginning of an announcement can be served with priority, always within the 2 s time. This facility has not particular interest in the case of information announcements, but it is essential in the case of the guidance announcements, which are numerous in a subscriber procedure, so that a 2 s wait time could so lengthen the procedure as to make it unpleasant for the subscriber. The outputs of memories M1...M4, besides voice lines 3, comprise also a wire conveying a clock signal at the transmission rate on lines 3 and a wire conveying an availability signal which indicates the correct operation of the memory and the computer. The two wires are jointly indicated by connections 2 1 , for memory M1, and 2 2 , for memory M2. For each memory, the availability signal can be obtained as logic AND between a signal which slaves the memory time base to the computer, and a signal emitted by a circuit with guard functions which is part of the computer. Under these conditions, the availability signal is not present when the computer disables the memory because of a memory failure or in the case of a computer failure. A peripheral unit PA1 is connected between memories M1, M2 and lines 6 1 ...6 16 , and a similar unit PA2 connects M3, M4 to lines 6 17 ...6 32 . Only PA1 is shown in detail. Within PA1, lines 3 1 ...3 8 , 2 1 and 3 9 ...3 16 , 2 2 end at respective buffer amplifiers AM1, AM2. Circuits AM are necessary as the wires which connect memories M1...M4 to units PA1, PA2 can be quite long and then cause high attenuations which must be compensated before the signals are sent to downstream units. The amplified signals are presented on lines 30 1 ...30 8 , 20 1 , 30 9 ...30 16 , 20 2 . Voice lines 30 are each connected to a line unit L1...L16 which carries out Signalling lines 20 1 , 20 2 outgoing from AM1, AM2 are connected both to all line units L1...L8 L9...L16 associated with the respective buffer amplifier for timing the digital to analog signal conversion, and to a signal generator GE which emits on a connection 5, three digital signals consisting of The first two signals are used by line units L1...L16 for control purposes and are identical to said special signals stored in the data base. The third signal is sent to the subscriber in particular cases, e.g. at the service end in order to invite him to hang up so as not to keep exchange units engaged. Line units L1...L16 are connected, via bus 7, to a peripheral preprocessing device PE, connected in turn to bus 1 of the voice unit computer. Preprocessing device PE receives from L1...L16 the telephone criteria picked up through suitable sensors from the wires of lines 6, carries out a certain processing of said criteria and informs the voice unit computer of processing results. In the other direction, PE receives commands from such computer and sends them to signalling drivers, which are part of L1...L16 and transform such commands into telephone criteria to be sent to the network via lines 6. PE can consist of two cascaded processing units UCSA, ULS, as described for example in European patent No. 40412. Unit UCSA, which has the same tasks as the homonymous unit in said patent, manages the sensors and the drivers, taking signals from the sensors at instants established by the same unit and depending on the signal nature, informing the second unit of state variations of some signals picked up, as soon as they are detected, or of the state of other signals, picked up upon request of the second unit, and sending commands to individual drivers or to groups of drivers according to information and or commands supplied by unit ULS. The latter, which corresponds to unit UCL of said patent, follows the evolution of an announcement request by the subscriber according to the data supplied by the first unit and will supply the first unit with information and commands according to processing carried out and to messages coming from the voice unit computer. Let us underline that in the most general case the subscribers UT1...UTx can have access to the announcement equipment by dialling one out of two numbers in particular, by dialling a number typical of supplementary services e.g. in Italy a number beginning by digit 1 for local subscribers, or an ordinary number for remote subscribers. The criteria to be generated and call charging are generally different, then PE has to carry out a different processing in the two cases. Yet, for a better resource exploitation, each line unit should be accessible in both ways seizure criteria have then to be different so as to distinguish between local and long distance calls, hindering, if the case, incorrect or fraudulent access attempts through an ordinary number for local subscribers, and through a number characterizing a supplementary service for remote subscribers . These two access types correspond to different inputs in units L and are shown in Fig. 2 for line 6 1 and subscribers UTh and UTj. For example, subscriber UTh is a local subscriber and then will have access to unit L1 through a group selection stage SGs of the supplementary service exchange. Each outlet in SGs comprises the voice loop wires a, b and the seizure wire wire c of the telephone line. Conversely, UTj is a remote subscriber, who has access to L1 via a group selection stage SGu of an ordinary local exchange. Voice loops of the different outlets of selection stage SGu wires a₁, b₁ are connected in parallel to voice loops a, b of the corresponding outlets of selection stage SGs and form the voice loop of line 6 1 conversely, the seizure wire c₁ is separated from wire c of selectors SGs, so that each line 6 comprises 4 wires the two wires of the voice loop and two seizure wires . The presence of two different seizure wires allows the two access types to be immediately distinguished the detection of the correct or uncorrect access by a subscriber can be obtained with a supplementary criterium which must be present, for example, on one of the two wires of the voice loop, in case of one type of seizure e.g. seizure via wire c, i.e. seizure by a local subscriber . Due to the presence of two different seizure wires, special measures are to be taken for avoiding that the same line unit is simultaneously engaged by a local and a remote subscriber. These measures will be examined in the description of the functions of the sensors and drivers connected to the wires of lines 6. Fig. 3 shows the structure of a generic line unit L in the case that lines 3 and therefore 30 can convey all announcements supplied by the equipment. A multiplexer MX has 4 inputs respectively connected to line 30 and to three wires 50, 51, 52 of connection 5 which convey the signals generated by GE, Fig. 2. Multiplexer switching is controlled by the signals present on a 2 wire connection 10 outgoing from block AT, which represents the whole of the drivers of unit L. The two drivers which supply the select signals for MX are indicated hereinafter as drivers T0, T1. Output 11 of multiplexer MX is connected to a first control circuit CL and to a digital to analog converter CNA, which also receives the clock signals present on a wire 4 of connection 20. Circuit CL has to detect the bit configuration which represents the silence. This bit configuration can be present either on one of the wires 5 e.g. wire 51 or on line 30 depending on whether it is the configuration stored in GE or that stored in the announcement data base. Thus, a check on the correct operation both of the digital data channel incoming unit L and of unit L itself is possible. The check result is sent by CL via wire 12 to a special sensor afterwards called logic sensor of block SE, which represents the whole of sensors associated with unit L. Converter CNA has a structure depending on the voice coding adopted with the above coding, component HC 55564 of Harris Corporation can be used. This component is described by D. Jones in the Application Note 607 of the Harris Corporation Delta Modulation of Voice Transmission . Converter CNA is followed by a filtering and amplifying system FA, which limits the band of the signal outgoing from CNA to the telephone band 300 3400 Hz and brings the signal filtered to the level necessary for the transmission on lines 6. For the filtering part, block FA comprises a low pass filter, preferably an active filter an effective cutoff can be obtained with an elliptic filter of 6 Output 13 of block FA is connected to a second and a third control circuit CA1, CA2 and a transformer TR Control circuits CA1, CA2 are to check the correct operation of the analog part of the line unit. CA1 is a tone detector, which has to detect the presence of 1 kHz signal emitted by GE Fig. 1 on a wire of connection 5, e.g. wire 52, or sent by the announcement data base. CA1 sends to a sensor of SE speech sensor , via a wire 14a, a logic signal whose level indicates whether the detection has taken place or not. In this way the electrical continuity of the connection via CNA and FA is checked. CA2 is a comparator which has to detect the silence, indicated by the fact that the output level of FA is lower than a given threshold. CA2 emits towards another sensor of SE pause sensor , via a wire 14b, a logic signal indicating the comparison result. CA2 allows detection of possible spurious oscillations or noises generated in CNA or FA, which could negatively affect voice quality on lines 6. Circuits CL, CA1, CA2 are continuously active PE Fig.2 is to sample the signals outgoing from logic , speech and pause sensors at suitable instants. Transformer TR has to produce balanced voice signals on the telephone loop and to decouple the d.c. signalling present on the loop from the voice and hence from the analog circuits of unit L which handle it. The loop outgoing from TR is represented here as a part of a line 15 with four wires corresponding to the four wires of line 6 voice loop and seizure wires c, c₁ and also connected to sensors in SE and drivers in AT. These sensors and drivers and the related functions are examined in detail with reference to Fig. 4. Via switch SW, the four wires of line 15 can be connected to the four wires of line 6 or to the wires of a line 9. The control signal for SW is supplied via wire 18 by a control logic CSW, which allows the switch to be operated manually, via a key AS, or by the program of PE in this second case the control signal for SW is sent to CSW via a driver driver monitor in AT and wire 17. Logics CSW of all units L are connected to one another connection 16 and co operate so as to allow manual operation of only one switch at a time and so that the program controlled switch actuation hinders the manual operation of other switches and interrupts a manually started test. Obviously, the program of PE in turn prevents simultaneous operation of two switches. The Figure shows also that the data picked up by the sensors are sent to PE via bus 70 which, in the opposite direction, sends information and commands from PE to drivers AT. Sensors and drivers are seen by PE as matrices, e.g. matrices with 8 element rows, so that bus 70 conveys 8 bit words. A driver or a sensor is addressed through signals sent from PE via a bus 71 and decoded in a logic network DIN, connected to SE and AT. Buses 70, 71 form connection 7 of Fig. 2. For sake of simplicity, the drawing does not show the registers temporarily storing the addresses and data for the drivers. Sensor and driver arrangement in the respective matrices is examined after the description of the functions of drivers and sensors associated with wires of line 15, with reference to Fig. 4, where sensors are shown by circles and drivers by rectangles. Wire Wire Wire Wires c, c₁ are associated with two current sensors C, C1 active when the current enters the unit, i.e. in the presence of seizure. The two sensors cannot be active at the same time. Via a contact of a driver D both wires c, c₁ are connected to a same source of battery voltage via a suitable resistance The arrangement of Fig. 4 hinders also the double blocking of L due to a seizure on both wires c, c₁. In fact, in the presence of a seizure on either wire c, c₁ the resistance associated with driver D forms, with SGs or SGu Fig. 2 , a voltage divider such that the voltage applied to wire c or c₁ is different from battery voltage then, SGu SGs cannot seize unit L already seized by SGs SGu . The drivers connected to wires a, b, c, c₁ of line 15 and the two drivers T0, T1 which control multiplexer MX Fig. 3 are considered by PE as pertaining to the same row of the respective matrix. This means that a data word sent to AT via bus 70 contains the state desired for all those drivers. Driver monitor controlling SW pertains to a different row. As to the sensors, sensors logic , pause , speech , BS and a further sensor fuse , which detects the presence of battery voltage at the input of unit L, pertain to a same row all other sensors associated with line 15 are placed in different rows. Fig. 5 shows control logics CSW1, CSW2 of switches SW of two units L. The two logics are identical and then only one is described. The representation of two logics is necessary for showing how the operation of a switch at a time and the priority of the program controlled operation are obtained. In the Figure, wire 18 1 which brings the command for the switch associated with CSW1 is the output wire of an OR gate, OR1, whose two inputs are connected to wire 17 1 program controlled operation or to output Q of a D type flip flop, D1. Wire 17 1 is also connected via an inverter IB1, to a wire 16a of connection 16, which connects all logics CSW. Wire 16a is also connected to the reset input of D1. This wire, under idle conditions no test in progress or in the case of manual operation, presents a logic 1. This connection establishes the priority of the program controlled operation, as explained by the description of the operation of logic CSW. The clock input of D1 is connected to output Logic CSW operates as follows. Assuming that no unit is under test and that the first operation command concerns CSW1 and is a manual command, operation of AS1 sets to 1 output If during the test started by AS1, an operation command arrives from PE, e.g. via wire 17 2, this command via IB2 brings to 0 the signal on wire 16a, thereby resetting D1. The signal on wire 18 1 passes again to 0 and then switch SW disconnects the respective unit from DP and the test is interrupted. The logic 0 present on wire 16a disables the D type flip flops of all other logics CSW and then the operation of a key AS has no effect. The scheme of Figs. 2 and 3 holds for the case where all announcements supplied by the equipment can be transmitted on each line 3 and then 30. Nevertheless, in the case of announcements which are requested by a very large volume of callers and which do not require the listening since the beginning e.g. speaking clock service , allotting each service a line to which all units L are connected and continuously transmitting these announcements can be suitable. A possible arrangement for this variant embodiment is shown in Fig. 6 for the case of n output lines pertaining to a same peripheral unit PA. For sake of simplicity, the memories are included in voice unit U and block PA is only shown by multiplexers MXa...MXn of the line units. For each multiplexer references 10a...10n, 11a...11n denote the lines corresponding to those shown by 10, 11 in Fig. 3. Voice unit U is shown divided into two parts Ua, Ub of which the first can emit on several lines 3a...3m any announcement contained in its data base, according to subscriber requests, while the second continuously presents on each line 3p...3r an announcement which does not require listening since the beginning and is very frequently requested. Lines 3a...3m are connected to a switching network RC controlled e.g. by the computer of U RC has n output lines 101a...101n n m , each connected to one of multiplexers MXa...MXn. Lines 3p...3r are conversely connected to other inputs of all multiplexers MXa...MXn. By this arrangement, as long as there are free lines 3a...3m, all announcements are taken from section Ua of the voice unit and sent to the line units via network RC and lines 101. If all lines 3a...3m are seized, possible announcement requests which do not require the listening since the beginning are served by Ub via lines 3p...3r. The congestion is detected e.g. by the computer of U, which in turn can distinguish amongst the different announcements. As multiplexers MX present other inputs connected to lines 3p...3r, the multiplexer select requires supplementary bits, which as many supplementary drivers correspond to in AT Fig. 2 . The equipment operation will now be described. A subscriber UT1...UTx Fig. 1 has access to the equipment via a certain number of dialling digits access code used to route the calls to a voice unit U1...Un which can accept the request. Let us underline that no concentration stage, which can generate internal blocks, exists between network RT and voice units U1...Un. Therefore, once obtained the access to a voice unit, the subscriber is sure to receive the desired announcement obviously, except failures , independently of the number of subscribers which the same service or announcement is supplied to. If no line is available between RT and the voice units, the subscriber receives the busy tone as for a common telephone call. Besides the access code, the first group of digits dialled by the subscriber comprises also one or more digits necessary for the choice of a service out of those offered by the equipment, in the case of several services e.g. health information, weather forecasts, cooking recipes... . This digit or these digits will not be processed in RT, but by interface IEC of the unit which supplies the service and more particularly by the peripheral preprocessor. The operation of IEC will be examined in more details later on. For sake of simplicity, let us assume that the subscriber is connected to unit U1 via line 6 1 Fig. 2 . As soon as preprocessor PE has detected the access to the equipment, through an analysis of the dialling digits, it sends EL1, via bus 1, a seizure message. Consequently, analyser program module is enabled in EL1. After this enabling, the equipment can begin the dialogue with the subscriber, possibly guiding him in the phases of announcement choice, checking operation correctness and sending possible error messages to the subscriber in the case of irregular operations. In order to send the guidance announcements and error messages, the analyser module has obviously access via CD1 Fig. 1 to announcement data base AA1 in other terms, this program module processes information coming as signalling and commands the emission of voice information. The different lines connected to a voice unit are independently processed and then, even if a subscriber engages the unit while it is supplying the service to another subscriber, the procedure for sending the announcement to the second subscriber starts again from the beginning. Once obtained the access to the equipment and the service, the subscriber has to dial one or more digits which characterize the announcement research procedure. These and the next digits are processed by PE as the previous ones. Four procedures are possible Depending on the procedure chosen by the subscriber, communicated to the analyser module by PE, that module knows whether it has to begin sending the guidance announcement related to the first branching level, or to send no guidance announcement and wait for dialling completion, or to prepare to send a guidance announcement related to any branching level. Let us consider for example the case of guided procedure, which requires the greatest interventions of computer EL1 and data base AA1 already during the announcement research. The equipment sends to the subscriber, via bus 1, memory M1, amplifier AM1 and multiplexer MX of L1, a possible preamble containing for example the service name and the guidance for the choice of a main branch. This message is converted into analog form in CNA before the transmission on line 6 1 . At any branching level, the guide is repeated until the subscriber dials a digit or for a maximum prefixed time that digit can be dialled at any point of the guidance announcement, as soon as the subscriber has recognized it, and the guidance announcement end has not be waited for. If, in correspondence of any branching level, the subscriber dials a digit not foreseen by that level, computer EL1 commands the sending of an error message to the subscriber, and thereafter the guidance announcement is again presented. After the dialling of the last digit and before the announcement sending, the analyzer module may repeat to the subscriber the names of the different nodes followed or at least that of the announcement achieved, in order the subscriber can check whether he has actually selected the desired announcement. After this repetition, the subscriber has to confirm or not the acceptance of the service by dialling a suitable digit. Considering that the charging usually starts from the beginning of announcement sending, this avoids that the subscriber has to pay unwanted announcements. Is the service not accepted, the connection can be released or the procedure can be repeated from the beginning. Conversely, if the service is accepted, the procedure of announcement sending begins. The above description holds also for the mixed procedure, from the point where the necessity of supplying the subscriber with a guidance is detected. In the case of numerical or direct procedure, the analyser module is not enabled to send messages and then neither error announcements nor data repetition can be supplied. Then, in the case of dialling error by subscriber, he receives an unwanted announcement or, if some dialled digit does not correspond to a tree branch, he cannot obtain the service under these conditions, forced release takes place. Once finished the access procedure, if the subscriber has not hung up the receiver, the analyser module commands the intervention of the executor module, which manages the actual announcement sending, and informs such module about the number of the required announcement and the identity of the line to be used for sending the announcement. Furthermore, the analyser module communicates to the statistic module of the program of EL1 the information related to the operations carried out until that instant, in particular the type of access procedure, the permanency time on each tree branch, possible errors made in dialling the subsequent branch. This information can then undergo further processing out of line. Considering now the operations managed by the executor module, it looks for the announcement in AA1 and, once retrieved the announcement, the module begins to send it through bus 1 to buffer memory M1. The presence of this buffer memory, which stores a voice block of duration sufficient to compensate the time of access to disk AA1, even in the case of contemporary engagement of all lines served by unit U1, makes it possible that the voice outgoing from digital to analog converter CNA has the necessary synchronism characteristics and furthermore makes independent the different lines, so that each subscriber can receive the announcement since the beginning. At the end of the listening, the connection has to be released in order to allow the engagement by another subscriber if the time elapsed between the announcement end and the release by the subscriber exceeds a prefixed value, through ULS and UCSA output 11 of MX is connected to wire 53 so as to send on the line the busy tone. As said, guidance announcements can be interrupted by the subscriber in order to go on along the tree. Conversely, error announcements, which are emitted in case of both actually incorrect dialling and incorrect interpretation by the equipment of a dialled digit, cannot be interrupted. Diagnostic operations can be carried out on a line, not engaged for an announcement emission, by the diagnostic program module. During this test, the line under test is made unavailable to the subscribers through a suitable command sent by ULS. The silence and 1 kHz signals, stored in AA1, are used as test announcements. The two test signals are sequentially sent to the chosen line, e.g. 6 8 , using the same path as for speech announcements. The test signals are received by the circuits of line unit L8, which via UCSA and ULS, signal to the diagnostic module whether or not the two signals have been detected. In the negative, the line is disabled via ULS and UCSA. Subsequently, the test is repeated by using the signals generated by GE, threby to detect whether a possible anomaly is due to a malfunction of the circuits of PA or to memory M1 or to the connection line towards these blocks. Depending on the test results, the following diagnosis is possible. A failure in GE can be easily detected as the test on many lines served by the same generator gives negative result, being highly improbable the contemporary failure of several multiplexers. All anomalies detected are signalled to the operator via a printer and communicated to the statistical program module. A further test group concerns the good operation of the peripheral processor, of its connection line with the computer of the voice unit, and of the computer. For the control of the peripheral processor, computer EL of a voice unit sends to ULS a control message which ULS has to send back within a prefixed time. Obviously, failure to send back the message indicates a malfunction of the peripheral processor or of the line. Both UCSA and ULS programs present internal controls described in the above European patent. An operation anomaly in UCSA causes an interrupt signal towards ULS which blocks the operation and hinders the control message sending as for ULS, a failure could hinder ULS stop, hence a signalling of ULS internal error can disable through a simple circuit the message sending to the computer. A failure in the peripheral processor or in the connection line to computer EL makes necessary the disabling of all lines controlled by that system this can be obtained, for example, by setting to 0 the availability signal present on the proper wires of connections 2 outgoing from the two memories controlled by the same peripheral processor then, 16 lines are disconnected in the example described . In the case of a failure interesting the voice unit computer, all lines served by that voice unit are disabled, always using the availability signal. Obviously, announcement data base is to be periodically updated, because some announcements hold for a limited time e.g. news, day horoscope, etc. or in order to introduce new services. Two solutions are possible. The first consists in storing out of line the announcements on a disk, then physically introduced into the computer this procedure requires the service interruption and can be suitable when the updating concerns the greatest part of the announcements. This procedure is also adopted for initial data base formation. The second type of updating can be on the contrary carried out without service interruption. In this case, a memory similar to memories M1...M4 Fig. 2 , used in the opposite direction, can serve for the introduction of the digitally coded speech. This memory constitutes the gate IPA1...IPAn of Fig. 1. Upon a command sent through the console, EL transfers the memory content to a free area of its disk, and at the same time continues to emit the old announcement. At the prefixed instant, again upon console command, the change can take place between the old and the new announcement, simply by instructing the executor module to pick up the announcement at a different address. The peripheral unit operation will now be examined in detail with reference also to the flow charts of Figs. 7. In these flow charts, some operations can be repeated under several situations and are only once indicated. The connectors to the respective representation are denoted by Greek letters followed by a number indicating the operation phase. For sake of simplicity, reference is still made to an announcement sent by unit U1 via line 6 1 . When announcement equipment is put into service, preprocessor PE Fig. 2 makes all line units unavailable phase 0 in the diagram of Fig. 7 . This corresponds to wires c, c₁ Fig. 4 being disconnected from battery voltage, and is necessary for allowing a correct equipment configuration by the operator. Line units are made available upon operator command via a message generated by diagnostic module of the voice unit computer program enabling from DIAGN, set availability, Fig. 7 . Availability state corresponds to connecting wires c, c₁ Fig. 4 and wire The idle condition is left when a service access request is detected, the request being indicated by the seizure criterium on wire c or c₁. The request evolution will now be followed, assuming that all operations go on regularly until the end. Anomalies are examined later. Up to a certain procedure phase, the seizures on both wires are handled in the same way, except anomalies, so that no distinction is now made. Once detected the seizure criterium thanks to a state variation of sensor C or C1 Fig. 4 and after having signalled the seizure on wire c₁ set long distance call flag, Fig. 7 , if this is the case, PE requests the seizure of that program module analyzer of EL1 which handles service request Request ANS seizure and calls for the state of sensor BS Fig. 4 for detecting whether the access request is correct or not read wire Let us remember that the correct access demand by a local subscriber requires the dialling of a number characterizing a supplementary service and gives rise to seizure on wire c, together with the supplementary criterium on wire b, detected by sensor BS. The correct request by a remote subscriber requires the dialling of an ordinary subscriber number and gives rise to a seizure on wire c₁. The dialling of a number of supplementary services by a remote subscriber seizure on wire Then a waiting phase 2 in Fig. 7 is reached, where unit L1 is seized. The response from the program of EL1 Availability from ANS must arrive within a given time in the case of lack of response within that time, a forced release takes place according to modalities described in the following. The same situation is repeated in the other phases where intervention of the program of EL1 Fig. 1 is awaited. During the waiting for the response from EL1, SE. Fig. 3 can send the information on the state of BS wire While waiting, dialled digits Digits from subscriber can also arrive, which digits are detected by sensor S with active driver A . These digits are stored store digits until the response arrives from EL1. After the response by EL1, and when their number is sufficient for detecting the service requested, the digits are sent to EL1 digits to ANS through a message for each digit, followed by a character indicating that the number is complete service code end . A phase phase 5 is then attained of waiting for a message where the analyzer module indicates the procedure type requested by the subscriber. If during the waiting, digits arrive from the subscriber, they are stored as their subsequent handling depends on the procedure chosen. When the message indicating the procedure characterization from ANS arrives, in the case of numerical procedure phase 5 is maintained and dialling completion by subscriber is waited for. This fact is detected by EL1, which sends to PE a message indicating the end of the acceptance phase of service request. As a consequence PE reaches an execution waiting phase which precedes the operations of announcement sending phase 10 . In the case of direct or mixed procedure, the digits stored, if any, are sent to ANS according to the modalities described for phase 2, and the phase of management of that procedure is reached phase 7 . In the case of guided procedure, the digits are neglected reset digit area , because the subscriber has to receive a first guidance announcement furthermore, PE has to check whether the procedure requires, for the different steps, always the same number of dialling digits fixed digits or not, as the management in the two cases is different phase 9 or 8 respectively . In phase 7, if the procedure is direct, the digits dialled by the subscriber are sent to EL1 Fig. 1 as soon as they arrive and, at the end of the dialling, phase 10 is reached as for numerical procedure. In the case of mixed procedure, PE can receive a message with the order of setting up the voice path towards the subscriber as he could receive guidance or error announcements. This message is sent when the interdigit time exceeds a certain limit. As a consequence, PE sends to drivers T0, T1 in AT Fig. 3 the logic state necessary for connecting line 11 to line 3 set up voice path . At each dialling digit received, PE checks present interruptible voice whether a message is being transmitted and if it can be interrupted e.g. a guidance message or cannot e.g. an error message . In both cases, the digits are sent to the EL1 digits to ANS , in the first case cutting off the voice path release voice path and in the second case without cutting off in this second case, the computer will reject the digits received. At the end of the dialling and when the message of acceptance phase end arrives, phase 10 is reached after a temporary release of the voice path, if the latter was set up. This operation is suitable because the subsequent announcement sending is managed by a different module of the program of EL1 and between the end of the acceptance phase and the instant where the announcement is ready for being sent onto line 3, a certain time can elapse of the order of ten seconds or more in this time, if the voice path remains set up, the subscriber could receive line noises or queues of guidance announcements that the analyzer module would still send before being actually released. In the case of guided procedure with a variable number of digits phase 8 , PE receives the message of setting up the voice path towards the subscriber, as for mixed procedure. Furthermore, as the digits arrive from the subscriber, they are sent to EL1 checking whether the voice can be interrupted. After the sending of each digit, the counting of a guard time begins count interparameter time in order to distinguish between digits related to a same parameter or to different parameters. By parameter we intend a number to be dialled in response to the guidance message. If the next digit arrives before the time elapses, the digit refers to the same parameter and then the procedure described before is followed. If the time elapses before digit arrival interparameter time elapsed , PE sends to ANS the parameter end character. At the end of the dialling, the message of acceptance phase end arrives as for phase 7 and is similarly managed. Also in the guided procedure with fixed digits phase 9 , as soon as the digits arrive they are sent to ANS yet, this case does not require the counting of the guard time, as the number of the digits composing the parameter is known the message of parameter end is then sent after that number of digits. Phase 10 is a waiting phase for the intervention of the executor program module of EL1. The executor module first sends two consecutive messages. The first availability and charging from TES indicates the module availability and communicates the way in which the service is charged. The charging depends on announcement and or seizure type. In particular, this message contains the parameters of type fixed metering at the response, cyclic metering during the listening fixed metering at the announcement end , base time unit to be used in cyclic metering, e.g. 1 minute , value time number of pulses to be sent for fixed metering, or metering rate for cyclic metering . Obviously, if the announcement has not to be charged, the message indicates this condition. The second message response from TES indicates that the announcement is ready. At this point, the procedure for local and long distance calls becomes different, as in general the metering modalities and the telephone criteria to be sent are different. The check on the call type long distance is only carried out if the subscriber has not released this case is examined later. Considering first the local call, the metering has to be carried out by the supplementary service exchange according to the information supplied by PE. Let us assume that the metering, if the announcement is to be charged, takes place at the response. The metering message contains, in value time parameter, the number of pulses to be sent. In the case of free of charge announcement, multiplexer MX is immediately operated so as to set up or to set up again the voice path and the next phase is reached phase 11, local call handling . In the opposite case, before setting up or setting up again the voice path, a first metering pulse is sent via driver B Fig. 4 , and the counting of a wait time begins within that time, sensor TAX has to send the pulse acknowledgment. In phase 11 the metering pulse acknowledgment is awaited if the acknowledgment arrives, a suitable signalling is emitted set flag OKTAS when time elapses, other metering pulses are sent if necessary, with the above modalities, and the announcement listening can begin. This phase ends with the release by the subscriber or the computer at the announcement end. In the case of computer release, the message of announcement end is received STOP from TES and the line unit is made unavailable for a certain time unavailablity, count availability wait time in order to allow all units along the connection to be released, and an intermediate phase in the release is reached phase 6 . When the time elapses, the unit is again made available and phase 1 is reached again, i.e. PE can manage a new request on that line unit. If the subscriber release precedes the computer release e.g. because the subscriber interrupts to listening before the end , the event is communicated to EL1 STOP to TES for stopping the announcement sending or the processing the line unit is made unavailable and the counting begins of a wait time for acknowledgment of processing stop of EL1 then phase 3 is reached. If the acknowledgment arrives, line unit is made again available δ3 , after having checked that no diagnostic test has been requested if the acknowledgment does not arrive, availability is set again after an alarm generation. In the case of a long distance call, metering pulses are sent by the exchange originating the call, which to this end has to receive the end of selection and answer criteria. PE makes send the end of selection criterium during phase 10 via driver A end of selection actuation for a given time there after the voice path is set up or set up again while awaiting the end of the criterium count end of selection time phase 12 . At the end of the criterium, drivers A and B are enabled for a certain time intermediate phase , the count of that time is started count intermediate phase duration and the time elapsing is awaited phase 13 . When the time elapses, PE make send answer criterium disabling all drivers of wires a, b, and phase 14 is reached, corresponding to the handling of a long distance call. Also this phase can end as that of a local call, with the release by EL1 or by the subscriber. In the first case, once received the message, PE makes send the clear back criterium via drivers A and B and begins counting a wait time for subscriber release. If the subscriber release arrives within the given time, operations following point δ3 take place otherwise, an alarm is sent before these operations. In case the subscriber releases before the computer, the same modalities as for the local call apply γ10 . During service access or execution, forced releases can take place. Besides the above mentioned cases, i.e. lack of response from program of EL1 and incorrect access attempt, forced release can be due to processing stop requested by EL1. This stop can be requested in both service acceptance and service execution phases. In the case of a condition requiring the forced release in acceptance phase, the end of selection criterium is generated as described for long distance call phase 2, λ2 and at its end the unit is made unavailable as for normal release. The procedure is shown only for phase 2. The actuation of end of selection criterium for both call types allows check on the seizure type to be avoided on the other hand, the end of selection criterium for a local call has no consequence on exchange operations. The forced release due to processing stop during service execution does not require the send of end of selection criterium, as such criterium is not required for a local call and has already been sent for a long distance call. In this case operation are those which follow item ω4. Apart from the cases which require the forced release, other anomalous cases can be the disabling by the diagnostic program module of EL1 disabling from DIAGN or the subscriber release before service end. In the case of a diagnostic program disabling indicated for sake of simplicity only in phase 1 , the line unit is made unavailable and phase 0 is resumed if disabling is ordered in a phase in which line unit is seized phase 2 and fol. , force release must take place before disabling. For subscriber release a distinction must be made between release occurring during acceptance or execution phases or during the intermediate phase between acceptance and execution phase 10 . Release in intermediate phase is handled as release in execution phase, already described the release is carried out only after response by executor program module in EL1. If release takes place during acceptance procedure phase 2 PE makes the line unit unavailable and sends the message which requires ANS stop STOP to ANS then stop acknowledgment phase 3 is awaited. The line unit is made unavailable, because otherwise a subscriber could seize the line unit while other circuits have not yet become free. Then, the procedure goes on as before. A call development was examined up to now. The preprocessor is also to manage tests with telephone criteria generated by DP and carry out diagnostic controls by means of the silence and of the 1 kHz signal. The message requesting a test switch from DIAGN can arrive in any moment and is sent by an operator. A distinction must be made between tests concerning a free or unavailable line unit or a busy line unit. If the line unit is busy hence PE is in a phase different from phases 0 and 1 , PE answers that the test cannot be carried out Response NOK to DIAGN in fact, the program requested test is a routine operation which has not to affect regular service for non routine cases, the test can be manually requested and can be carried out also if the unit is busy. If the unit is in phase 0 or 1, after acknowledgment of the execution possibility response to switch OK PE enables SW, via the suitable driver in AT and CSW Fig. 2 , so as to connect lines 9 and 15 test direction yes monitor towards test . Upon operator request, conventional telephone criteria of all types foreseen are sent to line 15 by DP PE carries out the processing and the operator can check the operation correctness, with visual signalling and tracing help. At the test end, preprocessor PE reaches again the starting phase thanks to a new message. The same happens for a test manually commanded. Also diagnostic controls are requested by an operator, and can be carried out only while the line unit concerned is free or unavailable. The operator can request that the control is carried out only once and indicate whether it is to be carried out immediately or as soon as possible also periodic control cycles can be requested. The operator request is sent from EL1 to PE by a suitable message preset to test in case of a periodic control cycle, the message is sent for each control operation. The message can arrive in any phase. In case of a message arriving in phase 1 line unit free , PE answers to EL1 with a ready message, makes the unit unavailable to the subscribers and passes to phase 15 Fig. 7E where the control is actually carried out upon explicit command by EL1. If the preset to test message arrives while PE is in phase 0, phase 15 is directly reached, after generation of a suitable signalling set flag test in phase 0 . If the message arrives in a phase other than phase 0 or 1 for instance phase 2 , PE checks whether the immediate execution is requested. In the negative PE generates a suitable signalling set test flag , whose presence is checked after the release see phase 3, δ3 and informs EL1 that the unit has been preset to the test was immediate execution requested, PE informs EL1 that the control cannot be carried out Resp. NOK to DIAGN . In phase 15, after having received the execution command PE reads a first time the state of logic , pause and speech sensors read test bit state in order to detect whether the silence and the 1 kHz signal sent by U1 were correctly received when the reading result is requested test bit state PE communicates it to EL1 Test result to DIAGN . Thereafter, PE receives a new execution order tone actuation from DIAGN , and enables drivers T0, T1 so as to send to line 11 first the silence and then the 1 kHz signal stored in GE specific tone . The operation goes on as in the case of the signals coming from U1. Interventions, if necessary, are carried out by the diagnostic program module of EL1. Once finished the diagnostic control EL1 has to send to PE an end of test message which brings PE to the starting phase phase 0 or 1 . Therefore, together with execution request or preset message, PE has to receive an information related to the time that EL1 should probably use for control execution and result interpretation obviously, this time is calculated within very large tolerance limits. If the time elapses before the test end message arrival, PE leaves autonomously phase 15. After the test end message, if the control fails, PE disables the unit. Conversely, if the control gives positive result, the unit is made again available and PE passes to phase 1, if the control was carried out in that phase, and acts as for disabling, if the control was carried out in phase 0. It is evident that the above description has been given only by way of non limiting example, and that variants and modifications are possible without going out of the scope of the invention, as defined in the appended claims. For instance, if telephone lines 6 are PCM lines, the whole of blocks CNA, FA, TR in Fig. 3 will be replaced by a device for converting the CVSD coded voice into PCM coded voice, and circuit CA2 can be dispensed with obviously, also the sensor and driver arrangement will be modified.