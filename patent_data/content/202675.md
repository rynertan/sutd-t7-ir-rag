# INPUT OUTPUT CONTROL SYSTEM

## Claims
Eingabe Ausgabe Steuersystem IOC , wobei das IOC System betriebsmäßig über einen gemeinsamen Bus C BUS mit einer zentralen Steuereinheit CC verbunden ist, und betriebsmäßig über einen externen Bus E BUS mit einer Eingabe Ausgabe Einheit IO verbunden ist, um so eine Übertragung von Daten zu steuern, die zwischen der zentralen Steuereinheit CC und der Eingabe Ausgabe Einheit IO übertragen werden sollen, mit

## Description
The present invention relates to an input output control system herein abbreviated as IOC which performs a transmission control of data communicated between a central control unit below, abbreviated as CC and an input output unit herein abbreviated as IO . More particularly, it relates to an IOC capable of a high operation speed and having a high reliability. The IOC operates to control an IO, such as a typewriter, magnetic tape apparatus, magnetic disk apparatus, and so on. Recently, IO has come under the control of a microprogram. In general, the processors operated by such a microprogram control are classified into two types i a bit slice processor, and ii a one chip processor The one chip processor ii does not, however, have the disadvantages inherent to the bit slice processor i , and therefore the one chip processor can be utilized over a wider practical range, compared with the bit slice processor. The one chip processor does, however, have a disadvantage in that the processing speed, on the order of nanoseconds, of the one chip processor is lower than that of the bit slice processor. The IOC to which the present invention is adapted is controlled with the one chip processor. The prior art IOC has two major features, as explained hereinafter. First, a direct memory access so called DMA transfer is realized by a microprogram, and second, an interruption to a microprocessor µP takes place every time a program mode PM operation is initiated during a DMA transfer. In view of the above mentioned two features, two problems arise in prior art IOC. First, a data transmission rate is lowered, and accordingly, a high speed IOC cannot be expected, and second, the related firmware is very complicated. Note, an example of such prior art IOC is shown in U.S. Patent No. 4,467,454. An Article from M. Evans in WESCON TECHNICAL PAPERS, 30th October 2nd November 1984, pp. 24 6 1 24 6 7, Anaheim, California, LA, entitled Programmable Winchester floppy disc controller with dual 10MBYTE SEC DMA channels , describes disk data control including a serial parallel converter, a formatter, a comparator and an ECC system data control including a 32 byte FIFO and two 16 bit DMA and a microprocessor access control including registers and decoding logics therefor. Accordingly, an object of the present invention is to provide an IOC having a higher operation speed and simpler firmware relative to the aforementioned prior art IOC. The above object is solved by the invention as claimed in claim 1. The above object and features of the present invention will be more apparent from the following description of the preferred embodiments with reference to the accompanying drawings, wherein Before describing the embodiments of the present invention, the related art and the disadvantages therein will be described with reference to the related figures. Figure 1 illustrates a typical and conventional input output control system, mounting therein a one chip microprocessor, and adjacent members thereof. In Fig. 1, IOC represents an input output control system. The IOC is connected, via a common bus C BUS, with a central control unit CC, and is also connected, via an external bus E BUS, with an input output unit IO. A variety of IO s exist in a computer system herein a magnetic disk unit DKU is illustrated as an example, but the input output unit IO may be a typewriter, a cathode ray tube CRT display, and the like. A nucleus of the IOC is the one chip microprocessor µP which, via an internal bus I BUS, receives data from a read only memory ROM and a random access memory RAM , and via the I BUS, also sends data to the RAM. Further, the µP is connected via gates GT1 and GT3 being, for example, open collector type gates, with a program mode control register PMREG and a direct memory access mode data register DMAREG, respectively. These two registers PMREG and DMAREG are further connected with the common bus C BUS, via gates GT2 and GT4, respectively. Furthermore, the microprocessor µP is connected with a direct memory access mode control circuit DMACTL and an interruption control circuit INTCTL . These circuits DMACTL and INTCTL, a program mode control circuit PMCTL , and an input output address matching circuit IOAM are connected with the common bus C BUS. The other buses, I BUS and E BUS, are interconnected via an input output unit control circuit IOCTL. It should be understood that the central control unit CC is usually connected, via the common bus C BUS, with a plurality of IOC s, however, in Fig. 1, only one IOC, connected with the magnetic disk unit DKU, is representatively displayed. The members in each IOC play the following roles. The above mentioned functional members operate as follows. In this explanation of the operations, a content of a control register will be first related, which control register stores program control words. The program control words, in the example, are loaded in the random access memory RAM. Figure 2 shows a register structure forming the program mode control register PMREG . It should be understood here that the program control words are transferred, via the register PMREG, to the control register formed in the RAM. As seen from Fig. 2, the program control words are set up with a device status register DSR , a file address register FAR , a command resister CMR , a memory address register MAR , and a word count register WCR , each being composed of 16 bits. These registers are allotted respective addresses, for example, 200 through 204. The address are particularly defined on the common bus C BUS and applied to respective IOC s connecting with the C BUS. The above mentioned registers play the following roles. Thus, the IOC can be operated in accordance with the contents of the above mentioned registers, in the following manner. As understood from the above, the typical and conventional IOC suffers from two problems. First, a direct memory access DMA transfer is realized by the use of the microprogram, and therefore, a data transmission rate is lowered and a high speed IOC cannot be expected, and second, an interruption to the microprocessor takes place every time the program mode PM is activated, and therefore, the construction of the related firmware becomes complicated. To overcome the above mentioned problems, a person skilled in the art may first conceive of employing a data transfer between the circuit IOCTL and the memory RAM performed under the DMA mode. This concept, however, is not advantageous, since the rate of data transfer between the memory RAM and the common bus C BUS does not become high, but is left as it is, so that the operation speed of the IOC system is not improved as a whole. Figure 3 is a circuit diagram illustrating a principle of the construction of an input output control system according to the present invention. In Fig. 3, members identical to those of previous figures are represented by the same reference characters as for all later figures . Therefore, compared with Fig. 1, a major difference in construction, lies in the employment by the IOC system of Fig. 3 of a buffer memory. In the example of the present invention, the buffer memory is comprised of a first in first out FIFO memory. For this, a selector SEL and an input output unit direct memory access control circuit IDMACTL , other than the circuit DMACTL, are introduced thereto. Further, a diagnostic check portion DIGC is introduced to the IOC system of the present invention. The DIGC portion is not an indispensable constituent for the present invention, but is beneficial to the present invention. That is, the DIGC carries out a desired diagnostic check operation in cooperation with, under control of the microprocessor µP and or the central control unit CC, the circuit IDMACTL, the circuit DMACTL and the buffer memory FIFO . The buffer memory, e.g., the memory FIFO, momentarily stores the transfer data to be communicated between the common bus C BUS and the input output unit control circuit IOCTL. The selector SEL, cooperating with the memory FIFO, selects either a transfer data from the internal bus I BUS or a transfer data from the common bus C BUS. The input output unit direct memory access control circuit IDMACTL, cooperating with the memory FIFO, achieves a control of a data transfer between the input output unit control circuit IOCTL and the memory FIFO. In the IOC system, of the present invention, both a write operation and a read operation, under the program mode PM , with respect to a control register REG in the system IOC, are achieved by the use of hardware. When a command information is written in the command register CMR, which sends commands for various operations to the system IOC, an interruption is made to the microprocessor µP and then a microprogram is started for activation of the IOC system. When a data transfer series comes to end, that is the operation of the IOC system is ended, an interruption is made from the circuit IOCTL to the microprocessor µP to start the microprogram for stopping the data transfer. The operation of the IOC system is summarized as follows. The DMA transfer of the transfer data, communicated between the IO and the central control unit CC, is achieved without using a microprogram, as in the typical and conventional IOC system. In place of this microprogram, the transfer data traffic is regulated by the memory FIFO. Accordingly, the microprogram is used only for, first, when the IOC system is to be started, starting the input output unit IO in accordance with the contents of the control register REG, and second, when the operation of the system IOC comes to an end, for editing an interruption information to be applied to the central control unit CC to execute an interruption command. In conclusion, the IOC system according to the present invention incorporates as many as possible automatic hardware operations, and thus a high speed IOC system can be realized. The benefits obtained by an employment of the diagnostic check portion DIGC, will be summarized below. As mentioned above, the data transfer is mainly performed with the use of hardware, represented by the memory FIFO, and thus a portion sandwiched between the unit CC and the unit IO DKU becomes seemingly empty. Therefore, once a problem occurs during the data transfer, a relatively long time is needed to carry out troubleshooting. That is, it is difficult to rapidly determine whether the problem has occurred in the memory FIFO, the unit IO or the microprocessor µP. This causes an apparent deterioration in the reliability of the IOC system. To counter this, the diagnostic check portion is introduced thereto, to ensure reliability in the IOC system. The functions of the diagnostic check part are largely classified into two parts. Namely, the first function is to stop, at any time, a request for data transfer to the direct memory access mode control circuit DMACTL and or the input output unit direct memory access control circuit IDMACTL. And the second function is to realize a read write operation for the memory FIFO, only at the time of the stoppage mentioned above, under the microprogram control. Under the above mentioned functions, the microprocessor µP can achieve a diagnostic check with respect to the memory FIFO alone ... 1 and a diagnostic check with respect to both the memory FIFO and the input output unit IO alone ... 2 , and further, the central control unit CC can achieve a diagnostic check with respect to the memory FIFO and the microprocessor µP alone ... 3 . If needed, it is possible to process the data from the central control unit CC by way of the memory FIFO and send the thus processed data to the unit IO ... 4 . By using the above recited diagnostic checks 1 , 2 , and 3 , it is easy to efficiently distinguish whether the problem has occurred in the memory FIFO side, the central control unit CC side, or the microprocessor µP side. Also, by using the above recited data processing 4 , it is possible to realize, for example a cipher data. Figure 4 illustrates a detailed circuit diagram of a periphery of the memory FIFO shown in Fig. 3, excluding the diagnostic check portion. An explanation thereof will be given below with reference to Figs. 3 and 4. For this explanation, summaries regarding the functions of the major circuit blocks will be first given. Note, the diagnostic check portion will be explained in detail hereinafter. An address allocation, viewed from the microprocessor µP, in the IOC system, is referred to as an address map. Figure 5 shows an example of an address map defined in the IOC system. Here distinctive operations according to the present invention are first explained with reference to flow charts, and the operations achieved inside the input output control system IOC are explained in detail later. When a start command is generated in the central control unit CC, a series of required information is written in the control register REG. In this case, a write operation to the command register CMR is particularly important, since an interruption to the microproces sor µP occurs under the condition wherein the above mentioned write operation is made. A line L1 in Fig. 3 indicates a route through which the related interruption command is transmitted to the microprocessor µP. When the interruption occurs, the contents of the control register REG are read out under the instruction of the microprogram, and an analysis is then made to determine what is to be done. The analysis is made through the ROM and RAM. According to the result of the analysis, if the microprocessor µP recognizes that the input output unit IO must be started, the magnetic disk unit DKU, in this example, is started. The data transfer between the thus started unit DKU and the common bus C BUS is performed without using the internal bus I BUS, but by way of the FIFO memory. The FIFO memory is commonly used, as is widely known, to output first in data first. The first in data is input to the FIFO memory via the selector SEL, as seen from Figs. 3 and 4. The data transfer between the unit IO and the FIFO memory is chiefly controlled by the input output unit direct memory access control circuit IDMACTL. The circuit IDMACTL is subjected to the following conditions. It should be noted here that, although a start command is first issued from the microprocessor µP, the overall control is actually performed in accordance with the status of the FIFO memory. First, if the FIFO memory is in an EMPTY status, the input output unit control circuit IDMACTL is started, so that the data read from the magnetic disk unit DKU is entered in the FIFO memory. Inversely, if the FIFO memory is not in an EMPTY status, the direct memory access mode control circuit DMACTL is started, so that the read data in the FIFO memory is output to the common bus C BUS. Through the output operation, when the FIFO memory is in a non FULL status the control circuit IDAMCTL is started again, so that the next data read from the unit DKU is entered in the FIFO memory. Thus, two identical operations are repeated thereafter. That is, the read data is entered in the FIFO memory, and at the moment when the FIFO memory is placed in a non EMPTY status, the control circuit DMACTL is started. Conversely, the read data is output from the FIFO memory, and at the moment when the FIFO memory is placed in a non FULL status, the control circuit IDMACTL is restarted. Thus, the transfer data is output from an input to the FIFO memory continuously. In this case, there may be, necessarily, an inbalance between the amounts of read data input and output, however, this inbalance can be absorbed by the FIFO memory. The capability for such absorption is defined by the capacity of the FIFO memory. Of course, the larger the memory capacity, the larger the capability for the above mentioned absorption, and therefore, the inbalance can be ignored. In Fig. 3, the gate GT3 is, for example, an open collector type gate, which enables a selective cut off between the internal bus I BUS side and the FIFO memory side, as also shown in Fig. 4. Further, each transfer gate TG is controlled to open and close selectively in accordance with whether the write operation a data transfer from the common bus C BUS or the read operation a data transfer to the common bus C BUS is to be achieved. Furthermore, the microprocessor µP is informed of an interruption for finish from the input output unit control circuit IOCTL refer to Fig. 6B , via a line L2. The IOC system according to the present invention is featured by, first, high speed operation, and second, operational high reliability. The high speed operation is realized, since the data transfer is achieved mainly by hardware, as understood from Fig. 4. First, the input out unit IO, i.e., the magnetic disk unit DKU, is started, via the input output unit control circuit IOCTL, by the microprocessor µP and a command for data transfer is given to the unit DKU. Assuming that the command for data transfer indicates a read operation of data from the magnetic disk unit DKU, the thus read data is supplied to the FIFO memory. The data is supplied along a route such as unit DKU control circuit IOCTL line L3 via a buffer amplifier indicated by triangle symbol selector SEL input terminal D When the gate G1 is opened, the input output unit direct memory access control circuit is started, via a gate G3 which is an OR gate, so that a signal RD, i.e., read command, is issued therefrom and the circuit IOCTL is instructed, by the signal RD, to operate under a read mode R . Then the read operation of data from the unit DKU commences. A signal WT indicates a command for write, which is applied to the circuit IOCTL at an input W thereof, which represents a write mode. The thus read date from the magnetic disk unit DKU is supplied to the FIFO memory, via the line L3 and the selector SEL. The input terminal S1 of the SEL is made conductive under the condition where the write operation is not specified. An input terminal S3 of the SEL is led, via a line L5, to the circuit IDMACTL at a supply terminal thereof of a signal WT , i.e., a write command. In this case, the FIFO memory must be operated under the write mode W . This condition is satisfied by the reception of the command signal WT for a write operation, which is given to the FIFO memory at the write mode specifying terminal W, thereof, via a gate G5, i.e., an OR gate. If the FIFO memory is not in the FULL status, the read data stored in the FIFO memory is output from an output terminal D In the above case, the condition wherein the control circuit DMACTL is started is that in which three inputs of a gate G6, i.e., an AND gate, are all supplied with logic 0 , except for an input thereof led to the flip flop DIR F F. The latter input is now supplied with the logic 0 , since the read operation is now conducted. Due to the thus opened gate G6, the output from the gate G6 starts the control circuit DMACTL via a gate G9, i.e., an OR gate. Accordingly, a transfer of the stored data commences from the FIFO memory to the common bus C BUS. The above mentioned three inputs of the gate G6, except for the input led to the DIR F F, are supplied with three kinds of signals, respectively. First is a time out signal given from a time supervisor TIMSV via a line L9, which indicates a time out occurring on the common bus C BUS. Second is a signal indicative of EMPTY given, via a line L10, from the terminal EMP of the FIFO memory. Third is a signal indicative of WCR 0 given from the register WCR in the control register REG Fig. 3 . With the reception of these signals, the gate G6 is opened, which signals represent that, first a time out has not occurred on the common bus C BUS, second, the FIFO memory is not in the EMPTY status, and third the word count number WCR is not zero. The above mentioned common bus time out specifically means a time out of a control signal S The content of the memory address register MAR is incremented by 1 under control of the circuit DMACTL, each time stored data is read out from the FIFO memory. On the other hand, the content of the word count register WCR is sequentially decremented by 1. When the content of the register WCR reaches zero, the control circuit DMACTL stops sending data to the common bus C BUS. This is common to both the write operation and read operation, and therefore, the signal indicative of WCR 0 is supplied to not only the gate G6 but also a gate G7, i.e., an AND gate. In this case, information indicating the EMPTY status of the FIFO memory, other than the above information indicative of WCR 0 , is also necessary to release the activation of the control circuit DMACTL. Similarly, in a write operation, a value corresponding to an amount of data to be transferred is preset in the register WCR. Therefore, the content of the register WCR does not reach zero at that time, a write request for the unit DKU is sequentially issued from the input output system IOC side, i.e., a master side under the DMA mode, to the central control unit CC side, i.e., a slave side under the DMA mode. The above mentioned write request for the unit DKU is generated under the write mode in which the transfer direction specifying flip flop DIR F F provides, at an output thereof, the logic 1 applied to the gate G7, and the gate G7 receives, other than the logic 1 , three kinds of signals of the logic 0 at the other three inputs thereof. Under this condition, the control circuit DMACTL is started for the write operation. The three kinds of signals indicate, first information indicating WCR 0 , second information indicating the FULL status of the FIFO memory, and third information indicating a first condition signal and or second condition signal output from a gate G8, i.e., an OR gate. The first condition signal relates to the aforesaid time out of the common bus, and the second condition signal relates to a parity error occurring on the common bus. A logical inversion of these three signals is applied to the related gate G7. The output from the gate G8 is also used as an interruption information INT to the microprocessor µP. The above mentioned parity error on the common bus is output as an information PE from a parity check part PTYCHK. The parity check part PTYCHK executes a parity check with respect to the write data on the common bus C BUS, which data is to be supplied, via an input terminal S2 of the selector SEL, to the input terminal D When the gate G8 is opened, the control circuit DMACTL issues the command signal WT for a write operation, which is given via the gate G5 to the FIFO memory to place it in the write mode W . On the other hand, so long as the FIFO memory is not in the EMPTY status data remains in the FIFO , the control circuit IDMACTL is started continually to issue the command signal WT for a write operation to the control circuit IOCTL to place the same in the write node W . A write command has already been given, from the microprocessor µP, to the magnetic disk unit DKU, via the control circuit IOCTL. In Fig. 4, the gates G6 and G7 further commonly receive the bit indicative of the DMAEX refer to the address 8001 in Fig. 5 and the gates G1 and G2 further commonly receive the bit indicative of the IDMAEX refer to the address 8001 in Fig. 5 at their respective inputs note, these inputs are not illustrated for brevity. The FIFO memory is important as the buffer memory in the present invention, and therefore, will be explained in detail below. Figure 7 illustrates a detailed example of the FIFO memory. The meanings of the characters D As mentioned previously, the IOC system according to the present invention can operate at a high speed, since th data transfer is controlled mainly by the use of hardware, automatically. It is not, however, easy to rapidly determine the source of a malfunction when such a problem occurs. This is because the portion sandwiched between the CC and IO units appears to be empty due to the automatic data transfer control by the hardware. To counter this, the diagnostic check portion DIGC Fig. 3 is further incorporated in the IOC system of the present invention, whereby a special diagnostic mode is established to detect the source of any malfunction. Figure 8A illustrates a schematic general view for explaining the diagnostic check with respect to the FIFO memory. That is, Fig. 8A shows a diagnostic mode for the FIFO memory. Under the diagnostic mode, the aforesaid commands for data transfer, performed with the FIFO memory, are stopped. These commands are issued from the control circuits DMACTL and IDMACTL. Note, the circuits DMACTL and IDMACTL are not illustrated in Fig. 8A. Thus, both the units CC and IO are cut off from the FIFO memory. Next, a predetermined diagnostic check data DD is written, via a route I, in the FIFO memory, under control of a microprogram, by the microprocessor µP. The data DD can be stored in advance in the ROM Fig. 3 . The thus written data DD is then read therefrom and sent to the microprocessor µP, via a route II. If no problem exists in the FIFO memory, the data DD is correctly returned to the microprocessor µP. Figure 8B illustrates a schematic general view for explaining the diagnostic check with respect to both the memory FIFO and the unit IO. That is, Fig. 8B shows a diagnostic mode for both the FIFO and the IO. Under the diagnostic mode, the circuit DMACTL stops issuing the aforesaid command for data transfer to the FIFO memory, and thus only the circuit IDMACTL operates as usual. Note, only the circuit IDMACTL is illustrated in Fig. 8B. Thus, first the central control unit CC is cut off from both the FIFO memory and the input output unit IO. Next, under control of a microprogram by the microprocessor µP, a predetermined diagnostic check data DD is written, via a route I, in the FIFO memory read again from the FIFO memory, and is written in the input output unit IO via a route II. The thus written data DD in the unit IO is read via a route III, written in the FIFO memory, and read again therefrom to be again sent to the microprocessor µP via a route IV. If no problems exist in both the FIFO memory and the unit IO, the data DD is correctly returned to the microprocessor µP. If the data DD is not correctly returned, it is determined that a malfunction exists in the FIFO memory and or the unit IO, and an alarm is issued from the microprocessor µP to warn of the occurrence of a malfunction. In the above mentioned case, a further investigation must be made to determine whether the problem has occurred in the FIFO memory or in the unit IO. If the FIFO memory is normal, it is judged that the problem exists in the IO unit. Conversely, if the FIFO memory is abnormal, it is possible that the malfunction exists in both the FIFO memory and the IO unit. In this case, it is necessary to first repair the FIFO memory and then determined whether or not the IO unit is abnormal. Note, the diagnostic mode for the FIFO memory, mentioned previously in reference to Fig. 8A, can be utilized for the investigation into whether the FIFO memory is normal or abnormal. Figure 8C illustrates a schematic general view for explaining the diagnostic check with respect to both the FIFO memory and the common bus C BUS. That is, Fig. 8C shows a diagnostic mode for both the FIFO memory and the C BUS. Under the diagnostic mode, the circuit IDMCTL stops issuing the aforesaid command for data transfer to the FIFO memory, and thus only the circuit DMACTL operates as usual. Note, only the circuit DMACTL is illustrated in Fig. 8C. Thus, first the input output unit IO is cut off from both the FIFO memory and the central control unit CC. Next, under control of the microprogram by the central control unit CC, a predetermined diagnostic check data DD is written, via a route I, in the FIFO memory, read again from the FIFO memory, and fetched by the microprocessor µP via a route II. The data fetched by the microprocessor µP is read and written from and to the FIFO memory again via a route III. The thus written data is read out again by the central control unit CC via a route IV. If no problem exists in either the FIFO memory or the common bus C BUS, the data DD is correctly returned to the central control unit CC. If the data is not correctly returned thereto, it is determined that a problem exists in the FIFO memory and or the common bus C BUS. Thereby, an alarm is issued from the central control unit CC to warn of the occurrence of the problem. In the above mentioned case, a further investigation must be made into whether the problem has occurred in the FIFO memory or in the common bus C BUS. If the FIFO memory is normal, it is judged that the problem exists in the common bus C BUS. Inversely, if the FIFO memory is abnormal, it is possible that the problem exists in both the FIFO memory and the common bus C BUS. In this case, it is necessary to first repair the FIFO memory and then investigate whether or not the common bus C BUS is abnormal. Note, the diagnostic mode for the FIFO memory, mentioned previously in reference to Fig. 8A, can be utilized for the investigation into whether the FIFO memory is normal or abnormal. Figure 9 illustrates a schematic general view for explaining a data processing mode by the microprocessor µP. In the data processing mode, the transfer data TD provided from the central control unit CC is processed by the microprocessor µP, and the thus processed data is written, as a processed data td, in the IO unit. Under the processing mode, both the circuits DMACTL and IDMACTL operate as usual. In this case, the processed data td may be used as a cipher data to be kept secret. First, a transfer data TD, required to be kept secret, is provided from the central control unit CC via a route I to be written in the FIFO memory, under control of the circuit DMACTL. Thereafter, the thus written data is read from the FIFO memory and sent to the microprocessor µP via a route II. The microprocessor µP provides a predetermined processing to the data given and then the thus processed data td is written in the FIFO memory via a route III. The data td is read therefrom and written in the IO unit via a route IV under control of the circuit IDMACTL. Thus, the cipher data can be stored in the IO unit. Figure 10 illustrates an example of a detailed circuit diagram of the diagnostic check portion DIGC cooperating with the FIFO memory. In Fig. 10, the meanings of the characters C BUS, E BUS, I BUS, SEL, FIFO, IDMACTL, DMACTL are identical to those explained previously. Also, the characters DIR , IDMAEX and DNAEX have already been explained in relation to the address 8001 of Fig. 5. The output DIR is produced from the flip flop F F which is represented by a double circle symbol at the center bottom in Fig. 4. In actuality, however, it is comprised of three sets of flip flops indicated by the character F F. The flip flop F F is provided with three D inputs, i.e., D₀ , D₁ and D₂ , and with three Q outputs, i.e., Q₀ , Q₁ and Q₂ The output Q₀ produces the transfer direction specifying information DIR, the output Q₁ produces information for exciting the input output unit direct memory access mode control circuit IDMACTL and the output Q₂ produces an information for exciting the direct access mode control circuit DMACTL. The information IDMAEX for the excitation issues a commands to decide whether or not the data transfer, between the FIFO and the C BUS including the CC , must be executed. To be specific, if the information DMAEX assumes the logic 1 , the control circuit DMACTL is excited, and if the information IDMAEX assumes the logic 1 , the control circuit IDMACTL is excited. It is important that the DIGC portion is controlled by these set of information for excitation. For example, when the read operation, i.e., the data transfer from the IO unit to the FIFO memory, is carried out, the transfer direction specifying information DIR assumes the logic 0 , as mentioned previously. At this time, one of the conditions for opening both gates G21 and G22 is satisfied. The gates G21 and G22, each being an AND gate, correspond to the aforesaid gates G6 and G1 of Fig. 4. Further, a write request WREQ1 is applied from the gate G22 to the control circuit IDMACTL if the conditions are satisfied that the FIFO memory is not in the FULL status and also the information for the excitation of IDMAEX is made logic 1 . Thereby, the data read from the unit IO is supplied to the FIFO memory. Further, the gate G21 is opened if the conditions are satisfied that the information DIR is made logic 0 , the memory FIFO is not in the EMPTY status, and the information for the excitation of DMAEX assumes the logic 1 , so that a read request RREQ2 is output therefrom to the control circuit DMACTL. Thereby, the stored data in the FIFO memory is read therefrom and sent to the common bus C BUS. On the other hand, when the write operation i.e. the data transfer from the FIFO memory to the IO unit, is carried out, the transfer direction specifying information DIR assumes the logic 1 , as mentioned previously. At this time, one of conditions for opening both gates G and G23 is satisfied. The gates G and G23, each being an AND gate, correspond to the aforesaid gates G2 and G7 of Fig. 4. Further, a write request WREQ2 is applied from the gate G23 to the control circuit DMACTL if the conditions are satisfied that the FIFO memory is not in the FULL status and also the information for the excitation of DMAEX is made logic 1 . Thereby, the transfer data from the common bus C BUS is supplied to the FIFO memory. Further, the gate G is opened if the conditions are satisfied that the information DIR is made logic 1 , the memory FIFO is not in the EMPTY status, and the information for the excitation of IDMAEX assumes the logic 1 , so that a read request RREQ1 is output therefrom to the control circuit IDMACTL. Thereby, the data stored in the FIFO memory is read therefrom and sent to the IO unit. Thus, a variety of the requests, i.e., RREQ1, RREQ2 and so on, are generated by using the outputs from the flip flop F F and so on. The flip flop F F is supplied, at the clock input CK thereof, with the output from a gate G24 being an AND gate. The gate G24 applies the clock pulse to the input CK every time the write command WRITE from the microprocessor µP is issued, which command is first written in the register REG Fig. 5 at the address thereof, for example 8001. Further, respective commands are given via the internal bus I BUS and applied to the D inputs D₀ , D₁ , and D₂. The read operation from the FIFO memory is achieved every time a read command READ is issued from the microprocessor µP and set in the register REG Fig. 5 at the address 8000 thereof. To be specific, among the gates G30 through G35 refer to left side of Fig. 10 , each being an AND gate, the gate G35 is opened. When the write command WRITE is issued, the gate 30 is opened. . Then the output from the gate G35 passes through a gate G42 corresponding to the gate G4 of Fig. 4 , among the gates G40 through G42 each being an OR gate, so that the memory FIFO is operated under the read mode R . At this time, a gate G50 illustrated at right bottom side of FIFO memory is also necessarily opened to make a gate G51, i.e., a transfer gate, active, and thereby a transfer route led to the internal bus I BUS, is made conductive. On the other hand, a transfer route, led to the external bus E BUS, is made conductive by a gate G52, i.e., a transfer gate, which is made active by the information for the excitation of IDMAEX. Note, during the read operation under the usual DMA transfer mode, both gates G33 and G34 are opened, respectively, by a read request IDMARD and a read request DMARD. These requests IDMARD and DMARD corresponding to signals RD and RD shown in Fig. 4 are given from the control circuits IDMACTL and DMACTL, respectively. Therefore, these gates G33 and G34, together with the gate G42, comprise the gate G4 shown in Fig. 4. The operation to write to the first in first out memory FIFO is achieved every time a write command WRITE is issued from the microprocessor µP and set in the register REG Fig. 5 at the address 8000 thereof. The write command bit is applied to a gate G60 AND gate and activates a gate G61 transfer gate to make a transfer route from the I BUS conductive. While a transfer route, let to the external bus E BUS, is made conductive by a gate G62, i.e., a transfer gate, which is made active by the information for the excitation of IDMAEX. Note, during the write operation under the usual DMA transfer mode, both gates G31 and G32 are opened, respectively, by a write request IDMAWT and a write request DMAWT. These requests IDMAWT and DMAWT corresponding to signals WT and WT shown in Fig. 4 are given from the control circuits IDMACTL and DMACTL, respectively. Therefore, these gates G351 and G352, together with the gate G41, comprise the gate G5 shown in Fig. 4. Throughout the descriptions mentioned above, it is believed that the basic concept of the present invention can be sufficiently comprehended by person skilled in the art. Supplemental explanations, however, will be given below in order to further clarify the IOC system according to the present invention, by dislosing detailed examples thereof. Figures 11A and 11B depict timing charts for explaining an information transfer carried out on the common bus C BUS. As seen from these figures, the information transfer is carried out between a master device M and a slave device S at any time. The transfer is commanded from the master device M at any time, and where the central control unit CC acts as the master device M, is known as a program mode PM transfer, and where the IOC system acts as the slave device S, it is known as a direct memory access DMA mode transfer. When a device, provided by the bus C BUS, acts as the master device M, it is necessary to execute a sequence for acquiring a bus activation right. This is not particularly pertinent, and therefore, no further explanation will be given. The information transfer from the master device M hereinafter simply master M to the slave device S hereinafter simply slave S , i.e., M S, is executed as follows. The information transfer from the slave S to the master M, i.e., S M, is executed as shown below. Figure 12 shows an address map defined in the input output control system IOC . Note, this address map is basically identical to that shown in previous Fig. 5, however, the address map of Fig. 12 is partially modified with respect to that of Fig. 5, to facilitate an understanding of the example mentioned later. The modifications are as follows. In Fig. 12, the address 4004 and 400 are shown in more detail to express the IOCTL control register. The address 8001 of Fig. 5 is set up at the address 4001 of Fig. 12. The address FIFO of Fig.5 is set up at the address 4003 of Fig. 12. The above mentioned IOCTL control register will be clarified below, and is composed of a register STR, a register IMCTR, and a DFIFO memory. The register STR functions as an IOCTL status register which informs the microprocessor µP of a variety of statuses in the IOCTL. The register ICMR functions as an IOCTL command register. When a command is set in this register, the IOCTL begins an operation instructed by the thus set command. The DFIFO memory is a data FIFO memory which is used to set a command parameter supplementing the related command. Alternatively, the DFIFO memory is used as a small capacity FIFO memory serving for data transfer, and having a capacity of, for example, 8 bytes. The input output unit control circuit IOCTL begins with the following steps. It should be noted that, in Fig. 12, the character W denotes that a write operation is possible by the use of a microprogram, and R denotes that a read operation is possible by the use of a microprogram. When a command is written in the ICMR, the IOCTL operates to read a command parameter from the DFIFO and then starts the related operation. After the commencement of the operation, the IDMACTL is informed of a writing of data to the IOCTL and a reading of data from the IOCTL, by setting a signal DREQ as the logic 1 from the IOCTL. The signal DREQ is the so called data request signal. Figure 13A depicts an example of a bit arrangement for setting up the register STR , and Figure 13B depicts an example of a bit arrangement for setting up the register ICMR . Both registers STR and ICMR are set up at the address 4004 in the map of Fig. 12. In Fig. 13A, CB denotes a control circuit busy and both CEH and CEL denote a command end. The bit CB denotes that the IOCTL is executing a command. The bit CB assumes the logic 1 when the command starts and is changed to 0 when the command execution is finished. In the command end bits CEH and CEL, the conditions CEH 0 and CEL 0 denote that the command is being executed, and alternatively, no command is issued the conditions CEH 0 and CEL 1 denote that the operation has finished abnormally the conditions CEH 1 and CEL 0 denote that the operation has finished normally, and the conditions CEH 1 and CEL 1 denote that the command is invalid. In Fig. 13B, the bits ICMD are used to set an IOCTL command therein. Figure 14 is a partial perspective view of the magnetic disk unit DKU . Fig. 14 is referenced for an explanation of the following table. The above table displays an example of commands and command parameters. In the table, CN denotes a cylinder number, HN a head number, SN a sector number, and SCNT a number of the sectors. Figure 15 illustrates a common bus connection area of Fig. 4 in more detail. The common bus C BUS is mainly composed of an address line, a data line, and a control line. Note, members relating to the program mode PM are omitted, since Fig. 15 displays members pertinent to the present invention. The DMA transfer between the bus C BUS and the memory FIFO is started by the signal WREQ2 or RREQ2 Fig.10 given from the peripheral of the FIFO memory. When the circuit DMACTL is started by the above mentioned signal, the information transfer, explained in reference to Figs. 11A and 11B, commences execution. A detailed explanation of the operation concerned will be given hereinafter. Figure 16 illustrates peripherals of the FIFO memory. It should be understood that the peripherals of Fig. 16 are arranged to be adopted to the control registers, relating to the FIFO memory, allotted to the addresses 4000, 4001 and 4003 of the address map shown in Fig. 12. The write read allocation at the address 4001 is achieved through the microprocessor µP bus, illustrated as BUS in Fig. 16. On the other hand, the write read allocation at the address 4003 is achieved through the internal bus I BUS of Fig. 16. In Fig. 16, the signals WRITE and READ represent instructions for write and read issued from the microprocessor µP. The address signals indicative of 4000, 4001, and 4003 are formed by decoding the addresses given from the microprocessor µP. Signals DMAWT and DMARD represent instructions for write and read given from the control circuit DMACTL. Signals IDMAWT and IDMARD represent instructions for write and read given from the control circuit IDMACTL. The transfer request signals, i.e., WREQ1, WREQ2, RREQ1, and RREQ2, are selectively generated in accordance with the internal status of the FIFO memory and the content of the control register at the address 4001. Figure 17 illustrates peripherals of the circuit IOCTL. It should be understood that the peripherals of Fig. 17 are arranged to be adopted to the control register, relating to the circuit IOCTL, allotted to the addresses 4004 and 4005 of the address map shown in Fig. 12. The write read allocations at the addresses 4004 and 4005 are achieved through the bus I BUS connected, via a bidirectional driver, to the bus BUS. In Fig. 17, signals WRITE and READ represent instructions for write and read issued from the microprocessor µP. The address signals indicative of 4003, 4004, and 4005 are formed by decoding the addresses given from the microprocessor µP. The characters WREQ1 and RREQ1 are transfer requests for starting the circuit IDMACTL, given from the peripheral of the FIFO memory shown in Fig. 16. The circuit IOCTL is started when the command and the command parameters are written at the addresses 4004 and 4005. The DMA transfer request is generated by starting the IOCTL, so that the IOCTL makes the logic of the bit DREQ thereof 1 . When the DREQ bit is 1 , it is detected that the WREQ1 bit or RREQ1 bit assumes 1 , the circuit IDMACTL is started, and a write or read command to the IOCTL is issued as a bit IOCWT or a bit IOCRD. When the transfer is completely finished, the IOCTL issues a bit INT having a logic 1 to raise an interruption to the microprocessor µP. Figure 18 illustrates a detailed example of the direct memory access mode control circuit DMACTL . The circuit DMACTL Fig. 15 controls a data transfer between the common bus C BUS and the FIFO memory. In Fig. 18, characters WREQ2 transfer request from the C BUS to the FIFO , RREQ2 transfer request from the FIFO to the C BUS , RE C BUS parity error , TOUT C BUS time out , SRVO service out , BBSY bus busy , DBGT data bus gate control , ADGT address bus gate control , DMARD read request , WSRVI write service in , RSRVI read service in , DMAWT write request and MAR 1 memory address register increment are all displayed in Fig. 15. In Fig. 18, each character F , provided by respective characters, represents a flip flop, in the form of a JK flip flop. A timing formation circuit I produces three different timing signals at the terminals T0, T1, and T2 thereof, and therefore, the circuit I can be made of, for example, D flip flops connected in tandem and operated in synchronizer with a clock CLK. This is also true for a timing formation circuit II. The operation of the circuit shown in Fig. 18 will be clarified with reference to Figs. 19 and 20. Figure 19 depicts timing charts for explaining the operation of the circuit DMACTL under the DMA write mode, i.e., C BUS DKU, and Figure depicts timing charts for explaining the operation of the circuit DMACTL under the DMA read mode, i.e., DKU C BUS. Figure 21 illustrates a detailed example of the input output unit direct memory access mode control circuit IDMACTL . The control circuit IDMACTL Fig. 17 controls data transfer between the FIFO memory and the input output unit control circuit IOCTL . In Fig. 21, characters WREQ1 transfer request from the DKU to the FIFO memory , RREQ1 transfer request from the FIFO memory to the DKU , DREQ DMA transfer request , IOCRD read request to the IOCTL , IDMARD read request to the gate G33 Fig.10 , IDMAWT write request to the gate G32 Fig.10 , IOCWT write request to the IOCTL are all displayed in Fig. 17. In Figure 21, each character F , provided by respective characters, represents a flip flop, in the form of a JK flip flop. A timing formation circuit III produces four different timing signals at the terminals IT0, IT1, IT2 and IT3 thereof, and therefore, the circuit III can be made of, for example, D flip flops connected in tandem and operated in synchronism with the clock CLK. The operation of the circuit shown in Fig. 21 will be clarified with reference to Figs. 22 and 23. Figure 22 depicts timing charts for explaining the operation of the circuit IDMACTL under the DMA read mode, i.e., DKU FIFO, and Figure 23 depicts timing charts for explaining the operation of the circuit DMACTL under the DMA write mode, i.e., FIFO DKU. Thus, the circuit IDMCTL is started when the following conditions are satisfied first, either WREQ1 or RREQ1 assumes the logic 1 , and second, the transfer request DREQ from the IOCTL assumes the logic 1 . Figure 24 illustrates a detailed example of the time supervisor TIMSV. The supervisor Fig. 15 detects the C BUS time out and produces the corresponding C BUS time out signal TOUT. That is, the supervisor TIMSV determines whether or not the time from the issuance of WSRVI to the reception SRVO is shorter than the prescribed time. During the case where the time out flip flop TOUTF is not set, a signal RSRVI or WSRVO refer to Figs. 11A and 11B is received. Under such a condition, if the signal SRVO is 1 , a counter enable flip flop CTENF is set and a counter continues counting incrementally so long as the flip flop CTENF is set. If the signal SRVO changes to logic 1 before an overflow OVF of the counter, the flip flop CTENF is reset. Therefore, the counter is also reset, and thus the flip flop TOUTF cannot be set. If the counter overflows before the change of the SRVO to 1 , the flip flop TOUTF is set, and both the flip flop CTENF and the counter are reset. This means that the C BUS time out is detected. Accordingly, the C BUS time out detection time is defined with the time up to the overflow of the counter. The operation of the circuit shown in Fig. 24 will be further clarified with reference to Fig. 25. Figure 25 depicts timing charts for clarifying the operation of the time supervisor TIMSV illustrated in Fig. 24. In Fig. 25, the triangle symbol at the bottom thereof represents the time at which the time out concerned is detected. Further, the dotted lines represent the case where the C BUS operation is performed normally. Figure 26 illustrates a detailed example of the input output control circuit IOCTL . It should be understood that the IOCTL of Fig. 26 is set up for, among a variety of input output units, the magnetic disk unit DKU. Therefore, the unit DKU is controlled by the IOCTL by way of a usual DKU interface control circuit, which is not pertinent to the present invention, and therefore, no further explanation will be given therefor. The members shown in this figure are already mentioned in reference to the previous figures. For example, STR , ICMR and DFIFO are shown in Fig. 12, and the READ , WRITE , INT , DREQ IOCWT , and IOCRD are shown in Fig. 17. As mentioned above in detail, in the present invention, although the IOC system is operated under a low cost one chip microprocessor which is easy to use but has a low operation speed, the IOC system can substantially act as a high speed operation system due to the use of the hardware concerned. In this case, it becomes difficult, in general, to establish a satisfactory diagnostic check due to employment of such hardware. This problem, however, can be overcome with the use of the diagnostic check portion and thus, a prompt restoration from a malfunction state is assured. This attributes to the realization of a highly reliable IOC system.