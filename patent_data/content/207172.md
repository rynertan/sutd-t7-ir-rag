# DRIVE CONTROL SYSTEM FOR SERVO MOTORS

## Claims
Antriebsregelsystem für Servomotoren, bei dem eine Positionssteuerung eines Servomotors 11 durch einen Servosteuerungs Mikroprozessor 10 auf der Grundlage eines Servomotor Rückkopplungssignals durchgeführt wird und der Servosteuerungs Mikroprozessor 10 mit einer Unterbrechungsbefehls Erzeugungsschaltung 20 zum Erzeugen eines Unterbrechungsbefehls bei einer variablen Unterbrechungsperiode verbunden ist, dadurch

## Description
This invention relates to a servomotor drive control system in which a microprocessor is utilized as a servo control unit. In order to control a multiple axis machine tool or the like with a high degree of accuracy, use is made of a servomotor driven by a command signal from a numerical control unit hereafter referred to as an NC unit or the like. Conventionally, servomotors of this type are driven by analog servo systems. However, with the progress that has recently been made in the technical development of computer control, various expedients dealing with the question of how to control a plurality of servomotors efficiently by a single control unit have been devised. A microprocessor generally has its operation decided by a control program. By creating a control program to conform to the control configuration, therefore, various types of servo control can be realized by one and the same servo control unit, as is well known. Fig. 2 is a block diagram illustrating the general features of a servomotor control circuit of this type. As shown in the Figure, a main CPU 1 of microprocessor construction, which is for reading in input data and executing predetermined processing, and a plurality of shared RAMs 2, are connected to an NC unit side by a data bus B1. A servo control CPU 3 of microprocessor construction is connected to each of the shared RAMs 2 via a bus B2 and outputs an analog signal indicative of a velocity command to each servoamplifier 4 associated with a servomotor. The servoamplifier 4 comprises a velocity control circuit 5, a current control circuit 6 and an inverter 7 and subjects a servomotor 8 to prescribed feedback control on the basis of current, position and velocity. Each shared RAM 2 is for an exchange of data between the main CPU 1 and the servo control CPU 3. For example, a signal indicative of the position of the servomotor 8 is temporarily stored in the shared RAM 2 through the servo control CPU 3, and the main CPU 1 reads out this stored value to perform display processing and the like. Further, a position command signal from the main CPU 1 is temporarily stored in the shared RAM 2 and the servo control CPU 3 reads out this stored value and outputs a velocity command to the servoamplifier 8. In a servomotor drive control system thus constructed, it can be arranged so that the same hardware will suffice regardless of whether the servomotor is of the AC or DC type if a so called soft servo system is adopted in which all control functions, except for that of the inverter in the servoamplifier, are replaced by a microprocessor and the amplifier function is provided on the side of the NC unit. This is so because the only difference between AC and DC motor control is that the PWM signals applied to the driven inverter either will be required in three phases, thus requiring that six signals be used, or in one phase, in which case only two signals will suffice. However, in a case where an AC synchronous servomotor is to be subjected to current control by a microprocessor, the frequency characterisic of the current loop must be made faster, by about one digit place, than the frequency characteristics of the position and velocity loops, as shown in Fig. 3 a . Consequently, even though processing for position control and velocity control is performed at a period of e.g. 1 ms, processing for current control must be executed at a period of 166 us, which is 1 6 of the above. Moreover, since response cannot be neglected, the periods of position control and velocity control cannot be lengthened in order to raise torque efficiency. If the servomotor motor is of the DC type, on the other hand, the frequency characteristic of the current loop should be slowed down. For example, if the period is made 333 us, as shown in Fig. 3 b , a plurality of servomotors can be controlled by a single servo CPU even if control is exercised by a processor having the same processing speed. Nevertheless, the processor cannot be made to demonstrate its processing capability with the same type of hardware arrangement. The publication Advances in Instrumentation vol. 31, No.1, of 1976, carries on pages 1 to 10 thereof an article entitled Position Control of Machine Tools Using a Microcomputer . Herein is disclosed a servomotor position drive control system according to the preamble of the attached claim 1. An object of the present invention however is to provide a servomotor drive control system in which current control of a servomotor is performed by a microprocessor on the basis of a servomotor current feedback signal, wherein both AC and DC servomotors can be controlled by the same hardware arrangement and no decline is caused in the processing capability of the microprocessor. According to the present invention there is provided a servomotor drive control system wherein position control of a servomotor is performed by a servo control microprocessor on the basis of a servomotor feedback signal, and the servo control microprocessor is coupled to an interrupt generating circuit for generating an interrupt command at a variable interrupt period, characterised in that a main CPU is provided for performing input data and sequence data processing of the servomotor and the servo control microprocessor is coupled to the main CPU for performing not only position control and velocity control, but also PWM current control of the servomotor on the basis of a servomotor current feedback signal with an interrupt command period set in dependence upon whether the servomotor is provided with either an A.C. motor or a D.C. motor, and in dependence upon the rating of the servomotor. The servomotor drive control system according to the present invention provides a drive control signal corresponding to drive torque by setting a current loop interrupt period conforming to the rating of the servomotor to be controlled in the microprocessor that effects the current control of the servomotor. This enables various servomotors to be controlled in a highly efficient manner. Fig. 1 is a block diagram illustrating an embodiment of the present invention, Fig. 2 is a block diagram illustrating an example of a conventional servomotor control system, and Figs. 3 a , b are views illustrating AC servo and DC servo control timings, respectively. An embodiment of the present invention will now be described in detail with reference to the drawings. In Fig. 1, numeral 10 denotes a servo CPU of microcomputer construction for controlling a servomotor 11. The CPU 10, which controls the current, velocity and position of the servomotor 11, is arranged in an NC unit along with a main CPU 12, which executes a series of sequence processing steps in accordance with input data, and a shared RAM 13 for delivering data. The CPU 10 is coupled to the main CPU 12 by a data bus 14 via the shared RAM 13. The servo control CPU 10 provides a servoamplifier 15 with a PWM command, in the form of a digital signal, from a PWM command output circuit 16. The servoamplifier 15 is constructed to include only final stage driver elements such as power transistors constituting an inverter. In other words, the servoamplifier is composed of elements in three phases if the servomotor is an AC synchronous motor and elements of a single phase if the servomotor is a DC motor. Numeral 17 denotes a counter for counting detection pulses from a sensor such as a rotary encoder, and numeral 18 designates an A D converter. These convert a current feedback signal into a digital signal, which is applied to the CPU 10. A data memory RAM , program memory, data table and the like are also connected to the data bus 14 if necessary. Numeral 20 designates an interrupt generating circuit connected to the servo CPU 10. An oscillator 21 for producing a reference frequency is connected to the interrupt generating circuit 20. The arrangement is such that a current loop interrupt period is set conforming to the rating and the type AC or DC of the servomotor 11 controlled by the servo CPU 10. It is arranged so that a desired interrupt period is obtained, either by constructing the oscillator 21 to vary its own oscillation frequency or by such an expedient as connecting a frequency divider 22 thereto to vary the oscillation frequency of the oscillator 21. By thus making it possible to vary the interrupt period of the CPU 10 on the servo controller side, the NC side is capable of efficiently controlling AC and DC servomotors with the same hardware configuration. More specifically, if the frequency characteristic of current control performed by the servo CPU 10 is set to 166 usec in case of an AC motor and to 333 usec by changing over the frequency divider circuit 22 in case of a DC motor, current control of three DC servomotors by means of a single servo CPU becomes possible. Accordingly, in a case where the servo CPU 10 is provided within the NC unit together with the main CPU 12 and a plurality of DC servomotors are driven and controlled by transferring data between the two CPUs at high speed via the shared RAM 13, an interrupt period can be set in dependence upon the ratings and the type AC or DC of the servomotors. Furthermore, the frequency characteristic of the current loop can be set accurately for raising the torque efficiency of an AC motor and a drive control signal corresponding to the drive can be supplied. A variety of servomotors can be driven and controlled efficiently by interconnecting the main CPU and servo CPUs provided specially for respective servomotors. The servomotor drive control system according to the present invention is adapted to generate the microprocessor interrupt period and the current command applied to the servomotor at an interrupt period set in dependence upon the rating and the type AC or DC of the servomotor driven and controlled. Accordingly AC and DC servomotors can both be controlled with the same hardware configuration and there is no decline caused in the processing capability of the microprocessor.