# Coin handling apparatus.

## Abstract
A coin handling apparatus comprises a validator 102 which delivers acceptable coins via an accept reject gate 112 to a separator 104 . The separator 104 separates the coins of different denominations and delivers these via respective passageways 4 to coin storage tubes 8 or cashboxes. Each storage tube 8 has at its entrance a gate 18 which determines whether the coins are delivered to the storage tube 8 or to an alternative destination 12 . All these gates 18 are mechanically coupled, and controlled by a common solenoid 60 . The separator 104 handles the coins so quickly that different denomination coins may arrive at different gates 18 in rapid succession. To avoid overfilling of the tubes 8 , the gates 18 are controlled in such a manner as to give priority to those coins intended to be routed to the alterna tive destinations 12 . Each gate 18 is so configured that jamming cannot occur if a coin arrives at the gate 18 while the gate 18 is moving toward the position for routing coins 11 to the alternative destination 12 . To avoid any jamming which might occur due to a coin arriving at a gate 18 while the gate 18 is moving toward the position for routing coins to the storage tube 8 , the separation rate is temporarily reduced by rejecting a coin to allow sufficient time for the movement to be completed before a subsequent coin arrives. The maximum rate at which coins are delivered to the separator 104 is optimised by altering the rate in accord ance with the types of coins presently being handled. This is achieved by rejecting any coin which arrives within a predetermined, variable interval following arrival of a pre ceding coin. If a coin is rejected, the control system 200 outputs or stores a signal indicating why rejection has occurred, for diagnostic purposes.

## Claims
CLAIMS 1. A coin handling apparatus comprising a plurality of supply passages 4 each for supplying coins to a first passage 24 or a second passage 12 , each supply passage 4 having a gate 18 so that coins from the supply passage 4 enter the first or the second passage 24 or 12 depending upon whether the gate 18 is in a first or a second position, a common actuator 60 for said gates, the common actuator 60 having a first state in which all said gates 18 are in their respective first positions and a second state in which all said gates are in their second positions, and control means 200 responsive to receipt by the apparatus of a coin for determining, in accordance with at least the type of the coin, the state to be adopted by the actuator 60 and for controlling said actuator 60 in such a manner that the actuator is in that state for at least a predetermined period sufficient to ensure that the coin enters the appropriate one of the first and second passages 24, 12 , characterised in that the apparatus is arranged such that first and second coins can arrive at the gates 18 within an interval which is shorter than said predetermined period, and in that the control means 200 is arranged to ensure that in those circumstances, if either the first or second coin is of a type resulting in a determination that the second state of the actuator is to be adopted, then that state is adopted for at least said predetermined period irrespective of the type of the other coin. 2. Apparatus as claimed in claim 1, wherein the control means 200 is arranged such that if said first coin is of a type resulting in a determination that said second state of the actuator 60 is to be adopted, said second state is maintained for a period sufficient to ensure that each of the first and second coins enters a second passage 12 . 3. Apparatus as claimed in claim 1 or claim 2, wherein the control means 200 is arranged such that, if the first and second coins are of types resulting in determination that the first and second states, respectively, of the actuator 60 are to be adopted, then the state of the actuator 60 is altered to the second state before the first state has been adopted for said predetermined period. 4. Apparatus as claimed in claim 3, wherein each said gate 18 has a coin deflecting surface which is so arranged as to allow the first coin to pass the gate 18 without jamming if the gate 18 is moving toward its second position upon arrival of the first coin. 5. Apparatus as claimed in claim 4, wherein the coin deflecting surface is arranged, in the first position of the gate 18 , to divert coins to the first path 24 , and is out of the path of coins when the gate 18 is in the second position. 6. Apparatus as claimed in claim 4 or 5, wherein each said gate 18 is pivoted for movement between its positions about an axis 62 which is upstream of the coin deflecting surface of the gate 18 . 7. Apparatus as claimed in any preceding claim, including a plurality of coin storage means 8 each arranged to receive coins from a respective first passage 24 . 8. Apparatus as claimed in claim 7, which is arranged such that each supply passage 4 receives coins of a particular denomination, the control means 200 being arranged to control the actuator 60 such that, once the respective storage means 8 contains more than a respective predetermined amount of coins of that denomination, further coins of that denomination are directed via the respective gate 18 to the second passage 12 . 9. Apparatus as claimed in claim 8, wherein each storage means 8 has a respective sensor 52 for providing a signal indicating whether or not the coins in the storage means 8 exceed the respective predetermined amount. 10. Apparatus as claimed in claim 9, wherein the control means 200 is operable to determine, upon receipt by the apparatus of successive coins, the successive states to be adopted by the actuator 60 in accordance with the coin types and the signals provided by said sensors 52 . 11. Apparatus as claimed in any preceding claim, wherein the control means 200 is operable to cause the actuator 60 to adopt its second state in response to the appearance of a predetermined condition, and is operable to reduce temporarily the maximum rate at which coins can be handled by the apparatus in response to the disappearance of said predetermined condition in order to allow sufficient time for the gates 18 to be moved to their first positions before a subsequent coin arrives at the gates 18 . 12. Apparatus as claimed in claim 11, wherein the control means 200 is operable to cause a coin to be delivered to an alternative path 116 instead of to one of said gates 18 in order to reduce temporarily the maximum coin handling rate. 13. Apparatus as claimed in any preceding claim, including separation means 104 for directing coins to respective supply passages 4 in accordance with the coin types, wherein the control means 200 is arranged so as to prevent a subsequent coin from being sent to the separation means 104 until a predetermined interval has elapsed from the separation means 104 having received a preceding coin, and wherein that interval is dependent upon the type of the preceding coin and or the type of the subsequent coin. 14. Apparatus as claimed in any preceding claim, including a reject path 116 into which coins are directed in response to the existence of one of a plurality of predetermined conditions, wherein said control means 200 is operable to generate, each time a coin is delivered to said reject path 116 , a data signal the content of which is indicative of which of said predetermined conditions exists. 15. Apparatus as claimed in claim 14, including means for storing said data signal. 16. Apparatus as claimed in any preceding claim, wherein the gates 18 are arranged to move as a unit, with no relative movement therebetween. 17. Apparatus as claimed in any preceding claim, wherein the gates 18 are pivoted for movement about a common pivot axis 62 . 18. Apparatus as claimed in any preceding claim, wherein the gates 18 are integrally formed. 19. A coin handling apparatus comprising separation means 104 for directing coins of different types to respective destinations 8,12,14 , and control means 200 arranged to control the delivery of coins to the separation means 104 , the control means 200 being arranged such that a subsequent coin is not sent to the separation means 104 until a predetermined interval has elapsed from the separation means 104 having received a preceding coin, wherein the interval is dependent upon the type of the preceding coin and or the type of the subsequent coin. 20. Apparatus as claimed in claim 19, wherein the control means 200 is operable, during a first inhibit interval following the sending of the preceding coin to the separation means 104 , to prevent any further coins being sent to the separation means 104 , and is operable during a second inhibit interval which follows said first inhibit interval to send only a coin of one or more selected types to the separation means 104 . 21. Apparatus as claimed in claim 20, wherein the control means 200 is operable to perform a logical comparison of a block code associated with the type of the preceding coin with a code representative of the type of the subsequent coin in order to determine whether or not to send said subsequent coin to said separation means 104 during said second hibit interval. 22. A coin handling apparatus having control means 200 for causing a diverting means 18 selectively to direct coins to a first destination 8 or to an alternative destination 12 dependent upon whether a predetermined condition exists, wherein the control means 200 is operable to allow successive coins to reach the diverting means 18 at intervals equal to or greater than a first predetermined interval, and is responsive to the appearance or disappearance of said predetermined condition for preventing, for a second, greater predetermined interval, a further coin from being presented to said diverting means 18 to allow time for the diverting means 18 to adopt a condition in which subsequent coins are directed to the appropriate destination. 23. Apparatus as claimed in claim 22, wherein said first destination is a coin storage means 8 having a sensor 52 for indicating whether or not the coins in the storage means 8 exceed a predetermined amount, wherein the control means 200 is operable to cause the diverting means 18 to direct coins to the alternative destination 12 in response to the sensor 52 indicating that the amount of coins exceeds said predetermined amount, and wherein the control means 200 is responsive to the sensor 52 indicating that the amount of coins no longer exceeds said predetermined amount for preventing a further coin from being presented to said diverting means 18 for said second, greater predetermined interval. 24. Apparatus as claimed in claim 22 or claim 23, wherein the control means 200 is operable during said second predetermined interval to cause any further coins to be directed to a reject path 116 in order to prevent them from reaching said diverting means 18 . 25. A coin handling apparatus which is operable to receive coins and to direct the coins to one or more destinations 8,12,14 unless any one of a number of predetermined conditions exists, the apparatus further including means 200 operable, each time a coin is not delivered to the appropriate destination 8,12,14 because of the existence of one of said predetermined conditions, to generate a data signal the content of which is indicative of which of said predetermined conditions exists 26. Apparatus as claimed in claim 25 including means for storing said data signal.

## Description
COIN HANDLING APPARATUS This invention relates to a coin handling apparatus. The term coin is used herein to cover not only genuine coins, but also tokens, slugs and other items of similar shapes and or sizes to genuine coins. The invention is particularly, but not exclusively, applicable to coin handling apparatus which includes means for storing coins, and especially means for storing and dispensing coins of one or more particular denominations. Such means are commonly provided for receiving coins from a validator and subsequently dispensing the coins as change in, for example, vending machines, gaming machines and machines specifically designed solely for change giving purposes. US A 3916922 describes several embodiments of coin handling apparatus, one of which comprises a succession of gates for sorting coins. The first sorting stage comprises a single gate which segregates acceptable and non acceptable coins. The second sorting stage comprises two individually controllable gates for sorting the acceptable coins into three paths, and the third sorting stage comprises three gates having a common actuator for sorting the acceptable coins received from the second stage into six separate paths. If a coin container at the exit of one of these paths is full, then coins which are normally destined for that container are instead diverted at the second sorting stage to an alternate path. This arrangement suffers from the disadvantage that the apparatus can sort coins only relatively slowly. The maximum rate at which coins are sorted is restricted so that there is no conflict in the required operations of the gates due to successive coins arriving too rapidly. Even if this problem were to be overcome, the maximum sorting rate would have to be limited so that it was ensured that there is sufficient time for a first coin to reach the coin container before the following coin reaches the second sorting stage, to ensure that the container is not over filled. Another problem with this prior art arrangement is that there is no provision for delivering those coins which are normally sent to storage containers to respective, individual cashboxes when the associated containers are full. According to one aspect of the invention there is provided a coin handling apparatus comprising a plurality of supply passages each for supplying coins to a first passage or a second passage, each supply passage having a gate so that coins from the supply passage enter the first or the second passage depending upon whether the gate is in a first or a second position, a common actuator for said gates, the common actuator having a first state in which all said gates are in their respective first positions and a second state in which all said gates are in their second positions, and control means responsive to receipt by the apparatus of a coin for determining, in accordance with at least the type of the coin, the state to be adopted by the actuator and for controlling said actuator in such a manner that the actuator is in that state for at least a predetermined period sufficient to ensure that the coin enters the appropriate one of the first and second passages, characterised in that the apparatus is arranged such that first and second coins can arrive at the gates within an interval which is shorter than said predetermined period, and in that the control means is arranged to ensure that in those circumstances, if either the first or second coin is of a type resulting in a determination that the second state of the actuator is to be adopted, then that state is adapted for at least said predetermined period irrespective of the type of the other coin. By virtue of this aspect of the invention, the apparatus can handle coins rapidly using an inexpensive gate arrangement driven by a single actuator. This aspect of the invention has uses in a variety of areas, but is particularly useful for a coin storage assembly in which the first passages lead to respective containers, and the second passages to alternate destinations used when the containers are full. Giving priority to the routing of coins to second passages might result in one or other container filling more slowly than it would otherwise, because occasionally a coin intended for that container will instead be delivered to the respective second passage, but this is of no practical disadvantage. In the preferred embodiment, if a coin destined for a container is followed quickly by a coin destined for a second passage, then the gates are shifted toward the position for delivering coins to the second passages in sufficient time to ensure that the second coin is in fact delivered correctly. By the time the first coin reaches the gate, the gate could be fully shifted to the position at which coins are delivered to the second passage, or could be in an intermediate position. The destination of the first coin may therefore be indeterminate, but because it was originally intended for the container, and as mentioned above there will be no disadvantage in delivering it to the second passage, this does not matter. If a coin destined for a second. passage is followed quickly by a coin destined for the container, then the gate is controlled in such a manner that it is ensured that the first coin enters the second passage. The gate is preferably then left in that position so that the second coin goes into its second passage, unless the spacing between the coins is such as to ensure that there is adequate time to shift the gate to its other position before arrival of the second coin. Thus, the second coin might go either to the container or to the second passage, but again this is not of any practical disadvantage. It is conceivable, in such an arrangement, that because a gate may be in an intermediate position when a coin arrives, the coin might become jammed, or might come to rest near the gate without entering either the container or the second passage. It will be noted that in the particular arrangement described above, this could only occur when the gate is moving from its first position to its second position. This potential problem may thus be mitigated by using a further preferred feature of the invention, in which at least one, and preferably all, of the gates referred to above are so arranged that jamming cannot be caused by the movement of the gate from its first position to its second position. To achieve this, each gate preferably has a coin deflecting surface which is arranged so that it is in the path of coins, and thus deflects them, in order to direct the coins to the first passage, and is out of the path of the coins when they are to be delivered to the second passage so that they can proceed to that passage without deflection by the gate. Also, or alternatively, the gate is preferably such that it is pivoted for movement between its first and second positions, and the axis of the pivot is upstream of the gate s coin deflecting surface. Preferably, the common actuator is arranged so that the gates are all in the position in which they allow coins to enter the second passages when the actuator is de energized. All the containers may be provided with a gate operated by the common actuator, or alternatively there may be a group of the containers associated with the gates operated by the common actuator, and one or more other containers having gates operated by one or more other actuators. It will be appreciated that by arranging the gates as set out above, the advantages of using a common actuator for several gates can be achieved without detrimentally affecting the rate at which coins can pass through the coin handling apparatus. In an alternative embodiment, the apparatus could be arranged so that the rate at which coins pass through the apparatus is limited to such an extent that the common actuator can be operated in the correct manner for each coin without interfering with the routing of the subsequent coin. However, it is important in many situations for the rate at which coins are handled to be as high as possible, and therefore the arrangement referred to above is preferably provided. Another, independent aspect of the invention is concerned with improving the rate at which coins can be handled. According to this further aspect, a coin handling apparatus has separation means for directing coins of different types to respective destinations, and is arranged such that a subsequent coin is not sent to the separation means until a predetermined interval has elapsed from the separation means having received a preceding coin, wherein the interval is dependent upon the type of the preceding coin and or the type of the subsequent coin. In such an arrangement,the maximum coin handling rate may vary in dependence upon the types of coins being handled. It is therefore possible to optimise the handling rate in accordance with the physical structure of the separating means. By way of example, the apparatus may be arranged such that successive coins of the same denomination, which are routed through the separation means in the same manner, are allowed to be sent to the separation means at a faster rate than coins of different denominations,which are routed in a different manner which may require more time, e.g. for operating gates. The maximum rate at which coins are sent to the separation means may be controlled by causing a coin to be rejected instead of being sent to the separation means if it is received within a predetermined interval of a preceding coin being sent to the separation means.It would be possible alternatively to delay the subsequent coin until the end of the predetermined interval, and then send it to the separation means. A convenient way of implementing this aspect of the invention would be to generate, each time a coin is sent to the separation means, an inhibit signal having a period which determines the maximum rate at which coins can be handled by the apparatus. Any further coins which are received during that interval are not permitted to pass to the separation means. At the end of that interval, there will be a second predetermined interval in which only a coin of one or more selected types, the selection depending upon the nature of the coin which has already been sent to the separation means, would be delivered to the separation means. To determine whether a coin may be sent to the separation means during this interval, each coin may have assigned to it a code, referred to herein as a block codes.This would be determined in accordance with the path taken by that coin through the separation means. The code would indicate which coins could subsequently be sent to the separation means during the second interval referred to above. At the end of that second interval, any type of coin is permitted to be sent to the separation means. This aspect of the invention is particularly useful in coin handling apparatus which incorporates storage means for storing coins of different denominations. In accordance with a still further, independent, aspect of the invention, a coin handling apparatus has control means for causing a diverting means selectively to direct coins to a first destination or to an alternative destination dependent upon whether a predetermined condition exists, wherein the control means is operable to allow successive coins to reach the diverting means at intervals equal to or greater than a first predetermined interval, and is responsive to the appearance or the disappearance of said predetermined condition for preventing, for a second, greater predetermined interval, a further coin from being presented to said diverting means to allow time for the diverting means to adopt a condition in which subsequent coins are directed to the appropriate destination. The first destination is preferably a coin storage means, and the predetermined condition may be a signal indicating that the coins in the storage means exceed a predetermined amount, e.g. that the storage means is full or nearly full. This may be provided by a level sensor. Preferably, the prevention of further coins from being presented tithe diverting means occurs in response to the level sensor indicating that the storage means is no longer full or nearly full. Coins can be prevented from reaching the diverting means during the second predetermined interval by delaying them, or preferably by rejecting them. In the preferred embodiment, by rejecting a single coin, enough time is provided to allow the diverting means to adopt the state in which subsequent coins are sent to the appropriate destination. The diverting means is preferably a gate arranged in the manner set out above in order that jamming does not occur when it moves from one of its positions to its other position. Accordingly, coins can very rapidly be sent to the diverting means, and the flow of coins switched between the two destinations without jamming occurring. When the flow is switched from one destination to another, jamming is avoided because the control means allows adequate time for the switching to occur before allowing a further coin to reach the diverting means, and when the flow is switched in the other manner jamming does not occur because of the structure of the gate. This is particularly useful when a storage means is being replenished by repeatedly and rapidly inserting coins of the same denomination. In such circumstances, there is a danger that a coin passing in proximity to a level sensor will cause the latter to produce erroneously a detection output indicating that the storage means is full, or nearly full. This will result in subsequent coins being directed to the alternative destination. After the coin in the storage means has passed the detection means, the control means will recognise that further coins are to be directed to the storage means. Thus, there is a requirement for rapidly redirecting coins to the alternative destination and then to the storage means, and this is met by the arrangement set out above. As an alternative to designing the gate in the manner set out above, the control means could be arranged so as to prevent, for a predetermined interval, further coins from being presented to the diverting means on both the appearance and the disappearance of the detection output. This however is not preferred, because it slightly reduces further the effective rate at which the coins are handled. According to a still further, independent, aspect of the present invention, a coin handling apparatus is operable to receive coins and to direct the coins to one or more destinations unless any one of a number of predetermined conditions exists, the apparatus further including means operable, each time a coin is not delivered to the appropriate destination because of the existence of one of said predetermined conditions, to generate a data signal the content of which is indicative of which of said predetermined conditions exists. The data signal may be provided at an output for delivery to a device for processing and or storing the signal. The coin handling apparatus itself may include means for storing the signal, and preferably for storing a plurality of such signals. The signal provides an indication of why a coin has not been delivered to its correct destination. It is envisaged that this aspect of the invention will be particularly useful for providing, in an apparatus which has been found repeatedly to reject more coins than would normally be expected, an indication of why such rejection occurs. For example, the handling apparatus may be arranged so that coins are rejected if it is discovered that gate operating solenoids are not receiving sufficient power, if an inhibit signal has been generated because a sensor in the apparatus has detected that a previouslyaccepted coin has remained in the coin path, because a host machine in which the apparatus is installed is for some reason generating an inhibit signal, and for various other reasons. If the apparatus repeatedly provides a signal indicating that rejection has occurred because of, e.g., the first of these conditions, this will provide an immediate indication to anyone servicing the machine as to the general area in which a fault in the apparatus may lie. Accordingly, fault diagnosis is made much easier. The various aspects of the invention set out above can if desired be used independently, but preferably they are combined to produce a particularly advantageous coin handling apparatus. An arrangement embodying the invention will now be described by way of example with reference to the accompanying drawings, in which Figure 1 is a schematic front elevation of a coin handling apparatus according to the invention Figure 2 is a schematic cross sectional view of the apparatus taken along the line TI II of Figure 1 Figure 3 is a schematic perspective view of a coin storage assembly of the apparatus Figure 4 is a longitudinal side elevation of one of the units of the coin storage assembly Figure 5 is a block diagram of the circuit of the coin handling apparatus Figures 6 and 7 are respectively a flow chart and a timing diagram for use in describing the main program loop executed by a microprocessor of the circuit and Figure 8 is a flow chart for use in describing an interrupt routine executed by the microprocessor. Referring to Figures 1 and 2, the coin handling apparatus 100 comprises a validator 102, a separator 104 and a coin storage assembly 106. The validator receives coins via a hopper 108 and validates them using coils at a testing station 110.In the present embodiment, the apparatus is intended for use with five different types of coins, referred to herein as types A, B, C, D and E. One of these coins , typeB, is in fact a coin like token. If a coin entered into the apparatus is found to be an acceptable coin of one of the above mentioned five types, an accept gate 112 is opened so that the coin enters a main entrance path 114 of the separator 104.The coin is then routed in the separator 104 in a manner to be described more fully below, and is then delivered to an appropriate one of several entrances of the coin storage assembly 106. If the validator 102 finds an inserted coin to be unacceptable, the accept gate 112 remains closed and the rejected coin delivered via a path 116 to a further entrance of the coin storage assembly 106. The paths taken by the respective coins A to E and the rejected coins F are illustrated in Figures 1 and 2. The coin storage assembly 106 is illustrated more fully in Figures 3 and 4. Coins which are intended to be stored in the assembly 106 are delivered thereto via respective supply passages 4 of the separator 104. The assembly 106 of the present embodiment comprises a plurality of, and in this particular case four, storage units 6. Each unit 6 has a storage space 8 for storing a stack 10 of coins received from a supply passage 4, a secondary passage 12 which can also receive coins from the supply passage 4, and an additional passage 14. The stacked coins in the storage space 8 can be dispensed one at a time by a dispensing mechanism generally indicated at 16. Coins from a supply passage 4 are normally delivered to the storage space 8, but if the storage space is full they are instead delivered to the secondary passage 12, which leads to a cashbox. In the present embodiment, each secondary passage 12 leads to an individual cashbox. Instead, they could all lead to a common destination e.g. a single cashbox , and indeed there could be a single large secondary passage 12 into which coins from all the passages 4 can be led, instead of separate, individual passages 12. A gate 18 determines whether the coins from a respective supply passage 4 go to the storage space 8 or the secondary passage 12. Some additional passages 14 receive coins from respective separator passages 20. These coins may be of a denomination which the apparatus is not required to dispense, and the coins may be routed by the additional passages 14 to individual cashboxes, or a common cashbox.The additional passage 14 of one of the units 6 is used to route the coins F which have been rejected by the validator 102 to an exit slot for retrieval by the user of the apparatus thus, the separator passage 20 for this unit corresponds to the passage 116 of Figure 1. Each unit 6 is formed in two longitudinal halves.Figure 4 shows the left hand half of one of the units.Each half is formed by injection moulding. The storage space 8 is cylindrical, and has a diameter which is slightly greater than that of the coins intended to be stacked in the space. The coins from the supply passage 4 reach the storage space 8 via an entry 22. The entry 22 comprises a narrow space 24 between a wall 26 of the separator 104 and a ledge 28 at the upper end of an inner wall 30 of the storage unit. The shape and size of the space 24 are such that coins can pass through the space only if they are travelling edge first. When the stack 10 reaches a certain level which will be different for coins of different diameters , as shown in Figure 4, the next coin 50 to be delivered through the entry 22 will come to rest on the top of the stack, with its upper edge supported on the ledge 28. The coin 50 is supported in a generally upright, but inclined orientation with its centre of gravity located over the stack 10. An inwardly inclined, flat upper edge 54 of an outer wall 56 of the storage unit assists in guiding the coin 50 to this orientation. An inductive sensor 52 is mounted in the separator in such a position that it will be in proximity to the face of the coin 50. The sensor 52 is able to detect the presence of coin 50 which indicates that the storage space 8 is full, which detection is reliable because the position of the last coin to enter the storage space is predetermined by the configuration of the entry 22 in co operation with the stack 10. If a coin is now dispensed from the stack 10, so that the top of the stack moves down by a distance corresponding to the thickness of the dispensed coin, the upper edge of the coin 50 will no longer be supported by the ledge 28, and the coin will then fall directly facedown on the top of the stack. The sensor 52 will thus indicate that the space 8 is no longer full. As shown in Figure 3, the gates 18 of the four storage units 6 are all mechanically connected together, and indeed may be integrally formed. The gates all have a common actuator, which is a solenoid 60. The gates are all pivoted about a common axis 62 located near the upper ends of the gates. When the solenoid 60 is de energized, the gates 18 adopt the positions shown in phantom in Figure 4. In this position, the gates do not obstruct the travel of the coins from the supply passages 4, which therefore all fall into the respective secondary passages 12. When the solenoid 60 is energized, the gates all move to the position shown in solid lines inFigure 4. Coins from the supply passages 4 are thus deflected by the gates 18 toward the entries 22 of the storage spaces 8. The operation of the apparatus, which will be described in more detail below, is such that there may be occasions upon which a coin originally intended to go to the storage space 8 arrives at the gate 18 while the gate is moving away from the position shown in solid lines in Figure 4. Depending upon the precise time at which the coin arrives at the gate, the coin may be deflected into the entrance 22 of the storage space 8, or be allowed to enter the secondary passage 12. It is possible also that the coin could come to rest on top of the edge 28 of the wall 30. In this case, however, the next time the solenoid 60 is energized, the gate 18 will knock the coin toward the storage space 8 which is the originally intended destination of the coin .Accordingly, the arrangement ensures that no jamming or overfilling of the coin storage space 8 will occur. Referring again to Figures 1 and 2, the various paths taken by the respective coins A to E and the rejected coins F are illustrated. As mentioned above, the coins A to E pass the accept gate 112 in order to reach the main entrance path 114 of the separator 104.In doing so, the coins pass a detector 120, known as a post gate strobe , the output of which is used for timing purposes as will be described more fully below. The separator 104 has a routing gate 122 which remains closed when the incoming coins are of type A or B. These coins thus roll down an upper ramp 124 of the separator 104. The ramp 124 has a slot which permits only coins B to pass therethrough, so that the coins A and B are separated and sent to respective storage units 6.Each of the coins A and B can pass into a respective storage space 8 or secondary passage 12 depending on the position of a respective gate 18. If the incoming coin is of type C, D or E, the gate 122 is opened so that the coins drop onto a lower separator ramp 126. A window at the side of the ramp and a slot in the bottom of the ramp separate the coinsC, D and E. The coins D and E, which are not required for dispensing, are led to additional passages 14 of respective units 6, which deliver the coins to one or more cashboxes. The coins C are led to a gate 18 over one of the storage units 6 so that the coins C can be directed either to a storage space 8 or a secondary passage 12. The rejected coins F are directed to an additional passage 14 in an otherwise unused coin storage unit 6. Figure 5 shows in schematic form the circuit of the coin handling apparatus. The circuit comprises a control unit 200 and a coin validator circuit 202. The control unit 200 includes a microprocessor 204, e.g. a mask programmed Intel type 8048. This is connected via an input output bus 206 to an interface unit 212. The interface 212 receives from the validator 202 on lines 214 an accept signal Acc which indicates that a valid coin has been received, and signals indicating which of the types A to E the valid coin belongs to. The interface 212 delivers to the validator 202 on line 216 a master inhibit signal MI which terminates the accept signal Acc if the latter is presently being generated, and prevents the validator from generating a further accept signal Acc while the signal MI is present. The interface 212 receives a signal from the postgate strobe detector 120, and signals from pay out sensors 218. Each of the pay out sensors is mounted beneath the respective dispensing mechanism 16 of a coin storage unit 6 to detect when a coin has been paid out by the dispensing mechanism. The interface 212 sends strobe signals on lines 220 to actuate respective ones of the sensors 52 shown collectively at 222, and receives on line 224 an output signal indicating the state of the respective sensor which has been actuated by a strobe signal. The interface 212 also sends signals on lines 226 to the solenoid 60 of the gates 18 and the solenoid used to actuate the routing gate 122. These solenoids are shown collectively at 228. In this particular embodiment, the interface 212 also serves the function of actuating the solenoid 230 of the accept gate 112 in response to the accept signalAcc. The coin handling apparatus is installed in a host machine, in this particular case a gaming machine, to which the circuit is connected via output lines 232 and input lines 234. The output lines 232 deliver to the host machine various information, including information indicative of the types of coins which the apparatus as a whole has accepted so that this information can be used for accumulating a user s credit count. The information also includes diagnostic information which will be described more fully below. The input lines 234 carry signals which can be used to inhibit the acceptance of any one of the five coins A to E. This inhibiting operation by the host machine may be desirable in certain circumstances for example the machine may be arranged to inhibit acceptance of high value coins if there are insufficient low value coins to pay out the correct change. A general description of the overall operation of the circuit will now be given. It will be appreciated that the techniques used are merely examples of a wide range of alternative techniques which could be readily implemented by anyone familiar with microprocessorcontrolled circuitry. Also, it would be possible alternatively to use hard wired logic circuitry, or a speciallydesigned LSI, instead of a general purpose microprocessor which has been programmed for this specific application. Figures 6 and 7 respectively show a main program loop and a timing chart for the microprocessor 204. Figure 7 illustrates the overall operation of the circuit on receipt of a valid coin. It should be noted that this chart applies when a single coin passes through the coin handling apparatus, and when the coin requires operation of both the routing gate 122 and the diverter gates 18. The validator circuit 202 is similar to that described in GB A 2093620, and generates a power up signal Pu in response to the arrival of a coin in the validator. The power up signal terminates as the coin leaves the testing station 110 of the validator. At that time, the validator generates the accept signal Acc, assuming that the coin has been tested and found to be valid. The accept signal results in the solenoid 230 operating the accept gate 112, so that the coin falls past the post gate strobe detector 120, which thus generates a strobe signal STB. Referring to Figure 6, in the present emhodimentw the microprocessor 204 is operable, after the power has been turned on, to execute an initialisation routine 250 and then repeatedly to circulate through a main program loop indicated generally at 252. During the main program loop 252, the program successively checks status 1 , status 2 and status 3 flags at steps 254, 258 and 262, and if any is set a respective program routine 256, 260 or 264 is executed.The program then executes a routine indicated at 266 before re entering the program loop 252. When no coin is present in the apparatus, none of the status flags will be set, and the program will therefore not execute any of the routines 256, 260 and 264. As will be explained, if a received coin is to be directed to the separator, an interrupt routine responds to the signal Acc by causing an accept timer to be started, setting various registers in accordance with the desired routing of the coin, and setting the status 1 flag. The latter operation will cause the program routine 256 to be executed each time the program executes the main loop 252. During this program section 256 the microprocessor checks the strobe signal STB from the detector 120, and if it is determined that a coin is adjacent the detector 120, the status 7 flag is reset and the status 2 flag is set. The program section 256 will thus no longer be entered during the next execution of the main program loop. If the program section 256 determines that the accept timer has timed out before the signal STB indicates the presence of a coin, it is assumed that a fault has occurred and a reject routine is executed. This routine involves clearing the status 1 flag and issuing the master inhibit signal MI which prevents the validator from accepting further coins for the present. Also, the microprocessor 204 delivers to the host machine on lines 232 a code indicating that rejection has occurred because of a timeout of the accept timer. If the coin has reached the detector 120 and the status 2 flag has been set, the program section 260 will be entered each time the main loop is executed.This section causes the generation of the master inhibit signal MI so that the accept signal Acc is terminated and no further coin can be accepted for the present. The program section 260 also monitors the strobe signal STB.If during the execution of this program section the strobe signal STB indicates that there is no longer a coin adjacent the detector 120, the status 2 flag is cleared and the status 3 flag set. The subsequent repeated execution of the main program loop then causes the status 3 program section 264 to be executed. During the status 3 program section, timers are checked in order to control the routing gate 122 and the diverter gates 18. The status 3 program section 264 also causes a coin output signal to be delivered to the host machine for a predetermined duration, this signal indicating the type of the accepted coin, and further causes a block signal to be generated for a predetermined block period. The status 3 program section is operable also to clear the status 3 flag after a predetermined time.Subsequent execution of the main program loop will then result in all three status flags being found clear, and the program will then proceed to step 266 before recirculating. The various time periods which are monitored during the status 3 program section are indicated at T2 to T7 in Figure 7. The step 266 is executed in order to check certain timers, including one which, when it times out after a period T1, terminates the master inhibit signal MI, and another which, if an incoming coin is of an appropriate type, times out after a period P1, at which point the routing gate 122 is operated. The step 266 is also executed to perform various housekeeping tasks, such as communicating with the host machine, etc. The operation of the microprocessor is periodically interrupted at regular intervals1 so that the program flow is temporarily switched to an interrupt routine shown in Figure 8 before returning to the main program loop. This interrupt is generated by a timer internal to the microprocessor 204. The main purpose of the interrupt routine is to update various memory locations used as timers within the microprocessor 204, to check the sensors 218 and to execute a coin acceptance program routine if an accept signal Acc has been received from the validator 202. At the beginning of the interrupt routine, the various timers are updated, and one of the sensors 52 is checked, at step 300. The sensors 52 are checked in succession, one each time the interrupt routine is executed. At step 301, the program checks whether theAcc signal is present. If not, the interrupt routine terminates. Otherwise, the program proceeds to step 302, where the status 1 flag is checked. If this is, not set, the program proceeds to the coin acceptance routine, which starts at step 303. At this step, the coin data from the validator, which indicates the type of coin received, is checked and the coin type noted. There then follow in succession four steps 304, 305, 306 and 308 at each of which certain conditions are checked, and depending on those conditions the program may or may not enter a main reject coin path 310. For example, at step 304 the microprocessor checks whether the detector 120 detects the presence of a coin.. This should not occur under normal operation of the machine, and therefore if a coin is detected it is assumed that a faulty operation has occurred and the program proceeds to the reject path 310 to prevent further coins from being accepted. At the steps 305 and 306, the program checks whether an external inhibit signal from the host machine or an internally generated inhibit signal is present, and in either case if a signal is present the program proceeds to the reject path 310. At step 308, the program compares the data representing the type of the coin with a previouslystored block code. This is done by logically combining a code representing the coin type with the block code.Depending upon the result of the logical comparison, the program either enters the reject path 310 or proceeds to block 312. A more detailed explanation of the step 308 is given below. At block 312, the program starts the accept timer, which was referred to above. The program then proceeds to step 314, which is executed to determine whether the incoming coin is of type D or E. These are the coins which are sent to additional passages 14 in the coin storage units 6. If the coin is either of these types, the program proceeds to step 316. At the latter step, the program stores a signal representing that the normally open routing gate 122 and the diverter gates 18 need not be operated. The program also stores a coin data code representing the coin type, and looks up in a table a block code associated with the coin, and stores that block code for use during a subsequent execution of step 308, i.e. when a further coin has been accepted by the validator. 202. These codes will eventually be cleared at the end of the block period shown in Figure 7. If the coin is not of type D or E, the program proceeds from step 314 to step 318. Here, the program determines whether the appropriate storage space 8 for that coin which would be of type A, B or C is full.If so, the program proceeds to step 320. This is similar to step 316, except that in this case the operation of the routing gate 122 will be dependent upon whether or not the coin is of type C. If it is not, the operation of the routing gate 122 is required, and the program starts the timer which times the period P1 shown in Figure 7. If the appropriate tube is not full, as indicated by the output of the respective sensor 52, the program proceeds from step 318 to step 322. The coin data code for the previously accepted coin is used in step 322 for determining whether a coin of type A, B or C is currently being routed to the cashbox. As mentioned above, this code is automatically cleared after a certain time, so that a positive answer will be obtained only if the succeeding coin arrives within a predetermined interval of the preceding coin being directed to the cashbox. If a preceding coin of type A, B or C is not currently being routed to a respective one of the secondary passages 12, the program proceeds to step 324.This is similar to step 320, except that in this case it is desired that the incoming coin be directed to the appropriate one of the coin storage spaces 8, so that the program stores an indication that the diverter gates 18 are to be operated. If, on the other hand, it is determined that a coin of type A, B or C is currently being routed to the cashbox, the program proceeds from step 322 to step 326.At this point it is determined whether the preceding coin is of the same type as the coin which has just arrived. Accordingly, the step 326 will be reached in either of the following two conditions 1 if the preceding coin is of the same type as the succeeding coin, this means that despite the fact that the appropriate storage space 8 is not full, an earlier coin has been directed to a secondary passage instead of to the storage space. This could occur if a previous coin passing a sensor 52 had provided a temporary false indication that the storage space 8 was full. In these circumstances, any further coins ought to be directed to the storage space 8. However, as the latest coin has arrived within a predetermined interval of the preceding coin, there may be insufficient time to actuate the respective diverter gate 18 from its second position to the first position shown in solid lines in Figure 4.Accordingly, the program proceeds from step 326 to the reject path 310 to cause the present coin to be rejected and thus allow sufficient time for movement of the diverter gate. 2 If the latest coin is of different type from the coin currently being routed to the cashbox, the program proceeds from step 326 to step 320 in order for the latest coin to be directed via a secondary passage 12 to its cashbox. This is because, although the storage space 8 for that coin is not yet full, sending the coin to that storage space would require operation of the diverter gates 18, and as mentioned above this could interfere with the routing of the preceding coin which is intended for one of the secondary passages 12. To avoid this, priority is given to the cashbox route. After leaving the step 316, 320 or 324, the program proceeds to step 330, in which the status 1 flag is cleared and the status 2 flag set. The clearing of the status 1 flag means that the coin acceptance routine starting at step 303 will not be entered until a further coin causes a new accept signal Acc to be generated. The reject path 310 proceeds to a step 334, and as a consequence of reaching this step the microprocessor issues the master inhibit signal for a predetermined time to prevent any more coins from being accepted during this interval, and clears any registers which are used to determine the operation of the gates and to store the coin and block codes. In addition, the microprocessor is caused to output on lines 232 a code indicative of the reason for rejection. For this purpose, an appropriate code is stored in a register before the main reject path 310 is reached, the storing operation occurring at one of steps R1 to R5 depending upon the reason for rejection. Referring again to Figure 7, the validator circuit 202 is so arranged that, having determined that an incoming coin is acceptable, it will not accept any further coin until the leading edge of the strobe signal STB. It will then be prevented by the control unit 200 from validating further coins for the period of the master inhibit signal MI. There then follows a period B1, from the end of the master inhibit signal MI to the end of the block period signal, during which certain coins can be accepted.Thus, a further accept signal Acc could appear during this period Bi, which would result in further status 1, status 2 and status 3 periods. After a coin has been accepted and up until the end of the block period, the microprocessor 204 stores the block code and the coin data code for that particular coin. The coin data code may be a five bit code having only one bit set, that bit corresponding to the coin type. For example coin type A may be represented by coin data 00001, B by coin data 00010, etc. The block code also has five bits, each bit representing a particular coin type. The block code is determined for a particular coin in accordance with the structure of the separator. After receiving the coin in question, there will be certain coins which the separator can thereafter handle very quickly and the bit in the block code corresponding to each of these coins is reset. The remaining bits are set. By way of example, the coin data code for the coin type C is 00100. If a coin of type C has been handled by the separator 104, a coin of type D or E can be thereafter handled very quickly, because neither of these requires operation of the gate 722 or any of the gates 18. Accordingly, the block code for the coin C is 00011, which indicates that any coin except those of types A and B can be handled very quickly after a coin of type C. In the step 308 of the status 1 routine, the block code of the previously accepted coin is ANDed with the coin code of the newly arrived coin. If the result of this is zero as would be the case if a coin of typeC were followed by a coin of type C, D or E , the program proceeds to step 312. If the result is not equal to zero, this indicates that the subsequent coin is not of a type which can be handled very rapidly after the preceding coin, and therefore the program proceeds to the main reject path 310. At the end of period B1, the block code is cleared to zero. The result of. this is that the next time the step 308 is reached, the ANDing operation will result in zero, so that the program will proceed to step 312 In other words, prior to the period B1, no further coins can be accepted. During the period B1 only selected types of coins, dependent upon the type which has already been accepted, will be allowed to proceed to the separator.After the period B1, any type of coin will be accepted and sent to the separator. The block period shown in Figure 7 is restarted if a colon is sent to the separator during the period B1. Accordingly, if coins are repeatedly sent to the separator in quick succession, the block period will be continuous If the period B7 is sufficiently long in relation to the preceding period in which coins are prevented from being sent to the separator, there is a possibility that a third coin will be sent to the separator during the period Bi established by the first coin. In other words, the period B1 could be so long that there is sufficient time within that period for a second coin to arrive, for the period B1 established by the second coin to be established, and for a third coin to arrive and be directed to the separator before the time at which the period B1 established by the first coin would have expired. This could cause.problems because the routing of the third coin may interfere with the routing of the first coin, which may still be in the separator. It is desirable to avoid these problems, because to do so would allow the period. by to start earlier, and thus increase the maximum rate at which the coins are handled. In the present embodiment the problem is avoided by arranging, each time a block code is stored, for that block code to be ORed with the presently stored block code. Thus, in the circumstances described above, the block codes for the first and second coins would be ORed, and the resultant code compared in step 308 with the coin data code for the third coin. The third coin would therefore only be sent to the separator if its routing would not interfere with either the first or the second coin. In the arrangement described above, because the step 266 shown in Figure 6 is repeatedly executed during and after the status 1, status 2 and status 3 periods, any decision taking made during those program sections can be altered during subsequent execution of the main program loop. This is particularly important in that it allows a change in the routing of a coin in response to changes in the present conditions of the apparatus.For example, the program step 266 includes a routine for checking the statuses of the sensors 52. If a storage space 8 receives a coin of a particular type which causes the storage space to be full, and a coin of the same type has just been received, an initial decision to direct the coin to the storage space can be altered so that the coin is instead directed to the cashbox.