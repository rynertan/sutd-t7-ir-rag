# METHOD AND APPARATUS FOR ANALYZING AND SYNTHESIZING HUMAN SPEECH

## Claims
Verfahren zum Analysieren und Synthetisieren der menschlichen Sprache, gekennzeichnet durch folgende Schritte

## Description
The present invention relates to a method and an apparatus for analyzing and synthesizing human speech. A speech analysis and synthesis device is well known, which uses an analysis and synthesis method, such as LPC, PARCOR, LSP, Formant method or the like. In order to compress human speech information, the device memorizes a quantization parameter as information representing human speech. The quantization parameter is generated by quantizing a feature parameter which is extracted from the human speech. The device synthesizes the human speech on the basis of the quantization parameter. In US A 4 360 708 a speech processor is disclosed capable of improving the quality of sythesized human speech. Said speech processor solves the problem that parameter K1 has different distributions for unvoiced sound and voiced sound. Specifically said speech processor using two ROMS which store quantization procedures corresponding to unvoiced sound and voiced sound respectively. They are switched for quantization and synthesize according to the kind of sound, i.e. voiced or unvoiced sound, in order to obtain optimum quantization and quality of sound. The unvoiced sound is discriminated from the voiced sound. In a device, the feature parameter is linearly quantized so that the quantization parameter is proportional to the feature parameter. When the quantization parameter comprises N bits, the value of the quantization parameter ranges from 0 to 2 In order to solve the above mentioned problem, another device quantizes transformation parameter which is generated by nonlinearly transforming feature parameter. The feature parameter can be represented by means of the quantization parameter having necessary and minimum bits. However, when nonlinearly quantizing, it is necessary to reversely and nonlinearily transform the quantization parameter to generate synthesis parameter. This reverse and nonlinear transformation is extremely complicated. This results in the problem that the speech analysis and synthesis device requires very large circuits. An object of the present invention is to provide a method and an apparatus for analyzing and synthesizing human speech which can quantize feature parameter without distortion using a very small number of bits. A further object of the present invention is to provide a method and an apparatus for analyzing and synthesizing human speech which require only small circuits and generate synthesis human speech of good quality. According to a first solution this object is solved by the method of claim 1 and by the apparatus according to claim 2. According to a second solution, the object is solved by the method according to claim 5 and by the apparatus according to claim 6. Further embodiments are included in claims 3, 4, 7, 8, 10, 11 and 12. Embodiments of the invention are described in Figs. 1 to 9. In the accompanying drawings FIG. 1 shows a speech analysis and synthesis device according to a first embodiment of the present invention. A synthesis circuit 10 analyzes input original speech by using a known analysis method, such as LPC, PARCOR, LSP, Formant method or the like, to extract feature parameter 11 from the original speech. The feature parameter 11 comprises L bits and is represented in the floating point form called hereinafter L bit floating point form . The feature parameter 11 is inputted to a quantization circuit 12 and a comparator circuit 13. The quantization circuit 12 quantizes the feature parameter to output a quantization parameter 15 comprising N bits. The comparator circuit 13 compares the value of the feature parameter 11 with a predetermined value. The comparator circuit 13 outputs control signal 14 to the quantization circuit 12 depending on the result of the comparison by the comparator circuit 13. The quantization circuit 12 quantizes the feature parameter. The interval between adjacent quantization levels is changed depending on whether the control signal 14 is one level or another level. The quantization parameter 15 comprises smaller number of bits than the feature parameter 11. The quantization parameter 15 is memorized in a memory 20. The human speech is synthesized on the basis of the quantization parameter in the memory 20. The quantization parameter 21 outputted from the memory 20 is inputted to a synthesis circuit 26. N high order bits 22 of the quantization parameter 21 is inputted to a transformation ROM 25. The transformation ROM 25 transforms the N high order bits 22 of the quantization parameter 21 into an additive parameter 23 of M N bits on the basis of bit pattern of the N high order bits 22. The additive parameter 23 and the quantization parameter 21 are combined to be inputted to the synthesis circuit 26 as a synthesis parameter 24 of M bits. The synthesis circuit 26 synthesizes the human speech according to the synthesis parameter 24. FIGS. 2A, 2B, and 2C show examples of the synthesis parameter, the feature parameter, and the transformation ROM, respectively. The feature parameter 11 in the L bit floating point form ranges from 2 to 5. The quantization circuit 12 quantizes the feature parameter 11 to generate the quantization parameter 15 of 3 bits shown in FIG. 2B. Specifically, the quantization circuit 12 linearly quantizes the feature parameter to generate parameter of 4 bits and deletes a most significant bit from the parameter to generate the quantization parameter 15 of 3 bits. In the present example, the output of the comparator circuit 13 is unchanged irrespective of the value of the feature parameter 11 and the interval between the quantization levels is unchanged. The transformation ROM 25 transforms the 2 high order bits 22 of the quantization parameter 21 into the additive parameter 23 of 1 bit. The content of the transformation ROM is shown in FIG. 2C. When the 2 high order bits 22 are 11 , the additive parameter 23 is 1 . When the 2 high order bits 22 are not 11 , the additive parameter 23 is 0 . The additive parameter 23 of 1 bit and the quantization parameter 21 of 3 bits are combined to become the synthesis parameter 24 of 4 bits shown in FIG. 2A. The synthesis parameter 24 ranges from 2 to 5 in the same manner as the feature parameter 11. Therefore the synthesis circuit 26 can synthesize substantially the same human speech as the original human speech according to the synthesis parameter 24. As stated above, the present embodiment makes it possible to transform the quantization parameter being nonlinearly quantized from the feature parameter into the synthesis parameter by using only the transformation ROM of small size. FIG. 3 shows a speech analysis and synthesis device according to a second embodiment of the present invention. The device synthesizes human speech by a different method from the first embodiment. The device comprises a pattern detector circuit 27 and a bit additive circuit 28 instead of the transformation ROM 25. The pattern detector circuit 27 receives N high order bits 22 of quantization parameter 21 and detects whether or not the N high order bits 22 are a predetermined bit pattern. The pattern detector circuit 27 outputs different control signals 29 to the bit additive circuit 26 depending on the detected result. The bit additive circuit 28 determines the value of the additive parameter 23 of M N bits depending on the control signal 29. The additive parameter 23 and the quantization parameter 21 are combined to be inputted to a synthesis circuit 26 as a synthesis parameter 26. The synthesis circuit 26 synthesizes the human speech on the basis of the synthesis parameter 24. FIGS. 4A and 4B show examples of the synthesis parameter and the quantization parameter, respectively. The feature parameter 11 in the L bit floating point form ranges from 2 to 9. The quantization circuit 12 quantizes the feature parameter 11 to generate the quantization parameter 15. Specifically, the quantization circuit 12 linearly quantizes the feature parameter 11 to generate parameter of 4 bits unsigned integer and delete the most significant bit from the paramter to generate the quantization parameter 15 of 3 bits shown in FIG. 4B. The quantization parameter 21 is outputted from the memory 20. The pattern detector circuit 27 receives 2 high order bits 22 of the quantization parameter 21 and detects whether or not the 2 high order bits 22 are a bit pattern 00 . The pattern detector circuit 27 outputs one or another level of control signal 29 to the bit additive circuit 26 depending on the detected result. When the 2 high order bits 22 are 11 , the additive parameter 28 is 1 . When the 2 high order bits 22 are not 11 , the additive parameter 23 is 0 . The additive parameter 23 of one bit and the quantization parameter 21 of 3 bits are combined to become the synthesis parameter 24 of 4 bits shown in FIG. 4A. Therefore the synthesis parameter in the range from 2 to 9 can be obtained from the quantization parameter in the range from 0 to 7. Instead of the bit additive circuit 28, the device may comprise a bit operator circuit, which performs an operation, such as a logical sum operation, a logical product operation or the like, on the quantization parameter on the basis of the control signal 29 from the pattern detector circuit 27. As stated above, the present embodiment makes it possible to generate the synthesis parameter from the quantization parameter by using very small circuits. Where human speech is analyzed and synthesized by using a PARCOR method, a conventional speech analysis and synthesis device linearly quantizes pitch data of the human speech to generate quantization parameter of 7 bits. Therefore, the pitch data in the range of 0 127 can be quantized. However, pitch data of real human speech of 15 or less is never obtained, and man s low speech sometimes has pitch data of more than 130. Therefore, the range of the pitch data which the conventional device can quantize does not agree with the range of the pitch data of the real human speech. On the contrary, the device according to the present embodiment can quantize the pitch data in the range of 16 143 by using the quantization parameter of 7 bits. As a result, the present embodiment makes it possible to synthesize high grade synthetic speech without increasing the number of bits of the quantization parameter. FIG. 5 shows a speech analysis and synthesis device according to a third embodiment of the present invention. A method of synthesizing human speech from quantization parameter stored in a memory 20 is different from the methods of the above mentioned embodiments. N high order bits 29 of the quantization parameter 21 of N bits are inputted to a pattern detector circuit 31 and N N low order bits 30 of the quantization parameter 21 are inputted to a transformation ROM 32. The pattern detector circuit 31 detects whether or not the N high order bits 29 are a predetermined bit pattern. The pattern detector circuit 31 outputs one or another level of control signal 37 to a switching circuit 38 depending on the detected result. The transformation ROM 32 transforms the N N low order bits 30 of the quantization parameter 34 of N bits to generate transformation parameter 34 of M bits. A bit extension circuit 33 outputs an additive parameter 35 of M N bits. The additive parameter 35 and the quantization parameter 21 are combined to be inputted to the switching circuit 38 as parameter 38. The switching circuit 38 selects synthesis parameter 24 out of the parameter 36 and the transformation parameter 34 according to the detected result. Specifically, when the N high order bits 29 are the predetermined bit pattern, the parameter 36 is selected to be outputted as the synthesis parameter 24. When the N high order bits 29 are not the predetermined bit pattern, the transformation parameter 34 is selected to be outputted as the synthesis parameter 24. A synthesis circuit 26 synthesizes human speech on the basis of the synthesis parameter 24. FIGS. 6A, 6B, and 6C show examples of the synthesis parameter 24, the quantization parameter 21, and the transformation ROM 32, respectively. The feature parameter 11 in the L bit floating point form ranges from 2 to 9. The quantization circuit 12 quantizes the feature parameter 11 to generate the quantization parameter 15. Specifically, the quantization circuit 12 linearly quantizes the feature parameter 11 to generate parameter of 4 bits unsigned integer and deletes the most significant bit from the parameter to generate the quantization parameter 15 of 3 bits shown in FIG. 6B. The quantization parameter 21 is outputted from the memory 20. The pattern detector circuit 31 receives 2 high order bits 29 of the quantization parameter 21 and detects whether or not the 2 high order bits 29 are a bit pattern 00 . The pattern detector circuit 31 outputs one or another level of control signals 37 to the switching circuit 38 depending on the detected result. The transformation ROM 32 receives the least significant bit 30 of the quantization parameter 21 and transforms the least significant bit 30 into the transformation parameter 34 of 4 bits shown in FIG. 6C. The bit extension circuit 33 outputs the additive parameter 35 of 1 bit, which is 0 . The additive parameter 35 and the quantization parameter 21 are combined to be the parameter 36 of 4 bits. The switching circuit 38 selects the synthesis parameter 24 out of the transformation parameter 34 and the parameter 36 according to the detection signal 37. Specifically, when the 2 high order bits 29 are 00 the transformation parameter 34 is selected. When the 2 high order bits 29 are not 00 , the parameter 36 is selected. As a result, the synthesis parameter 24 of 4 bits shown in FIG. 6A can be obtained from the quantization parameter 21 of 3 bits shown in FIG. 6B. FIGS. 7A, 7B, and 7C show other examples of the synthesis parameter 24, the quantization parameter 21, and the transformation ROM 32. The feature parameter 11 ranges from 2 to 16. The feature parameter 11 of L bits is quantized to become the quantization parameter 21 of 3 bits. The comparator circuit 13 compares the feature parameter 11 with 7. When the feature parameter 11 is not more than 7, the quantization circuit 12 linearly quantizes the feature parameter 11 to generate parameter 15 of 3 bits unsigned integer . When the feature parameter 11 is more than 7, the quantization circuit 12 generates 000 or 001 depending on value of the feature parameter 11. The quantization parameter 21 is outputted from the memory 20. The pattern detector circuit 31 receives 2 high order bits 29 of the quantization parameter 21 and detects whether or not the 2 high order bits 29 are a bit pattern 00 . The pattern detector circuit 31 outputs one or another level control signals 37 to the switching circuit 38 depending on the detected result. The transformation ROM 32 receives the least significant bit 30 of the quantization parameter 21 and transforms the least significant bit 30 into the transformation parameter 34 of 5 bits shown in FIG. 7C. The bit extension circuit 33 outputs the additive parameter 35 of 2 bits, which is 00 . The additive parameter 35 and the quantization parameter 21 are combined to be the parameter 36 of 5 bits. The switching circuit 38 selects the synthesis parameter 24 out of the transformation parameter 34 and the parameter 36 according to the detection signal 37. Specifically, when the 2 high order bits 29 are 00 , the transformation parameter 34 is selected. When the 2 high order bits 29 are not 00 , the parameter 36 is selected. As a result, the synthesis parameter 24 of 4 bits shown in FIG. 7A can be obtained from the quantization parameter 21 of 5 bits shown in FIG. 7B. As stated above, the present embodiment makes it possible to obtain the synthesis parameter from the quantization parameter nonlinearly quantized by using only the small transformation ROM. Where the device quantizes feature parameter in the range of 16 160 to generate quantization parameter of 7 bits, the feature parameter in the range of 16 127 is linearly quantized and the feature parameter in the range of 128 160 is nonlinearly transformed into the quantization parameter in the range of 0 15. When synthesizing, the feature parameter in the range of 0 15 is reversely transformed by the transformation ROM 32. FIG. 8 shows a speech analysis and synthesis device according to a fourth embodiment of the present invention. The device comprises a transformation ROM 39 instead of the pattern detector circuit 31 and the bit extension circuit 33 in FIG. 5. The transformation ROM 39 receives N high order bits of the quantization parameter 21. The transformation ROM 39 transforms the N high order bits into transformation parameter 35 and outputs switching signal 37 to a switching circuit 38. The transformation parameter 35 and the quantization parameter 21 are combined to become parameter 36 of M bits. The switching circuit 38 selects synthesis parameter 24 out of the parameter 36 and transformation parameter 34 according to the switching signal 37 from the transformation ROM 39. A synthesis circuit 26 synthesizes human speech on the basis of the synthesis parameter 24. FIGS. 9A, 9B, 9C, and 9D show the synthesis parameter 24, the quantization parameter 21, the transformation ROM 32, and the transformation ROM 39, respectively. The feature parameter 11 ranges from 2 to 8. The feature parameter 11 of L bits is quantized to become the quantization parameter 21 of 3 bits. The comparator circuit 13 compares the feature parameter 11 with 3. When the feature parameter 11 is not more than 3, the quantization circuit 12 linearly quantizes the feature parameter 11 to generate parameter 15 of 3 bits unsigned integer . When the feature parameter 11 is more than 3, the quantization circuit 12 generates 100 or 101 depending on value of the feature parameter 11. The quantization parameter 21 is outputted from the memory 20. The transformation ROM 39 receives 2 high order bits of the quantization parameter 21 and transforms the 2 high order bits into transformation parameter 35 of 1 bit as shown in FIG. 9D. The transformation parameter 35 and the quantization parameter 21 are combined to become the parameter 36 of 4 bits. The transformation ROM 32 receives the least significant bit 30 of the quantization parameter 21 and transforms the least significant bit 30 into the transformation parameter 34 of 4 bits shown in FIG. 9C. The switching circuit 38 selects the synthesis parameter 24 out of the parameter 36 and the transformation parameter 34 according to the switching signal 37 from the transformation ROM 39. As a result, the synthesis parameter 24 of 4 bits shown in FIG. 9A can be obtained from the quantization parameter 21 of 3 bits shown in FIG. 9B. As mentioned above, the present embodiment makes it possible to generate the synthesis parameter from the quantization parameter by using very small circuits.