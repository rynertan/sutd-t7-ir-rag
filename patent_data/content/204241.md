# Electronic timepiece including a schedule memory device.

## Abstract
In an electronic time keeping apparatus wherein a plurality of schedule data is stored, chronologically readable, and displayed, schedule data input from a key input section 21 is compared, under control of a read only memory, with a number of schedule data already stored in a random access memory 11 , and edited in a time sequence of recency with a present date as a reference basis to permit the edited schedule data to be stored in this random access memory. A time count operation is performed each time a predetermined timing signal is output from a frequency dividing circuit 19 . A detection is made as to whether or not there is a coincidence between present date data obtained by the time count operation and the edited schedule data stored in the random access memory 13 to see if an appointed date is reached.

## Claims
1. An electronic time keeping apparatus characterized by time count means 18, 19 for counting reference signals to obtain present date information schedule data memory means 13 for storing a number of schedule data comprised of dates and information associated with said dates schedule data input means 21 for inputting schedule data to be stored in said schedule data memory means 13 schedule data editing means 14, 16 for editing the schedule data input by said schedule data input means 21 and schedule data previously stored in said schedule data memory means 13 so as to obtain edited schedule data and for storing said updated data in said schedule data memory means 13 , said schedule data editing means permitting the schedule data including dates following present date information obtained by said time count means to be edited in a time sequence of recency with said present date information as a reference basis next schedule memory means 11 for storing address data of the edited schedule data, including date data following and nearest to said present date, which are contained in the edited schedule data stored in said schedule data memory means by said schedule data editing means 14, 16 coincidence detection means for detecting a coincidence between said present date data and the date data of said edieted schedule data located in a memory position designated by the address data obtained by said next schedule memory means 11 andupdating means for updating the address data of said next schedule memory means on the basis of detection results of said coincidence detection means.

## Description
This invention relates to an electronic timepiece including a schedule data memory device which can electronically read write schedule data, such as date, time, scheme and the like. Conventionally, a schedule display apparatus has been known in the art which stores schedule data, comprised of alarm time data and its corresponding messages, in a memory and, when the alarm time is reached, displays the corresponding message. For example, U.S. Patent No. 4,276,541 discloses an electronic timepiece which, when an alarm time is reached, displays its corresponding message. In this type of electronic timepiece, since the alarm time is set in a minimal time unit of minutes, it is necessary to detect whether or not the alarm time is reached for every minute. Where, for example, many alarm times are stored in memory, a coincidence detection operation is necessary to set the corresponding alarm time based on a present time, for every minute, resulting in a complex circuit as well as in a greater dissipation power. Where, the stored alarm time contains date data in particular, it is also necessary to set not only the time data, but also date data, for detection. As a result, a more complex circuit is required, resulting in a much greater dissipation power. It is accordingly an object of this invention to provide an electronic timepiece including a schedule memory device, which, even if a heavy schedule is stored as schedule times, can detect the schedule times through an efficient process and efficiently inform the user of the arrival of the specific schedule time. According to this invention there is provided an electronic time keeping apparatus including a schedule memory device, comprising time count means for counting reference signals to obtain present date data schedule data memory means for storing a number of schedule data comprised of dates and information associated with said dates schedule data input means for inputting schedule data to be stored in said schedule data memory means schedule data editing means for editing the schedule data input by said schedule data input means and said schedule data previously stored in said schedule data memory means so as to obtain edited schedule data and for storing the edited schedule data in said schedule data memory means, said schedule data editing means permitting the schedule data, including dates following the present date obtained by said time count means, to be edited in a time sequence of recency with said present date as a reference basis next schedule memory means for storing address data on the edited schedule data, including date data following and nearest to said present date, contained in the edited schedule data which have been stored in said schedule data memory means by said editing means coincidence detection means for detecting a coincidence between said present date data and the date data on the edited schedule data which is located in a memory position designated by the address data obtained by said next schedule memory means and for generating a coincidence signal andupdate means for updating the address data of the next schedule memory means on the basis of said coincidence signal. In the electronic timepiece so constructed, it is only necessary to compare a present time with a schedule time of a schedule so as to detect their coincidence. It is, therefore, possible to obtain the advantages of assuring a simpler arrangement, involving less dissipation power and shortening a coincidence detection time. This invention can be more fuly understood from the following detailed description when taken in conjunction with the accompanying drawings, in which Fig. 1 is an outer view showing a schedule memory function equipped electronic wristwatch to which this invention is applied. Keyboard 1 and display device 2 are provided at the front section of the electronic wristwatch. Various enter keys are mounted on keyboard 1 and function as, for example, alphabet and ten keys. Push button switches S₁, S₂, S₃ and S₄ are attached first two to one side area and second two to the other side area of the electronic wristwatch. Here, switch S₄ acts as a page alteration switch switch S₃, as a mode switch for making a switching between a time keeping mode and a schedule mode switch S₂, as a correction mode changeover switch which is switched over to a time correction mode in a time keeping mode and to a schedule write mode in the schedule mode and switch S₁, as a correction digit selection switch in the correction mode. Fig. 2 is a detailed arrangement of display device 2. Display device 2 is comprised of a liquid crystal display device having a main digital display section 2A, at a lower display area, where display elements are constituted by eight figure of eight elements. In this auxiliary digital display portion 2A, a colon display 2D is provided. An upper display area of display device 2 includes an auxiliary digital display portion 2B comprised of four figure of eight display elements, matrix display portion 2C of a five position type, and AM and PM display elements, all these being viewed to the left of the drawing sheet Fig. 1 . The circuit arrangement of the electronic wristwatch will be explained below in connection with Fig. 3. The electronic wristwatch operates based on an 8 bit parallel processed microprogram control system, and a ROM read only memory 11 stores a microprogram for controlling all the operations of the electronic wristwatch and delivers microinstructions OP, DO and NA in a parallel fashion. Here, the microinstruction OP is input to instruction decoder 12 where it is decoded. The output of instruction decoder 12 is fed as a read write instruction to an R W input terminal of RAM random access memory 13 and also as an arithmetic operation instruction to an S input terminal of ALU arithmetic and logic unit 14. The microinstruction DO of ROM is supplied as address data to an Addr input terminal of RAM 13, to a DI 2 input terminal of ALU 14 and to address control section 15, all via a data bus. Microinstruction NA of ROM 11 is next address data which is input to address control section 15. The output of address control section 15 is supplied to an Addr input terminal of ROM 11. RAM 13 includes, for example, an entr y register and arithmetic operation register and is utilized for time count processing, key input processing, arithmetic operation processing, etc. RAM 13 executes data read write operation under control of instruction decoder. Data which is read out from the DO output terminal of RAM 13 is supplied to DI 1 and DI 2 input terminals of ALU 14 and through display control section 16 to display section 17. ALU 14 performs various kinds of operations in accordance with an arithmetic operation instruction from instruction decoder 12. The result of calculation at ALU 14 is read into RAM 13 at the DI input terminal. ALU 14 upon the execution of a judge operation supplies a signal representing the presence or absence of the arithmetic operation data and signal representing the presence or absence of a carry generation, to address control section 15 to permit an address in ROM 11 to be converted. A time count clock of 16 Hz, which is obtained by frequency dividing a reference clock signal from oscillator 18 by means of frequency divider 19, is input to address control section 15 and a time count processing is performed at a rate of one interruption per 1 16 second in accordance with the 16 Hz signal. A signal of a predetermined frequency which is output from frequency divider 19 is fed to timing generator 20. Timing generator 20 delivers various kinds of timing signals to the associated circuits. A key code which is output from key input section 21 is delivered to the DI 2 input terminal of ALU 14. Fig. 4 shows a memory mapping of a major portion of RAM 13. RAM 13 includes a memory area for permitting not only time count data and system control data, but also the other data to be freely written therein in accordance with key in data. RAM 13 includes a BD register for counting a present date and storing it therein, BT register for counting a present time and storing it therein, and data memory. The data memory DM permits schedule data of 50 pages corresponding to row addresses 1 to 50 to be stored therein. The respective row address areas permit schedule data comprised of month date data, hour minute time data and messages the contents of the schedule to be stored therein. The messages are stored in the areas M₁ to M₅₀ on a corresponding row the date data is stored in the areas D₁ to D₅₀ and time data is stored in steps T₁ to T₅₀ in RAM 13. The respective row of the memory map in RAM 13 contains areas f₁ to f₅₀ for storing the next year data storing flags for the next year schedule. Here, the schedule data is, after being edited or rescheduled in a given sequence, stored in the data memory DM as set out below. RAM 13 includes an address register n for designating the row address in the data memory DM, memory N for a whole number of data on the schedule, display page pointer P , flag register FS and ON OFF flag register AL for alarm. The operation of this invention will be explained below with reference to Figs. 5 to 10. First, the overall operation of the wristwatch will be explained briefly with reference to the general flowchart of Fig. 5. In the flowchart of Fig. 5, step T₁ is executed, waiting for a time count timing or for a key in request. When a key code corresponding to a depressed key is output from key input section 21, then at step T₂ a key processing program is designated, executing a key processing or a display processing operation. When a time count clock of 16 Hz is output from frequency divider 19, the process is advanced to step T₃ at which a time count processing is executed to permit present time data in the BT register in RAM 13 to be updated. As a result, if a date carry is obtained, the date data in the BD register is updated. At the completion of the time count process, an alarm processing is executed at step T₄ and a display processing is performed at step T₅. Figs. 6A and 6B show detailed contents of the key processing and di splay processing at step T₂ in Fig. 5. When the switch S3 is operated so as to perform a switching operation from the time keeping mode to the schedule mode or from the schedule mode to the time keeping mode, this operation is detected at step T₁₁ and the process goes to step T₁₂. At step T₁₂, a judgment is made as to whether the contents of the register F Figs. 9A and 9B show the display switching states at that time, noting that Fig. 9A shows a time display in the time keeping mode and Fig. 9B shows a schedule mode in the schedule mode. When the switch S₂ is operated in the time keeping mode, the operation of the switch S₂ is identified at step T₁₈ and the state of a time keeping mode set is identified at step T₁₉. Then the process is advanced to step T₂₀. As a result, the contents of the register F As shown in Fig. 9, the time correction mode in Fig. 9C is obtained when the switch S₂ is operated in the normal mode in Fig. 9A. The normal mode is regained when the switch S₁ is operated in the time correction mode. Only when upon the operation of the switch S₂ the time correction mode is switched over to the normal mode, the process goes to step T₂₃ where an editing process is executed to permit a rearrangement, or reschedule of the schedule data as set forth later. When such an editing, or reschedule process is completed or when a switching from the normal mode to the time correction mode is completed, the process goes to step T₂₄ where the time of day data is displayed. When, on the other hand, the switch S₂ is operated in the schedule mode, this operation is detected at steps T₁₈ and T₁₉ and the same process steps T₂₅ to T₂₈ as at steps T₂₀ to T₂₈ is executed. As shown in Fig. 9, when the switch S₂ is operated in the schedule mode read mode in Fig. 9B the schedule write mode in Fig. 9D is involved. When t he switch S₁ is operated in the write mode the read mode is obtained. Even in this case, only when a switching is made from the write mode to the read mode an editing process for rearranging the schedule data is executed step T₂₈ in the same fashion as set out above. When the editing process is complete, the value the number to be next announced of the address register n is transferred to the display page pointer P and the schedule data of a page corresponding to the value of the display page pointer P is displayed steps T₂₄ to T₃₀ . The operation of the timepiece will be explained below in connection with the operation of the switch S₄, noting that the switch S₄ is operated when in the schedule write and read modes the display page is switched over to the next page. Upon the operation of the switch S₄ this operation is detected at step T₃₁ Then the process goes to step T₃₂ to examine whether or not the schedule mode is involved. If the time keeping mode is involved, the switch S₄ becomes ineffective and, if in the schedule mode, a process attendant on the subsequent operation of the switch S₄ is executed. At step T₃₃, a judgment is made as to whether the value of the whole data number memory N is 0 or not, i.e., whether no data is stored in the data memory DM. If even one schedule data is stored in the data memory DM except in the case where no schedule data is stored in the data memory DM, the process goes to step T₃₄ at which the data of the display page pointer P and the value of the whole data number memory N are compared with each other. Now assume that the value of the display page pointer P is equal to the value of the whole data number memory N. Then the process goes to step T₃₅ at which a judgment is made as to whether the value of the whole data number memory is 50 or whether a full data state is reached at which the data corresponding to 50 pages are all stored in the data memory DM. Here when at step T₃₄ the display page number is detected as being smaller than the whole data number for schedule, data are sequentially stored in the data memory DM. At step T₃₆ the value of the display page pointer P is incremented as in the form of P 1 and the schedule data corresponding to a page indicated by the value of the display page pointer P is displayed steps T₃₆ and T₃₈ . Even where the display page number is equal to the whole data number but the data memory DM is not in the data full state, steps T₃₆ and T₃₈ are executed in which case a display is made as an empty page display. In this way, 1 is added to the value of the whole page number pointer P through the operation of the switch S₄. Where at step T₃₄ the display page number is greater than, or equal to the whole data number but the data memory DM is in the data full date, 1 is set to the display page number pointer P to permit a first page to be displayed steps T₃₇ and T₃₈ . Fig. 10 shows the states of display mode by the operation of the switch S₄. Each time the switch S₄ is operated the schedule data in the data memory DM is displayed in a cyclic fashion. Upon the operation of the switch S₁ this operation is detected at step T₃₉. This process goes to step T₄₀ at which a judgment is made as to whether the contents of the register F When in the time correction mode or the schedule write mode any of the ten keys, together with an alphabet key, is operated for each entry of one character the process goes to steps T₃₉ and T₄₂ at whi ch a judgment is made as to whether or not F Fig. 7 is a flowchart showing a detail of a schedule data rearranging process steps T₂₃ and T₂₈ in Fig. 6. First, an initial value 1 is set to the address register n step T₅₁ Then the process goes to step T₅₂ at which a comparison is made between the contents of the register BD and that of one Dn of areas D₁ to Dn designated by the contents D₁ to D₅₀ to examine whether or not a present date exceeds a preset date on the schedule. If it exceeds that preset date, the process goes to step T₅₃ at which, in order to show that said schedule data belongs in the next year, the next year flag is turned ON to permit 1 to be set to the area fn corresponding to the area Dn. If the present date does not exceed said preset date, the process goes to step T₅₄ at which the next year flag is turned OFF. At step T₅₅, 1 is added to the value of the address register n in an incremental step. Then the process goes to step T₅₆ at which a comparison is made between the contents of the address register n and that of the whole data number memory N to see if the value of the address register n exceeds that whole data number. If it does not exceed the whole data number, the process T₅₂ goes back to step T₅₂ and the aforementioned operation is repeated. As a result, for the respective corresponding schedule data the next flag is turned ON or OFF in accordance with the present date. After the next flag has been ON OFF processed, the process goes to step T₅₇ at which the rearrangement, or reschedule of the schedule data is implemented. That is, on the basis of the present date and time the schedule data are rearranged, or rescheduled in a time order of recency. Stated in more detail, where there are a plurality of schedule data, they are rearranged in said time order and the next year schedule data are time sequentially rearranged after the present year data. When in this way the contents of the data memory DM are edited, a process for setting the next announcement number to the address register n is implemented. Since in this case the schedule data to be next announced is stored in the address 1 of the data memory DM by the aforementioned editing process, 1 is set to the address register n step T₅₈ . When a plurality of schedule data being present on the same day, is to be ON OFF controlled based on the next year flag date, even if the present time exceeds some schedule time, they are edited in said time sequence as set out above without being processed as the next year data. In this case, the next processing is executed so as to update the value of the address register n . That is, at step T₅₉ a comparison is made between the contents of the area Dn and that of the register BD to see whether or not the present date reaches an initial schedule date. If the answer is in the negative, the value of the address register n remains to be 1 , but when the preset schedule date is reached the process goes to step T₆₀ at which an examination is made as to whether or not the present time reaches the schedule time. If the answer is in the affirmative, the value of the address register n remains to be 1 . If, on the other hand, the answer is in the negative, 1 is added to the value of the address register n and a comparison is made as to whether or not the contents of the address register n exceeds that of the whole number data memory N steps T₆₁ and T₆₂ . If the answer is in the affirmative, the value of the address register n remains unchanged and, if the answer is in the negative the process goes back to step T₅₉. Thus the same procedure is executed. By so doing, the next announcement number is set to the address register n. Fig. 8 is a flowchart showing a detail of the alarm processing step T₄ shown in Fig. 5. When an alarm processing commences, then the alarm flag is judged as being an ON or OFF state on the basis of the contents of the alarm flag register AL step T₇₁ . With the alarm OFF a comparison is made between the present date and time data read out of the registers BD and BT and the schedule date and time data read out of memory areas Dn and step Tn which correspond to the next announcement number in the address register, and an examination is made as to whether or not there is an alarm time coincidence step T₇₂ . If there is such a time coincidence, then the alarm flag is turned ON and 1 is set to the register AL, starting a timer counter operation steps T₇₃ and T₇₄ . Simultaneously with the start of the timer a buzzer is turned ON, producing an alarm sound. At the same time the schedule data of a schedule corresponding to the alarm time coincidence is displayed in place of the time data. In this case, the schedule data is displayed and simultaneously transferred to a voice synthesizing circuit not shown in detail so that this schedule data sounds as the synthesized voice. Alternatively, simply this schedule data sounds as the synthesized voice. If the alarm time is so reached the alarm flag is turned ON. When an alarm process is again started after 1 16 second, the process goes from step T₇₁ to step T₇₅ at which a judgment is made as to whether or not a predetermined time is reached. If the answer is in the negative, an alarm sound continues until the predetermined time is reached, and at the same time the schedule data is displayed. When the predetermined time is reached, at step T₇₆ the buzzer is turned OFF, stopping an alarm sound. At the next step T₇₇ the next announcement number is updated with 1 added to the value of the address register n . Thereafter, a comparison is made between the present date and time data and the schedule date and time data corresponding to the updated address register n . Where a coincidence occurs, as explained in connection with Fig. 8 an alarm sound is produced while at the same time the corresponding schedule is displayed. In addition the updating of the address register n is performed. When in this embodiment the time correction mode or schedule write mode are cancelled, then the schedule data is rearranged in a time order of recency. Even if the schedule data are written in an irregular fashion, the respective schedule data is rearranged in the time order of recency with the present date and time as a reference. Since upon the detection of an alarm time coincidence it is only necessary to compares with the present time and date the schedule data indicated by the next announcement number in the address register n , a process for detecting the alarm time can be efficiently performed even if a greater number of schedule data are stored in the memory. In the embodiment of Figs. 1 to 10 the preset schedule data is announced when the preset schedule data on the schedule date is reached. However, there are often the cases where it is desired to know a schedule before the schedule time is reached. Figs. 11 to 16 show another modification of this invention. The arrangement of this modification is the same as that set forth in connection with Figs. 1 to 10, except in the following respects. Fig. 11 shows another form of the display device of Fig. 2. In this form, in addition to digital display sections 2A and 2B and matrix display section 2C, display elements 101 through 114 are provided in a 2 row 7 column dot matrix. The character THIS is, for example, printed as indicating this week for a corresponding row and character NEXT is, for example, printed as indicating next week with characters S , M , ... S marked as Sunday, Monday, ... Saturday for the corresponding columns of the matrix array. As shown in Fig. 12 display elements 101 to 114 are displayed through drivers L₁ to L₁₄ when 1 is set to registers B₁ to B₁₄ When the contents of registers B₁ to B₁₄ correspond to set schedule dates, 1 is stored in registers B₁ to B₁₄, noting that the setting operation is performed at steps T If at step T When the appointed day is Monday, June 30, dot matrix display element 101 corresponding to the position of Monday, this week is displayed as shown, for example, in Fig. 14. It is, therefore, possible to know the schedule data on the appointed day and thus to confirm it through the operation of the switch S₃. When, in place of Monday, Tuesday is appointed as this day, the warning mark on said Monday, i.e., a spent day disappears. From this it will be found that the next schedule day is next Wednesday. When Sunday, next week, is reached, the schedule warning marks which have been displayed in the next week position are shifted to the this week position, as shown in Fig. 16, at step T In the embodiments previously described with reference to Figs. 11 through 16, the indication of the schedule displayed on the wrist watch covers the two week schedule data. It is, of course, possible to display the more schedule indications than the two week schedule. Also, every time operations of the external operation switch, the schedule data succeeding to the next week schedule data may be sequentially displayed on the dot matrix display 2C as shown in Fig. 11. As previously described in the first and second embodiments with reference to Figs. 1 to 10 and Figs. 11 to 16, respectively, the schedule data were visually displayed on the display device 2. Alternatively, these schedule data may be printed out by a printer not shown in detail . In this case, a key switch not shown is provided on this printer for entering data. Accordingly, it is very conven ient to print out the schedule data succeeding to those entered by the key switch. Although in the aforementioned embodiment this invention has been explained as having been applied to the wristwatch, it can be applied to the other type of time keeper, compact type electronic computer and the other electronic apparatus.