# PARALLEL PROCESSING COMPUTER

## Claims
Ein Parallelverarbeitungsrechner eines Typs mit Mehrfach Befehlsfluß und Mehrfach Datenfluß, mit einer Mehrzahl von Operationseinheiten 1, 2, 3 , von denen jede einen Prozessor 1 , einen Pufferspeicher 2 vom Silospeicher oder FIFO Typ, mit getrennten Eingabe und Ausgabekanälen, und ein Datenübertragungs Steuermittel 3 , das zwischen den Prozessor 1 und den Pufferspeicher 2 geschaltet ist, um die Datenübertragung zwischen dem Prozessor und seinem Pufferspeicher und die Datenübertragung zwischen seinem Pufferspeicher und den Pufferspeichern der benachbarten Operationseinheiten in Reaktion auf den Prozessor der Operationseinheit zu steuern, enthält unidirektionalen Datenbussen 201, 202 , die die Pufferspeicher 2 der benachbarten Operationseinheiten miteinander verbinden, um die Datenübertragung zwischen diesen auszuführen und Steuerleitungen 310, 320 , die die jeweils benachbarten Datenübertragungs Steuermittel miteinander verbinden, wobei sämtliche Prozessoren 1 während einer Übertragungsoperation gleichzeitig arbeiten, um zunächst im entsprechenden Pufferspeicher 2 Daten zu speichern und nach Beendigung der Speicherung der Daten das entsprechende Datenübertragungs Steuermittel 3 zu steuern, um die Daten gleichzeitig zwischen den Pufferspeichern 2 der benachbarten Operationseinheiten zu übertragen, und wobei das Datenübertragungs Steuermittel 3 in jeder Operationseinheit ein Mittel 31 enthält, um einen Wert zu speichern, der gleich einer Anzahl von aufeinanderfolgenden Datenübertragungen ist, die vom Pufferspeicher einer jeden Operationseinheit während der Übertragungsoperation auszuführen sind.

## Description
This invention relates to a parallel processing computer, and more particularly to a multiple instruction flow, multiple data flow type MIMD flow parallel processing computer which is suitable for obtaining a numeric solution of a partial differential equation by parallel processing at a high speed. Parallel processing computers executing parallel processing by use of a plurality of processors have been developed in the past in order to make calculations of scientific technology, particularly to obtain numeric solutions of partial differential equations. A typical example os such computers is disclosed in the article entitled PACS A Parallel Microprocessor Array for Scientific Calculations in ACM Transactions on Computer Systems, Vol. 1, No. 3, August 1983, p 195 221. This computer is referred to as an adjacent connection type in which adjacent processors are connected to constitute an array processor of a unidimensional or two dimensional arrangement. Although the computer had the advantage that the connection between the processors can be made easily, it involves the drawback that the data transfer time between remote processors is great. That is, data transfer between the remote processors can be made through relay processors, but the relay processors need time to receive and send the data. Therefore, the ratio of the transfer time to the data processing time is great and the processing performance is not sufficiently high. Since the hardware arrangement of the processors is fixed, the efficiency of calculation depends upon the problem to be solved, as will be illustrated below. As described above, the number of transfer data is likely to increase and the processing load for one processor becomes great, dpending upon the arrangement of the processors even when the same problem is to be solved, and if the arrangement of the processors is fixed, the efficiency of calculation is reduced for such a problem. DE A 3 214 068 describes a multi processing computer comprising elementary processors which are connected to a micro instruction conveyor comprising a central control unit and microprogram control switches for the elementary processors. Further, a data conveyor is provided consisting of a central unit for a main memory and data control switches of the elementary processors. Thereby, all elementary processors can access the common microprogram memory without a memory conflict. The control switch of each elementary processor comprises a multi functional buffer register, a register for the number of the logic conditions, an address register for the succeeding micro instruction and a signal distributor. In the initial state of each micro instruction cycle the buffer register is loaded with the logic conditions of the elementary processor, wherein the corresponding information loaded with the preceding micro instruction is contained in the register for the number of the logic conditions and the register for the succeeding address. Upon start of the operation the register for the succeeding address is loaded with the operation code upon completion of the micro instruction cycle the next micro instruction as generated from the central control unit is loaded in the registers. The known multi processor computer is not of multiple instruction flow, multiple data flow type in which all the processors can asynchronously communicate with one another. Data and instruction transfers are synchronously initiated and completed by the central control unit. An object of the present invention is to provide a parallel processing computer in which the processors can transfer data and instructions among one another which can simultaneously start data transfer between the processors, and can speed up the data transfer between the remote processors. The above object is solved in accordance with the features of claim 1. The dependent claims characterize advantageous developments thereof. In accordance with a preferred embodiment a parallel processing computer which can form an optimal processor arrangement in accordance with a problem to be solved, in order to execute highly efficient parallel calculation processing is provided. In the prior art example in the article PACS described above, the data transfer between the remote processors is made by means of the input output instruction of relay processors, therefore, the execution time of the input output instruction is great. Furthermore, since the same memory is used as a buffer memory for the input output ports, it is necessary to effect control so that adjacent processors do not attempt to simultaneously access the buffer memory. The present invention is based upon the concept that if a First In First Out type of memory having separate input and output ports is used as a buffer memory for each processor and these buffer memories are connected to constitute a data transfer bus, each processor can simultaneously store the data in the buffer memory of the data transfer bus. If data in a quantity corresponding to the data transfer destination are transferred between the buffer memories, data transfer between remote processors can be made without using the input output instruction of relay processors. The present invention is completed on the basis of the concept described above. In the processors that are arranged two dimensionally, furthermore, the present invention provides the function of unidimensionally connecting the processors of different rows or columns, and changes the arrangement of the processors in order to minimize data transfer between the processors in accordance with the lattice arrangement of the problem to be solved. In accordance with the present invention, the data transfer between the processors can be made by controlling the data quantity input and output to and from the buffer memories without using the input output instructions of the processors. Therefore, the data transfer between remote processors can be speed up. Hereinafter, one embodiment of the present invention will be described with reference to the accompanying drawings. Fig. 1 is a schematic view representing the construction of a parallel processing computer in accordance with the present invention, and shows an example in which a plurality of operation units are disposed unidimensionally. In Fig. 1, reference numeral 1 represents a processor, 2 is a First In First Out type buffer memory and 3 is a data transfer control circuit. The processor 1 and the data transfer control circuit 3 are connected by a bidirectional address line 101, while the data transfer control circuit 3 and the input and output terminals of the buffer memory 2 are connected by unidirectional data transfer signal lines 201, 202 and 203, 204, respectively, thereby constituting one operation unit. The operation unit P Fig. 2 shows an embodiment of a parallel processing computer constituted by disposing M N operation units on a two dimensional lattice. Buffer memories 2 and data transfer control circuits 3 are disposed in both directions of row and column for each processor 1, and are connected in the same way as the embodiment of the unidimensional arrangement in order to constitute each operation unit. The buffer memories 2 and the data transfer control circuits 3 are connected in each of the row and column directions to constitute mutually independent M data transfer buses in the row direction and N buses in the column direction. Data transfer in the row or column direction is effected without passing through the processor 1, and data transfer between the processors 1 whose row and column are different is effected by two processors on the reception side and the transmission side, or through the processors having row or column which is coincident. In the embodiment in which the operation units are arranged two dimensionally, the construction for each row and for each column is the same as in the unidimensional arrangement. Therefore, the following description will be based upon the embodiment of the unidimensional arrangement. Fig. 3 is a schematic view showing the construction inside the operation unit. The processor 1 consists of an operation device 11 and a memory 12, and the data transfer control circuit 3 consists of a counter circuit 31 and an input output signal generation circuit 32. Instruction code and numeric value data of the operation device 11 are stored in the memory 12 of the processor 1, and the operation is made asynchronously in each processor. The data transfer control circuit 3 is a circuit which controls the data input and output between the processor 1 and the buffer memory 2, the data output from the buffer memory 2 to the unidirectional data line 202 and the data input from the unidirectional data line 201 to the buffer memory 2. The data output from the buffer memory 2 to the unidirectional data line 202 is effected when the processor 1 sets the number of signals produced from the input output signal generation circuit 32 to the output control signal line 304 and produces a signal to the output control signal line 304. The data input from the unidirectional data line 201 to the buffer memory 2 is effected by a signal which is produced from the input output signal generation circuit 32 to the input control signal line 303 in synchronism with a signal representing that the adjacent operation unit receiving a signal through the control signal line 310 produces the data to the unidirectional data line 201. Hereinafter, the flow of data transfer between the processors will be described. Fig. 4 is a flow chart of the data transfer between the processors. Next, the operation of the data transfer control circuit as the principal portion of the parallel processing computer in accordance with the present invention will be described in detail with reference to Figs. 5 to 8. Fig. 5 is a structural view showing the construction of the data transfer control circuit. In Fig. 5, reference numeral 41 represents a decoder circuit 42 is a counter 43 is a synchronization circuit 51 is an output signal generation circuit G1 through G3 are gate circuits and OR1 and OR2 are OR elements. The bidirectional data address signal line 101 from the processor consists of a data signal line 111, an address signal line 112 and a read control signal line 113. An address corresponding to one word is assigned to each buffer memory, counter and synchronization circuit, and the data input and output to the buffer memory by the processor is effected by executing a data write or read instruction to and from the address of the buffer memory. In other words, when the decoder circuit 41 judges that the address signal 112 is the address of the buffer memory and the read control signal 113 is a write signal e.g., a logic 0 , for example, the input control signal 411 is generated. When the read control signal 113 is a read signal e.g., a logic 1 , for example, the output control signal 412 is generated. These signals are then applied to the write W or read R control terminal of the buffer memory through the OR element OR1 or OR2. At this time, the input and output control signals 411 and 412 open the gate circuits G1 and G2, and the input data line 301 or the output data line 302 of the buffer memory is connected to the data line 111 on the side of the processor. Next, data transfer control between the buffer memories of the adjacent operation units will be described. The data transfer between the buffer memories is started by delivering the transfer word number to the data transfer control circuit 3. In other words, the processor executes the write instruction of the transfer word number for the address which is alloted to the counter 42. The decoder circuit 41 generates a counter set signal 413 and sets the signal of the data line 111, that is, the transfer word number, to the count value of the counter 42. The counter set signal 413 is also applied to the synchronization circuit 43. The synchronization circuit 43 sets the data transfer flag 432, and delivers a transfer instruction signal to the output signal generation circuit 51 when the transfer flags 312 and 322 of all the operation units are set. The output signal generation circuit 51 periodically delivers the buffer memory output control signal 511 while the transfer instruction signal 431 is the logic 1 , and also sends the input control signal 321 to the adjacent on the down stream side with respect to the data flow buffer memories. The buffer memory output control signal 511 is also applied to the counter 42, and decrements the value in the counter 42. When the count reaches zero 0 , a transfer end signal 421 is sent to the synchronization circuit 43. Upon receiving the transfer end signal 421, the synchronization circuit 43 resets the data transfer flag 432 and also resets the transfer instruction signal 431 in such a manner as to stop the delivery of the buffer memory output control signal 511 in the output signal generation circuit 51. The buffer memory output control signal 511 is applied to the read control terminal R of the buffer memory 2 through the OR element OR2. Since the input control signal 321 is connected to the input signal 311 of the data transfer control circuit on the downstream side, it is applied to the write control terminal W of the downstream buffer memory through the OR element OR1. Therefore, the data read out from the buffer memory 2 by the operation described above is sequentially written into the downstream buffer memories, and the data re transferred to the adjacent operation units. Fig. 6 is a schematic of the circuit construction of the synchronization circuit 43. Symbols FF1 and FF2 in Fig. 6 represent SR flip flops. When a logic 1 is applied to an S terminal, a Q output assumes a logic 1 , and when a logic 1 is applied to an R terminal, the Q output assumes a logic 0 . A Symbol IV1 represents a NOT element of an open collector output, and this output signal is connected to the IV1 outputs of the next NOT elements on both sides by the signal lines 312 and 322. Therefore, the outputs of IV1 of the NOT elements of all the operation units are connected mutually in series. For this reason, this output signal assumes a logic 1 when the input of IV1 of all the operation units is 0 , that is, when the Q output of FF1 the data transfer flag 432 is 1 , and indicates that the data transfer flag is set in all the operation units. When FF2 is set with this signal and is reset by the Fig. 7 shows an example of the definite construction of the output signal generation circuit 51. This circuit periodically generates the buffer memory output control signal 511 and the input control signal 321 so long as the transfer instruction signal 431 is 1 , and Fig. 8 shows its timing chart. In Fig. 7, symbols DL1 and DL2 represent delay elements, which produce output signals after delaying an input signal by a predetermined time. Symbol MMV1 represents a monostable multi vibrator. This vibrator produces a pulse having a predetermined time width from the application of a CLK input, and the output pulse width is determined by a resistor R and a capacitor C. Since the Q output initial value of FF3 is 0 , the output of AND1 of an AND element becomes 1 when the transfer instruction signal 431 becomes 1 . Since this signal is applied to the S input of FF3, the Q output of FF3 becomes 1 , so that the output of AND1 returns to 0 FF3S input in Fig. 8 . Since the output of AND1 is also the CLK input to MMV1, a pulse having a predetermined time width Tw is produced at the Q output of MMV1 output in Fig. 8 . The delay element DL2 generates the FF3 reset signal, and produces a pulse of a time width Td2 at the fall of the Q output pulse of MMV1 by means of DL2, IV2, AND2 and applies it to the FF3R input. The delay element DL1 sets the 0 time of the FF3 Q output. After the FF3 Q output returns to 0 , the initial state of the circuit is assumed again after the passage of the delay time Td1 of DL1, and the output of AND1 becomes again 1 , thereafter repeating the operation described above. The pulse width Tw of MMV1 and the delay time Td1 of the delay element DL1 are determined in accordance with the characteristics of the buffer memory element such as access time and cycle time. Hereinafter, examples of data transfer will be described with reference to Figs. 9 and 10. The buffer memory in each operation unit is of the First In First Out type capable of storing therein Fig. 9 shows the change of the content of the buffer memory and the change of the count value of the counter of the data transfer control circuit when there are four operation units and all the processors transfer one data word to the processors that are spaced apart therefrom by two processors. Fig. 10 shows the change of the content of the buffer memory and the change of the count value of the data transfer control circuit when the operation units are four and all the processors transfer one data word to one operation unit P₄. As described above, each processor selects various kinds of transfer modes in accordance with the data number to be stored in the buffer memory and with the count value to be set to the counter of the data transfer control circuit. The buffer memories are connected in a loop to constitute the data transfer bus as in the embodiment described above. Therefore, when the number of processors is N in Fig. 1, the data transfer from the operation unit P Hereinafter, an example of parallel calculation will be described. A two dimensional Poison s equation below is differentiated with respect to time and position where The following boundary conditions are given in order to calculate at each lattice point where The flow of parallel processing will be explained with reference ot Fig. 11, which is a flowchart of a parallel calculation. Hereinafter, the second embodiment of the present invention will be described. Fig. 12 is a block diagram showing the construction of a parallel processing computer in accordance with the present invention. Fig. 13 shows in detail the construction of a parallel processing computer of Fig. 12. In Fig. 12, symbols P The bus connection mechanism S When the gate control signal gc1 is ON, the gate circuits 61 and 62 are conductive, so that the port 1 is connected to the port 3, and the port 2 to the port 4. Similarly, when the gate control signal gc2 is ON, the gate circuits 63 and 64 are conductive, so that the port 1 is connected to the port 2, and the port 3 to the port 4. Here, the final operation unit of the Therefore, if the gate control signal gc1 is ON in all the bus connection mechanisms S₁ S Fig. 15 shows examples of the operation unit arrangements. In this case, a 4 row 4 column two dimensional arrangement consisting of 16 sets of operation units is used as the basic structure and three bus connection mechanisms S₁ S₃ are disposed between the rows. When a bus connection control signal bc₁ to be applied to the bus connection mechanism S However, the connection of the data transfer buses in the column direction is always the same as that of the basic structure, and is P Fig. 16 shovs schematically the bus connection mechanism of Fig. 14 by means of a logic circuit. In Fig. 16, it will be assumed that the bus connection control signal bc consists of a connection signal cnc which designates connection and disconnection between the rows by logics 1 connection and 0 disconnection , and a trigger signal trg for executing the connection and disconnection operations. FF represents a D type fli flop, and G₁ through G₄ are logic elements generally referred to as three state buffers . The gate control circuit 54 and the gate circuits 61 64 of Fig. 14 can be realized extremely easily by one D type flip flop and one set each of three state buffer G1 G4, respectively. As described above, in the parallel processing computer in accordance with the second embodiment, the operation unit arrangement is variable, and the operation unit arrangement having the highest efficiency can be formed in accordacne with the shape of the lattice point arrangement of the problem to be processed. In the second embodiment described above, the bus connection mechanism is disposed for each row, but the same function can be obviously obtained by disposing the bus connection mechanism for each column. Furthermore, the bus connection mechanisms can be disposed for both rows and columns so that they are suitably and selectively used in accordance with a problem to be processed. The control processor CU has the function of providing the bus connection control signal bc₁ to each bus connection mechanism S Fig. 17 shows an example of a calculation method which determines the optimal operation unit arrangement from the calculation lattice point arrangement. It will be assumed that m and n are numbers of rows and columns, respectively, M and N are numbers of rows and columns of the operation units and the number of lattice points is greater than that of the operation units. The definite sequence is as follows. The binary data BC is prepared by putting K 2 Next, some calculation examples by the parallel processing computer of the second embodiment of the present invention will be illustrated. A difference solution method of a two dimensional Poisson s equation t time, x and y positions in the row and column directions, variable to be obtained will be considered. In other words, Here, it will be assumed that the number of the operation units is 256 and the basic structure M rows N columns is 16 rows and 16 columns. It will be also assumed that the calculation lattice points are 16 row 256 column. The definite calculation sequence will be illustrated below. If this problem is solved without changing the operation unit arrangement, each operation unit calculates one row 16 column lattice points. Therefore, the number of data transferred between the operation units in this case is 1 2 16 2 34, and this is more than double the present invention. A unidimensional problem of the same equation as described above will be considered. It will be assumed that the number of operation units is 256 in a 16 row 16 column arrangement and the number of the calculation lattice points is 256 in the same way as the number of the operation units. The calculation sequence is exactly the same as that of the two dimensional problem, and is as follows. Although a plurality of bus connection mechanisms are disposed in the embodiment described above, the processors of arbitrary rows or columns can be connected unidimensionally by one bus connection mechanism by increasing the number of the switching circuits in the bus connection mechanism.