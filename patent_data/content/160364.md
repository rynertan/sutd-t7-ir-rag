# BINARIZING SYSTEM OF PICTURE IMAGE SIGNALS

## Claims
Binärisierungssystem für ein Bild, mit

## Description
This invention relates to a binarizing system for picture image signals. In a facsimile device for example analog picture image signals produced by scanning a manuscript with a line sensor are binarized according to a predetermined threshold value. Generally, the level of the picture image signal varies variously depending upon such factors as the tone or concentration of the picture image, the thickness of lines, whether the lines are vertical or horizontal, states of surrounding picture images, or the like so that when the picture image signals are binarized as they are, it is impossible to obtain good image quality. For example, a fine black line in a white background, a continuous pattern of fine white and black lines, and a fine white line in a black background have different signal levels so that informations would be lost irrespective of the settings of threshold values as will be described later in more detail. For this reason, in the prior art a correction circuit has been provided before the binarizing circuit for correcting contrast of the picture image signals. Although various types of correction circuits have been proposed, no satisfactory correction circuit is yet available. For example, according to one type of correction circuit, where the difference in the signal levels of the picture image signals of adjacent picture elements and the picture image signal of a picture element to be corrected is small, substantially no correction is made, while for a picture image in which the level of the picture image signal varying slowly, that is, for a picture image whose contrast is vague, a satisfactory correction could not be made. U.S. Patent US A 4345314 discloses a dynamic threshold device, in which a sequence of digitized reflectance values is stored temporarily and processed using a look up table to give a bias selectively towards the black end or the white end. This biased value is compared with a dynamic threshold value which is determined from the stored values for images before and after, above and below the relevant image, to provide a binary output indicating black or white. The purpose of the present invention is to provide a binarizing system for picture images capable of preventing loss of picture images and effecting efficient correction even for picture images whose picture image signal levels vary slowly, thereby improving image quality. According to this invention there is provided a binarizing system for a picture image, comprising According to this system, information regarding the nature of the tone of the manuscript picture image can be obtained more correctly whereby when the picture image signals of the picture element to be corrected in a picture image are corrected relative to one another in accordance with this information, they can reproduce the nature of the tone of the picture element with a higher fidelity when binarized according to a predetermined threshold value. For this reason even a picture image whose picture image signal level varies slowly can be corrected efficiently. Since the level correction is effected for respective picture element units of the quantized picture image signals even when a phenomenon resulting in a loss of one picture element is caused by a temporary over correction, there is no fear of causing visable loss of picture image as in some prior level correction circuits. Before executing a calculation necessary for the level correction, a certain number of the picture image signals of picture elements preceding the picture element to be corrected are extracted, and at least one of the extracted picture image signals, whose level is a maximum or a minimum, is preselected so that the binarizing system of this invention can be fabricated with simple hardware circuit, thereby increasing the speed of signal processing. In the accompanying drawings Before describing the preferred embodiments of this invention, conventional level correction circuits will first be described. Where it is desired to binarize analog picture images according to predetermined threshold values, it has been difficult to obtain binarized picture image signals having a high reproduceability. For example, as shown in Fig. 1, a fine black line For this reason, a correction circuit has been provided at the preceding stage of a binarizing circuit for correcting the contrast of the picture image signal. Fig. 2 shows one example of the correction circuit comprising a subtraction circuit 10 and a correction signal forming circuit 20. The subtraction circuit 10 is constituted by an operational amplifier 11 and resistors 12, 13, 14 and 15 and functions to subtract an output signal BS output from the correction signal forming circuit 20 from a picture image signal AS. The correction signal forming circuit 20 is constituted by an integrating circuit made up of a resistor 21 and a capacitor 22, a first threshold value circuit made up of a diode 23 and a bias source 24, a transistor circuit made up of a transistor 25 and resistors 26 and 27, and a second threshold value circuit made up of a diode 28 and a bias source 29. The threshold values set by the first and second threshold value circuits define the lower limit and the upper limit respectively at a level region to be corrected of the input picture image signal AS, so as to subject the input picture image signal AS to integration processing in the defined region. The input output characteristics of the correction circuit are shown in Fig. 3, wherein Δ1 and Δ2 represent the threshold values set by the first and second threshold value circuits. Where a picture image signal AS as shown in Fig. 4a is applied to the correction circuit, the correction signal forming circuit 20 produces a signal BS whose level is limited and integrated as shown in Fig. 4b, while the subtraction circuit 10 outputs a corrected picture image signal CS as shown in Fig. 4c corresponding to the difference between the input picture image signal AS and the signal BS. As shown in Fig. 4c, this corrected picture image signal CS contains all components of the input picture image signal AS. Accordingly, when this signal CS is applied to a binarizing circuit, not shown, so as to binarize it with a threshold value L, it is possible to obtain a binarized picture image information containing all the picture image information. With such a conventional level correction circuit, however, since the input picture image signal is integrated, when a subtraction operation is performed with the subtraction circuit 10, the integrated component is also subtracted, whereby tails X are formed in the corrected picture image signal CS as shown by hatched portions in Fig. 4c. These tails result in a degradation of the reproduced picture image. For example, when a picture image including black vertical lines and a horizontal line which is integrated with the vertical lines as shown in Fig. 5a is scanned in a direction of arrow H to obtain a picture image signal AS, this signal AS would become as shown in Fig. 5b. When such picture image signal AS is corrected by the level correction circuit described above, the signal BS output from the correction signal forming circuit 20 would contain the integrated component, while the corrected picture image signal CS outputted from the subtraction circuit 10 would contain tails shown by hatched portions as shown in Fig. 5d. For this reason, when this signal CS is binarized with, for example, a threshold value L, the tails Y in the signal CS are lost so that a black picture image at this part would be judged as a white picture image. In other words, the horizontal line would be cut away. In another conventional level correction circuit, the picture image signal level of a picture element to be corrected is corrected by quantizing the picture image signal of the picture element to be corrected and the picture image signal of a picture element one element before the picture element to be corrected at each picture element of the picture image signal. Fig. 6 shows one example of such correction circuit. The circuit shown in Fig. 6 comprises an analog digital A D converter 10 which sequentially quantizes an analog picture image signal AS obtained by scanning a manuscript with a reading out unit at each picture element in accordance with a picture image clock CK thereby converting the quantized signals into a digital signal, a latch circuit 11 sequentially latching the digital picture image signal ADS output from the A D converter 10 in accordance with the picture image clock CK, and a ROM 12 receiving the digital picture image signal ADS directly supplied from the A D converter 10 and the digital image signal ADL supplied via the latch circuit 11 the signal ADL corresponds to the digital picture image signal ADS of a picture element one element before the picture element corresponding to the digital picture image signal ADS supplied directly from the A D converter 10 , the signals ADS and ADL acting as address information, thereby producing a corrected digital picture image signal OS corresponding to the address information. The ROM 12 executes the following calculation actually the result of the calculation is written as a table corresponding to the address information In the conventional level correction circuit as shown in Fig. 6 where the difference in levels between the picture image signals of adjacent picture elements and the picture image signal of the picture element to be corrected is small, little correction would be made, whereby a picture image whose picture image signal level varies slowly, that is, a picture image of unclear contrast cannot be corrected efficiently. As above described, the invention contemplates the provision of an improved binarizing system of picture image signals capable of preventing loss of the picture image and efficiently correcting even such a picture image whose picture image level varies slowly. Preferred embodiments of this invention will now be described, by way of example only. A first embodiment of the binarizing circuit of this invention shown in Fig. 8 comprises an A D converter 20 quantizing an input analog picture image signal AS and then converting the quantized signal into a digital signal, a plurality only 3 are shown in the drawing of latch circuits 21, 22, 23, which latch the digital picture image signal ADS output from the A D converter 20 while serially shifting the signal ADS by one picture element in accordance with a picture element clock, and first and second ROMs 241 and 251 acting as calculating means. The first ROM 241 is connected to receive multivalue picture image signals ADL₁, ADL₂ and ADL₃ respectively latched by the latch circuits 21, 22, 23 as address information. In the ROM 241, signals C₁ and C₂ whose levels become a maximum respectively toward the black level and the white level among digital picture image signals ADL₁, ADL₂ and ADL₃ are prestored in a region designated by the address information in the form of a data table. Among the signals, signals corresponding to the received address information are read out. The second ROM 251 receives the signals C₁ and C₂ read out from the first ROM 241 and the digital picture image signal ADS output from the A D converter 20 as address information to read out signals corresponding to the received address information among the corrected digital picture image signals OS which are prestored in the form of a data table. The corrected digital picture image signals OS are determined by the following equations 1 , 2 , 3 . More particularly, as above described, where the values of the levels of respective picture image signals are large, the level approaches the black level, while where the level values are small, the level approaches the white level. Suppose now that the signal C₁ has a maximum value toward the black level hereinafter this signal is termed a maximum value signal and that the signal C₂ has a maximum value toward the white, that is, it has a minimum signal level hereinafter termed a minimum value signal , then when the picture image signal ADS, the maximum, signal C₁ and the minimum value signal C₂ have the relation is executed so as to emphasize toward the black direction whereas when the relation is is executed so as to maintain the level. Further, when is executed so as to emphasize toward the white level. In the case of The following Table I shows one example of the corrected digital picture image signals OC calculated by these equations. Such data table as shown in Table I is prestored in the ROM 251, where the threshold value CO satisfies the following inequality For the purpose of preparing the Table I, it is assumed that the levels of signals ADS, C₁ and C₂ vary between 0 and 5. Actually, however, the Table is prepared by using a wider range of levels. Even when the range of the levels is widened, the levels of the corrected picture image signals OS can be set in the same manner as in Table I. The corrected picture image signals OS read out from the second ROM 251 are applied to the binarizing circuit, not shown, of the second stage. With the circuit construction shown in Fig. 8, the analog picture image signal AS sent from the read unit, not shown, is converted into, for example, a 4 bit digital picture image signal by A D converter 20 at each picture element. Then, the signal ADS is sequentially input into three latch circuits 21, 22 and 23 at each picture element. The outputs of these latch circuits, that is, digital picture image signals ADL1, ADL2 and ADL3 of adjacent three picture elements are supplied to the first ROM 241 to act as address information so that the first ROM 241 outputs the maximum value signal C₁ and the minimum value signal C₂ whose level becomes a maximum toward the white level and black level respectively among the multivalue picture image signals ADL1, ADL2 and ADL3. These maximum value signal C₁ and the minimum value signal C₂ are supplied to the second ROM 251 together with the digital picture image signal ADS output from the A D converter 20 to act as the address information Consequently, the second ROM 251 outputs a corrected digital picture image signal OS applied with a weight corresponding to the levels of the maximum value signal C₁ and the minimum value signal C₂. More particularly, by the second ROM 251, the digital picture image signal ADS of the picture element to be corrected is corrected according to the level of the digital picture image signal of three picture elements positioned immediately before. For example, where a picture image signal of a white point in a black line when a multiplicity of these white points are continuously placed in the direction of the auxiliary scanning, a vertical fine white line in a black picture image is obtained is obtained as shown in Fig. 9a, the white point is corrected as follows. For example, where the level of the digital picture image signal of the white point is 5 and where the levels of the maximum value signal C₁ and the minimum value signal C₂ which are selected by ROM 241 among the digital picture image signals of three picture elements at positions immediately before are both 8, since at this time ADS C₁, C₂, the value calculated with equation 3 , that is, When a picture element to be corrected is a white picture element among continuous black picture elements as shown in Fig. 9a, the level can be corrected efficiently as above described. However, as shown in Fig. 5, in a case wherein although a picture element to be corrected is a black picture element, the level of its picture image is lower than that of the picture image signal of a certain number of black picture elements which immediately precede it when the black picture element is read by a read unit and then quantized, the signal would be over corrected when equation 3 is applied so that the signal level would be emphasized toward the white level irrespective of the fact that the picture element to be corrected is a black picture element. As a result, when the picture image signal is binarized, it would be misjudged as a white picture element. However, according to this embodiment, since the above described correction is made for each picture element unit of a quantized picture image signal, even when a phenomenon corresponding to a loss of a picture image occurs in one picture element, the next and following picture elements can be corrected normally so that there is no problem in practical use. Usually, the size of these picture elements is set to about 12 bits mm so that even if one of the picture elements is lost, no change will be perceived visually. In a case of a picture image signal whose level varies slowly as shown in Fig. 9b, the following correction is made. Suppose now that a picture element having the maximum value of the image signal is the picture element to be corrected, that the level of the picture image signal ADS is 8, that the level of the maximum value signal C₁ selected by the ROM 241 among the digital picture image signals of three picture elements immediately preceding the picture element having the maximum value is 7, and that the level of the minimum value signal C₂ is 5. Then, in this case, since With the conventional correction circuit shown in Fig. 6, the level 8 of the picture image signal of the picture element to be corrected of a picture image whose signal level varies slowly is corrected to at most about 9. As above described, according to this embodiment, it is possible not only to effectively prevent loss of the picture image but also to apply a sufficiently large weight to a picture image signal whose signal level varies slowly so as to make clear the contrast. Fig. 10 shows a level correction circuit incorporating another embodiment of the binarizing system embodying the invention in which elements corresponding to those shown in Fig. 8 are designated by the same reference characters. This embodiment is different from the previous embodiment in that the first ROM 242 selects only an output whose signal level changes towards the white level among the outputs from respective latch circuits and that the second ROM 252 addressed by the selected signal and the picture image signal of a picture element to be corrected and output from the A D converter 20 is written with a corrected digital picture image signal which is calculated by The following Table II shows an example of a table of the corrected picture image signals OS calculated by these equations. With this construction, only the white component in the black picture image is corrected and this is sufficient for practical use. Moreover, according to this modification, the capacity and cost of the second ROM 252 can be reduced. Fig. 11 illustrates still another embodiment of this invention. Although in the previous embodiments continuous picture elements immediately before a picture element to be corrected are utilized as reference picture elements and their picture image signals are applied to the first ROM 241 or the second ROM 242, according to the embodiment shown in Fig. 11, latch circuits 31, 32 and 33 are added and a picture element on the same main scanning line as a picture element to be corrected at a position before the same is discontinuously taken in as a reference picture element. Especially, in the embodiment shown in Fig. 11, alternate picture elements before the picture element to be corrected are utilized as the reference picture elements and their picture image signals are latched in the latch circuits 21, 22 and 23, respectively. Among the picture image signals ADL₁, ADL₂ and ADL₃ of the alternate picture elements thus latched, a signal C₁, the level thereof becoming a maximum, and a signal C₂, the level thereof becoming a minimum, are selected by the first ROM 241. Of course, the embodiment shown in Fig. 11 can be applied to that shown in Fig. 10 so as to select the signal C₁ whose level becomes a minimum. Even with such modification, the same advantageous effects as the foregoing embodiments can be realized. It should be understood that the invention is not limited to the specific embodiments described above. For example, the number of picture element signals of the picture image applied to the first ROM may be four or more instead of 3. Furthermore, a shift register can be substituted for the latch circuits for temporarily storing signals. Other calculating means and methods may be used. In particular, with respect to the first and second ROMs, they may be replaced with a single ROM or any other means as long as it is capable of executing a first calculation for selecting at least one of the extracted picture image signals whose levels is a maximum or a minimum and a second calculation for effecting a level correction on the picture image signal of the picture element to be corrected for emphasizing nature of tone of said picture image in the manuscript based on the level of said selected picture image signal or signals and the level of the picture image signal of said picture element to be corrected.