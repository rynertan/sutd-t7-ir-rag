# AUTOMATIC GAIN CONTROL CIRCUIT FOR BURST SIGNAL COMMUNICATION SYSTEM

## Claims
Automatische Verstärkungsregelungsschaltung AGC für ein Burstsignalübertragungssystem mit einer AGC Verstärkereinrichtung 1 zum Empfangen eines Bursteingangs i und um einen Burstausgang p zur Verfügung zu stellen, dessen Pegel entsprechend einem Regelsignal n geregelt wird, und mit einer negativen Rückkopplungsschaltungseinrichtung 2, 5 bis 7 2, 8, 5 bis 7 zum Empfangen des Burstausgangs p und um das Regelsignal n zur Verfügung zu stellen, wobei die negative Rückkopplungsschaltung aufweist einen Envelope Detektor 2 , um die Envelope des Burstausgangs p festzustellen und ein erstes Signal v zu erzeugen, einen Konverter 5 , um das erste Signal v in ein binäres Signal durch Vergleichen mit einer Referenzspannung V

## Description
The present invention relates to an automatic gain control AGC circuit for use in the transmission and reception of burst signals in a time division multiple access TDMA system or the like. One of the systems used in satellite communication and the like is known as the burst communication system, in which a transmitting action is performed only when information is to be conveyed. This burst communication system has the advantages that the power consumption can be reduced and that the same satellite and the same frequency band can be used for communication between multiple transmitting and receiving stations. An AGC amplifier is used, in a transmitter for the burst communication system, for keeping constant the variation of transmitting power which is caused by temperature fluctuation or switching of the transmission path. In a receiver, an AGC amplifier is used for keeping constant the variation of the reception input power and thereby stabilizing the demodulating action. It is customary in such an AGC circuit for burst signals to achieve AGC by the use of a charging discharging or time constant circuit having a peak holding function as the negative feedback biasing circuit of the AGC amplifier. However, a conventional AGC circuit for burst signals, as will be described in detail below, has the disadvantage that a change in burst time would invite a variation in the output power of the AGC circuit, so that it could not achieve its intended purpose to keep the output power constant. As a result, if the circuit is used in a transmitter, the transmitting power may vary or, if it is used in a receiver, the input to the demodulator circuit may vary to adversely affect its receiving function. US A 4,313,089 describes an AGC circuit with a negative feedback circuit having an envelope detector for the output signal, a signal converter with digital output and a digitally controllable amplifier. GB A 1,342,383 describes a similar AGC circuit with a logic circuit between the comparator and the amplifier. An object of the present invention, therefore, is to provide an AGC circuit for burst signals, whose output power will not vary regardless of variation in the burst time. According to the invention, there is provided an automatic gain control AGC circuit for a burst signal communication system, comprising an AGC amplifier means for receiving a burst input and providing a burst output whose level is controlled in response to a control signal, and a negative feedback circuit means for receiving the burst output and providing the control signal, wherein the negative feedback circuit means comprises an envelope detector means for envelope detecting the burst output and providing a first signal, converting means for converting the first signal into a binary signal by comparing it with a reference voltage, pulse generator means for providing a pulse signal of a predeterminal pulse width in response to the binary signal, and AGC amplifier driving circuit means for digitally processing the pulse signal, thereby providing the control signal. Other features and advantages of the invention will be more apparent from the detailed description hereunder taken in conjunction with the accompanying drawings, wherein FIG. 1 is a block diagram illustrating the structure of a prior art AGC circuit for burst signals. In FIG. 1, the AGC circuit comprises a variable amplifier or an AGC amplifier 1, an envelope detector 2, a peak holding circuit 3 and a D.C. amplifier 4. The peak holding circuit 3 comprises a peak holding capacitor C1, a peak holding diode X₁ and resistors R₁ and R₂. The diode X₁, upon arrival of a burst signal, drops in resistance and makes possible electric charging but, in the absence of a burst signal, rises in resistance to keep the electric charge. The resistor R₁ determines the charging time, and the high resistor R₂ determines the discharging time. The D.C. amplifier 4 is high both in gain and in input impedance to prevent the electric charge of the capacitor C₁ from being discharged. In the peak holding circuit 3, the charging time τ a is determined by τ a R₁C₁, and the discharging time τb, by τb R₂C₁. The operation of the circuit will be described next. A burst signal i is applied through a modulator and frequency converter not shown , for example, to the variable amplifier 1 which amplifies the burst signal i in response to a control voltage n and provides a burst output signal p. The envelope detector 2 envelope detects the signal p and provides a detecting voltage v, which is peak held by charging the capacitor C₁ through the diode X₁. The detecting voltage v thereby peak held, after being amplified by the D.C. amplifier 4, becomes the control voltage n, which keeps constant the level of the burst output signal p of the variable amplifier 1. Thus, the AGC circuit includes a negative feedback circuit consisting of the detector 2, the circuit 3 and the amplifier 4. The characteristics of AGC circuit are determined by the control voltage amplification relationship of the variable amplifier 1, the detecting sensitivity of the envelope detector 2, the amplification gain of the D.C. amplifier 4 and other pertinent characteristics. Also, in determining the charging time τa and the discharging time τb in the peak holding circuit 3, the frame cycle τf and burst time τ of the burst signal i are taken into account. It is more desirable for τa to be smaller to make the AGC circuit quicker in response, and τb should preferably be greater to stabilize the peak holding performance. To give a typical set of parameters, if τf 750 µs, τ 1 µs, τa τx 10 10 µs and τb τf x 100 75 ms, then C₁ 0.1 µF, R₁ 100Ω and R₂ 750 KΩ. According to this example, the charging will be substantially completed when some 10 burst signals 10 frames have arrived. If no burst signals corresponding to 100 frame times have arrived, it will mean that the electric charge of the capacitor C₁ is discharged. Whereas the burst time varies in a TDMA communications system because the quantity of information is variable with the demand of the communicating stations, the charging and discharging responses will also change with these variations. FIGS. 2A to 2C are diagrams specifically depicting the operation of the AGC circuit described above and show three different examples of burst time, wherein solid lines represent the detection output of the envelope detector 2, i.e. the input voltage v to the peak holding diode X₁ and broken lines, the time response of the voltage v₀ resulting from the charging of the capacitor C₁ with said detection output v. These FIGS. 2A to 2C illustrate the states in which the voltage charged upon arrival of a burst is discharged through the resistor R₂ in the absence of a burst, and the charge and the discharge are equivalent and stably in an equilibrium. In FIG. 2A, τf τ1 10 in FIG. 2B, τf τ2 5 and in FIG. 2C, τf τ3 1.67 τ1 through τ3 are burst times and τf is the frame time . Although the τf τ ratios in FIGS. 2A to 2C are taken smaller than they really are with a view to simplifying the explanation, they have to be greater in an actual circuit τf τ1 1000 for FIG. 2A, τf τ2 100 for FIG. 2B, and τf τ3 10 for FIG. 2C. As the positions of the broken lines in FIGS. 2A to 2C indicate, the AGC circuit so operates through its negative feedback circuit that, even if the length of the arriving burst τ τ₁, τ₂ or τ₃ varies, the voltage v₀ kept in the capacitor C₁ remain substantially the same. Therefore, because there is required such a charge as will compensate for the electric potential e₀ discharged by the discharging resistor R₂ within the burst time even if the time becomes shorter, the three voltage values V₃, V₂ and V₁ manifested by the amplified detecting voltage v for charging will increase in this order as the burst time successively shortens from τ₃ to τ₁ and, if the value of voltage retained by the capacitor C₁ is V₀, the voltage V₃ V₀ , V₂ V₀ and V₁ V₀ working on the diode X₁ and the two ends of the resistor R₁ will also increase in this order, with the result that the charging current grows and the potential e₀ is compensated for so that sufficient charging can be achieved even if the charging time is short. However, the variation in the envelope detection voltage V V₁, V₂, V₃ shows said variation in the input power to the envelope detector 2, i.e. the burst output signal p. Therefore, as stated earlier, a change in burst time in this prior art AGC circuit for burst signals would entail a variation in the output power of the AGC circuit. This is inconsistent with the intended purpose of the AGC circuit to keep its output power constant and, if for instance this circuit is used in a transmitter, will invite a variation in transmitted power. Or, if it is applied to a receiver, the input to the decoder circuit will vary and consequently the receiving function will be adversely affected. To obviating disadvantage of the prior art AGC circuit, the present invention provides an improved AGC circuit, as shown in FIG. 3, wherein components bearing the same symbols are identically structured with the corresponding components in FIG. 1. Thus, reference numeral 1 represents a variable amplifier, and 2, an envelope detector. In addition, 5 represents a signal converter for converting a signal envelope detected by the envelope detector 2 into a binary signal by comparing the former with a presecribed threshold level V Next, the operation of the circuit illustrated in FIG. 3 will be described. The voltage comparing amplifier 51 compares the output voltage v of the detector 2 and the reference voltage V FIG. 4 illustrates a specific embodiment of the one shot trigger circuit 6 shown in FIG. 3. In FIG. 4, 61 is a monostable multivibrator R₃, a resistor and C₂, a capacitor. In this embodiment is used as monostable multivibrator 61 a µPB 74LS123D unit manufactured by NEC Corporation or an SN74LS123 unit manufactured by Texas Instruments Inc. Terminals 1 and 8 of the monostable multivibrator 61 are grounded a voltage v is supplied to its terminal FIGS. 5A, 5B, 5C and 5C consist of waveform diagrams for describing the operations of the signal converter 5 and the one shot trigger circuit 6. In FIG. 5A, which shows the output waveform v of the detector 2, τf represents the repetition time of the burst and τ₁₁, the burst signal time. FIG. 5B shows the output waveform of the signal converter 5, the output signal being at a high level H if the voltage v of FIG. 5A is higher than the reference voltage V FIG. 5C shows the output waveform of the one shot trigger circuit 6 achieved when the burst signal time or pulse width τ₁₂ is selected to be shorter than the burst repetition time, or the frame time τ Thus the use of the one shot trigger circuit 6 shown in FIG. 4 makes it possible to keep its output at the high level H if signals of very short burst durations, whose voltage is higher than the reference voltage V FIG. 6 illustrates a specific embodiment of the reversible counter 72 shown in FIG. 3, consisting of an up down counter 72a and gate circuits 72b to 72d for driving the up down counter 72a. The gate circuits 72b to 72d determine whether the output of the oscillator 71 having a clock frequency of fc shall be fed directly or as a D.C. voltage of the high level H to the input terminal 4 or 5 of the up down counter 72a for instance, µPB74LS193C manufacturec by NEC Corporation or SN74LS196C manufactured by Texas Instruments Inc. Depending on which terminal, 4 or 5 , receives the output of the oscillator 71, the up down counter 72a will count either up or down. By connecting the output terminals 2 , 3 , 6 and 7 to the D A converter 73, a digital signal outputted from the reversible counter 72 is converted by the D A converter 73 into an analog signal n, which is supplied to the variable amplifier 1. FIGs. 7A a to 7A c are waveform diagrams for describing the operation of the circuit illustrated in FIG. 3. FIG. 7A a shows the output waveform of the envelope detector 2 FIG. 7A b , that of the one shot trigger circuit 6, and FIG. 7A c , that of the variable amplifier driving circuit 7. The figures show the initial states of the circuit, wherein the power of the output p of the AGC circuit for burst signals, illustrated in FIG. 3, is too great. In FIGS. 7A a to 7A b , section i is where the output p is gradually decreasing section ii , where the output p is gradually increasing, and section iii , where the output p is repeating alternate increases and decreases resulting in a stable output level. The gain of the variable amplifier 1 decreases with a rise in the voltage level of the control signal analog signal n supplied from the variable amplifier driving circuit 7, and vice versa. Referring now to FIG. 7A a , the output voltage v of the envelope detector 2 is higher than the reference voltage V In the variable amplifier driving circuit 7, the clock frequency fc of the oscillator circuit 71 and the number of bits N of the D A converter 73 can be varied in many ways depending on the requirement on the AGC circuit. Thus, if stability section iii in FIG. 7A a to 7A c has to be quickly achieved i.e. the combined duration of sections i and ii has to be shortened , the clock frequency fc can be set higher or, if the range of fluctuation in the stable state has to be narrowed, the number of bits N of the D A converter 73 can be increased. Therefore, as a variation of the embodiment illustrated in FIG. 3, there can be proposed a version whose oscillator circuit has two different clock frequencies, the higher one being selected when the output p of the AGC circuit for burst signals substantially deviates from its prescribed level, to be followed by a switch over to the lower one when the stable state has been achieved. The foregoing will be explained in further detail with reference to FIGS. 7B a to 7D c . FIGS. 7B a to 7B c illustrate instances in which the number of bits of the D A converter 73 is N like in FIGS. 7A a to 7A c and the clock frequency is 2fc, provided that the range of control voltage levels of the control signal n being represented by V FIGS. 7C a to C c illustrate instances in which the clock frequency is fc like in the case of FIGS. 7A a to 7 c and the number of bits of the D A converter 73 is N 1. It is seen that the range of fluctuation in the stable state is narrower than in the case of FIG. 7A. FIGS. 7D a to 7D c illustrates instances in which the oscillating circuit has two different clock frequencies, fc and 4fc, and the number of bits of the D A converter 73 is N 1. The figures clearly show that stability can be more quickly achieved and the range of fluctuation in the stable state is narrower. As hitherto described, there can be realized an AGC circuit for burst signals with little output fluctuation by structing a negative feedback circuit out of the envelope detector 2, the signal converter 5, the one shot trigger circuit 6 and the variable amplifier driving circuit 7, and digitally processing the burst output of the envelope detector 2. Since the one shot trigger circuit 6 illustrated in FIG. 3 stably operates for very short burst signals even of 50 nsec each, it is possible to insert, as shown in FIG. 8, a low pass filter LPF for improving the signal to noise S N ratio between the envelope detector 2 and the signal converter 5 as illustrated in FIG. 3. In FIGS. 9A and 9B, consisting of waveform diagrams for describing the operation of the circuit illustrated in FIG. 8, FIG. 9A shows the output waveform of the envelope detector 22 and FIG. 9B that of the LPF 8, the parts marked with oblique lines in both representing the thermal noise power component. As the figure indicates, the insertion of the LPF 8 serves to decrease the thermal noise power, but the rise of the detection voltage for burst signals is correspondingly delayed. In the circuit of prior art illustrated in FIG. 1, it is impossible to restrict the band and thereby improve the S N ratio to its required level. In contrast, in the circuit according to the present invention illustrated in FIG. 8, the passing band of the LPF 8 can be sufficiently narrowed to reduce the time τ ₁₁, during which the waveform having passed the LPF 8 manifests the maximum value V It is assumed here that the present AGC circuit for burst signals is used in, for example, a receiver equipment for a satellite communications system. If the circuit is a conventional one as shown in FIG. 1, the peak will be held at a power value which is the sum of the power of signals received and that of thermal noise, or in other words the envelope detected output in which the noise power has increased as a consequence of the state of the signal propagation path varied by rainfall and or attenuation is peak held as it is, the signal power component will equivalently decrease. In contrast, in the circuit according to the present invention illustrated in FIG. 8, the thermal noise power is reduced by the LPF 8, so that negative feedback is achieved to the original signal power involving little noise and the variation of the signal power component can be kept extremely small. Although, in the circuit of FIG. 8, the LPF 8 is inserted on the output side of the envelope detector 2 of the circuit illustrated in FIG. 3, the same effect as that of the circuit of FIG. 8 can obviously be achieved by inserting a band pass filter on the input side of the envelope detector 2 of the circuit shown in FIG. 3. As hitherto described, the present invention can provide for burst communications systems an AGC circuit whose output power variation is extremely small even if the burst time varies. Further since the invention permits the AGC circuit to operate free of trouble even if the burst time is very short and accordingly a filter can be inserted into the received burst detecting circuit to reduce noise, there can be realized an AGC circuit for signal reception whose received signal component will vary extremely little even if the received noise power fluctuates.