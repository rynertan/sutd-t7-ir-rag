# RING TRIP DETECTION SYSTEM

## Claims
Rufabschalterkennungssystem zum Feststellen eines Rufabschaltzustandes, wenn ein Telefonger√§t mit einem Wecker an den Rufsignale angelegt werden, abgenommen wird, wobei das System folgendes aufweist

## Description
The present invention relates to telephony, and particularly to a ring trip detection system which controls the application of ringing signals to the ringers of telephone sets, causing the disconnection of the ringing signals when the telephone set to which ringing is applied goes off hook. A ring trip detection system provided by the invention is especially adapted for use in the ground loop start line interface of a telephone system where a telephone set or sets is connected to a line circuit via the ring and tip leads of the loop. Every automatic telephone system has a ring trip detection circuit which causes the ringing signal generator to be disconnected from the telephone set when the set goes off hook. There are circuits which respond to the change in duty cycle of the ringing current which use a differential relay. The relay makes and breaks contacts over different intervals when the telephone set is on hook during ringing and when it goes off hook. A problem in ring trip detection which is prevalent with known circuits is that they are application dependent in that they are designed for a specific application, such as where a specific ringing frequency or specific voltage levels are used. Ringing frequencies may range from fifteen to seventy Hertz Hz . In party line systems several ringing frequencies may be used, each for a different party on the line. Filters have been used to accommodate different ringing frequencies and some frequency variation. The use of such filters makes the ring trip detection circuit in which the filters are included application dependent. Further disadvantage may arise in that the filters increase the time required for a ring trip to be detected. In practical telephone systems the voltages which are applied to the loop e.g., the battery feed voltage may vary at the point where such voltages are tapped for ring trip detection purposes. The voltages vary with the length of the loop, the number of telephone sets in the loop as well as with environmental effects. Both the battery feed and the ringing signal voltages thus may vary in different applications. These voltages also vary with transients which may be picked up on the loop. In prior ring trip detection systems which depend on the change in duty cycle of the ringing signal, such voltage variations, especially when variable with the loop length and telephone sets connected in the loop load dependence may result in erroneous ring trip detection. Erroneous ring trip detection may also be caused by leakage resistance between the tip and ring leads. In some prior art systems the problem is exacerbated by the use of voltages for ring trip detection purposes tapped from the return path tip lead , after voltage drop in the loop has occurred. The above mentioned ring trip system also could not be used in certain party line applications using ground connected ringers which would bypass the detection means. Changes in ringing frequency may also cause erroneous ring trips. EP A 0 034 339 discloses a ring trip detection system for detecting a ring trip condition when a telephone set having a ringer to which ringing signals are applied, goes off hook. Said system uses means responsive to the ringing signals for generating output signals having a certain duty cycle. The duty cycle of said output signals is indicative of the hook condition. However, said output signals are generated with respect to ground as a reference, and thus, the duty cycles of said output signals will always be smaller 50 . As is explained below, the use of output signals having either larger 50 or smaller 50 duty cycles allows for a simplification of the necessary ciruit arrangement. This is not so for the EP A 0 034 339 system which has to measure the output signals with respect to duration and frequency to determine the hook condition based on said output signals. Thus, more circuit components are required for carrying out said measurement. It is a feature of the present invention to provide an improved ring trip detection system which is adapted for use in many telephone systems and is not application dependent. The detection system provided by the invention has a further feature of being responsive to ring trip conditions regardless of the frequency of the ringing signal, whether the ringing signal be 15 Hz, 70 Hz or inbetween these frequencies. Another feature of the invention is to provide reoperation of the ringing relay to reconnect the ringing signal to the telephone sets even if a ring trip is detected should there not be a true off hook condition. In the event of a ringing circuit failure, the ringing generator may short to ground a ring short condition . It is a feature of the ring trip detection system provided by the invention to disconnect the ringing generator from ground, if a ring short condition occurs thus reducing the possibility of permanent damage to an expensive telephone system component. In a ring trip detection system provided by the invention, the ringing supply ring lead is tapped for sensing voltages for ring trip detection purposes, rather than the return path tip lead where the voltage sensed may be load dependent. It is the object of the present invention to provide an improved ring trip detection system in which the aforementioned deficiencies of prior ring trip detection techniques are substantially obviated and the features stated above are obtained. Briefly described, a ring trip detection system embodying the invention comprises the features set forth in claim 1 or 11. Preferred embodiments are disclosed in the dependant claims. The duty cycle of the output signal is the ratio of the duration of the signal when it is of one polarity with respect to the reference voltage level to the period of an entire cycle of the signal. A 50 duty cycle thus defines a signal having portions of equal duration during a cycle above and below the reference level. Preferably, a system embodying the invention utilizes a comparator to which the ringing signal which is superimposed on battery feed voltage is applied to one input and a reference voltage to the other input. Inasmuch as the battery feed voltage is attenuated upon occurrence of an off hook condition, the duty cycle of the ringing signal with respect to the reference voltage is always equal to or less than 50 when the telephone set is on hook there being no drops in voltage due to the resistance of the receiver and transmitter of the telephone set . When the telephone set goes off hook the drops shift the d.c. voltage level of the ringing signal, and therefore the duty cycle of the ringing signal with respect to the reference voltage is always greater than 50 . The output of the comparator has a duty cycle corresponding to the duty cycle of the ringing signal with respect to the reference voltage and may be used to control up and down counting in the counter. By resetting the counter at the beginning of each cycle of the ringing signal, an underflow condition must occur when the duty cycle is equal to or less than 50 , but cannot occur if the duty cycle is greater than 50 . Means responsive to the absence of the underflow state of the counter provides the ring trip detection output. This output may be used to control the connection of the ring generator to the telephone set ringers, for example, by deactuation of a ringing relay. The foregoing and other objects, features and advantages of the invention as well as a presently preferred embodiment thereof, will become more apparent from a reading of the following description in connection with the accompanying drawings in which FIG. 1 is a schematic diagram of the portion of the ring trip detection system provided in accordance with a presently preferred embodiment of the invention which senses the duty cycle of the ringing signal with respect to a fixed reference voltage and provides an output corresponding thereto FIG. 2 is a block diagram illustrating the portion of the system which responds to the output provided by the system portion illustrated in FIG. 1 and detects ring trip conditions to enable disconnection of a ringing generator from the loop FIG. 3 is a wave form diagram which is explanatory of the operation of the portion of the system shown in FIG. 1 and FIG. 4 is a wave form diagram explanatory of the portion of the system shown in FIG. 2. Referring to FIGS. 1 and 3 there is shown a line circuit 10 with its ground loop start line interface to a telephone set TS having a receiver and transmitter 12 and a ringer RNG 14. A hook switch 16 is shown open in the on hook condition of the telephone set. The ringer is connected with the telephone set and its hook switch through a capacitor 18 across the ring ringing supply and tip return leads of the loop. Battery feed voltage 48 volts is applied to the ring lead via the line circuit 10. A ringing generator 20 is connected to the ring lead by way of a resistor 21. C form contacts RR 1 and RR 2 connect the ringing generator 20 and ground GND to the ring and tip leads, respectively. These contacts also connect the ring and tip leads to the line circuit. The contacts to the line circuit 10 are normally made or closed when the ringing relay is not actuated. When the ringing relay is actuated, the normally open or broken leads connect the ringing generator 20 and ground to the ring and tip loads. The winding of the ringing relay RR WDG 22 is operated depending upon ring trip detection by the portion of the system shown in FIG. 2. The line circuit includes a calling bridge which provides an output CB to the switching logic of the telephone system in the presence of direct current flow through the loop, as occurs when the telephone set 12 is off hook, when the normally closed contacts of the ringing relay connect the tip and ring leads to the line circuit. This calling bridge output is also used to prevent reoperation of the ringing relay in the event that a ring trip is detected, unless the telephone set 12 is on hook. The voltage across the resistor 21 with the telephone set 12 on hook is shown in FIG. 3, wave form a . The ringing signal is essentially sinusoidal with its base line at the battery feed voltage, 48 volts. When the telephone set 12 goes off hook the drop in the voltage across the resistance 21 presented by the transmitter and receiver to the direct current there through, which does not pass through the ringer circuit due to the capacitors 18, increases closer to ground . Depending upon the loop resistance, which may vary, for example, from 100 to 2400 OHMS, the base line of the ringing signal, which is also attenuated due to the load, may, for example, drop from 48 to 24 volts, as shown in wave form b of FIG. 3. This ringing signal is applied via resistors 24 and 26 to an input of a comparator 28. A zoner diode 30 is connected in parallel with the ringing generator and biased at the battery feed voltage 48 volts . Suitably the breakdown voltage of this zener diode is 27 volts so as to protect the input circuits of the comparator 28. In effect, the zener diode 30 clamps the ringing signal within a 27 volt range as indicated by the dash horizontal lines 32 and 34 in wave forms a and b of FIG. 3. The comparator responds to the crossings of the ringing signal at the reference voltage level V The reference voltage is derived from the 48 volt supply by a voltage divider network including three resistors 36, 38 and 40 connected between 48 volts and ground. A source follower field effect transistor 42, connected between the junction of the divider resistors 38 and 40 and to ground via another resistor 41, provides operating voltage for the comparator from the 48 volts supply. The reference voltage and the supply voltage to the comparator thus vary with supply voltage and compensate for supply voltage variations. The output of the comparator 28 is coupled through an optical coupler 44 to provide the ring detect RD output. The current flows through the light emitting diode of the optical coupler when the comparator output is low, and the RD output is taken across the collector resistor of the phototransistor in the optical coupler. Accordingly, the RD output is a square wave form having the duty cycle of the ringing signal with respect to the reference voltage. The RD wave form is shown in FIG. 4. It will be noted that the reference voltage is closer to ground than the battery feed voltage as shown in wave forms a and b of FIG. 3. When the ringing signal crosses the reference voltage base line in a positive direction, the comparator output voltage goes high. Conversely, upon crossing the reference voltage base line in the negative direction, the comparator output goes low. Inasmuch as the battery feed voltage as detected across the resistor 21 drops when the telephone set 12 goes off hook the hook switch 16 then closing , the duty cycle of the ringing signal with respect to the reference voltage level is equal to or less than 50 during on hook conditions and must be greater than 50 when the telephone set goes off hook. The ring detect wave form for less than 50 duty cycle in the on hook case shown in wave form a of FIG. 3 is illustrated in wave form c of FIG. 3, while the greater than 50 duty cycle for the off hook case shown in wave form b is illustrated in wave form d of FIG. 3. It will be noted that the sensing circuit provided by the comparator is connected directly to the ring lead so that it is not adversely affected by different loadings due to different loop lengths. The reference voltage is selected considering any effects caused by leakage resistance across the loop. Accordingly, it should be as close to battery feed voltage as practicable to detect the duty cycle variations. The resistors 36, 38 and 40 in the reference voltage supply circuit are also desirably precision resistors. Referring more particularly to FIGS. 2 and 4, there is shown a clock generator 46 which may be an oscillator providing a train of pulses CG . In a system suitable for ring trip detection, with ringing signals from 15 Hz to 70 Hz, the CG pulses may be at a 14 KHz rate. These pulses are divided by two in a flip flop 48 to provide complementary clock pulse trains CLK and The duty cycle of the ringing signal with respect to the reference as represented by the RD output causes the counter 52 to overflow in the negative direction if the duty cycle is equal to or less than 50 . Then the ripple carry The delayed CO output is indicated at HO. This output is stored in a ring trip latch flip flop 58 which is also a D flip flop. This flip flop is clocked by an AND Gate 60, illustrated as a negative logic OR gate to denote its function. On the occurrence of the positive going edges of the U In the event that the telephone set 12 has remained on hook the calling bridge output from the line circuit 10 FIG. 1 , indicated as Should the count overflow in the positive direction for any reason, such as a ring short to ground, a net positive count will occur. This positive count will be clocked into the ring trip latch 58 by the high edge of From the foregoing description it will be apparent that there has been provided an improved ring trip detection system. A preferred embodiment of the system has been described herein to illustrate the invention. Variations and modifications in the herein described embodiment, within the scope of the invention, will undoubtedly suggest themselves to those skilled in the art. Accordingly, the foregoing description should be taken as illustrative and not in a limiting sense.