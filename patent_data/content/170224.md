# DIGITAL TO ANALOG CONVERTER

## Claims
Digital Analog Wandler zum Umwandeln von binären Codes in Analogspannungen, wobei jeder der Binärcodes eine vorbestimmte Anzahl von Datenbits enthält, mit

## Description
A D A converter comprising two capacitor arrays consisting of capacitors with weighted by a factor of two, and shift switches for coupling each of the capacitors selectively to one of two reference voltages, one of the capacitors of one array and one of the capacitors of the other array being paired to correspond to one data bit in each input binary code, a balanced operational amplifier having two complementary inputs and two complementary outputs respectively associated with the inputs, a feedback capacitor connected between each of the inputs and each of the outputs of the operational amplifier, polarity switches having a state providing connection from one array to the one input and from the other array to the the other input of the operational amplifier and a state providing connection from the one array to the other input and from the other capacitor array to the one input of the operational amplifier, and a control circuit to detect the polarity of the voltage into which each input binary code is to be con verted. The control circuit is operative to control the shift switches to shift each of the capacitors between the two reference voltages depending on the status of the data bit corresponding to the paired capacitors and to shift the polarity switches between the two states thereof depending on the detected polarity. The present invention relates to digital to analog converters and, more particularly, to a digital to analog converter of the weighted capacitance, voltage output type. As will be understood as the description proceeds, a digital to analog converter according to the present invention is particularly adapted for use on an LSI or VLSI system. A D A converter circuit according to the present invention is characterized, In accordance with the present invention, there is provided a digital to analog converter for converting binary codes into analog voltages, each of the binary codes including a predetermined number of data bits comprising 1 first and second capacitor arrays of a predetermined number of capacitors having respective capacitances weighted to progressively vary by a number of a predetermined number from one to another, and selective coupling means for coupling each of the capacitors selectively to a source of a predetermined first reference voltage and a source of a predetermined second reference voltage, one of the capacitors of the first capacitor array and one of the capacitors of the second capacitor array being paired to correspond to one of the data bits in each of the binary codes, 2 a balanced operational amplifier having complementary first and second input terminals and complementary first and second output terminals, 3 a parallel combination of a first feedback capacitor and a first reset switch connected between the first input and output terminals of the operational amplifier, 4 a parallel combination of a second feedback capacitor and a second reset switch connected between the second input and output terminals of the operational amplifier, 5 polarity switch means having a first state providing connection from the first capacitor array to the first input terminal and from the second capacitor array to the second input terminal of the operational amplifier and a second state providing connection from the first capacitor array to the second input terminal and from the second capacitor array to the first input terminal of the operational amplifier, and 6 control means responsive to the binary codes and operative to detect the polarity of the voltage into which each of the binary codes is to be converted, the control means being coupled to the selective coupling means and the polarity switch means and being further operative to control the coupling means to shift each of the capacitors selectively between the first and second reference voltages depending upon the status of the data bit which corresponds to the paired capacitors and to shift the polarity switch means between the first and second states thereof depending upon the detected polarity of the voltage into which each of the binary codes is to be converted. In a converter circuit thus constructed and arranged, the selective coupling means of each of the capacitor arrays comprises shift switches corresponding in number and provided respectively in series with the capacitors, each of the shift switches being connected to the source cf the first reference voltage and the source of the second reference voltage, one of the shift switches of the first capacitor array and one of the shift switches of the second capacitor array being paired to correspond to one of the data bits in each of the binary codes, the control means being associated with the selective coupling means and being operative to shift each of the shift switches selectively between the first and second reference voltages depending upon the status of the data bit which corresponds to the paired capacitors. The drawbacks of a prior art D A converter circuit and the features and advantages of a D A converter circuit according to the present invention will be more clearly understood from the following description taken in conjunction with the accompanying drawings in which Fig. 1 is a diagram showing the circuit arrangement of a typical example of a known D A converter circuit of the weighted capacitance, voltage output type and Fig. 2 is a diagram showing the general circuit arrangement of a preferred embodiment of a D A converter circuit according to the present invention Fig. 3 is a schematic diagram showing an example of the balanced operational amplifier which forms part of a D A converter circuit according to the present invention. In Fig. 1 is shown the general circuit arrangement of a typical example of a known four bit plus sign digital to analog converter of the weighted capacitance, voltage output type. The D A converter circuit includes a weighted capacitor array 10 responsive to four data bit in each of supplied binary codes. The capacitor array 10 consists of a parallel combination of four, first to fourth, capacitors 12a to 12d and four three position shift switches 14a to 14d which are provided in series with the capacitors 12a to 12d, respectively. Each of the shift switches 14a to 14d is selectively connected to any one of positive and negative reference voltages V To produce the desired binary contributions to the output voltage of the D A converter circuit, the successive capacitors 12a, 12b, 12c and 12d of the capacitor array 10 are weighted to have capacitances which progressively increment by a factor of two and which thus account for 1 16 C , 1 8 2C , 1 4 4C and 1 2 8C , respectively, of a predetermined full scale capacitance 16C. The feedback capacitor 18 has a capacitance equal to this full scale capacitance 16C. Though not shown in Fig. 1, the individual shift switches 14a to 14d are connected to suitable control means which receives the binary codes to be converted into analog signals and which is operative to detect from the supplied binary codes the polarities of the voltages into which the supplied binary codes are to be converted. The control means are further operative to shift any one or ones of the switches 14a to 14d between the two reference voltages V During reset mode of operation, the reset switch 20 is closed and all the shift switches 14a to 14d of the weighted capacitor array 10 are connected to the ground voltage V For conversion of the supplied binary codes into correspoding analog voltages during the subsequent conversion mode of operation, the reset switch 20 is made open and those of the shift switches 14a to 14d which correspond to the bits 0 in each of the supplied binary codes remain The conventional D A converter circuit constructed and operative as hereinbefore described is advantageous for its excellent performance accuracy and in that it can be readily implemented on a semiconductor integrated circuit chip. Such a D A converter circuit however has a problem in that the output voltages from the operational amplifier 16 could not be free from the noises originating in the power supply for the operational amplifier 16. Another problem of the D A converter circuit of the described type is that the output voltages of the converter circuit further contain noises resulting from the parasitic capacitances of the capacitor array 10, which are caused by the wiring of the capacitor array and the reset switch. These problems could be solved or alleviated to a considerable extent if the D A converter circuit alone forms a single semiconductor integrated circuit Consonantly, furthermore, with the scaling up of semiconductor integrated circuits in general, it is required that the source voltages to be used be reduced to the lowest possible levels. This places limits to the ranges of the voltages operable for the D A converter circuits implemented on semiconductor integrated circuit chips. Another problem of the prior art D A converter circuit of the described type results from the fact that the range operable of the output voltages of the D A converter circuit falls within the operable voltage range of the operational amplifier used in the converter circuit as previously noted. Specifically, the maximum amplitude of the sinusoidal voltage which can be produced by the D A converter circuit is equal to one half of the operable voltage range of the operational amplifier. Now that the plus and minus 5 volt source voltages which have thus far been frequently used for MOS integrated circuits are being supplanted by a single plus 5 volt source voltage, this means that the maximum voltage operable at the output terminal of the operational amplifier may be reduced as much. Such reduction in the maximum output voltage of the operational amplifier gives rise to an increase in the contribution of noises to the output voltages of the D A converter circuit and accordingly to deterioration in the signal to noise ratio of the converter circuit. This tendency is pronounced as integrated circuits are scaled up. In connection with the D A converter circuit of the type described, it may be further pointed out that such a converter circuit requires the use of two positive and negative reference voltages which necessitate strict matching therebetween. Furthermore, the use of the operational amplifier of the non balanced type is disadvantageous from the view point of providing compatibility between the D A converter circuit and any of the existing communication systems such as the telephone communication system using complementary signals. It is, accordingly, an important object of the present invention to provide an improved D A converter circuit in which the contribution of the noises originating in the supplied power to the output voltages from the converter circuit is reduced significantly. It is another important object of the present invention to provide an improved D A converter circuit in which the output voltages of the converter circuit are free from the influence of the noises resulting from the parasitic capacitances of the capacitor array used in the converter circuit. It is still another important object of the present invention to provide an improved in which only one positive or negative reference voltage is used in addition to the ground voltage to eliminate the need for strict matching as has been required between the two positive and negative reference voltages used in addition to the ground voltage in a prior art of the described type. It is, yet, still another important object of the present invention to provide an improved D A converter circuit which uses an operational amplifier of the balanced type for providing compatibility between the converter circuit and any of the existing communications systems using balanced output signals. Referring to Fig. 2, a weighted capacitance, voltage output D A converter circuit embodying the present invention comprises two weighted capacitor arrays which are shown consisting of a first capacitor array 22 and a second capacitor array 24. The D A converter circuit is assumed, by way of example, as being of the four bit plus sign resolution type and, as such, each of these first and second capacitor arrays 22 and 24 is responsive to four data bits forming or included in each of the binary codes supplied either in parallel or in series from a preceding digital circuit stage not shown . The first capacitor array 22 consists of a parallel combination of four, first to fourth, capacitors 26a to 26d and four two position shift switches 28a to 28d which are provided in series with the capacitors 26a to 26d, respectively. Likewise, the second capacitor array 24 consists of a parallel combination of four, first to fourth, capacitors 30a to 30d and four two position shift switches 32a to 32d provided in series with the capacitors 26a to 26d, respectively. Each of the shift switches 28a to 28d and shift switches 32a to 32d is to be selectively connected through a line 34 to a ground voltage V The successive capacitors 26a 26d 30a 30d of each of the first and second capacitor arrays 20 and 22 are weighted to have capacitances which progressively increment by a factor of two as shown. One of the capacitors 26a to 26d of the first capacitor array 22 and one of the capacitors 30a to 30d of the second capacitor array 24 are paired to correspond to one of the data bits in each of the binary codes to be supplied. Thus, each of the paired first capacitors 26a and 30a of the arrays 22 and 24 has a capacitance accounting for 1 16 C of a predetermined full scale capacitance 16C. Each of the paired second capacitors 26b and 30b of the arrays 22 and 24 has a capacitance accounting for 1 8 2C of the full scale capacitance. Each of the paired third capacitors 26c and 30c of the arrays 22 and 24 has a capacitance accounting for 1 4 4C of the full scale capacitance. Each of the paired fourth capacitors 26d and 30d of the arrays 22 and 24 has a capacitance accounting for 1 2 8C of the full scale capacitance. The D A converter circuit embodying the present invention further comprises an operational amplifier 40 having complementary, negative to positive and positive to negative inverting first and second input terminals 40a and 40b and complementary first and second output terminals 40c and 40d which are respectively associated with the first and second input terminals 40a and 40b. The operational amplifier 40 provided in the D A converter circuit embodying the present invention is, thus, of the balanced design. Examples of the operational amplifier of this nature are disclosed in IEEE Journal of Solid State Circuits , February 1983, page 58 and December 1983, page 661. The capacitors 26a to 26d of the first capacitor array 22 are connceted in parallel to a first switching junction 42 and, likewise, the capacitors 30a to 30d of the second capacitor array 24 are connected in parallel to a second switching junction 44. The first and second switching junctions 42 and 44 are provided in association with first and second polarity switches 46 and 48 respectively connected to the first and second input terminals 40a and 40b of the operational amplifier, each of the polarity switches 46 and 48 having two positions. The first polarity switch 46 has a first state connected to the first switching junction 42 and a second state connected to the second switching junction 44. On the other hand, the second polarity switch 48 has a first state connected to the second switching junction 44 and a second state connected to the first switching junction 42. The two polarity switches 46 and 48 are shifted to the respective first states as shown when the binary codes supplied are to be converted into voltages of the positive polarity and to the respective second states when the supplied binary codes are to be converted into voltages of the negative polarity. The D A converter circuit embodying the present invention further comprises a parallel combination of a first feedback capacitor 50 and a first reset switch 52 and a parallel combination of a second feedback capacitor 54 and a second reset switch 56. The parallel combination of the first feedback capacitor 50 and reset switch 52 is connected between the first input and output terminals 40a and 40c of the operational amplifier 40 and the parallel combination of the second feedback capacitor 54 and reset switch 56 is connected between the second input and output terminals 40b and 40d of the operational amplifier 40, as shown. Each of the first and second feedback capacitors 50 and 54 has a capacitance equal to the above mentioned full scale capacitance 16C and each of the reset switches 52 and 54 is implemented by an MOS transistor in an N or P channel MOS IC, or by a pair of N MOS and P MOS transistors connected in parallel when implemented in CMOS IC configuration. The shift switches 28a to 28d and shift switches 32a to 32d and the polarity switches 46 and 48 are operatively connected to a suitable control circuit 62. This control circuit 62, which also forms part of the D A converter circuit embodying the present invention, is operative to detect the polarities of the voltages into which the supplied binary codes are to be converted. The polarity of the output voltage to result from each of the supplied binary codes is herein assumed to be expressed in the form of a sign bit or bits provided in addition to the four data bits in each of the supplied binary codes but, if desired, may be expressed in the form of four true data bits for positive polarity and four complementary data bits for negative polarity. The control circuit 62 is further operative to shift any one or ones of the switches 26a to 26d and switches 32a to 32d between the lines 34 and 36, viz., the ground voltage V Operation, in reset and conversion modes, of the D A converter circuit thus constructed and arranged will now be described. During reset mode of operation, the first and second reset switches 52 and 56 are kept closed so that the operational amplifier 40 is short circuited through these switches 52 and 56. The capacitors 26a to 26d of the first capacitor array 22 are charged to the respective weighted capacitances thereof with the offset voltage of the operational amplifier 40 as appearing at the first or second summing junction 58 or 60 depending upon the states of the first and second polarity switches 46 and 48. Similarly, the capacitors 32a to 32d of the second capacitor array 24 are charged to their respective weighted capacitances with the offset voltage of the operational amplifier 40 as appearing at the second or first summing junction 60 or 58. Furthermore, all the shift switches 28a to 28d of the first capacitor array 22 are connected through the line 36 to the positive reference voltage V During the conversion mode of operation subsequent to the reset mode, the reset switches 52 and 56 are made open and binary codes are supplied in cycles dictated by clock pulses ø to the control circuit 60. The control circuit 60 is thus enabled to produce control signals so that those of the shift switches 28a to 28d of the first capacitor array 22 which correspond to the bits 0 in each of the supplied binary codes remain connected to the reference voltage V The rises and drops of voltage thus caused through the individual shift switches of the capacitor arrays 22 and 24 are transferred through the respectively associated capacitors and give rise to a decrease in the potential at the first switching junction 42 and an increase in the potential at the second switching junction 44. Each of the input terminals and each of the output terminals of the operational amplifier 40 being connected together across the capacitor 50 54 having the capacitance of 16C as previously noted, the input terminals 40a and 40b of the operational amplifier 40 are in imaginary short circuited states so that the potentials at the first and second output terminals 40c and 40d of the operational amplifier 40 are caused to vary by values that will cancel the changes in the voltages through the individual shift switches of the capacitor arrays 22 and 24. The potentials thus varied at the output terminals 40c and 40d of the operational amplifier 40 are delivered as balanced output voltages from the operational amplifier 40. When the data bits in the supplied binary code are in the form of 1010 as above discussed, there thus appear a voltage of V An example of the balanced operational amplifier 40 forming part of a D A converter circuit according to the present invention is shown in Fig. 3. As shown, the balanced operational amplifier 40 comprises transiators Q₁ to Q₁₂ each consisting of a N channel MOS FET. Of these transiators Q₁ to Q₁₂, each of the transiators Q₁ to Q₄ is of the depletion type and each of the transiators Q₅ to Q₁₂ is of the enhancement type. The MOS transistors Q₁, Q₂, Q₅, Q₆ and Q₇ constitute the differential input stage and the MOS transistors Q₃, Q₄, Q₈ to Q₁₂ constitute the subsequent differential stage. The gates of the MOS transistors Q₅ and Q₆ provide the previously mentioned input terminals 40a and 40b, respectively, of the operational amplifier 40. On the other hand, the gates of the MOS transistors Q₃ and Q₄ provide the output terminals 40c and 40d, respectively, of the amplifier 40. As the positive source voltage V As will have been understood from the foregoing description, a D A converter circuit according to the present invention has various advantages over prior art D A converters of particularly the type described with reference to Fig. 1. One of these advantages is that the contribution of the noises originating in the supplied power to the output voltages from the converter circuit is significantly reduced. The voltage range operable at each of the two output terminals of the operational amplifier 40 may be twice as high as the voltage range of the operational amplifier 40 While only one preferred embodiment of a D A converter circuit according to the present invention has been hereinbefore described, such an embodiment is merely illustrative of the essential subject matter of the present invention and may therefore be modified and or changed in numerous manners if and where desired. While, for example, the capacitor arrays 22 and 24 forming part of the D A converter circuit embodying the present invention are of the four bit configuration, the present invention may be embodied in a D A converter circuit using capacitor arrays of the five bit or six bit configuration. Although, furthermore, the reference voltage V