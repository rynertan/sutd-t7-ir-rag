# SOLID STATE IMAGING DEVICE

## Claims
Festkörper Bildaufnahmevorrichtung, umfassend einen Festkörper Bildsensor mit einer Vielzahl von in mindestens einer horizontalen Zeile angeordneten Bildelementen und einer Vielzahl von in einer Gruppe entsprechend den Bildelementen des Festkörper Bildsensors angeordneten Farbfiltern, deren jedes eine aus einer Vielzahl unterschiedlicher Farbtransmissions Charakteristiken aufweist, wobei die Vielzahl der Bildelemente zur Ausgabe von Farbsignalen der entsprechenden Farbtransmissions Charakteristiken nacheinander ausgelesen wird, und wobei die Farbsignale mit Ausnahme des einem gerade abgetasteten Bildelement entsprechenden Farbsignals mit Signalen interpoliert werden, die aufgrund aufeinanderfolgender Ausgangssignale der benachbarten Bildelemente erzeugt werden,

## Description
The present invention relates to an imaging device, and more particularly to a single chip color video camera which employs one solid state image sensor. At present, a single chip color video camera which produces color video signals with one solid state image sensor has been put into practical use. In such a camera, several kinds of color filters having different transmission lights are held in cyclic correspondence with the respective picture elements photoelectric conversion elements of the solid state image sensor, thereby to obtain a plurality of chrominance signals. Accordingly, the spatial sampling frequency of each chrominance signal lowers to several tenths of the sampling frequency of the picture elements, and a colored moire is prone to appear. A method of relieving the colored moire of the single chip color video camera is described in, for example, the official gazette of Japanese patent Application Laid open No. JP A 54 131819 and U.S. Patent No. US A 4,153,912 corresponding thereto. With this method, operations to be stated below are performed. By way of example, when color filters shown in Fig. 1 in which letters R, G and B denote color filters transmitting red, green and blue, respectively are combined so that the individual filter elements may be held in one to one correspondence with the picture elements of the solid state image sensor, signals illustrated in Fig. 2 a are obtained. The signals are separated to obtain a red signal, a green signal and a blue signal hereinbelow, abbreviated to R, G and B signals respectively shown in Figs. 2 b 2 d , in which by way of example, at a time t₁, the R signal is obtained but the G and B signals are not obtained, and at a time t₂, the G signal is obtained but the R and B signals are not obtained. Therefore, at the time t₁ by way of example, which of the magnitudes of R₀ and R₂ the magnitude of R₁ is closer to is compared, and the G signal and the B signal are interpolated with G₀ and B₀ when R₁ is closer in magnitude to R₀ or is close to both R₀ and R₂, and with G₁ and B₁ when R₁ is closer in magnitude to R₂ or is close to neither of R₀ and R₂. When the R, G and B signals are interpolated by such operations, three signals of high sampling frequency and uniform phase as shown in Figs. 2 e 2 g are obtained. As a result, signals to be originally derived are interpolated substantially correctly at the boundary parts of a subject object having a sufficient size as compared with the interval of the picture elements, and the colored moires appearing at the boundary parts are relieved. However, as regards a subject having a pattern which varies in a range several times larger than the interval of the picture elements, the original signals cannot be correctly interpolated, and there is the problem that the colored moires increase conversely. By way of example, when bright and dark subjects are focused on the color filters shown in Fig. 1 in correlations shown in Fig. 3, signals shown in Fig. 4 a are obtained. When they are separated into R, G and B signals which are then subjected to the processing of the prior art stated above, signals in Figs. 4 b 4 d are obtained. When these signals are compared with the circumstances of the subjects in Fig. 3, the B signal at a time t₄, the G signals at times t₆ and t₇, and so on are obviously different from signals to be originally derived. As a result, signals produced as if a blue subject were imaged are obtained at the time t₄ by way of example, and there is the problem that the false color appears on a reproduced picture. An object of the present invention is to provide a solid state imaging device which is less prone to develop false colors even in a subject image that varies in a range several times larger than the picture element interval of a solid state image sensor. In order to accomplish the above object, an apparatus as defined by claim 1 of the appended claims is provided. According to the present invention, in a solid state imaging device, a chrominance signal different in kind from a signal to be obtained at a specified time among a plurality of chrominance signals to be successively obtained from a solid state image sensor is interpolated with the pertinent chrominance signal obtained directly before the time, or with the pertinent chrominance signal of a picture element corresponding to the signal to be obtained at the time, as found assuming that a subject be achromatic. Which of the signals is to be used for the interpolation is decided according to the difference between the signal to be obtained at the time and a signal of the same chrominance obtained one cycle before the time, or the differences between signals obtained directly before the time and to be obtained directly after the time and the pertinent chrominance signals obtained one cycle before the times of these signals. According to the present invention, a subject image which varies in a range several times larger than the picture element interval of the solid state image sensor can be subjected to signal interpolations difficult to develop false colors, and colored moires can be sharply reduced. An embodiment of the present invention will be described with reference to Fig. 5 and Figs. 6 a 6 g . In the device of Fig. 5, it is assumed by way of example that the color filters shown in Fig. 1 be combined with a solid stage image sensor 1. At this time, when the bright and dark subjects are focused in the correlations shown in Fig. 3, signals shown in Fig. 6 a are output from the image sensor 1. They are successively applied to delay circuits 2a, 2b and 2c which are connected in series. The delay magnitude of each of the delay circuits 2a, 2b and 2c is set equal to the sampling period of picture element signals. As a result, at a time t₃ by way of example, picture element signals B₁, G₁, R₁ and B₀ provided from the solid state image sensor 1 at times t₃, t₂, t₁ and t₀ respectively are simultaneously obtained on output lines 3a, 3b, 3c and 3d. Meanwhile, R, G and B signals into which the signals in Fig. 6 a have been separated by sampling are as shown in Figs. 6 b 6 d respectively. When the time t₃ is taken as an example, the picture element signal B₁ is obtained as the B signal, but the R signal and the G signal do not exist. Here, let s consider a case where a subject image does not abruptly change between a picture element corresponding to B₀ and a picture element corresponding to B₁. Then, it can be expected that the difference between the values of B₀ and B₁ will be small and that the differences between R₁ and G₁ obtained meantime and the R and G signals to be obtained at the time t₃ will also be small. In contrast, in a case where a subject image changes abruptly between the picture element corresponding to B₀ and the picture element corresponding to B₁, there is a high possibility that the difference between the values of B₀ and B₁ will be great and that the differences between R₁ and G₁ and the R and G signals to be obtained at the time t₃ will also be great. Therefore, the difference signal between B₀ and B₁ is produced, whereupon when it does not exceed a reference value selected at will, it is deemed that the abrupt change of the subject does not exist meantime, and the R and G signals corresponding to the time t₃ are respectively interpolated with R₁ and G₁ which have been obtained meantime. In addition, when the difference signal between B₀ and B₁ is greater than the reference value, it is deemed that the abrupt change of the subject exists meantime, and R₁ and G₁ are not used for the interpolations of the R and G signals corresponding to the time t₃. At this time, the subject imaged by the picture element corresponding to B₁ is assumed to be achromatic, and R and G signals to be obtained in the achromatic subject in which B₁ is obtained are used for the interpolations. Although, in the above description, the method of obtaining the R and G signals corresponding to the time t₃ has been taken as the example, the same can be applied to respective signals corresponding to the other times, by replacing the relations of R, G and B in succession. In general, in the video signals of the NTSC format, the PAL format, etc., the frequency band of chrominance signals is narrower than that of luminance signals. Accordingly, the chrominance signals need not follow up abrupt changes corresponding to high frequency responses, and the quality of a reproduced picture is not heavily spoilt even when the chrominance signals are not obtained at the boundary parts etc. of a subject image. Besides, considering the fact that an ordinary subject includes a small number of subjects of high saturation therein, it can be expected that no great error will arise even when interpolations are performed with achromatic signals. To the end of realizing the above signal processing, in the embodiment shown in Fig. 5, a signal for example, B₁ at the time t₃ obtained from the output line 3a and a signal for example, B₀ at the time t₀ obtained from the output line 3d are applied to a subtracter 4. Further, the output signal of the subtracter 4 is applied to an absolute value detector 5 so as to obtain a unipolar difference signal. The difference signal thus obtained is applied to a decision circuit 7 together with a reference signal which is provided from a reference signal generator 6. The decision circuit 7 produces a control signal of 1 in a case where the difference signal is greater than the reference signal, and it produces a control signal of 0 in a case where the difference signal is smaller than the reference signal. Meanwhile, the signal obtained from the output line 3a is applied to a gate circuit 9a via gain controllers 8a, 8b and 8c and is similarly applied to a gate circuit 9b via gain controllers 8d, 8e and 8f. Here, symbols Rm, Gm and Bm denote the magnitudes of signals which are derived from picture elements corresponding to the respective color filters R, G and B when an achromatic subject having an arbitrary luminance has been imaged by way of example. At this time, the output signal ratios of the picture elements of R, G and B for the achromatic subject are obtained by selecting As a result, when the signal derived from the output line 3a is the B signal by way of example, the corresponding G signal to be obtained in the achromatic subject is provided from the gain controller 8a, and the corresponding R signal is provided from the gain controller 8d. Meanwhile, the G₁ signal is obtained from the output line 3b and the R₁ signal from the output line 3c at this time as understood from Fig. 6 a . Therefore, when the device is so controlled that the outputs of the gain controllers 8a and 8d are respectively caused to appear at the outputs of the gate circuits 9a and 9b by a signal from a drive circuit 12 as synchronized with the drive pulse of the solid state image sensor 1, a gate circuit 10a is supplied with the G signal found from the B₁ signal obtained at that time and the G₁ signal obtained immediately before the B₁ signal, and a gate circuit 10b is similarly supplied with the R signal found from the B₁ signal obtained at that time and the R₁ signal obtained immediately before the B₁ signal. Likewise, when the signal derived from the output line 3a is the R signal, the B signal and G signal corresponding to the achromatic subject are respectively provided from the gain controllers 8b and 8e, and when the signal derived from the output line 3a is the G signal, the R signal and B signal corresponding to the achromatic subject are respectively provided from the gain controllers 8c and 8f. The gate circuits 9a and 9b have their operations controlled so that the outputs of the gain controllers 8b and 8e may appear at the outputs of the respective gate circuits when the signal of the output line 3a is the R signal, and that the outputs of the gain controllers 8c and 8f may appear when the signal of the output line 3a is the G signal. Then, the gate circuits 10a and 10b are simultaneously supplied with the pertinent chrominance signal of the achromatic subject found from the signal obtained at that time and the pertinent chrominance signal obtained immediately before the former signal. Here, the control signal provided from the decision circuit 7 is applied to the gate circuits 10a and 10b. When the control signal for the gate circuits is 1 , that is, when the difference between the signal obtained at that time and the signal of the same chrominance obtained one cycle before is great, the pertinent chrominance signals corresponding to the achromatic subject as provided from the gate circuits 9a and 9b appear at the outputs of the respective gate circuits 10a and 10b. Besides, when the control signal is 0 , that is, when the difference between the signal obtained at that time and the signal of the same chrominance obtained one cycle before is small, the pertinent chrominance signals directly before them as derived from the output lines 3b and 3c appear. Further, the signals provided from the gate circuits 10a and 10b are applied to gate circuits 11a, 11b and 11c together with the signal derived from the output line 3a. The signal provided from the drive circuit 12 and synchronized with the drive pulse of the solid state image sensor 1 is applied to the gate circuits 11a, 11b and 11c, to control them so that the B signal, R signal and G signal may be separatedly provided from the outputs of the respective gate circuits. As the result of the above, the R, G and B signals whose sampling frequencies are equal to the sampling frequency of the picture elements and whose phases are uniform, as illustrated in Figs. 6 e 6 g , can be obtained from the signals in Fig. 6 a . The obtained signals are somewhat different from the signals to be originally obtained, but when they are compared with the signals obtained by the prior art example as shown in Figs. 4 b 4 d , the B signal corresponding to a time t₄ and the G signals corresponding to times t₆ and t₇ are improved, and the false colors appearing on the reproduced picture are relieved. In the embodiment shown in Fig. 5, the picture element signals provided from the solid state image sensor 1 are delayed by the delay circuits 2a, 2b and 2c which are connected in series. As in another embodiment shown in Fig. 7, however, delay circuits 13a, 13b and 13c whose delay times are one, two and three times as long as the sampling period of the picture elements respectively can also be employed in parallel connection. In the embodiment shown in Fig. 5, the constant reference signal generated from the reference signal generator 6 is applied to the decision circuit 7. In such a case, since the output of the B signal for the achromatic subject is usually smaller than those of the other signals, the inconvenience might occur that, as to the same change of the achromatic subject, the control signal becomes 1 for the G signal, whereas it becomes 0 for the B signal. As shown in an embodiment of Fig. 8, therefore, the constant reference signal generated from the reference signal generator 6 is converted into reference signals of magnitudes respectively proportional to In the embodiment shown in Fig. 5, the pertinent chrominance signal corresponding to the achromatic color as found from the signal obtained at the particular time and the pertinent chrominance signal obtained directly before the former signal are switched by the gate circuits 10a and 10b. As in another embodiment shown in Fig. 9, however, gain controllers 16a, 16b, 16c and 16d and adders 17a and 17b can also be employed. Here, by way of example, the gains of the gain controllers 16a and 16c are set so as to vary linearly versus the magnitude of a control signal as illustrated by a curve C1 in Fig. 10, and those of the gain controllers 16b and 16d are similarly set as illustrated by a curve C2 in Fig. 10. In this case, the unipolar difference signal provided from the absolute value detector 5 is applied as the control signal. When the gate circuits 10a and 10b are replaced with the gain controllers 16a, 16b, 16c and 16d, it is possible to prevent the unnaturalness in which the signals of the boundary part of a subject change over suddenly at a certain brightness and which takes place when, e.g., a lens opening is opened or closed. In the embodiment shown in Fig. 5, whether or not a chrominance signal at any time originally unobtainable in a place can be interpolated with the pertinent chrominance signal obtained directly before the time is decided on the basis of the difference between a signal obtained at the time and a signal of the same chrominance obtained one cycle before the signal. With this measure, the decision at a time t₈ indicated in Fig. 6 a , for example, is rendered using the difference signal of G₂ and G₃, so that the abrupt change of a subject image cannot be detected. Therefore, when there are found the difference between a chrominance signal obtained directly before the time and a signal of the same chrominance obtained one cycle before the signal and the difference between a chrominance signal to be obtained directly after the time and a signal of the same chrominance obtained one cycle before the signal, the abrupt change of a subject image existent between a picture element corresponding to the time and the directly preceding picture element of another color can be detected at a higher probability. An embodiment corresponding to the above method is shown in Fig. 11. In the embodiment shown in Fig. 11, delay circuits 2a, 2b, ..., and 2e each having a delay magnitude equal to the sampling period of picture element signals are connected in series, whereby at the time t₄ by way of example, picture element signals R₂, B₁, G₁, R₁, B₀ and G₀ are respectively provided on output lines 3a, 3b, 3c, 3d, 3e and 3f. Here, when the signals derived from the output lines 3a and 3d are applied to a subtracter 4c, the difference between R₂ and R₁ is obtained, and when the signals derived from the output lines 3c and 3f are applied to a subtracter 4b, the difference signal between G₁ and G₀ is obtained. It is the same as in the embodiment shown in Fig. 5 that the signals derived from the output lines 3b and 3e are applied to a subtracter 4a thereby to obtain the difference signal between B₁ and B₀. It is also the same as in the embodiment shown in Fig. 5 that the picture element signal B₁ derived from the output line 3b is applied to gain controllers 8a, 8b, ..., and 8f and gate circuits 11a, 11b and 11c, and that the picture element signals G₁ and R₁ derived from the output lines 3c and 3d are respectively applied to gate circuits 10a and 10b. Output signals from the subtracters 4a, 4b and 4c are respectively applied to absolute value detectors 5a, 5b and 5c to obtain unipolar difference signals, whereupon these signals are applied to a maximum value detector 18 which delivers the maximum value among the three input signals I₁, I₂ and I₃ as an output signal 0 as illustrated in Fig. 12. The signal thus obtained is applied to a decision circuit 7 together with a reference signal from a reference signal generator 6 so as to obtain a control signal, with which the gate circuits 10a and 10b are controlled. The operations of the other constituents such as the gain controllers 8a, 8b, ..., and 8f, the gate circuits 9a and 9b, the gate circuits 10a and 10b, and the gate circuits 11a, 11b and 11c are the same as in the embodiment shown in Fig. 5. Owing to the operations thus far described, signals R, G and B as shown in Figs. 6 h , 6 i and 6 j are respectively provided from the gate circuits 11a, 11b and 11c. Since these signals are still closer to the signals to be originally obtained than the signals in Figs. 6 e , 6 f and 6 g which are provided by the embodiment shown in Fig. 5, false colors to appear on a reproduced picture can be sharply improved. Obviously, a similar effect can be expected even when an adder is employed instead of the maximum value detector 18 used in the embodiment shown in Fig. 11. An embodiment shown in Fig. 13 improves the foregoing lowering of the detection probability attributed to the differences of the magnitudes of the R, G and B signals for the achromatic subject. Outputs from absolute value detectors 5a, 5b and 5c are applied to gate circuits 19a, 19b and 19c, and these gate circuits are controlled by a control pulse generated from a drive circuit 12 so that the difference signal of the B signal may be applied to a gain controller 20a of a gain corresponding to 1 b and that the difference signal of the G signal and the difference signal of the R signal may be respectively applied to gain controllers 20b and 20c of gains corresponding to 1 g and 1 r. As a result, the gain controllers 20a, 20b and 20c produce the difference signals of equal magnitudes for the identical achromatic subject irrespective of the kinds of chrominance signals to be detected. In the embodiment shown in Fig. 11, the maximum value signal of the three unipolar difference signals is obtained and is thereafter applied to the decision circuit 7. In contrast, Fig. 14 shows an embodiment wherein the outputs of the absolute value detectors 5a, 5b and 5c are respectively applied to decision circuits 7a, 7b and 7c together with the reference signal from the reference signal generator 6 so as to obtain control signals, which are thereafter applied to the maximum value detector 18. It is to be understood that the embodiment shown in Fig. 14 can achieve the same effect as in the embodiment of Fig. 11. As in the embodiment shown in Fig. 9, the unnatural change over of signals at the boundary part of a subject can be prevented when the gate circuits 10a and 10b are replaced with gain controllers 16a, 16b, 16c and 16d and adders 17a and 17b as in an embodiment in Fig. 15. When more kinds of difference signals are used for the decision as to whether or not a chrominance signal at any time originally unobtainable in a place can be interpolated with the pertinent chrominance signal obtained directly before the time, the abrupt change of a subject image existent between a picture element corresponding to the time and a picture element corresponding to the directly preceding interpolation signal can be detected at a higher probability. By way of example, in an embodiment shown in Fig. 16, delay circuits 2f and 2g, subtracters 4d and 4e, and absolute value detectors 5d and 5e are added to the embodiment of Fig. 11, whereby for example, the decision of the signal to be obtained at the position corresponding to the time t₃ is rendered using the difference signal of G₁ and G₂ and the difference signal of B₁ and B₂. According to the embodiment of Fig. 16, the signals to be originally obtained are found as shown in Figs. 6 k 6 m , so that false colors on a reproduced picture can be eliminated. While the present invention has been described by taking the color filters shown in Fig. 1 as the example, it is to be understood that the invention is applicable to time series signals in which several kinds of signals are successively repeated. The invention is accordingly applicable to single chip color video cameras combined with all sorts of color filter assemblies such as assemblies which employ complementary color type filters as in Figs. 17 a and 17 b , assemblies in which repetition patterns do not consist of three picture elements as in Figs. 17 c and 17 d , an assembly in which each column is not unicolor as in Fig. 17 e , and an assembly which corresponds to a solid state image sensor wherein picture elements are horizontally shifted by a half picture element pitch every second line as in Fig. 17 f . In these figures, symbol W indicates a filter transmitting all colors, symbol Cy a filter transmitting cyan, symbol Ye a filter transmitting yellow, symbol R a filter transmitting red, symbol G a filter transmitting green, and symbol B a filter transmitting blue.