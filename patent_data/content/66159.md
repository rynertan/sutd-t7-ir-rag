# Incremental motion motor control system.

## Abstract
A motor control system for a high accuracy incremental motion system such as a paper feed system in a high speed printer. The system utilizes a stepping motor 10 which is driven in one of two modes, depending upon its position. During most of the movement from one position to another, the motor is driven as a DC brushless motor. This is accomplished by commutating the phases of the motor so that they are energized around the peaks of their torque curves. The motor is driven in a closed loop fashion, with velocity commands being generated by a velocity profile generator 25 incorporating a microprocessor 24 . Both position and velocity feedback are utilized. Since the motor 10 is driven as a DC brushless motor, traditional control theory methods e.g., Root locus, Bode, etc. can be employ ed. As the motor nears the final desired position, the system switches so that the motor is energized as a step motor. This energization is applied when the motor is less than one motor step from its final position, and causes the motor to be drawn to a null point and held in position. Velocity feedback is provided to damp the motor so as to further decrease positioning time.

## Claims
CLAIMS 1. An incremental motion motor control system, comprising a stepping motor characterized by control means for driving the stepping motor 10 a as a DC motor from initial energization of the motor until the motor reaches a position near its desired position, and b as a stepping motor to bring the motor to its final desired position. 2. Control system according to claim 1 characterized in that the control means includes commutator means 16 for controlling the energization of the phases of the stepping motor 10 so that each phase is sequentially driven around the peak of its torque curve. 3. Control system according to claim 2 characterized in that the control means includes an encoder 18 for determining the position of the stepping motor 10 and in that the encoder output is connected to the commutator means 16 to control the operation thereof. 4. Control system according to claim 2 or 3 characterized in that the commutator means 16 includes first phase advance means 50 for modifying the energization of the stepping motor 10 during acceleration and deceleration so as to provide maximum accelerating and decelerating torque. 5. Control system according to claim 3 or 4 characterized in that said control means comprises velocity means 18, 20, 22 for determining the velocity of the motor 10 , and in that the commutator means 16 includes second phase advance means Fig. 7 for modifying the energization of the stepping motor as a function of the velocity of the motor to thereby obtain maximum torque despite variations in velocity. 6. Control system according to claim 5 characterized in that the velocity means includes tachometer circuitry 20 connected to the output of the encoder 18 , wherein the tachometer circuitry processes the position output of the encoder to obtain a velocity output. 7. Control system according to one of claims 1 to 6 characterized by damping means 14, 34, 36 for damping the motor 10 when it is driven as a stepping motor. 8. Control system according to claim 7 further including velocity means 20 for determining the velocity of the motor and wherein the damping means 14 provides a force which is proportional to the velocity of the motor 10 . 9. Control system according to claim 8 including means for providing first and second drive signals for the motor 10 , wherein the damping means includes means 34, 36 for adding a velocity proportional signal to the first drive signal and subtracting a velocity proportional signal from the second drive signal, wherein said modified drive signals VA, VB are used to drive the motor. 10. Control circuit according to one of claims 1 to 9, characterized in that the control means includes feedback means 18, 20, 22, 30, 38, 40 for providing feedback signals representing the position and velocity of the motor 10 velocity profile generator means 25 for receiving the position feedback signal C 2 and providing a velocity command signal Vc representing the desired velocity of the motor as a function of motor position and error means 28 ... 36 for providing an error signal representing the difference between the velocity command signal and velocity feedback signal, wherein the error signal is used to drive the motor. 11. Control circuit of claim 10 characterized in that the error means 28 ... 36 includes limiting circuitry 32 for limiting the magnitude of the error signal to a value just below that which causes motor demagnetization to occur. 12. A motor control system for use in a high speed printer, characterizing by a stepping motor 10 feedback means 18, 20, 22, 30, 38, 40 for providing a motorvelocity feedback signal and a motor position feedback signal velocity profile generator means 25 for receiving the position feedback signal and providing a velocity command signal Vc representing the desired velocity of the motor error means 28, 32 for generating an error signal Vc indicating the difference between the velocity command signal Vc and velocity feedback signal W , wherein the error signal is utilized to drive the motor commutator means 16 for controlling the energization of the motor phases so that the motor is driven as a DC motor position means 14, 34, 36 for controlling the energization of the motor phases so that the motor is driven as a step motor means 25 for providing a drive signal to the position means switching means 30, 38 for a causing the commutator means to control the motor energization from the time the motor begins to move until the motor is near its desired position, and b causing the position means to control the motor energization to bring the motor to its desired position.

## Description
INCREMENTAL MOTION MOTOR CONTROL SYSTEMBACKGROUND OF THE INVENTION 1. Field of the Invention This invention relates to an incremental motion control system for controlling the position of a motor.More particularly, this invention relates to a paper feed system for use with high speed line printers, i.e., those which print at a rate of greater than 1,000 lines per minute. High speed line printers generally employ a type font carried on a band which moves horizontally across the paper being printed. A hammer bank impacts against the mov ing band to cause printing. In order to increase the throughput of the printer, either the paper feed time the time to move the paper from one print line to the next and or the printing time the time it takes to actually print a line must be decreased. A reduction in print time is generally undesirable, since it also brings about a reduction in print quality. This is due to the fact that in order to reduce print time, the font speed must belincreased, resulting in smearing of the characters. TherefodB, it is desirable to provide as much time as is possible to accom plish actual printing.This means that paper feed time should be reduced to an absolute minimum. 2. Description of the Prior Art Several methods have been utilized in the past to rapidly increment paper for a high speed line printer. One method involves the use of an open loop step motor, driven by any number of drive schemes, and incremented by a fixed timing sequence. This type of motor requires a torque margin to prevent a loss of steps, and therefore the full torque of the motor cannot be utilized. In addition, the motor is sensitive to load variations and is susceptible to resonances. Such a motor is very under damped and will ring when positioning. A second type of method uses a closed loop servo control system along with a DC brush type motor. A DC generator or an electronic tachometer is used for velocity feedback, and a position encoder is sometimes used for position feedback loops. The motors used in this type of system are relatively inefficient, and generally require undesirable forced air cooling for medium to high speed systems.Because of the motor s inefficiency, the system consumes a great deal of power. Yet another type of system utilizes a clutch and brake to incrementally couple the paper feed mechanism to a continuously rotating shaft. Such systems are generally quite complex and are prone to misadjustment and unreliable performance. In addition, these systems are relatively expensive when used for high speed printers. Some attempts have been made to utilize a step motor in a closed loop system for incremental motion. These previous attempts have not been able to deliver the high performance necessary to increment very rapidly. In addition, the damping of such systems has generally been quite poor. One prior art system is disclosed in U.S. PatentNo. 4,228,396 to Palombo, et al. This system utilizes a brushless DC motor driven in a servo controlled fashion.Other paper feed control systems are disclosed in U.S.Patent Nos. 3,524,528 to Peyton and 3,656,041 to Bonzano. SUMMARY OF THE INVENTION The present invention provides a low cost high performance incremental motion system for high speed paper feed. c The system utilizes a stepping motor which is driven as a DC brushless motor in a first, or Zvelocity , mode and as a stepping motor in a second, or position , mode. The system includes a unique velocity profile generator including a microprocessor and memory and digital to analog converter. The microprocessor creates a digital representation of desired velocity. The digital signal is then converted to an analog signal. The desired velocity signal is compared with the actual velocity of the motor and an error signal is generated to drive the motor.The system includes current limiting circuitry which limits the drive current at a level just below motor demagnitization. This enables the motor to accelerate and decelerate as rapidly as possible, thus increasing the paper feed speed. A unique commutator and phase advance circuit is included to control the energization of the phases of the motor. The phases are energized symmetrically around the maximums of their torque curves, thus causing the stepper motor to effectively operate as a DC brushless motor. In addition, phase advance circuitry is included to account for then time constant of the motor and to give maximum torque during acceleration and deceleration. When the motor position approaches the final desired position, the control system switches the drive so that the motor functions as a stepping motor with velocity feedback to provide damping of the motor. The damping circuitry provides damping which is proportional to the velocity of the motor. By driving the motor both as a brushless DC motor and as a stepping motor, a very high efficiency, low cost system is provided. Problems and limitations associated with open loop step motor systems erg., loss of motor steps, sensitivities to load variations, ringing and overshoot resonances and low torque utilization, either have been eliminated entirely or greatly reduced. When used in the system of the present invention, the stepping motor is very efficient and is able to do much more work than equivalent volume motors of previous servo systems.In addition, no external cooling is required.Because of the motor s high efficiency, the cost of the paper feed system is substantially lower than that of previous systems of equivalent performance. BRIEF DESCRIPTION OF THE DRAWINGS The invention will be described with reference to the accompanying drawings in which FIGURE 1 is a block diagram of the control system of the invention FIGURE 2 is a graph of the eloefty profile used with the invention FIGURE 3 is a schematic of the digital to analog converter of the velocity profile generator of FIGURE 1 FIGURE 4 is a schematic diagram of a summing amplifier and the absolute value and current limit circuitry of FIGURE 1 FIGURE 5 tis a schematic diagram of the commutator. circuitry of the control system FIGURE 6 is a schematic diagram of the squaring circuitry of FIGURE 1 FIGURE 7 is a schematic diagram of automatic phase advance circuitry of the control system FIGURE 8 is a schematic diagram of an inverter to produce a velocity signal used by the phase advance circuitry FIGURE 9 is a schematic diagram of summing amplifiers used in the position mode to provide damping FIGURE 10 is a schematic diagram of the damping selector of FIGURE 1 and FIGURE 11 is a schematic diagram of the tachometer used in the control system. DETAILED DESCRIPTION of THE DRAWINGS The following description is of the best presently contemplated mode of carrying out the invention. This description is not to be taken in a limiting sense, but is made merely for the purpose of illustrating the general principles of the invention since the scope of the invention is best defined by the appended claims. Referring to FIGURE 1, a stepping motor 10 is utilized to provide incremental motion for a paper feed system in a line printer. In the present embodiment of the invention, the motor .10 is a standard four phase, 1.8 degree step, hybrid permanent magnet stepping motor. One example of such a motor is the Superior Electric Model M093. This motor provides the necessary torque and is very efficient when used in the system of FIGURE 1. The motor 10 is driven by a power amplifier 12, which is a pulse width modulated, high power transconductance amplifier. It receives as inputs two unipolar voltages from a damping selector 14 and converts each one to a proportional current for whichever of the two phases of the stepping motor are on at a given time. The phase energization of the power amplifier 12 is controlled by means of commutator and phase advance circuitry 16. The position of the shaft of the motor 10 is detected by means of. an encoder 18. In the present embodiment, the encoder is a 200 cycle per revolution.optical encoder which provides separate sine and cosine outputs. The 200 cycle per revolution corresponds to one cycle per motor step, thus simplifying the use of the encoder information for switching the motor phases. The output of the encoder 18 is connected to a tachometer 20 and squaring circuitry 22. The tachometer processes the sine and cosine outputs and generates a bipolar output proportional to the velocity of the motor. The squaring circuitry 22 converts the encoder signals to pulse signals thereby providing an incremental position indication. The output of the squaring circuitry 22 is connected as an input to a microprocessor and memory 24, as well as to the commutator and phase advance circuitry 16.The digital output of the microprocessor and memory 24 is connected to a digital to analog D to A converter 26, which generates an analog signal proportional to the desired velocity of the motor. The error between the desired velocity as represented by the output of the converter 26 and the actual velocity is determined by a summing amplifier 28, which receives a velocity feedback signal from the tachometer 20 through an FET switch 30. The error signal generated by the summing amplifier 28 is connected to absolute value and current limit circuitry 32, which provides an absolute value signal of the output of the amplifier 28, limited to a predetermined maximum current. In addition, a polarity signal T3 indicating the direction of the error is provided to the commutator circuitry 16. The absolute value current signal is provided to summing amplifiers 34 and 36, whose outputs are connected to drive the damping selector 14. The amplifiers 34 and 36 receive a velocity signal from the tachometer 20 via an FET switch 38.The switches 30 and 38 are controlled by a logic output of the microprocessor and memory section 24. An inverter 40 causes the switch 30 to be opened when switch 38 is closed and vice versa. The configuration OR FIGURE 1 is such that the motor 10 is driven in one of two modes, namely a velocity mode o position mode. In the velocity mode, the velocity profile generator 25 provides a velocity command which is used to control the energization of the motor until it reaches a location very close to the desired position. In this mode, the motor is effectively driven as a brushless DC motor. This is accomplished by switching the drive current to the motor phases symetrically around the motor s peak holding torque. When the motor comes close to the desired position within 1 4 motor step in the present embodiment , the system is switched to the position. mode, in which the motor is driven as a stepping motor to cause it to be held at its desired position.It should be noted that in the position mode, the motor does not actually move through a number of steps. Rather, the motor i energized in a normal step motor fashion to cause it to move a portion of a step until it reaches a null position. 2 Initially, the system will be in the position mode and the motor velocity and position will be zero. Upon receipt of a paper feed command e.g., a command which instructs the system to step the paper one line, which generally corresponds to either six or eight motor steps on line 42 the microprocessor forces lines CO C1 and Vinit low.This closes the FET switch 30 and opens the FET switch 38, which puts the system in the velocity mode. The microprocessor starts incrementing the D to A converter 26 as fast as possible. The analog voltage output of the D to A converter 26 will thus increase rapidly. Since the velocity of the motor will initially lag behind the desired velocity as indicated by the output of the D to A converter 26, a relatively large error signal will be generated by the summing amplifier 28. This error signal is processed by the absolute value and current limiting circuitry 32, and signals representing the magnitude of the error are coupled to the power amplifier 12 through the Gumming amplifiers 34 and 36 and the damping selector 14.When the system is in the velocity mode, the amplifiers 34 and 36 and the selector 14 simply provide straight connections between the circuitry 32 and the power amplifier 12, since the switch 38 is open. By forcing CO C1 low, the commutator and phase advance circuitry 16 is controlled so that the motor will accelerate as long as there is an error between the velocity command and response. As the D to A output increments faster than the motor responds, the error voltage will be limited by the limiter 32 quickly. The limiting is detected by the processor on line Vo, and the D to A output is held constant until the response catches up and the error voltage falls below the limit level. At this point the microprocessor increments the D to A output again, and the process repeats. The limit is chosen at a value slightly lower than the demagnetization level of the motor so that the motor is accelerated at the maximum rate possible This method of control in the velocity mode allows the stepping motor to accelerate at its maximum potential while maintaining control.The motor velocity is directly dependent upon the velocity command. When the velocity command reaches a predetermined level, called the terminal velocity, the microprocessor will stop incrementing the D to A, putting the system into a constant velocity mode. Input CA2 is polled looking for the pulse indicating the start of deceleration i.e., a predetermined point where deceleration should begin , and when it is encountered the microprocessor starts to decrement the D to A output as rapidly as possible. When the error voltage limits, the microprocessor will stop decrementing the D to A output until the velocity response again. catches up . As soon as the error voltage drops below the limit, the microprocessor will start decrementing the D to A output again, and the process repeats. The velocity profile generator 25 establishes a velociy profile as shown in FIGURE 2. Minimum step time is obtained by using an essentially triangular velocity profile. In addition, for a given step time, the triangular velocity profile has the lowest acceleration. On the deceleration side, the profile is a staircase, and includes a number of velocity plateaus . When the D to A output reaches one of the velocity plateaus, the microprocessor will hold that level until an encoder transition at CA2 occurs. At this point the microprocessor repeats the deceleration staircase until the final encoder transition is encountered, at which time the D to A output is set to a fixed level for the position mode gain, and CO C1 and Vinit are forced high, putting the system into position mode. The velocity plateaus create a staircase effect when decelerating. The purpose of these plateaus is to provide velocity position checkpoints so that the velocity error when entering the position mode is small. This means motor overshoot and settling time are insignificant and can be ignored. If these plateaus are needed, the greater the number used, the shorter the step time will be. Therefore, it is preferable in the present embodiment that the number of plateaus is seven, equal to the. number of encoder transitions during deceleration. The microprozessor is preferably provided with an appropriate control programThe control provided by the microprocessor could alternatively be accomplished with TTL circuitry, although such an implementation would be more expensive. The D to A converter 26 is shown in greater detail in FIGURE 3. The converter includes a plurality of inverter buffers 44 which receive inputs from the microprocessor, a digital to analog converter 46, a reference current generator 48 and a current to voltage converter 50. The reference current generator 48 provides a highly accurate 2 ma reference for the converter 46, and is comprised of an amplifier Al, resistors R1 R4 and diodes D1 and D2. The converter 50 converts the current output of the digital to analog converter 46 to a voltage output Vc. The converter 50 includes an amplifier A2 and resistors R5 and R6. R6 is a potentiometer which is used to adjust the servo System for proper step response. The circuitry of the summing amplifier 28 and absolute value and current limiter 32 is shown in FIGURE 4.Elements C8, R7 R10 and A3 make up the summing amplifier 28.The switch 30 opens and closes the velocity loop. The summing amp circuitry is simply an op amp used in the inverting mode. Resistors R7 R9 are selected to set the proper loop gain. C8 creates an open loop pole at l200 Hz. The summing amp subtracts the velocity signal from the output Vc of the velocity profile generator and provides a difference signal at its output. The absolute value circuitry includes an amplifierA4, resistors R11 and R12 and a diode D5. This circuit gives an output equal to the absolute value of the error signal. The magnitude of this signal is limited by a current limiter including amplifier A5, resistor R19 and diodes D3 and D4. Whenever the error exceeds a limit set byD3, D4 and R19, the output of A5 is clamped to a predetermined level. When this occurs, a logic signal VO is generated by a circuit including comparator CPl and resistors R15 R18. The current limit is chosen to be at a level just below motor demagnetization. A signal T3 is generated by circuitry including amplifier A6, resistors R13 and R14, capacitor Cl and a diode D6 to indicate the polarity of the error signal. A portion of the commutating and phase advance circuitry 16 and the squaring circuitry 22 is shown inFIGURES 5 and 6. The commutating circuitry provides control signals A, A, B and B which select which phases of the motor will be energized. In addition, phase advance is provided to insure maximum accelerating and decelerating torque and to compensate for the time constant of the motor. The squaring circuitry 22 includes comparatorsCP2 and CP3 and resistors R45 RS0. The outputs CA1 and CA2 of the squaring circuitry are fed to a two phase frequency divider composed of gates U8, gated latches U10 and till, a gate U5 and an inverter U7. The frequency divider provides outputs X2 and Y2 which are connected as inputs to an adder 50. Signals CA1 and CA2 from the squaring circuitry are also coupled to inputs of the adder, with the signal CA1 being coupled via gate U9 and CA2 coupled via gate US. The four inputs A1 A4 to the adder 50 make up a four bit number which represents motor position within one motor phase cycle. The energization of the motor phases is controlled as a function of motor position. The adder provides output signals X2 , Y1 through a gate U14 andY2 . These signals are inverted by inverters U12. The inverted signals are used along with Y1 to generate the control signals A, , B and B, which are delivered to the power amplifier 12. Delay circuitry including OR gates U6, resistors RS1 R54 and capacitors C2 CS creates a short delay between the rising edge of one signal and the falling edge of its complement so that the power amplifier output transistors do not cause coincident energization of complementary phases of the motor. An additional four bit number provided at inputsB1 B4 of the adder 50 is employed to create a phase advance or retard in the motor timing. This phase shift is provided to insure maximum torque during acceleration and deceleration. During acceleration, a positive.900 phase shift is added to provide maximum torque. Maximum deceleration torque is provided by a negative 90 or positive 270 phase shift. The direction of the phase shift compensation is controlled by the polarity signal T3 from the absolute value circuit 32, which indicates the direction of error of the velocity signal. The signal T3 is connected to the adder through a gate U16.When T3 goes high, indicating that the velocity is greater than the desired velocity, the input B4 goes high, giving an additional 180 positive phase shift. This provides maximum deceleration torque. As the velocity of the motor increases, additional phase advance is required to maintain maximum torque due to the motor time constant. The phase advance circuit shown inFIGURE 7 generates outputs To T1 and T2 to provide this necessary phase advance. Basically, this circuit is a on linear analog to digital converter whose output is a function of motor velocity. The outputs of comparatorsCP4 CP7 are normally low, but go high when the motor velocity signal Vt exceeds the value set by potentiometers R55 R58, A priority encoder U13 outputs one of six three bit words corresponding to an electrical phase shift of the motor timings.When input Cl is high during the position mode the outputs are all high, corresponding to a phase of 00. When C1 is low, the inputs from the comparators are enabled, and the output of the priority encoder will be a number corresponding Q a phase shift of between plus 900 and plus 1800 in 22.50 increments. Op amp A14 and resistorsR75 and R76 FIGURE 8 invert the velocity signal from the tachometer circuitry 20 for use by the comparators. Thus, the commutator and phase advance circuitry of FIGURES 5 and 7 controls the connection of the error signals to the proper phases of the motor. The circuitry provides either a positive 900 or negative 900 positive 2700 phase shift to provide maximum accelerating or decelerating torque. In addition, because of the motor electrical time constant, additional phase advance is added at higher speeds to maintain maximum torque. The microprocessor 24 monitors the position of the motor by counting transitions at CA2. When the motor has reached a predetermined position, the microprocessor causes the signal CO C1 to go high, which causes the system to switch to the position mode. In this mode, the switch 30 is opened and the switch 38 is closed. In addition, the signalCO C1 puts the phase shift at zero. When the system switches to the position mode, the velocity profile generator 25 provides a constant voltage signal for driving the motor in a stepping mode. The velocity signal from the velocity profile generator is passed through the first summing amplifier 28 to the second and third summing amplifiers 34 and 36, The amplifier 34 sums the constant voltage from the velocity, profile generator passed through the circuit 32 as Ve with the velocity output of the tachometer circuitry 20, and the summing amplifier 36 sums the constant voltage with the inverse of velocity. As shown in FIGURE 9, switch 38, inverter 40 and resistor R21 form a switch to close the position velocity loop when in the position mode.An inverting amplifier including op amp A7 and resistors R20 and R22 give the velocity signal W the proper polarity and gain for critical damping. The summing amplifier 34 includes an amplifier A8 and resistors R23 R26. The summing amplifier 36 includes an amplifier A9 and resistorsR27 R30. The summing amplifiers thus provide signals Va which equals Ve Kw and V which equals Ve Row . These signals are then provided to the damping selector 14. The damping selector 14 FIGURE 10 routes the signals from the summing amplifiers 34 and 36 to the proper phases in the power amplifier 12. The damping selector is shown in detail in FIGURE 10. The outputs Va and Vb are coupled to switches S3 S6 for proper phase pair selection.These switches are controlled by the signals X2 and X2 from the commutator. Switches S3 and S4 and resistors R35 and R36 are used to select either input Va or Vb to be sent to the output Va. Switches S5 and S6 and resistors R32 and R34 are used to select either input Vb or Va to be sent to the output Vb. Op amps Alto, All and resistors R31 or R33 form two inverters in series to give no polarity change. Op amps Awl2, A13 and resistors R32 or R34 and R42 R44 perform a similar function. Resistors R35 R38 eliminate FET switching transients from the output.The outputs Va and Vb are coupled to the power amplifier 12 to drive the motor. The damping selector thus provides current signals which are a function of velocity. As the motor comes close to the null position i.e., the desired position it has a natural tendency to ring. In order to overcome this tendency, a velocity signal is added in one phase, and subtracted in the other to increase and decrease the drive currents as required. That is, as the motor initially approaches the null point with a positive velocity, the null point is effectively shifted proportional to velocity in such a manner that the motor velocity decreases smoothly to zero at the null point. the null position. The provision of the velocity feedback thus tends to cause the motor toEMI15.1 stop at the null position more rapidly than would otherwise be the case. The tachometer 20 is shown in detail in FIGURE 11This is an electronic tachometer which uses the slope magnitude sampling method to obtain velocity signals. Op amps A15 and A16 along with resistors R77 80 amplify the encoder outputs to the desired level. Op amps A17 and Al9 along with resistors R81, R82, R86, R87 and R88 and capacitors C6 and C7 form differentiators whose output amplitude is proportional to the input slope, which is in turn proportional to velocity. A18, A20, R83, R84, R89 andR90 invert the differentiator outputs so there is always either a positive signal at one of the four inputs to the switches s7 510, or a negative signal at one of the four switch inputs.Comparators CP8 and CP9, encoder U14 and resistors R92 R98 select which switch to turn on at anytime so that the output is a continuous positive or negative signal, depending on the direction of motor rotation. Op amp A21 amplifies the switched signal for the final tachometer output. Potentiometer RIDS adjusts the tachometer gain. Potentiometer R88 is used to equalize the two differentiated signals. In summary, the present invention provides a motor control system employing a stepping motor which is effectively driven as a DC brushless motor during initial acceleration and deceleration and is switched to operate as a stepping motor only during final positioning. When in the velocity mode, closed loop commutation is used to control the switching of the phases so that there is maximum torque utilization. Furthermore, the phase switching is advanced electronically as a function of velocity so that torque is optimized at all motor velocities. A closed loop control system is utilized when in the velocity mode. A micro processor controls the step motor operation and the closed loop approach enables the motor to step at its full potential while being controlled. Near the end of a step from one line to the next, the system is switched so as to cause the motor to function as a step motor. Velocity dependent damping is added to further improve the positioning of the motor. Although the invention has been described in terms of specific circuitry, it should be appreciated that many modifications and variations will occur to those skilled in the art. Therefore, the scope of the invention should be determined from the appended claims rather than the foregoing description.