# Process and apparatus for bilevel coding of colour video signals.

## Abstract
Bilevel coding of colour video signs, for example video teleconference or NTSC broadcast television signals, is used to reduce the required storage capacity or trans mission channel bandwidth. Each multi level or continuous tone picture element in a frame is compared to a threshold and assigned one of two values depending upon whether or not it exceeds the threshold value. The threshold is produced by averaging tne luminance components of neigh bouring picture elements and constraining the average by a signal derived from the chrominance of the original video signal. A significant feature is that the use of the chromi nance signal in this way obviates the need, common to known monochrome systems, of adding noise or dither signal to the signal with concomitant picture degrading artifacts.

## Claims
Claims 1. Video signal processing apparatus comprising means for bilevel coding discrete picture elements of a colour video signal having a luminance component and a chrominance component, including means for deriving from a plurality of picture elementsIncluding at least one picture element other than the picture element to be encoded a first signal, 0 l , proportional to said luminance component means for deriving a second signal C1j proportional to said chrominance component means for computing from sald the first and second signals a threshold signal B1, and a comparator for comparing said picture element to be encoded with said threshold value and providing an output signal V1j having either one of two states In dependence upon whether or not said picture element exceeds said threshold value. 2. Video signal processing apparatus as defined in claim 1, wherein said means for deriving a luminance proportional signal comprises means for computing a weighted average of the luminance and chrominance components of a plurality of picture elements. 3. Video signal processing apparatus as defined in claim 2, wherein said means for computing is adapted to compute said weighted average P1, In accordance with the formulaEMI9.1 where anm is a weighting factor and Xz n j m adjacent picture elements values. 4. Video signal processing apparatus as defined in claim 2, wherein said means for deriving said luminance proportional signal is arranged to tompute said signal from a plurality of neighbouring picture elements. 5. Video signal processing apparatus as defined in claim 4, wherein said plurality of neighbouring picture elements comprise a 3 x 3 matrix including said picture element to be encoded. 6. Video signal processing apparatus as defined in claim 5, wherein said means for deriving said lumfnance proportional signal comprises two line delays connected serially between the input and an adder, the input being connected directly to one adder input, the output of the first delay connected to a second adder input and the second line delay connected to a third adder input. 7. Video signal processing apparatus as defined in claim 6, further comprising two picture element delays connected serially between the output of said adder and a first input of a second adder, the output of the first adder being connected to a second input of the second adder and the output of the first picture element delay being connected to a third input of the second adder. 8. Video signal processing apparatus as defined in claim 1, wherein said means for deriving a chrominance proportional signal comprises a bandpass filter having a pass band to pass the chrominance signal. 9. Video signal processing apparatus as defined in claim 8, wherein said filter comprises a one or two dimensional digital filter. 10. Video signal processing apparatus as defined in claim 8 wherein said means for deriving a chrominance proportlonal signal further comprises means responsive to the output of the filter for providing a contrast enhancement factor 11. Video signal processing apparatus as defined in claim 10, wherein said means for providing said contrast enhancement factor is arranged to do so in accordance with the formula Y1 r a sslC where Cij is the magnitude of Cij and a and B are constants. 12. Video signal processing apparatus as defined in claim 11, wherein a is in the range 5 to 20. 13. Video signal processing apparatus as defined in claim 12, wherein a is equal to 10. 14. Video signal processing apparatus as defined in claim 11, wherein ss is in the range 0.5 to 2.0. 15. Video signal processing apparatus as defined in claim 14, wherein ss is equal to 1. 16. Video signal processing apparatus as defined in claim 1, wherein said means for computing said threshold signal Brj is arranged to do so in accordance with the formula B1j Yjj 1 2yj R B,j where gamma ij is a contrast enhancement factor related to said chrominance proportional signal and R is the maximum range of the video signal. 17. A process for bilevel coding of a colour video signal having a luminance component and a chrominance component comprising the steps of 1 deriving from a plurality of picture elements including one or nxore picture elements other than the picture element to be encoded a first signal ij proportional to said luminance component of the video signal 11 deriving a second signal Csj proportional to said chrominance component iii computing from said first and second signals psj and C1j a threshold value iv comparing said picture element to be encoded with said threshold value and providing an output having either one of two states in dependence upon whether or not said picture element exceeds said threshold value. 18. A process as defined in claim 17, wherein the step of deriving a luminance proportional signal includes computing a weighted average of a plurality of picture elements. 19. A process as defined in claim 15, wherein said constrained average ij is computed in accordance with the relationshipEMI13.1 where anm is a weighting coefficient and Xi n j m the values of said plurality of picture elements. 20. A process as defined in claim 19, wherein said plurality of picture elements comprises with the element to be encoded a 3 by 3 matrix. 21. A process as defined in claim 14, wherein said signal C1 is derived by extracting the chrominance signal by means of a bandpass filter whose centre frequency is at. fsc. 22. A process as defined in claim 18, wherein a contrast enhancement factor gamma ij is computed from the signal C1j in accordance with the relationship gamma ij alpha ss Cij where alpha is in the range 5 to 10, ss is in the range 0.5 to 2.0, and lC1ji is the absolute value of C1j. 23. A process as defined in claim 22, wherein a is equal to 10. 24. A process as defined in claim 22, wherein ss is equal to unity. 25. A process as defined in claim 19, wherein said threshold value Bij is computed in accordance with the relationship B1j Yjj 1 2 gamma ij R ij where R is the maximum range of the video signal.

## Description
Process and Apparatus for Bilevel Coding of Colour Video Si a fldls The invention relates to video signal processing1 particularly to a method and apparatus for bilevel coding or representation of colour video signals1 and is especially applicable to composite television signals, for example NTSC broadcast colour television signals. Whether a video signal originates as a broadcast television signal or otherwise, for example in an interactive visual communications system using video terminals and telephone lines, the need often arises to code the signal to reduce the required storage capacity or transmission channel bandwidth. Also in television programme production it is sometimes desirable to create a stylized representation or a sketch of the picture for special effects or animation. A type of process evolved for this purpose is so called 1bilevel coding representation . In such a process, each multl level or continuous tone point in the frame, or picture element Pel , is represented in bilevel form, i.e. tt can assume only one of two states, typically high or low.Consequently only one digital bit is required to represent each picture element and the receiver can be very simple. Basically bilevel coding involves comparing the picture element intensity with a threshold value and, depending upon whether or not it exceeds the threshold, assigning a corresponding output signal to either a high or low state. Generally the threshold value is chosen1 and hence varied, according to the content of an area of the picture surrounding or adjacent to the picture element being coded at a particular instant. Determination of the threshold value affects the ability to preserve grey scale rendition, apparent contrast and detail in the picture. Hitherto bilevel coding has generally been limited to monochrome signals. One known process, known as the ordered dither technique is disclosed in a paper entitled Design of dither waveforms for quantized visual signals11 by Jt 0. Limb. Bell System Technical Journal No. 48, 1969 pp. 2555 2582 and a paper entitled ZAn optimum method for two level rendition of continuous tone pictures , by B. E. Bayer, ICC conference record, 1973 pp. 26 11, 26 15. In this process a set of predetermined position dependent thresholds are used to derive the bilevel picture elements or a random dither signal, for example noise, is added to the multilevel picture. The process is primarily suited to bilevel displays since an objectionable flicker is usually perceived if the signal is displayed on a television monitor. Also, the process is not satisfactory for colour television signals due to excessive high frequency components in the chrominance bands which overlap with the chrominance signal and distort it. An alternative process, known as the constrained average technique is disclosed in U.S. Patent number 3,961,134 issued June 1, 1976, which is hereby incorporated by reference. In this process the threshold value is chosen as a function of the local average within an area surrounding the point or picture element. To produce an apparent grey scale the process utilizes noise in the video signal To alleviate the reliance upon an Indeterminate parameter a controlled amount of noise dither is added to the video signal, in effect utilizing the ordered dither technique. Accordingly, the resulting picture suffers from the same problems of flicker and chrominance band distortion. An object of the present invention is to eliminate or at least mitigate these problems in providing a process and apparatus for bilevel coding of a colour video signal. According to one aspect of the present invention a process for bilevel coding of a colour video signal includes the steps of 1 deriving from a plurality of picture elements a first signal proportional to the luminance component of the colour video signal 11 deriving a second signal proportional to the chrominance component of the colour video signal iii computing from the first and second signals a threshold value iv comparing a picture element value to the threshold value and deriving an output signal having one of two states in dependence upon whether or not the picture element value exceeds the threshold value. In preferred embodiments of the invention the signal proportional to the luminance component is a weighted constrained average ij , computed, for example, in accordance with the equationEMI3.1 where X is the pel value and anm is the weighting coefficient chosen to the signal proportional to the luminance. Then the chrominance proportional signal C1j 1 which acts as a dither signal producing an apparent grey scale, is used to derive a contrast enhancement factor X1j thus gamma ij alpha ss Cij where a and ss are constants. Conveniently a is in the range 5 20, preferably 101 and ss is in the range 0.5 2, preferably 1.0. Cij denotes the absolute value or magnitude of C1j. The threshold value 81j is then computed as Bls 2tt R P1 Where Yij is the contrast enhancement factor and R is the maximum range of the video signal, for example 256 for an 8 bit digital signal. According to another aspect, the invention comprises apparatus for Implementing the process of the first aspect. Thus, said apparatus comprises means for deriving from a plurality of picture elements a first signal proportional to the luminance component of the colour video signal means for deriving a second signal proportional to the chrominance component of the colour video signal means for computing from the first and second signals a threshold value and means for comparing a picture element value to said threshold value to derive an output signal having one of two states in dependence upon whether the picture element value exceeds the threshold value or not. Means for deriving the chrominance proportional signal may conveniently comprise a bandpass filter having a pass band encompassing the chrominance subcarrier frequency fsc Such bandpass filter may be a one or two dimensional digital filter. A particularly simple apparatus may be realized if the signal proportional to the luminance component is a weighted constrained S1j average of the form EMI4.1 and furthermore if the weighting coefficient anm is substantially unity and N1 is an integer multiple of the subcarrier cycles.Thus if a sampling frequency of 3fst were used, M1 would be multiples of three. An exemplary embodiment of the invention will now be described with reference to the accompanying drawings, in which Figure 1 is a schematic block representation of apparatus for bilevel coding of a colour video signal and Figure 2 is a more detailed representation of the apparatus for a sampling frequency triple the colour subcarrier frequency. It should be understood that although the input video signal can be analog or digital, for the specific embodiment the input signal is in digital form, for example 8 bits, and could be derived from a store, wherein it is stored still in digital form, or could be derived from a camera or other such source with an intervening analog digital converter to convert it to the digital format required for input to the apparatus.The output bilevel signal will be decoded in the receiver. Since the receiver decoding circuit is known, it too is not shown in the drawing.Typically the receiver will comprise a standard monitor with a one bit digitallanalog converter. Referring to Figure 1, apparatus for bilevel coding an NTSC composite colour video signal comprises an input terminal 10 to which is applied the digital video signal to be encoded sampled at three times the colour subcarrier frequency sc The input terminal 10 is connected to, respectively, an input 12 of summing means 14, an input 16 of a bandpass filter 18 and an input 20 of a comparator 22. The sumning means 14 serves to compute from the input picture elements X a constrained weighted average according to the formula EMI6.1 anm X1 n, Xi n,j m is the picture element preceding the particular element being encoded.As can be seen from Figure 2, summing means 14 is adapted to sum nine preceding picture elements to produce the weighted constrained average Bi. Thus, humming means 14 comprises two delays 24 and 26, each equal to the duration of one line scan of the signal. The delays 24 and 26 are connected in series between the input 12 and one input 28 of an adder 30. The input 12 also is connected directly to an input 32 of the adder 30. A third input 34 of the adder 30 is connected to the output 36 of the first delay 24. The output of the adder 30, on line 38, is applied to the input 40 of a delay 42, equal to the duration of one picture element Pel . Line 38 also is connected to an input 44 of a second adder 46.The output of the Pel delay 42 is applied to a second input 48 of the adder 46 and to a second Pel delay 50, the output of which is applied to a third input 52 of the adder 46. The output of adder 46 is connected to a divider 54, where the sunmed signal is divided by nine to give the signal 0 proportional to the luminance of the composite colour video signal Xffij. For this case the individual coefficients anm for each delay or Pel is equal to one ninth. Sampling at 3fscb the sequence of values of each three successive picture elements will be Y I, 14Y 2 Q and Y 2 Q, where Y is the luminance component and I and Q are the chrominance components.It will be seen that when these are sunned the resultant is proportional to luminance only. As will be described more fully hereafter, other proportions can be used depending upon sampling frequency and number of samples. Bandpass filter 18 is a one or two dimensional digital filter arranged to pass the chrominance signal, Cij. The centre frequency of the passband is fsc, where fsc is the subcarrier frequency. The output of the filter 18 is connected to the input of means 54 for deriving a contrast enhancement factor proportional to the absolute value of Cij plus a constanto. Means 54 comprises a device 56 for deriving the magnitude, in effect a rectifier , the output of which is applied by way of an multiplier 58, having a multiplication factor ss, to an input 60 of an adder 62. A second input 64 of the adder 62 is connected to a reference source having a value a.The output Yj l of the adder 62 is connected to an input 66 of means 68 for computing the threshold value Bj according to the equation Bij gamma ij 1 2 gamma ij R ij Where gamma ij is the contrast enhancement factor and R is the maximum range of the video signal, for example 256 for an 8 bit digital signal. A second Input 70 of means 68 is connected to the output of divider 54. The output of computing means 68 is applied to a second input 72 of comparator 22. The input signal from terminal 12 is applied to the first input 20 of the comparator by way of a delay 74, equal to the delay of the bandpass filter 18. The output of the comparator 22 constitutes the output bilevel signal for storage and or transmission. As mentioned previously, the means 14 derives the weighted constrained average ij from nine picture elements in a 3 x 3 matrix. The last element, in a conventional scan at the corner of the matrix, is the element X1 applied also to the comparator 22 and hence compared with the threshold value Bij. The output bilevel signal Vij will be high S1 if the element intensity X1 g exceeds Bij and low S0 if it does not. As mentioned previously, the values of anm can be chosen to render a signal proportional to luminance only, even though it has other than nine samples and a different sampling frequency. For example, at four times the colour subcarrier sampling frequency 4f the coefficients for anm can be EMI8.1 tb SEP 1 SEP 0 SEP 2 SEP 0 SEP 1 tb 1 SEP 2 SEP 0 SEP 12 SEP 0 SEP 2 SEP tb 16 SEP 1 SEP 0 SEP 2 SEP 0 1 tb It should be appreciated that although the specific description is for a digital video signal, the Invention is not limited to digital signals but also comprehends analog signal processing.Then means for deriving the luminance related signal could be a low pass filter, means for deriving the contrast enhancement factor could be a rectifier, amplifier and adder or summing amplifier, and means for computing the threshold value B1 would use suitable analog devices. It will also be appreciated that for some applications, such as stylized single frame images, the invention need not be embodied using the precise circuit element described hereinbefore, but could be put into practice using a microprocessor. With suitable modification the invention could be applied to component colour video signals, i.e. in which the luminance and chrominance components have previously been separated. A significant advantage of using the chrominance signal to constrain the averaged luminance signal is that the video signal reproduced can be kept relatively free from objectionable artifacts such as flicker or distorted colour. It will be appreciated that to add noise as in the various dither techniques mentioned in the introduction will generally degrade picture quality.