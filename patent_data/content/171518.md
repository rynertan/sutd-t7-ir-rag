# BUFFER CIRCUIT FOR RANDOM ACCESS MEMORY

## Claims
Schaltung für einen dynamischen Reihenpuffer für einen Chip mit einem dynamischen Speicher mit wahlfreiem Zugriff, die einen primären Eingang Ausgang Anschluß und einen sekundären Ausganganschluß und eine Mehrzahl mit einer Speicheranordnung verbundener Bit Leseverstärker aufweist,

## Description
This invention generally relates to dynamic random access memory DRAM circuits, and more particularly to a fully dynamic row buffer circuit for a DRAM chip which enables the DRAM chip to be used for special function applications with minimum design effort, chip area requirements and power consumption. DRAM chips are well known the art. One example is disclosed by Robert J Proebstring and Robert S Green in U S Patent No. 3,969,706. This patent discloses a MISFET dynamic RAM chip wherein information from an address row are read and transferred to a column register. ONe bit in the column register is then selected by the column address decoder so that data is transferred from that bit to a data output latch. Upon completion of the row address strobe cycle, each cell in the address row is automatically refreshed by the data in respective bit position of the column register. The state of the data output latch remains valid until a subsequent column address strobe is received. Read, write and read modify write cycles are supported. The entire system is substantially dynamic in operation which results in very low power consumption characteristic of DRAMs. U.S. Patent No. 4,422,16 to Hiroshi Watanabe discloses a memory device comprising an array of memory cells, a row decoder, a column decoder, and a shift register in parallel with the column decoder. Shift operation of the shift register is effected at each time the column strobe signal Also known in the art are shift register circuits having each stage comprised of a master circuit and a slave circuit. One example is disclosed by Robert J. Scavuzzo in U.S. Patent No. 4,386,282. This patent discloses emitter function logic EFL shift register circuits having right and left shift capability, asynchronous set and clear, and asynchronous parallel load capability. Other examples of master slave circuits are disclosed in U.S. Patent No. 4,359,647 to Wolfgang Trinkl and U.S. Patent No. 4,356,411 to Yosoji Suzuki and Minoru Takada. European publication EP A 0097778 H. Dill discloses a dynamic RAM DRAM having a second data transfer port which is provided to improve the efficiency of data transfer to and from the memory. Dill provides an internal row buffer register connected in parallel with the RAM sense amplifiers. When a row is addressed and a read transfer pulse is applied to the register, the row word transfer to the row buffer register is completed. A subsequent signal applied to the row buffer shift register will clock the contents of the register to a second input output port. One application for the Dill dynamic RAM is in a bit map display device wherein the second output port is used to supply the refresh data to a CRT display. The primary input output port is then used to update the memory with new pixel data for later display without incurring delays from tying up the primary input output port with refresh information for the display. Examples of such bit map displays are disclosed in EP A 0097834. The present invention provides a dynamic row buffer circuit for a dynamic random access memory chip comprising a primary input output port and a secondary output port, and a plurality of bit sense amplifiers connected to a memory array, This invention enables an improved row buffer circuit for dynamic RAMs to be provided which allows a continuous, asynchronous data stream to be supplied to an output device. A row buffer circuit for a DRAM using master slave technology is provided which achieves superior isolation of the row buffer from the memory array. The fully dynamic row buffer circuit according to the invention employs two independent registers called the row buffer master and the row buffer slave, where the latter is a parallel load, serial read out register. The row buffer master register consists of its own master and slave circuit, and the row buffer slave consists of its own master and slave. The entire row buffer can be isolated from the memory array, and when so isolated, the memory array can be accessed through the primary I O port in the same way as in an ordinary DRAM chip. The row buffer slave is driven by an asynchronous clock which can be changed on the fly to match the output device driven by the DRAM. This arrangement permits the conversion of a DRAM chip to a dual port display, printer or special function RAM thereby adding large value to the DRAM chip with little additional cost. The invention will be better understood from the following detailed description of the invention with reference to the drawings, in which The fully dynamic row buffer circuit according to the invention can be added to a dynamic RAM chip generally as indicated in Figure 1. The circuit can be used in existing RAM chips with a folded bit line organization without affecting the array and sense amplifier portions of the chip. The buffer circuit is totally dynamic, small and acts as a temporary storage for the array data by controlling clocks. The functional operation of the row buffer can be understood from the block diagram of Figure 2. There are two independent registers called the row buffer master and the row buffer slave, where the latter is a parallel load, serial read out register. Each of these registers is, in turn, composed of the necessary master slave arrangement. For instance, the row buffer master register consists of its own master, M1, and slave, S1, circuits. Likewise, the row buffer slave consists of master, M2, and slave, S2, circuits. This entire row buffer can be isolated from the memory array. When the row buffer is isolated from the rest of the chip, the memory array can be accessed through the primary I O port in the same way as in an ordinary dynamic RAM chip. There are three new control pins for the chip Load Master Register Figure 3 illustrates a specific application of DRAMs provided with dynamic row buffers as shown in Figure 2. In the application illustrated in Figure 3, 16 64K DRAM chips are integrated into a cathode ray tube CRT display system. With the provision of a row buffer master register and a row buffer slave register, the master can be loaded at any time when a free memory cycle is available. Also, the slave can be loaded at any time during a reasonably wide window to avoid critical timing of these pel signals to the CRT screen. One fundamental point should be recognized concerning the timing relation between the primary and secondary ports. During loading of the row buffer master register, the primary and secondary ports must be synchronized, i.e. In Figure 3, it is assumed that the screen is 1 24 by 1 24 pels and the bit buffer is composed of the 16 DRAM chips. Assuming each DRAM chip is a 64K chip, the dynamic row buffer is a 256 bit buffer. The peripheral counters, registers and logic are assumed to be TTL like, with loading of requested slaves from masters occurring on the clock falling edge. The initial conditions are as follows The 4 bit, 16 position counter, C1, counts the 16 positions of the CRT register and thus controls filling and shifting of this register. The 6 bit, 64 position counter, C2, in combination with C1 counts the 1 24 pels per scan line. Alternatively, one 1 bit counter running directly off CL could be used instead. Thus, this combination is used to trigger the horizontal flyback of the CRT when the 1 24 pels of each scan line are refreshed. The 2 bit, 4 position counter, C3, in combination with C1 and C2 counts the 4 96 bits stored in the 256 bit row buffers on the 16 DRAM chips. Thus, this combination is used to control the filling of the row buffer master and slave shift register. Since C1 is initially , as CL comes up AND gate A2 will open and load the first 16 pels, one from each chip, into the master portion M Clock CL also causes C1 to increment its count by 1 in a typical master slave fashion. On each subsequent CL period, A2 stays off while A4 turns on, thus shifting the CRT register but not loading any data. In addition, when C1 equals 2 or greater, the row buffer receives one shift pulse, CSR, which shifts it one position thereby making the next 16 pel signals available at the secondary output port. However, these are not latched into the CRT register until C1 reaches once again. When this does happen, the 16 pels are loaded back to back with the last bit of the previous 16 so no clock cycles are lost and with no special timing interrupts. This is the advantage of a master slave design through put. The first load of the 256 bit row buffer on the 16 chips gives a total of 16x256 4 96 pels, which is equivalent to four scan lines on the CRT. Hence, when 64 bits have been read out of each of the 16 row buffers, the free running process must be temporarily halted to allow for horizontal flyback. This is done by counter C2 which counts 64 cycles of C1, i.e., increments when C1 , and inhibits the CRT clock CL for sufficient time to allow flyback. The CL is allowed to run again, providing pels for the next scan line. When all 256 bits have been read out of the row buffers, only four scan lines will have been refreshed on the CRT screen. To provide a continuous flow of refresh data to the CRT, it is only necessary that the push pull driver on the output of the slave portion of the row buffer have the new data after the flyback following the fourth scan line. This provides a very long time interval over which the master portion of the row buffer can be loaded, namely 256x15 CL cycles. The slave portion of the row buffer cannot be loaded until the last bit is read out of the CRT register. Hoever, this still gives 16 CL cycles 224ns. plus flyback time to issue an LSR signal and have the data latched and valid in the slave portion of the row buffer. The method by which the master portion of the row buffer is loaded can be done in many ways. One simple way is to just load it on the next memory cycle after the slave has been loaded with the previous data. While this prevents the remainder of the system from accessing the bit buffer for an explicit cycle, it nevertheless insures that the loading is completed. This is done with counter C3 in Figure 3. An alternative to this procedure is to allow the master to be loaded any time there is an unused memory cycle during this interval. However, the system designer must provide the necessary logic to test for an unused memory cycle, and if none occurs during this interval, then the memory cycle must be stolen in sufficient time to prevent loss of synchronization. The method of implementing the counters in Figure 3 requires that special attention be paid to the initial conditions and subsequent coincidence of the various count pulses. Any counter position is incremented by 1 on the falling edge of the input clock pulse. If C1 is initially set to at start up, there will be a positive signal of C1 into counter C2. When the very first CL pulse goes high and falls, the trailing edge will cause the signal C1 to also fall to . Since this latter is the clock pulse on C2, this counter will be incremented by 1. If C2 has a count of say decimal 63 all six positions are 1 , then this incoming pulse of C1 will not set C2 until the falling edge or slightly thereafter. Hence, at the moment C2 is set to , C1 is set to 1. If a coincidence of pulses C1 C2 is needed to trigger flyback, this will not occur until C1 cycles back to once again. Thus, C2 counts the beginning of a group of 16 bits out of the CRT register. The conclusion is that C2 should be initialized to and allowed to increment by 1 on the very first CL pulse. C2 will subsequently reach a count of at the beginning of the 64th group of 16 bits in the CRT register, and C1 will reach at the end of this group being shifted to the screen. This is the correct time for flyback to be triggered by AND gate A5. In a similar manner, counter C3 should be initialized to and allowed to increment on the very first CL pulse. It is then counting the beginning of the scan line, i.e., count of 1 in C3 means the first scan line has started and is in process. The count will remain high until a C2 pulse is generated and falls. Hence, a coincidence of C3 64 C2 in AND gate A6 occurs when the last of the 256 bits of the row buffer of each of the chips is about to be gated into the CRT register. Thus, it is time to activate The vertical flyback is not shown since that would be done in a very conventional manner. Normal incrementing of the 8 bit word address and counters would automatically reset these to and allow the cycle to repeat. While there are many other ways in which the off chip functions can be performed, this example shows the important timing considerations, pointing out the fact that the organization of the chip avoids any critical timing and allowing the system designer numerous options. The circuit schematic for one bit of the row buffer is shown in Figure 5. The circuit essentially consists of two latches for M1 and S1, a two phase shift register for M2 and S2 and some control gates. The latch M1 includes field effect transistor FET devices T1 and T1A coupled to the bit sense lines of the memory array by FET devices T and T A. The latch S1 includes cross coupled FET devices T6 and T6A coupled to the output of latch M1 by FET devices T5 and T5A. When 4 see Figure 7 is high, nodes N1 and N1A are equalized to the V This circuit has certain unique features. First note that the data in the row buffer master portion is held in M1. When data is passed to the row buffer slave, M2, it only passes momentarily through the S1 cross coupled latch T6 T6A. This latch acts more as an amplifier to quickly respond to the differential signal between nodes N3 and N3A. In some circuits, the data is held in the slave portion, e.g. S1, and would be gated out to node N4 with a clock pulse when needed. However, for this dynamic design, this would require a more complex circuit or another FET in series with the output. The latter would introduce additional V Some additional operational aspects of this circuit are as follows. In order to load the row buffer slave, LSR goes valid low, see Figure 7 and 3 rises, which bootstraps node N3 or N3A to give a strong signal. If node N3A is positive, then a strong positive charge is stored on node N4 which is the input to the shift register. In principle, 3 can now go to and node N4 will hold its state because whichever device, T5 or T5A, was previously on will stay on and ground node N3 or N3A, whichever was previously high. Now both will be grounded which lets node N4 float with no path to ground. So it stays where it was. The basic flow of data during typical operation is as follows. Data from 512 registers can be loaded in parallel into the M2 registers via 512 nodes N4. Once this is done, the data within the chain of M2 S2 can be shifted. For this to happen, devices T7 and T8 must both be off to allow node N4 to take on whatever charge is provided from the previous S2 stage out of devices T16 or T16A. The load master register, The various clocks required for this circuit to work are all generated from the three externally applied signals load master row buffer, In principle, the LMR signal can be applied at any time. When working with a dynamic chip as intended here, the LMR signal should become valid It is important that when B first falls to read out the previous data at node N6 to the output driver of the right most stage, the start of 3 rising on device T14 must be delayed until the data is valid and used. Then 3 must rise to remove any charge on node N6 in preparation for the next data cycle when B rises again. If 3 does not totally discharge node N6, then if the next data is no charge , there is no way to remove this leftover charge. Consequently, node N6 can be in an indeterminate state. The correct sequence of pulses is easily achieved by internal timing delays. While there are essentially only two clocks, A and B, which drive the shift register, there are actually four clocking sequences. These sequences occur on the rising and falling edges of these two clocks. Rising A only precharges node N5 positive while the correct charge is accumulating at the gate of FET device T1 either or charge . At the same time, B is rising and precharging node N7 high for preparation of the next charge transfer cycle. So A is precharging node N5 while B is reading the state of its input at node N6 likewise, when B is precharging node N7 high, A is reading the state of its input at node N4. Thus, a very fast, relatively simple and highly functional, dynamic row buffer circuit is achieved. Such a circuit can easily be incorporated into any dynamic memory chip which uses folded bit sense lines, or has other simple means for tapping the signal on all sense latches. A modification of the basic circuit may be made by adding a one out of n 1 256 in the specific example disclosed decoder parallel to the slave register so that a fully decoded output could be made available as an output. Other modifications may be made to the invention by those skilled in the art without departing from the scope of the appended claims.