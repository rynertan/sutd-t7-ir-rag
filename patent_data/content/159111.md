# Method and apparatus for storing retrieving digital data on video tape.

## Abstract
An input signal provided to a video cassette recorder has the following format a vertical synchronization pulse 101 followed by digital data data periods 1 256 included in 256 data periods. Each data period has 32 bytes of data followed by a horizontal sync pulse horiz 1 255 which includes a resynchronization pulse. The first half of the digital data is the same as the last half of the digital data. The last half of the digital data is inverted so that the signal average is constant. During data recovery, the last half is stored over the first half of data except during medial dropout.

## Claims
WHAT IS CLAIMED IS Claim 1. A method of storing digital information on a video cassette tape using a video cassette recorder by providing an input signal to the recorder for recording on to the tape, the input signal representing the digital information, said method comprising the steps of a. providing to the recorder as part of the input signal a first vertical synchronization pulse VI b. providing to the recorder as part of the input signal digital data encoded in A data periods data periods 1 256 between each first vertical synchronization pulse, each said data period having B bytes of data 32 bytes, Figure 2 , wherein A and B are positive integers and c. providing to the recorder as part of the input signal a resynchronization pulse 101 before the beginning of each said data period. Claim 2. The method of claim 1 wherein the average value of the magnitude of data between each first vertical pulse is substantially constant Figure 3 . Claim 3. The method of claim 2 wherein the first A 2 data periods include data which is equal and opposite in magnitude to the last A 2 data periods between each successive vertical synchronization pulse Figure 6 . Claim 4. The method of claim 3 further comprising the steps of a. providing to the recorder as part of the input signal a second vertical synchronization pulse V2 between the first vertical synchronization pulse VI and the first data period data period 1 and b. providing to the recorder as part of the input signal a horizontal synchronization pulse 102 at the end of each data period. Claim 5. The method of claim 4 wherein A equals 256 and B equals 32. Claim 6. The method of claim 5 wherein every other byte is inverted Figures 2 and 3 . Claim 7. The method of claim 6 wherein the period between resynchronization pulses is substantially 64 microseconds and wherein each resynchronization pulse has a width substantially equal to or greater than 0.25 microseconds Figure 1 . Claim 8. The video cassette tape resulting from the method of claims 1 7. Claim 9. A method for recovering digital information on a video cassette tape using a video cassette recorder by detecting an output signal from the recorder as the recorder reads the tape, the output signal representing the digital information, said method comprising the steps of a. detecting as part of the output signal a first vertical synchronization pulse VI b. detecting as part of the output signal digital data encoded in A data periods data periods 1 256 between each first vertical synchronization pulse, each said data period having B bytes of data 32 bytes, Figure 2 , wherein A and B are positive integers and c. detecting as part of the output signal a resynchronization pulse 101 before the beginning of each said data period. Claim 10. The method of claim 9 further including the step of synchronizing the encoded data detection to transitions in the encoded data Figures 1 and 4 . Claim 11. The method of claim 10 further including the steps of a. identifying by 503 parts of the output signal which are the result of media dropouts 507, 508 b. writing, except during said parts resulting from identified media dropouts, the digital data encoded in the first A 2 data periods into a buffer Figure 6, FIELD A and c. writing, except during said parts resulting from identified media dropouts, the data encoded in the last A 2 data periods in to the buffer at the same buffer locations corresponding the the data in the first A 2 data periods Figure 6, FIELD B . Claim 12. An apparatus Figure 5 for recapturing and decoding at least one period of digital data stored on a video cassette tape as a signal, said apparatus comprising a. a video cassette recorder 500 for reading the tape, detecting the signal and providing an output signal corresponding to the digital data b. a media dropout detector 503 associated with said recorder for identifying parts of the output signal which are the result of media dropouts c. means 503 for detecting the digital data represented by the output signal d. means 504, 505, 506, FIELD A for storing the first half of each period of digital data in a buffer except said parts resulting from identified media dropouts detected by said media dropout detector and e. means 504, 505, 506, FIELD B for storing the second half of each period of digital data in the buffer at the same buffer locations corresponding to the first half of each period except said parts resulting from identified media dropouts detected by said media dropout detector.

## Description
METHOD AND APPARATUS FORSTORING RETRIEVING DIGITAL DATA ON VIDEO TAPE The invention relates to systems for storing images and, in particular, to a method and apparatus for storing and retrieving digital data on a video cassette tape using a video cassette recorder. Image storage systems employing video cassette recorders are well known in the prior art such as described in U.S. Patent Application SerialNo. 06 431,542, filed September 30, 1982, incorporated herein by reference. However, such systems generally store frequency modulated analog data at a very slow data rate and do not include the type of error correction which is necessary for high digital data rate transfer. It is an object of this invention to provide a method and system for accurately and quickly storing or retrieving digital data on a video cassette tape using a video cassette recorder. The invention relates to a method of storing digital information on a video cassette tape using a video cassette recorder. An input signal is provided to the recorder for recording onto the tape, the input signal being representative of the video information. A first vertical synchronization pulse is provided to the recorder as part of the input signal. Digital data encoded in A data periods between each vertical synchronization pulse are provided to the recorder as part of the input signal.Each data period has B bytes of data wherein A and B are positive integers. A resynchronization pulse is provided as part of the input signal for recording on the cassette before the beginning of each data period. The invention also relates to a method for recovering digital information on a video cassette tape using a video cassette recorder. An output signal is detected from the recorder as the recorder reads the tape, the output signal being representative of the digital information. P first vertical synchronization pulse is detected as part of the output signal. Digital data encoded in A data periods between each first vertical synchronization pulse are detected as part of the output signal. A resynchronization pulse is detected before the beginning of each said data period as part of the output signal. The invention also relates to an apparatus for recapturing and decoding at least one period of digital data stored on a video cassette tape as a signal. The apparatus includes a video cassette recorder for reading the tape, detecting the signal and providing an output signal corresponding to the digital data. The recorder includes a media dropout detector for identifying parts of the output signal which are the result of media dropouts and means for detecting the digital data represented by the output signal. Means are provided for storing the first half of each period of digital data in a buffer except said parts resulting from identified media dropouts detected by the media dropout detector.Means are also provided for storing the second half of each period of digital data in the buffer at the same buffer locations corresponding to the first half of each period except said parts resulting from identified media dropouts detected by the media dropout detector. For a better understanding of the present inve tion, together with other and further objects, reference is made to the following description, taken in ccnjunction with the accompanying drawings, and its scope will be pointed out in the appended claims. Figure 1 is a diagram showing the signal format of a digital data signal which is recorded on a videc cassette tape according to the invention. Figure 2 is a diagram showing the 32 bytes of each data period. Figure 3 is a diagram illustrating various 8 bit bytes. Figures 4a and 4b are illustrations of the maxinum period of digital data without transitions. Figure 5 is a functional block diagram illustrating an error correction apparatus according to the invention. Figure 6 is a diagram illustrating error correction storage according to the invention. Figure 1 illustrates the signal format for a signal used in accordance with the invention. The lower portion of Figure 1 illustrates the field organization of the signal. Generally, the signal format must take the form of a standard black and white video signal so that it can be recorded on a video cassette tape by a video cassette recorder. A signal such as illustrated in Figure 1 would be provided to the input of a video cassette recorder. Because the signal format is similar to anNTSC black and white format, the recorder would be able to record the signal onto a video cassette tape.Furthermore, the recorder would be able to read the signal in the playback mode from a video cassette tape recorded with such a signal and would provide the signal at its output. The basic format of the signal is a vertical synchronization pulse followed by 256 data periods. Each of the data periods is preceded by a resynchronization pulse. In particular, as illustrated in Figure 1, the preferred signal format includes a first vertical synchronization pulse V1 followed by a second vertical synchronization pulse V2 which is then followed by 256 data periods. First vertical sync pulse V1 and second vertical sync pulseV2 are separated by a resynchronization pulse 100.The purpose and function of resync pulses will be discussed in greater detail below. The data periods illustrated in Figure 1 are numbered from 1 to 256. However, the actual number of data periods which can be stored between vertical sync pulses depends on the length of the data period and the tolerances of the video cassette recorder. In order to closely approximate a format which is similar to the NTSC format and to be compatible with a video cassette recorder, each data period approximates one TV line.There are 256 TV lines in a standard 512 line system.Each data period and horizontal synchronization period should approximate the standard TV timing to insure that the recorder can synchronize to the waveform. According to the invention, each data period is 64 microseconds and comprises 256 bits or 32 bytes of information as illustrated in Figure 2 followed by a 1.25 microsecond horizontal synchronization pulse. In order to obtain the highest data storage rate and the maximum volume of storage of digital information, the invention employs a recovery system configuration which resynchronizes itself from the actual data being recovered. In particular, the invention contemplates that the data recovery system for detecting the digital data at each data period will use data transitions from 1 to O or O to 1 to resynchronize the data recovery clock which times the detection of the digital information. As a result, it is necessary to force data transitions to provide a basis for which the data clock may be resynchronized. In order to force such data transitions, the following rule applies to the signal format an all zero or all one byte code is not permitted and every other byte is inverted or multiplied by a minus 1. Therefore, as shown in Figure 2, odd bytes within each data period are multiplied by a plus one 1 and even bytes are multiplied by a minus one 1 . Figures 3 and 4 illustrate various 8 bit byte configurations. Reference character 301 refers to an odd byte of digital value equal to 170 and reference character 302 refers to an even byte of digital value equal to 170. As is apparent, even byte 302 is inverted or multiplied by minus one 1 thereby being the opposite of odd byte 301. Similarly, reference characters 303 and 304 refer to odd and even bytes having a digital value equal to 85 reference characters 305 and 306 refer to odd and even bytes having a digital value equal to 1 and reference characters 307 and 308 refer to odd and even bytes having a digital value equal to 255. Because the value zero is not permitted for a byte, it is readily apparent from figures 4a and 4b that the maximum number of contiguous bits of information having the same voltage level value is 22 bits.In particular, as shown in Figure 4a if an odd byte of digital value equal to 128 is followed by an even byte of digital value equal to 255 which is then followed by an odd byte of digital value equal to 1, the last seven bits of the first odd byte, all eight bits of the even byte and the first seven bits of the last odd byte all have a zero value resulting in 22 contiguous bits of the same value. Similarly, as illustrated in Figure 4b, if a first even byte has a digital value equal to 128 and the next odd byte has a digital value equal to 255 and the last odd byte has a digital value equal to 1, 22 contiguous bits having the same voltage level value will result. Therefore, by not allowing a zero value byte and by multiplying every other byte by a minus one 1 , at least one data transition for every 22 bits of information is guaranteed. This means that the data clock will be resynchronized by a transition at least every 22 bits. As long as the data clock can remain in synchronization with the actual data rate for 22 bits, no data loss will result. This is because the timing between the data clock and the actual data will never be out of synchronization. There are various reason why the reading rate and the writing actual data rate will differ.First of all, most video cassette recorders use phase locked loops to control reading and writing head speeds. As a result, the instantaneous reading and writing speed may vary and the instantaneous writing speed can be different from the instantaneous reading speed. Furthermore, the data pulses which are actually stored are not square pulses as illustrated but usually have steep slopes. These steep slopes, in addition to the FM modulation detection, result in variations in determining the edges of the pulses representing the digital data resulting in variations in the recovered pulse widths. In addition to resynchronizing the recovery system clock with data transitions, the signal format also contemplates a resynchronization pulse 101 before the beginning of each data period to reset and clear the counter used in recapturing the data. In the signal format, resync pulse 101 is part of the horizontal synchronization pulses 102.Horizontal sync pulse 102 is provided as part of the signal format so that the format is compatible with the video cassette recorder. Preferably, horizontal sync pulse 102 is 1.25 microseconds in length the 0.25 microsecond resync pulse 101 at the end thereof. Referring to the field organization illustrated in Figure 1, the data periods between vertical sync pulses can be considered to define a field of two sections A and B. For error correction reasons which will be explained below, section B is the same data as section A. Therefore, sections A andB can be referred to as a single period of digital data wherein the first half of the digital data is the same as the last half of digital data. In order to be compatible with the video cassette recorder circuitry and, particularly, its clamping circuits, the average value of data over a vertical period 16 milliseconds should be approximately constant to prevent the recorder AC couple circuits from going in to a limiting condition. The limiting condition is unacceptable for data recovery because the recorder clamps recover to slowly for the data rates which are contemplated by this invention.Since the data in section A is equal to the data in section B, a constant average value can always be guaranteed by multiplying section A by plus one 1 and multiplying section 6 by minus one 1 or inverting section B. There are other minor modifications which may be required to permit data storage and retrieval by using a particular video cassette recorder. For example, in most recorders, the automatic gain control and pre emphasis circuits may not operate properly and should be disconnected. Figures 5 and 6 illustrate in block diagram form the error correction apparatus according the the invention. Video cassette recorder 500 includes video heads 501 which detect the signal recorded on the video cassette tape. The video signal is then provided as an output 502 from recorder 500 in the signal format as illustrated in Figure 1. Included within recorder 500 is a media dropout detector 503. Such detectors are well known in the art and are used to detect data transfer problems which occur between the tape and the video heads when the recorder is in the playback mode. Such data transfer problems may be the result of impurities in the video tape media, damaged media or dust or other foreign matter between the media and the head. The output signal provided by output 502 is applied to circuit 503 for detecting the digital data encoded in each of the data periods in section A and section B.The detected data is delayed by delay 504 and passes through a write don t write switch 505 before being stored in buffer 506. Buffer 506 is configured to hold one section of digital data so that it is first loaded with section A. However, buffer 506 is not loaded during identified periods of media dropout as detector 503 enables switch 504 to prevent writing.Section B is then written over section A in buffer 506 except during identified periods of media dropout.The result is a significant decrease in the error rate of the recaptured data. As shown in Figure 6, section A may suffer from media dropout 507 and section B may suffer from media dropout 508. The result is that section A would be stored in buffer 506 except for the data occurring during media dropout 507 in which case no data would be stored in buffer 506 at that equivalent address location. Subsequently, section B would be written over section A as stored in buffer 506. Since sectionB does not have a media dropout at the same equivalent location to section A and the likelihood of such is statistically very remote , section B will overwrite the data stored in buffer 506 including the missing data due to media dropout 507. However, when it is time to write the data corresponding to media dropout 508 in buffer 506, switch 504 will be enabled to prevent the writing of such data. The resulting section output from buffer 506 would be complete and would be provided by section B except for the identified dropouts occuring in section B i.e.dropout 508 which have been previously stored in buffer 505 during the writing of section A.