# ELECTRONIC CASH REGISTER

## Claims
Elektronische Registrierkasse, bei der Tastenpositionen eingestellt werden k√∂nnen, und mit einer Tastatur 4 , welche Tasten K1 K77 zum Eingeben von Tastencodes aufweist, und mit Anzeigemitteln 5

## Description
The present invention relates to an electronic cash register, and more particularly, it relates to an electronic cash register in which positions of respective keys arranged on a keyboard can be set optionally. In the field of an electronic cash register hereinafter referred to as ECR , there has generally been provided ones in which positions of respective keys arranged on keyboards can be optionally set to some extent. However, even in such an ECR having key position setting function, keys required at least for use in setting of key positions fundamental keys are generally set in a fixed manner in predetermined positions on the keyboard. In other words, fundamental keys such as ten keys for inputting data representing key positions and clear keys for clearing the inputted data have been arranged in previously fixed positions. Thus, with utilization of the fundamental keys, positions of further required keys such as PLU keys and department keys can be set optionally. Therefore, although keys can be set at desired positions in a conventional ECR, the range of selection has been relatively restricted. Thus, if positions of the keys, including the fundamental keys required at least for use in setting of the key positions, are to be changed, a program in the ECR must be changed or hardware of the keyboard must be changed in such a manner that fixed keys produce codes identical to those before changing, leading to increase in cost of the ECR and complicated operation with respect to the subject change. Accordingly, an object of the present invention is to provide an ECR which can easily set fundamental keys, previously fixed in a conventional ECR, required at least for setting positions of other keys, at desired positions. This object is accomplished by an electronic cash register as claimed in claim 1. Since the present invention is structured in the aforementioned manner, even keys which have been conventionally arranged in fixed positions can be set at desired positions, thereby enabling provision of an ECR which can satisfy various requirements from customers. From JP A 57 136 244 Abstract , an electronic machinery having a keyboard is known in which functions can be assigned to keys which are no fundamental function keys by using the fundamental function keys for inputting codes representing the function to be assigned to other keys. According to US A4 200 913 the functions of each and every key on the keyboard can be redefined except one key which is dedicated to the function of redefining the functions of other keys. The above features of the present invention will be more clearly understood from the description of the preferred embodiment hereafter made with reference to the accompanying drawings. These objects and other objects, features, aspects and advantages of the present invention will become more apparent from the following detailed description of the present invention when taken in conjunction with the accompanying drawings, in which Fig. 1 is a schematic block diagram of an embodiment of the present invention. The construction of the embodiment of the present invention is described with reference to Fig. 1. A ROM 1 is connected to a CPU central processing unit 2 functioning as control means, which CPU 2 in turn performs, based on a program stored in the ROM 1, operation necessary as an ECR. A random access memory RAM 3 constitutes a fundamental key table and a key code function table, and includes storage regions shown in Figs. 4 and 8 as hereinafter described. Further, the CPU 2 is connected to a keyboard 4, an indicator 5, a printer 6, a cash drawer 7, etc. Fig. 2 is an external plan view of the keyboard 4 as shown in Fig. 1. In Fig. 2, the keyboard 4 includes a mode selection switch 41 and keys having key codes K1 K77. The mode selection switch 41 functions to select modes such as a fundamental key setting mode S mode , a preset mode P mode for setting function codes and performing other preset operation, a registration mode REG mode , an inspection mode X mode and an adjustment mode Z mode . Functions of the respective keys having the key codes K1 K77 are not yet set in the condition of Fig. 2, and the functions are determined according to key position setting operation as hereinafter described. Fig. 3 is illustrative of key sequence showing setting operation of keys at least necessary for setting key positions, i.e., fundamental keys. In Fig. 3, for example, indication 0 of a key designation on the indicator 5 Fig. 1 represents operation or actuation of a key K50 . In a similar manner, indication 1 represents the key K51 , indication 2 represents the key K44 , ... and indication NS represents the key K70 . Thus, the keys to which an operator or user wishes to provide fundamental functions are depressed in response to indications on the indicator, so that the depressed keys are associated with the fundamental function. Fig. 4 is illustrative of formation of a fundamental key table 33. The fundamental key table 33 is included in the RAM 3 Fig. 1 as hereinabove described. The arrangement of the storage regions of the RAM 3 is shown in Fig. 5. In Fig. 4, the fundamental key table 33 stores function codes which are predetermined in correspondence to key designations. For example, 40 is stored as a function code corresponding to a key designation 0 , a function code 41 is stored for a key designation 1 , and so forth. Further, the fundamental key table 33 has areas 331 for storing key codes in correspondence to both of the key designations and the function codes. The key code storage areas 331 successively store the key codes corresponding to the key designations and the function codes. The storage of the key codes is performed according to the aforementioned key sequence as shown in Fig. 3. For example, when the key designation 0 is indicated on the indicator, the key K50 is operated or depressed. Accordingly, the key code K50 of the operated key K50 is set and stored in the area corresponding to the key designation 0 . Thus, in the fundamental key table 33, the key code, e.g., K50 , the key designation 0 and the function code 40 are set and stored in a correlated manner. Fig. 6 is an external plan view of the keyboard 4, showing a condition in which the fundamental keys are set in a manner described in the foregoing. Fig. 7 is a flow chart for explaining operation for setting the fundamental keys. The fundamental key setting operation is now described with reference to Figs. 1 to 7. First, a determination is made as to whether or not the mode selection switch 41 on the keyboard 4 is switched to the S mode step S1 . That is, since the S mode is the fundamental key setting mode for setting the fundamental keys, the operation cannot be advanced to the next step unless the mode is set in this mode. If the S mode is set, the CPU 2 indicates the designation of the fundamental key to be set on the indicator 5 step S2 . For example, it indicates the designation 0 of the fundamental key to be set. In response to the indication of the key designation, a key selected from the keys K1 K77 provided on the keyboard 4 is operated. That is, a key desired to be used in the key designation 0 is optionally selected from the 77 keys K1 K77. It is assumed here, for example, that the key K50 is operated. Then, the key code K50 of the operated key K50 is stored in the key code area of the fundamental key table Fig. 4 corresponding to the key designation 0 step S4 . Thereafter, at step S 5, the CPU 2 determines whether or not the setting of the key is completed, and if the setting is not completed, the operation at the steps S2 to S5 is repeated. By virtue of this, a desired key is selected, in response to the designation of the fundamental key successively indicated on the indicator 5, from the respective keys K1 K77, such that the selected key functions as the fundamental key corresponding to the successively indicated key designation. Fig. 6 shows the keyboard in which the fundamental keys are set in the above manner. In Fig. 6, the respective keys whose key designations are not recorded are keys whose functions are not yet determined. The keys at least necessary for setting the key positions, i.e., the fundamental keys have been determined in the aforementioned manner. Next, description is made with respect to setting operation of positions of other keys required in the ECR utilizing the fundamental keys. Fig. 8 is an explanatory diagram of a memory location in which the function codes and the key designations or key functions corresponding to the function codes are stored. This memory is stored in, e.g., the ROM 1 Fig. 1 . Fig. 9 shows key sequences for setting positions of other keys of the ECR utilizing the fundamental keys. In the present embodiment, 01 is pushed by numerical keys included in the fundamental keys and a key in the fundamental keys is pushed thereby to start setting operation of the key positions. Then, the function code corresponding to a predetermined key designation is inputted. For example, when a function code 10 corresponding to the key designation or key function CASH is inputted from the numerical keys and then the K22 key is pushed, the key K22 is determined as a CASH key. In a similar manner, positions of the keys required for the ECR are set. And, lastly the NS key representing completion of the setting of the key positions is operated. Fig. 10 is an explanatory diagram showing a key code function table. The key code function table has areas for storing function codes in correspondence to the key codes of the respective keys K1 K77. When the keys are operated in accordance with the key sequence of Fig. 9, the function codes are stored in predetermined areas of the key code function table. For example, in Fig. 9, when the key operation 10 K22 is performed, 10 is stored in an area of the function code of the key code function table corresponding to the key code K22. Thus, the function codes are stored in the predetermined function code areas. Therefore, the function codes are not stored with respect to all of the key codes K1 K77 in the key code function table, but the function codes are set only with respect to the key codes of the keys whose key positions are desired to be set. Fig. 11 is an external schematic view of the keyboard of the ECR in which the positions of the keys are finally determined according to the aforementioned operation. It is to be noted that, since the key positions are determined to be set in the preset mode in the present embodiment, the mode selection switch 41 is switched to the P mode. Fig. 12 is a flow chart showing the operation for setting the positions of other keys utilizing the fundamental keys. Mainly with reference to Figs. 4, 8, 9, 10 and 12, detailed description is hereafter made with respect to the operation for setting the positions of other keys utilizing the fundamental keys. The mode selection switch 41 is set in the preset mode. Then, a key input is stood by, and upon the key input, the key code of the inputted key is converted into the key designation by the fundamental key table 33. For example, if the inputted key is K50 , the CPU 2 reads from the fundamental key table the function code 40 corresponding to the key code K50 of the inputted key K50. Then the CPU 2 reads the key designation 0 represented by the function code 40 . The CPU 2 determines whether or not the read key designation shows a numerical key, and in case of the numerical key, the CPU 2 stores numerical data represented by the numerical key in a numerical buffer of the RAM 3. Then, the CPU 2 sets a numerical flag steps S11 S15 . When such operation is repeated twice, a number, e.g., 01 as shown in Fig. 9 is inputted. Thereafter a determination is made as to whether or not the operated key is the key, and in case of the key, the CPU 2 determines whether or not the numerical data stored in the numerical buffer is 01 . This operation is performed for a determination as to whether or not a command has been made to start the key position setting operation steps S16 and S17 . When the command for the key position setting is made, the numerical buffer and the numerical flag are cleared at the step S18, thereby to stand by a key input step S19 . Upon the key input, the function code corresponding to the key code is read based on the fundamental key table 33 Fig. 4 , thereby to read the key designation based on the subject function code. In other words, the key code of the inputted key is converted by the fundamental key table into the key designation. If the inputted key is a numerical key selected from the fundamental keys, the numerical data thereof is stored in the numerical buffer, thereby setting the numerical flag steps S20 S24 . This operation is performed in correspondence to input operation of, e.g., 10 as shown in Fig. 9. Then, upon actuation of the key K22 , the process is advanced from the step S21 to a step S26 since the key K22 is not a fundamental key. Thereafter a determination is made as to whether or not a numerical flag is set. It means that, a determination is made as to whether or not a predetermined numerical data, i.e., a function code to be stored in the function code storage area of the key code function table 34 Fig. 10 is inputted in advance to the operation of the key K22 which is not the fundamental key. If normal operation is performed, the numerical flag is set. In this case, the CPU 2 sets the numerical data stored in the numerical buffer, e.g., 10 in the corresponding area of the key code function table 34. The corresponding area in this case is the function code storage area corresponding to the key code K22 . Thereby the function code 10 corresponding to the key K22 is stored, and since the function code 10 represents CASH refer to Fig. 8 , the key K22 is located as the CASH key. Then, with printing of the key code and the function code stored in the numerical buffer, the sequential operation is completed step S28 . By repeating the aforementioned sequential operation, the positions of the CASH key, a DPT key etc. are determined. Upon completion of the key position setting operation, the NS key is lastly pushed. By virtue of this, the key position setting operation is completed. In the aforementioned embodiment, the fundamental keys have been set in the S mode while the positions of other keys required for the ECR have been set utilizing the set fundamental keys in the present mode P mode . However, the setting modes are not limited to the aforementioned modes, and the operation can be programmed to be performed in another modes. For example, setting of the fundamental keys may be started simultaneously with turning on of the main power supply for the ECR. It is to be noted that the ECR of the present embodiment operates with respect to key operation in normal use as follows Upon a key input, the CPU 2 first searches the fundamental key table 33 Fig. 4 based on the inputted key code. Then, if the inputted key code is in the fundamental key table 33, it reads the function code and the key designation corresponding thereto, and if not, it reads from the key code function table Fig. 10 the function code corresponding to the key code. The CPU 2 performs the operation thereafter based on the respective function codes, etc. More particularly, in the register mode, a key code is identified in response to depression of a key set or determined as registering function key, and then a corresponding function code is identified, so that corresponding registering function is made.