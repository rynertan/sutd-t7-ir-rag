# DATA PROCESSING SYSTEM WITH OUTPUT SWITCHING CIRCUIT

## Claims
Datenverarbeitungssystem mit einer Ausgangsschaltung Q31 Q33 , die auf Daten DIN anspricht, welche vom Datenverarbeitungssystem entwickelt worden sind, zum wahlweisen Umschalten des Signalpegels an einen Ausgangsanschluß OUT zwischen einem hohen Pegel und einem niedrigen Pegel durch schaltendes Anschließen des Ausgangsanschlusses an einen Hochspannungsanschluß VCC bzw. einen Niederspannungsanschluß GND , in einem aktiven Modus und durch elektrisches Isolieren des Ausgangsanschlusses OUT von beiden, dem Hochspannungsanschluß und dem Niederspannungsanschluß, zum Erzeugen einer hohen Ausgangsimpedanz ungeachtet der Daten in einem ersten Bereitschaftsmodus, und einer Steuerschaltung 30 zum wahlweisen Einstellen der Ausgangsschaltung in den aktiven Modus oder dem ersten Bereitschaftsmodus,

## Description
The invention relates to data processing systems, and more specifically to the output circuits for data processing systems. A large number of data processing systems operative with low power consumption have become available in recent years due to the development of CMOS technology. The demand for low power consumption systems has also led to including standby modes in data processing systems, wherein clock pulses normally applied to the functional circuitry of the data processing system are blocked or discontinued during periods when the data processor is not performing a functional operation, and the output terminal of the output circuit is clamped at the high binary level. If the peripheral circuit to which the output terminal is connected is a CMOS circuit, i.e., one with a high input impedance, the clamped output level does not present problems. However, if the peripheral circuit is a low impedance input circuit, such as a TTL circuit, current flows into the peripheral circuit during standby causing undesired loss of power during standby mode. Alternatively, setting the output terminal at a high impedance during standby will suffice if low impedance TTL circuits are connected as the peripheral circuits, but such a set high impedance will adversely affect any CMOS peripheral circuit. In other words, it has been necessary to select the type of the utilizing circuit to be connected to the processing system in accordance with the type of the output circuit of the system, and this results in complexity in designing the system and poor flexibility, and high performance cannot be obtained. A data processing system according to the preamble part of claim 1 is disclosed in Computer Design , Vol. 22, No. 2, February 1983, pp. 123 132, Winchester, Massachussets, US W.J. Niewierski Providing CMOS benefits to peripheral chips . In this system a data output mode is provided in which the level of the output terminal is determined by a data signal. Furthermore, in a standby mode the output terminal is set at a high impedance state by disconnecting the output terminal from the power supply and ground, leading to the above mentioned problems. It is therefore the object of the invention to provide a data processing system which can be connected to any type of peripheral circuits. This object is achieved by a data processing system having the features of claim 1 the dependent claims are related to further developments of the invention. The data processing system according to the present invention is of the type having a standby mode during which no functional processing is conducted, and comprises an output circuit whose output terminal can be set at optional one of a high impedance state and a clamped state when the system is in the standby mode. The data processing system according to the present invention can interface with any kind of peripheral circuit by selecting its output state in the standby mode. For example, by setting the output terminal of the output circuit of the system at the high impedance state, the output terminal of the output circuit of the system can be connected to a peripheral circuit having a low input impedance without causing any trouble. Also, by clamping the output terminal of the output circuit at a predetermined level, the system can be connected to a peripheral circuit having a large input impedance, such as a CMOS type circuit, without causing malfunction of the peripheral circuit. First, with reference to Figures 1 and 2, the problems due to the output circuit of the data processing system according to the prior art will be described. Figure 1 shows an output circuit of the type which clamps the output at a predetermined level during standby mode connected to a TTL type peripheral circuit. The output circuit is indicated at 11, the TTL circuit is indicated as PC₁, and the numeral 10 generally designates the data processing circuit, of which the output circuit forms a part. The output circuit 11 includes a series circuit of an N channel field effect transistor Q₁₁ and a P channel field effect transistor Q₁₂ coupled in series between a power voltage terminal V The peripheral input circuit PC₁ includes a TTL type input circuit whose input terminal is connected to the output terminal OUT of the data processing system 10. The TTL type input circuit includes an emitter input type bipolar transistor T₁ and bipolar transistors T₂ to T₄ forming a buffer circuit. As is well known, the input impedance of the bipolar circuit is relatively low and can be represented by the equivalent circuit resistance R Accordingly, when the data processing system 10 is in the standby mode and field effect transistor Q₁₂ is conducting, a current I₁ flows from the power voltage V Figure 2 shows an output circuit of the type which sets the output at a high impedance during standby mode connected to a CMOS type peripheral circuit. The output circuit is indicated at 21 and the CMOS peripheral circuit is indicated at PC₂. The output circuit 21 includes a P channel field effect transistor Q₂₁ coupled between the gate of the field effect transistor Q₁₂ and the power voltage V Accordingly, both of the field effect transistors Q₁₁ and Q₁₂ are made non conducting thereby to set the output terminal at the high impedance state in the standby mode. A peripheral circuit PC₂, connected to the output circuit 21, is of the CMOS type and includes a CMOS input inverter formed of an N channel field effect transistor Q₂₃ and a P channel field effect transistor Q₂₄. The gates of the transistors Q₂₃ and Q₂₄ are commonly connected to the output terminal OUT. As is well known, the input impedance of the CMOS type circuit is extremely high, and hence only a capacitive component C In addition, the logic level of the input terminal of the peripheral circuit PC₂ is not fixed in the standby mode and hence the logic state of the peripheral circuit PC₂ is affected by the level of the input terminal thereof, resulting in malfunction. A basic structure of the output circuit of the data processing system according to the present invention will be explained with reference to Figure 3. An N channel field effect transistor Q₃₁ and a P channel field effect transistor Q₃₂ are connected in series between the power voltage terminal V When the operation is in a normal mode, both of the control signals CS₁ and CS₂ are inactive in this case at the low level , and the control circuit 30 controls the operations of the field effect transistors Q₃₂ and Q₃₁ in the complementary manner in response only to the data signal DIN. In this instance, the field effect transistor Q₃₃ is kept non conducting, or it is controlled together with the field effect transistor Q₃₂. When the operation is in the standby mode, the output terminal OUT of the output circuit is set at optional one of a high impedance state Hi Z and a high level clamped state by the control signals CS₁ and CS₂. When the control signal CS₁ is at the high level and control signal CS₂ is at the low level, output lines 31 and 32 of the control circuit 30 are at the high level, while the line 33 is at the low level. Therefore, the field effect transistors Q₃₁ to Q₃₃ are non conducting so that the output terminal OUT is set at the high impedance state. When the control signal CS₂ is at the high level and control signal CS₁ at the low level, the lines 31 and 33 are at the low level and the line 32 is at the high level. Therefore, only the transistor Q₃₃ is made conducting so that the output terminal OUT is clamped at the high level in the standby mode. Thus, the output terminal OUT can be set at the high impedance state and the low impedance state in the standby mode. With reference to Figure 4, a practical example of the circuit of Figure 3 will be explained. The control circuit 30 includes two input NOR circuits 301, 303, 304 and 306 and inverter circuits 302, 305 and 307. The control signal CS₁ is applied to one input terminal of the NOR circuit 301 and to one input terminal of the NOR circuit 304. The control signal CS₂ is applied to the other input terminal of the NOR circuit 301. The output of the NOR circuit 301 is applied to the input terminal of the inverter 302 whose output terminal is connected to one input terminal of the NOR circuit 303 and to one input terminal of the NOR circuit 306. The output terminal of the NOR circuit 303 is connected to the gate of the N channel field effect transistor Q₃₁, to the other input terminal of the NOR circuit 306, and to the other input terminal of the NOR circuit 304. The output terminal of the NOR circuit 306 is connected to the input terminal of the inverter circuit 307 whose output is applied to the gate of the P channel field effect transistor Q₃₂. The output of the NOR circuit 304 is inverted by the inverter 305 and the inverted signal therefrom is applied to the gate of the P channel field effect transistor Q₃₃. The data signal DIN is applied to the other input terminal of the NOR circuit 303. The operations of this output circuit will be explained together with Figure 6. In this output circuit, when both of the signals CS₁ and CS₂ are at the low level, the system is in the normal operation mode. In this mode, the output of the NOR circuit 301 is at the high level and hence the output of the inverter 302 is at the low level. Therefore, the NOR circuit 303 produces the output signal in response to the data signal DIN, and the NOR circuit 306 produces the output signal which is the inverted signal of the output of the NOR circuit 303. Also, the NOR circuit 304 produces the output signal of the opposite phase to the output of the NOR circuit 303, and the cascade structure of the NOR circuit 304 and the inverter 305 operate in parallel with the cascade structure of the NOR circuit 306 and the inverter 307. Therefore, the P channel field effect transistor Q₃₃ takes the same operational condition as the P channel field effect transistor Q₃₂. The co operation of the transistors Q₃₂ and Q₃₃ in the normal operation mode increases the effective drivability of the transistor Q₃₃ to improve switching speed when the output terminal OUT changes from the low level to the high level. Thus, in the normal operation mode, the N channel field effect transistor Q₃₁ and the P channel field effect transistors Q₃₂ and Q₃₃ are controlled by the data signal DIN. Namely, when the data signal DIN is at the high level, the output of the NOR circuit 303 is at the low level and the outputs of the inverters 305 and 307 are at the low level. Therefore, the transistor Q₃₁ is non conducting while the transistors Q₃₂ and Q₃₃ are conducting to set the output terminal OUT at the high level as illustrated in Figure 6 A . On the contrary, when the data signal DIN is at the low level, then the output of the NOR circuit 303 is at the high level and the outputs of the inverters 305 and 307 are at the high level. Therefore, the transistor Q₃₁ is conducting while the transistors Q₃₂ and Q₃₃ are non conducting to set the output terminal OUT at the low level. In the case of the standby mode, two output conditions of the output terminal OUT are possible as explained below. When the control signal CS₁ is at the high level and the control signal CS₂ is at the low level, the output of the NOR circuit 301 is at the low level and hence the output of the inverter 302 is at the high level. Therefore, the outputs of the NOR circuits 303 and 306 are at the low level, and the output of the inverter 307 is at the high level, irrespective of the level of DIN. The output of the NOR circuit 304 is at the low level and hence the output of the inverter 305 is at the high level. Thus, the gate potential of the transistor Q₃₁ is at the low level while the gate potentials of the transistors Q₃₂ and Q₃₃ are at the high level so that all of the transistors Q₃₁ to Q₃₃ are non conducting to set the output terminal OUT at the high impedance state, as shown in Figure 6 B . When the control signal CS₁ is at the low level and the control signal CS₂ is at the high level, the output of the NOR circuit 301 is at the low level and the output of the inverter 302 is at the high level. Therefore, the outputs of the NOR circuits 303 and 306 are at the low level and the output of the inverter 307 is at the high level so that the transistors Q₃₁ and Q₃₂ are non conducting. In this instance, since both inputs of the NOR circuit 304 are at the low level, the output of inverter 305 is at the low level so that the transistor Q₃₃ is conducting to clamp the output terminal at the power voltage V With reference to Figure 5, the detailed circuit structure of the circuit shown in Figure 4 will be explained. The NOR circuit 301 is composed of series connected P channel field effect transistors Q₅₁ and Q₅₂ and parallel connected N channel field effect transistors Q₅₃ and Q₅₄. The gates of the transistors Q₅₁ and Q₅₄ are commonly connected and constitute one of the input terminals of the circuit, while the gates of the transistors Q₅₂ and Q₅₃ are commonly connected and constitute the other input terminal. Other NOR circuits 303, 304, and 306 have the similar structure as illustrated. The inverter 302 is composed of a P channel field effect transistor Q₅₆ and an N channel field effect transistor Q₅₇ connected in series between the power voltage Vcc and ground potential. The transistor gates are commonly connected and constitute the input terminal of the inverter. Other inverters 305 and 307 have the same circuit structure as the inverter 302. Next, with reference to Figure 7, an example of the major part of the data processing system according to the present invention will be explained. The output section 300 is the output circuit composed of the transistors Q₃₁ to Q₃₃ and the control circuit 30 shown in Figures 3, 4 and 5. An instruction decoder 100 receives data from an internal bus 400 and generates selectively a first stop instruction signal 71 and a second stop instruction signal 72. The first and second stop instruction signals 71 and 72 are applied to a latch circuit 200 and operatively held by the latch circuit 200. The latch circuit 200 operatively holds the first and second stop signals 71 and 72, and outputs them as the control signals CS₁ and CS₂, respectively. The latch circuit is reset when a reset signal 80 is activated. The output section 300 receives the data signal via an input line 380 and outputs the data output signal from the output terminal OUT to an output line 390. A NOR circuit 77 receives the control signals CS₁ and CS₂ to detect the presence of either one of the control signals CS₁ and CS₂. The output of the NOR circuit 77 is applied to an inverter 78. The output of the inverter 78 is applied to one input terminal of a NOR circuit 79 receiving an external clock signal 75 from the outside. The NOR circuit 79 produces an internal clock signal 76 for controlling the circuits within the data processing system when the control signals CS₁ and CS₂ are not present. The instruction decoder 100 produces the first or second stop instruction signal 71 or 72. The latch circuit 200 makes the control signal CS₁ for the first stop instruction signal 71 and the control signal CS₂ for the second stop instruction signal 72 in accordance with the activation of the first or second stop instruction signal 71 or 72. The control signals CS₁ and CS₂ remain active until the latch circuit 200 is reset by the reset signal 80. When the control signal CS₁ or CS₂ becomes active, the output of the NOR circuit 77 is low while the output of the inverter 78 is high. Even when the external clock 75 is supplied, the output of the NOR circuit 79 is always low, that is, the internal clock 76 is stopped, thereby attaining the standby mode. When the section 300 receives the control signal CS₁ or CS₂ the output is brought to either a high impedance or a high voltage level. During normal operation, the output section 300 receives the data from the internal bus 400 through the line 380 and delivers the data from the line 390. Here, selection of the high impedance state and the clamped level e.g., high level state in the standby mode is controlled by instruction applied to the instruction decoder 100. For example, in the case where a peripheral circuit having a low input impedance such as a TTL circuit is connected to the output terminal OUT, the instruction to the instruction decoder 100 is adapted to include such command that the decoder 100 produces the stop instruction signal 71 thereby to introduce the standby mode without generating the stop instruction signal 72. On the other hand, in the case where a circuit having a large input impedance, such as a CMOS type circuit, is connected as the peripheral circuit, the instruction to the decoder 100 is adapted to include such command that the decoder 100 produces the stop instruction signal 72 without generation of the stop instruction signal 71. With reference to Figure 8, an example of the latch circuit 200 will be explained. The latch circuit 200 is basically composed of two bistable circuits for operatively holding the signals 71 and 72. The bistable circuit for the signal 71 includes a flip flop circuit composed of NOR circuits 83 and 84, inverters 81 and 86, and AND gates 82 and 85. The AND gate 82 receives the signal 71 and the inverted reset signal through the inverter 81. The AND gate 85 synchronizes the output of the AND gate 82 with an internal clock CL₁ and a certain timing signal MS. Therefore, the signal 71 is held by the flip flop 83, 84 when the reset signal 80 is not active and both the internal clock CL₁ and the timing signal MS are present. The other bistable circuit for holding the signal 72 is composed of NOR gates 89 and 90, AND gates 88 and 91, and inverters 87 and 92 in a similar manner. As described above, according to the present invention, two kinds of output states are provided to the data output terminal OUT in the standby mode. Accordingly, it becomes possible to set the output condition of the output terminal in accordance with the peripheral system to be connected to the output terminal of the data processing system. The explanation of the present invention has been made by way of specific embodiments. However, it is apparent that the present invention is not limited to the described embodiments.