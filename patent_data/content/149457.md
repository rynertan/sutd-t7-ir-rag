# METHOD OF IDENTIFYING CONTOUR LINES

## Claims
Verfahren zum Erkennen einer Konturlinie mit den folgenden Schritten

## Description
This invention relates to a method of identifying a contour line of an object to be detected by using an image pick up device, for example, a television camera. Among prior art,methods of calculating the values of characteristic parameters of an object from a television picture image a multivalue picture image may be mentioned a region method and a contour line detection method. According to the region method, the picture image is divided into a plurality of partial image regions each having substantially the same brightness and then the object is identified by judging the continuity of the regions on the assumption that respective surfaces of the object have similar brightness. Although this method is effective for an object constituted by planes, when curved surfaces present, the processing thereof is difficult. Moreover, since all picture image data are processed, the amount of data becomes excessive, thus making difficult a high speed processing. On the other hand, the contour line extraction method utilizes the edges of respective surfaces of the object and according to this method, the points of the picture image at which the brightness changes rapidly are extracted as the edges, and the edges are connected together to convert them into a line picture. This method contemplates detection of lines in the picture image so that when compared with the region method which detects the surfaces, the number of detection stops and the quantity of informations for investigating their continuity are small so that high speed processing can be made. The steps of identifying a circular body with the contour line extraction method will be described with reference to Figs. 1a through 1d. At first, an original picture image shown in Fig. 1a photographed with a television camera is differentiated along respective scanning lines to extract a contour candidate point at which the brightness changes rapidly. Then, picture elements near this point are similarly differentiated and a picture element having the maximum differentiated value is taken as a point continuous to the contour candidate point. This processing is repeated many times to obtain continuous contour points contour line candidate see Fig. 1c and when these contour points are closed see Fig. 1d they are deemed as an object. According to this prior art contour extraction method, tracing of the contour candidate points are rendered difficult by the following factors. As a consequence, there is a defect that an actually presenting object would not be detected. Furthermore, the identifying algorithm for solving these problems becomes complicated so that real time processing is almost impossible. The periodical Systems Computer Controls , Vol. 4, No. 2, 1973, 61 70, Washington, U.S. T. Sakai et al. Computer Analysis of Photographs of Human Faces discloses a method for analyzing the contour of a human face, comprising subroutines divided in two blocks, each for detecting a part of the face. This method comprises a technique of searching for the right and left positions of the cheeks, the upper lip position, the nose position and the chin position from the binarized image of a human face to determine a search area where the contour line of the chin is assumed to exist on the basis of the positions of the other elements of the face. 19 radial lines are set from the upper lip position as the reference position to obtain as a candidate point a point closest to the upper lip position when a slit for detecting the degree of brightness is moved along the radial lines within the searching area. It is judged that the chin contour detection has failed if no candidate point has been determined on three consecutively radial lines among the 19 radial lines. The periodical Computer Vision, Graphics and Image Processing , Vol. 25, No. 1, New York, USA, January 1984, 89 112, Academic Press, Inc. New York, U.S. Y. Okawa Automatic Inspection of the Surface Defects of Cast Metals describes a technique of setting a binary image of 192x 192 picture elements to extract a contour line of a circular pulley by joining the consecutive picture elements whose binary values vary with respect to the eight adjacent picture elements. Thereafter, the diameter and the center point of the contour are determined by scanning along straight lines starting from an arbitrarily selected point of the contour line. Finally, the periodical IEEE Transactions On Computers , Vol. C 26, No. 9, September 1977, 882 894, New York, U.S. M. Yachida et al. A Versatile Machine Vision System for Complex Industrial Parts describes a method for recognizing a variety of complex industrial parts wherein a gray level histogram of all the picture points is first computed to determine a threshold. Thereafter, the picture data are scanned. There is provided a line finder that first determines a search region around a specified location and applies a local gradient operator to find edge points in the region. Then the line finder searches an edge line in the region by searching an optimum sequence of edge points in the regions. None of these prior art methods gives a solution for accurately identifying a contour line having the above mentioned defects 1 to 4 . It is the principal object of this invention to provide a novel method of accurately identifying the contour line of a circle or an object having a configuration similar to a circle or a portion thereof by using a simple electric circuit and simple processing steps. The method of the present invention is defined by the features of claim 1. Further objects and advantages can be more fully understood from the following detailed description taken in conjunction with the accompanying drawings, in which A preferred embodiment of this invention will now be described with reference to the accompanying drawings. It is assumed that an object to be detected is a circular body 1 shown in Fig. 3. An industrial television ITV camera 2 photographs the circular body or object in a predetermined field of view to send a video composite signal containing the brightness signal of the input picture image to a synchronous isolating circuit 3 and an A D converter 4. The synchronous isolating circuit 3 operates to separate a synchronizing signal from the video composite signal. The synchronizing signal thus separated is used to designate an address of a random access memory array RAM array 5, while the A D converter 4 converts the inputted video composite signal into a picture image data having 16 tones of brightness for writing the picture image data in the designated address. In this manner, picture image data is stored corresponding to one picture and representing the brightness of the original picture shown in Fig. 4. Any desired picture image data can be read out by designating X and Y addresses of the RAM array 5. Memory means 6 stores the main program or the like for carrying out the method of this invention, and a central processing unit CPU 7 executes the processing of the picture image data stored in the RAM array in accordance with the content of the main program. The steps of processing executed by the CPU 7 will be described as follows with reference to the flow charts shown in Figs. 5a and 5b and the diagrams shown in Figs. 6a 6e. At step 100 shown in Fig. 5a, the threshold value D of the differentiated value, the diameter L of the circular body, the number of scannings Ns in the radial direction, and the preset number No of the contour candidate point are set. The threshold value D is used to judge the contour candidate point at which the brightness of the picture image data varies rapidly. In this embodiment, the number of scanning is selected to be 8 and the number of presets No is selected to be 6. After the initial setting has been completed, the present picture image data see Fig. 6a in the RAM array 5 is searched for finding out the center position candidate point of the circular body. The search of the center position candidate point is made by differentiating in the X direction. The picture image data is stored in the RAM array 5, and is based on the positions of respective contour candidate points when the spacing between two contour candidate points at which the brightness changes rapidly approaches the set diameter L. More particularly, at step 101, the number n of the contour candidate points is set to zero, at step 102, the present picture image is scanned in the X direction, and at step 103, the differentiated value D of the picture image data is calculated. At step 104, a judgment is made as to whether the differentiated value D has exceeded the threshold value D or not. When the differentiated value D has exceeded the threshold value D, the coordinate position of D is stored at step 105, and at step 106 n is incremented by one. At step 107, a judgement is made as to whether n is equal to or larger than 2. When the result of this judgement is YES, at step 108 the distance L see Fig. 6b between any two stored points is calculated. Then at step 109, a judgment is made as to whether the distance L is close to the initially set diameter L or not. When the result of this judgment is YES, at step 110, the center position candidate point C X,Y see Fig. 6c is calculated by utilizing the coordinate positions of the two points. It should be understood that the method of searching the center positions candidate point is not limited to the illustrated embodiment. For example, a method can be used wherein more than three contour candidate points are determined so as to calculate the center position candidate point based on a circle passing through these three points. Thereafter, the contour candidate point of the circular body is searched based on the center position candidate point of the circular body so as to check presence or absence of the contour line, that is, the circular body. Referring now to Fig. 5b, at step 111, the number n of the contour candidate points is set to zero for scanning in a preset radial direction from the center position candidate point. Since the radius R L 2 of the circular body has been given, the region to be scanned is limited to a doughnut shaped region bounded by a circle having a permissible minimum radius R ΔR , and a circle having a permissible maximum radius R ΔR . The preset scanning directions are 8, that is 0 X direction , π 4, π 2, 3π 4, π, 5π 4, 3π 2 and 7π 4 by taking the center position candidate point as the reference point see Fig. 6d . At the time of scanning in respective radial directions, the maximum differentiated value D Finally, when the presence of the contour line of the circular body is recognized, at step 122, an approximate circle is determined from n contour candidate points, and at step 123, the coordinates of the center of the circle and, if desired, its diameter are calculated see Fig. 6e , thus finishing the processing of the picture image. When photographing a circular body with the ITV camera 2, where the center of the circular body is displaced from the ITV camera the resulting contour line is not a true circle but an ellipse. The method of this invention is also applicable to such a case. Furthermore, the invention is also applicable to a substantially circular body an ellipse close to a circle or a polygon . The number Ns of scannings in the radial direction, the direction of scanning, and the preset number No establishing the threshold value are not limited to those described above. After the presence of the contour line of a circular body has been recognized, the continuity of the contour line is identified by the following method. Fig. 7 shows a flow chart indicative of the successive steps of the CPU 7 for identifying the continuity of the contour line. At step 200, characterizing points of an object to be detected are extracted from the present picture image data see Fig. 8a stored in the RAM array 5. In this example, since the object to be detected is assumed to be a circular body, as its characteristic point is detected the center position Po Xo, Yo of the circle see Fig. 8b . The method of detecting the characteristic point is not limited to that described above and the characteristic point can be detected by differentiating in the X direction the picture image data stored in the RAM array 5 so as to detect characteristic point based on the two contour candidate positions the spacing therebetween becoming the maximum and the brightness changes abruptly, or by determining more than three contour candidate points and then calculating the center position of a circle passing the three points. Then at step 201, X contour candidate points are presumed from the characteristic point Po and the radius of the circle. For the sake of convenience, respective contour candidate points are represented by Pi i 1..n see Fig. 8c . Then at step 202, i is set to 1, and at step 203 several picture elements Ci including the contour candidate point Pi, several picture elements Oi on the outside of the contour candidate point Pi, and several picture elements Ii on the inner side of the contour candidate point Pi are extracted see Figs. 8c, 8d and 8e . The extraction should be made such that the three types of the picture image data would be arranged in substantially normal direction with respect to the loci of the contour candidate points. The direction of ψ of the normal is calculated by the following equation in accordance with the relative position between the characteristic point Po Xo, Yo and the contour candidate point Pi Xi, Yi . The picture elements are extracted based on this direction ψ . Figs. 9a, 9b and 9c respectively show three picture elements Ci containing contour candidate point Pi, three picture elements Oi on the outside of the contour candidate point Pi and three picture elements Ii on the inside of the contour candidate point Pi. At step 204, the mean values Ci, Oi and Ii of the brightness of the three types of the picture image data Ci, Oi and Ii are determined. After that at step 205, a judgment is made as to whether i is equal to one or not and when the result of judgment is YES, at step 206, i is made to be 2 to execute again the foregoing steps. When the result of judgment of step 205 is NO, the program sequence is advanced to step 207 where the differences Sc, So and S When the continuity of all contour candidate points is confirmed at step 210, the processing is terminated. In other word, it is now judged that the contour line is continuous to identify the object.