# Machine tool control

## Claims
Werkzeugmaschine zur spanabhebenden Bearbeitung eines Werkstücks 10 , das sich um eine Achse dreht, um ein Profil zu ändern, das einen Werkstückantrieb 11 zum Halten und zum Drehen des Werkstücks 10 , einen winkelmäßigen Positionscodierer 15 zum Erzeugen eines Signals, das die winkelmäßige Position des Werkstücks 10 darstellt, ein Werkzeug 26 , das in einer Richtung zu und von dem Werkstück 10 weg und über die Oberfläche des Werkstücks in einer Richtung normal zu der Richtung der Bewegung hin und davon weg bewegbar ist, einen Werkzeugpositionstransducer 24 zur Erzeugung eines Rückführsignals, das die Position des Werkzeugs 26 in der Bewegung hin und weg darstellt, einen Werkzeuggeschwindigkeitstransducer 25 zum Produzieren eines Rückführsignals, das die Geschwindigkeit des Werkzeugs 26 in der Bewegung hin und weg darstellt, einen Werkzeugantrieb 23 , der eine Trägheit und eine Bandbreite zur Bewegung des Werkzeugs zu dem Werkstück 10 hin und von diesem weg besitzt, um ein Werkstück spanabhebend zu bearbeiten, das sich unter 3000 U min dreht, einen Computer 13 zum Produzieren aus den Eingangsdaten, die dort hinzu zugeführt werden, einer Folge von digitalen Signalen, die erforderliche, aufeinanderfolgende Werkzeugpositionen unter definierten Winkel und Oberflächenpositionen auf dem Werkstück definieren, um das Werkstück auf ein vorbestimmtes Profil spanabhebend zu bearbeiten, einen Werkzeugantrieb 29 , der mit dem Werkzeug 26 zur Bewegung des Werkzeugs 26 in der Richtung über die Oberfläche des Werkstücks verbunden ist, einen Oberflächenpositionscodierer 16 , der zur Erzeugung eines Signals vorgesehen ist, das die Position des Werkzeugs in der Richtung über der Oberfläche des Werkstücks darstellt, einen Speicher 14 , der die Folge von Signalen von dem Computer 13 aufnimmt und mit dem winkelmäßigen Positionscodierer 15 und dem Oberflächenpositionscodierer 16 zur Ausgabe von Signalen gemäß der winkelmäßigen und Oberflächenpositionssignale, die von den Codierern 14,16 empfangen werden, verbunden ist, und ein Regelsystem 22 mit einer geschlossenen Schleife umfaßt, das einen Eingang besitzt, der mit dem Speicher 12 , dem Werkzeugpositionstransducer 24 und dem Werkzeuggeschwindigkeitstransducer 25 verbunden ist, und einen Ausgang besitzt, der mit der Werkzeugantriebseinrichtung 23 zum Produzieren aus den Eingängen ein Signal, das zu der Werkzeugantriebseinrichtung 23 zur Steuerung der Werkzeugbewegung zugeführt wird, um das vorbestimmte Profil an dem Werkstück 10 zu produzieren, aufweist, dadurch gekennzeichnet, daß ein Signalprozessor 19 zwischen dem Speicher 14 und dem Regelsystem 22 mit geschlossener Schleife zum Aufnehmen aufeinanderfolgender, digitaler Signale von dem Speicher 14 und zum Wandeln der digitalen Signale in kontinuierliche Analogsignale vorgesehen ist, die sich so progressiv ändern, daß an dem Ende aufeinanderfolgender Zeitintervalle, von denen jedes gleich dem Zeitintervall zwischen aufeinanderfolgender Werkzeugpositionssignale ist, die Amplitude des analogen Signals zu den aufeinanderfolgenden Werten der Werkzeugpositionssignale in Bezug gesetzt wird, wobei das Regelsystem 22 mit geschlossener Schleife ein analoges Regelsystem mit geschlossener Schleife ist.

## Description
The invention relates to the control of the machining of workpieces by a machine tool in which the tool and the workpiece rotate relatively to one another to produce a shaped profile on the workpiece. In recent years, the computer control of machine tools has been widely developed. The computer produces a succession of digital signals which are used to position the tool to provide a required profile on the workpiece. In general, the computer calculates the required digital signals in advance and feeds them to a store where they are held and fed at required times to a conventional tool moving system which comprises a tool slide moved by a motor through a feed screw. It is not always necessary for there to be any tool position feedback and so the motor can be a stepping motor which is controlled by counting down a register containing a signal corresponding to the required number of steps of the motor to produce the required tool position. Because of the comparatively low speed of relative rotation between the tool and the workpiece, and because of the absence of any tool feedback, the production of the digital signals can be readily handled by a computer of modest size. In addition, the intertia of the slide is sufficient to smooth out the stepped nature of the signal applied to the motor. If, however, the relative speed of rotation of the tool and the workpiece is increased dramatically, and if the tool is required to alter its position within a revolution, an entirely different situation prevails. First, it is necessary to have a tool capable of being moved very rapidly indeed that is a tool holder having a low inertia. Tool position feedback is necessary to ensure that the position of the tool alters accurately within each revolution. At these speeds, computers conventionally used will produce digital tool control signals at a rate which is insufficiently frequent to permit the tool holder to move in accordance with such signals the tool holder would be required to have infinite acceleration between successive signals and this is plainly not possible. The computer thus does not have the capacity to produce signals at a frequency sufficient to allow the tool holder to make the required movements. This lack of capacity of conventional computers produces the further problem that the computer is incapable of performing the required feedback control while maintaining the required high rotational speeds. Indeed, if the computer is required to produce digital tool control signals at a substantial number of positions within a revolution as may be necessary to define many required profiles , the computer will generally be incapable of storing all the required digital signals for the machining operation. In general, therefore, it has not heretofore been possible to machine complex profiles on a workpiece by computer numerical control at the rates required for commercial production. Such machining has in general been performed by cam follower machines in which a shaped cam is contacted by a cam follower whose motion is transmitted to the tool. The production of the shaped cams is, however, both time consuming and expensive and the use of cams makes the process inflexible. In addition, the speed at which a cam follower can follow a cam is limited, since at high rotational speeds the follower may lift off the cam so introducing inaccuracies into the workpiece. According to the invention, there is provided a machine tool for machining a workpiece rotating about an axis to a changing profile comprising a workpiece drive for holding and rotating the workpiece, an angular position encoder for producing a signal representing the angular position of the workpiece, a tool movable in a direction towards and away from the workpiece and movable over the surface of the workpiece in a direction normal to the direction of said towards and away movement, a tool position transducer for producing a feedback signal representing the position of said tool in said towards and away movement, a tool velocity transducer for producing a feedback signal representing the velocity of said tool in said towards and away movement, a tool drive having an inertia and a bandwidth for moving the tool towards and away from the workpiece to machine a workpiece rotating at 3000 rpm, a computer for producing from input data fed thereto, a succession of digital signals defining required successive tool positions at defined angular and surface positions on said workpiece to machine the workpiece to a predetermined profile, a tool drive being connected to the tool for moving the tool in said direction over the surface of the workpiece, a surface position encoder being provided for producing a signal representing the position of the tool in said direction over the surface of the workpiece, a store receiving said succession of signals from said device and being connected to said angular position encoder and said surface position encoder for outputting signals in accordance with angular and surface position signals received from said encoders, and an analogue closed loop control system having an input connected to said second device, said tool position transducer and said tool velocity transducer and having an output connected to said tool drive means for producing from said inputs a signal fed to said tool drive means for controlling the tool movement to produce said predetermined profile on said workpiece, characterized in that a signal processor is provided between said store and said closed loop control system for receiving successive digital signals from said store and for converting said digital signals into continuous analogue signal so changing progressively that at the end of successive time intervals, each equal to the time interval between sucessive tool position signals, the amplitude of the analogue signal is related to the successive values of the tool position signals, the closed loop control system being an analogue closed loop control system. The pre characterising portion of claim 1 is based on EP A1 0 044 200. The difficulties are thus avoided by converting the digitally produced succession of constant amplitude tool holder position signals into a corresponding continuous signal and feeding this signal to a closed loop continuous control system so that the feedback control is not performed by the computer. In this way, the computer can be used simply to calculate required tool holder position signals and output them at required time intervals. This allows a micro processor to be used to control the machining while allowing the machining to take place at high speed and with complex non circular profiles. The tool is actuated by a continuous signal and so is not required to move with infinite acceleration. The following is a more detailed description of two embodiments of the invention, by way of example, reference being made to the accompanying drawings in which Referring first to Figure 1, the workpiece 10 is rotated at high speed by a workpiece drive 11. The speed of revolution of the workpiece may be of the order of 50 revolutions per second 3000 rpm . The workpiece 10 may be a generally cylindrical blank such as an aluminium or aluminium alloy piston blank. The workpiece is to be machined to have a non cylindrical profile which, for example, may be an oval or elliptical cross section of varying axial dimensions along the axial length of the workpiece to produce a barrelling effect. Additionally or alternatively, it may be required to form the blank with a plurality of raised surface portions. It will be appreciated that the degree of ovality or barrel or the height of the raised surface areas above the remainder of the piston may be very small indeed of the order of only a few or tens of microns. Alternatively, the workpiece may be a blank not shown for forming a bearing surface. This may be a cylindrical blank whose interior or exterior surface is to be machined to a required non cylindrical profile, or a generally flat surface lying in a plane generally normal to its axis of rotation and to be machined to a required non flat profile to form a thrust bearing. The workpiece 10 is machined by a tool 26 which is described in more detail below and which is movable radially towards and away from the workpiece 10 R position by a closed loop control system 22, also described in more detail below. In addition, a Z position actuator 29 is provided for moving the tool 26 in a direction the Z direction parallel to the axis of rotation of the workpiece 10. This Z position actuator 29 can either be controlled by signals produced by the control system or the actuator 29 can be set to traverse the tool 26 along the workpiece 10 at a set rate. Prior to machining, input profile data is prepared which defines the required profile of the workpiece at a succession of angular positions around the workpiece and at a succession of axial positions along the workpiece. Angularly in a direction the profile may be defined at intervals around the workpiece 10 as drops or decreases from a nominal maximum radius. These intervals may, for example, be 2.5 degrees for a piston or 0.5 degrees for a bearing. The maximum drop may be 1 5mm in steps 0.125 microns. These angular positions may be defined at a succession of axial Z positions which are spaced apart by 10 mm along the axis of the workpiece 10. Where the workpiece is symmetrical about one or more planes including the axis of rotation of the workpiece, it is only necessary to define the input data for the initial symmetrical portion. For example, where the cross section is to be elliptical, only input data for a 90 degree segment of the ellipse between the two planes of symmetry need be defined. In addition, the cross sectional profile need only be defined at those axial intervals where there is a non linear change in the profile or the rate of change of the profile. The profile data is fed to an input device 12 of a computer 13 and passes from the input device to a store 14 of the computer 13. The computer 13 may be a micro processor. The workpiece is set in rotation and a position encoder 15 and Z position encoder 16 feed to the store 14 in real time digital signals defining the and Z positions of the workpiece 10 and the tool 26 relatively to a datum. The position encoder 15 produces a signal every 2.5 degrees or 0.5 degrees of rotation of the workpiece and the Z position encoder 16 produces a signal every 10 microns of axial movement of the tool 26. On receipt of the Z position and position signals, the computer 13 produces a group of bits corresponding to the required tool R position at the Z, position to produce the required workpiece profile. The computer 13 does in the following way. If the workpiece is rotating at 50 cycles per second and the position encoder 15 is producing a signal every 2.5 degrees, the computer 13 must produce a group of bits every 140 microseconds. Of course, at higher speeds and more complex profiles this time interval may be less than this, for example, it may be 14 microseconds. Since the store 14 cannot, in practice, store all the bits required to define the complete profile of the workpiece 10, a calculating unit 17 of the computer 13 calculates a few initial groups of bits from the input data held in the store 14 and passes these initial groups to the store 14, from which the initial groups are outputted to a signal processor 19, described in more detail below. During the remainder of the 140 microsecond interval between the dgroups, the calculating unit produces groups of bits for subsequent future tool positions. The number of groups so produced depends on the time available within each interval and the capacity of the store 14 to hold such groups. It will be appreciated that the production of these groups from the input data will involve interpolation between the input data, because the groups may be required at intervals which are smaller than the intervals at which the input data is given. In this case, the interpolation is preferably a linear interpolation, although it will be appreciated that the computer 13 could be programmed to produce any other required interpolation. In addition, the computer 13 will be programmed to produce groups for the whole circumferential profile of the workpiece even where the input data defines only a portion of a symmetrical profile. For example, where the profile is elliptical and the input data defines only 90 degrees of the ellipse, the calculating unit 17 will calculate groups around the whole of the elliptical profile. It will be appreciated that since not all future groups are calculated before the commencement of machining, the store 14 does not require a substantial capacity and the store 14 found in current microprocessors will in most cases be adequate. The output from the computer 13 thus a succession of groups of bits defining successive tool positions produced in real time at time intervals determined by the signals from the position encoder 15 and the Z position encoder 16. This succession of groups of bits are received by a digital to analogue converter 18 which converts each of the succession of groups into a tool holder position signal of constant amplitude corresponding to the value of the associated group of bits and the duration of each tool holder position signal is the same as the interval between successive groups. This output which is effectively a series of consecutive steps is fed to a step converter 20 of the signal processor 19. In the step converter 20, the amplitude of each signal is stored until the next succeeding signal is received. As soon as the amplitude of the next succeeding signal has been established, the step converter 20 outputs a continuous signal which has an initial value equal to the value of the first received signal and has a final value equal to the value of the next successive signal. Plainly if there is a difference in amplitude between the two successive signals, the continuous signal will rise or fall progressively between these initial and final values. This rise or fall may be linear but need not necesarily be so. The output of the step converter 20 is thus a continuous signal which so changes progressively that at the end of successive time intervals equal to the time intervals of the digital signals, the amplitude of the signal is related to the successive values of the digital signals. This continuous signal can thus be regarded as an analogue of the succession of tool holder position signsls representing the required radial position of the tool 26 at a succession of , Z positions on the workpiece 10. This continuous signal is fed as an input signal to a feedback control device 21 of a closed loop continuous tool control system 22. The output of the feedback control device 21 is fed to a tool actuator 23 which moves the tool and tool holder in a radial direction in accordance with the output signal. The output of the tool actuator is monitored by a tool radial position transducer 24 and a tool radial speed transducer 25 which provide feedback tool position and tool velocity signals to the feedback control device 21 which uses these feedback signals to modify the continuous signal from the signal processor 19 in accordance with the feedback signals. Thus the computer 13 does not have to deal with the feedback control of the tool positioning signal. This is done in a purely analogue fashion in the closed loop control system 22. This is another factor which allows the computer 13 to be a microprocessor while maintaining high rotational speeds and changes of tool position within a revolution. The operation of the step converter 20 produces a time delay in the system. A further time delay is introduced by the inertia of the tool 26 and the associated tool holder. In general, this will not be a problem because, being constant, they will simply move the profile around the workpiece by a predetermined angle possibly one or two of the successive positions 2.5 or 5 degrees. It may, however, be that a workpiece profile is required which has a particular spatial orientation to some other workpiece feature. For example, where the workpiece 10 is a piston blank, the piston profile may be required to have a particular spatial orientation relative to a piston feature such as the gudgeon pin bore. In this case, the computer 13 may be programmed so that the datum positions from which the tool positions are calculated are offset by a distance equal to the time lag in the system. This will bring the profile into the required spatial orientation. The tool actuator 23 and the tool holder 26 may take any convenient form provided that they have a bandwidth which allows reaction to the control signal at sufficient speed to move the tool to the required position within the required time interval. For this reason, it is not possible to use a conventional tool slide moved by a stepping motor through a lead screw. Nor is it possible to use a Swiss lathe mechanism in which a motor drives a cam bearing shaft through a lead screw with the cams rotating to move the tool holders into and out of position. In both of these cases, the inertia and time lag in the system is so great as to prevent successful operation. Because the signal is applied to these actuators is a continuous signal, there is no problem of requiring the tool to perform an infinite acceleration. Examples of suitable tool actuators 23 include a high torque low inertia electric motor with a cam mounted directly on the output shaft and with a cam bearing directly on a pivotally mounted tool holder to move the tool holder against a spring force. Alternatively, the tool actuator may comprise a solenoid bearing on the tool holder or the tool 26 may be mounted directly on the armature of the solenoid. The tool may be mounted on an armature of a linear motor. A further possibility is for the tool 26 to be moved by ultrasonic or magnetostrictiye or pneumatic means capable of reacting with sufficient speed i.e. having a sufficiently wide bandwidth. It will be appreciated that the computer 13 can be quickly and simply programmed to produce any required workpiece profile. Indeed, by the provision of a keyboard shown in chain dotted line at 27, it is possible to alter the workpiece profile during machining. It will also be appreciated that the machining operation need not be to machine a cylindrical workpiece it could machine a generally planar surface to have a non flat profile. In addition, it need not be the exterior of the workpiece which is machined it could be the interior of the workpiece. The ability of the control system described above to move the tool rapidly within a revolution of high speed rotation, allows workpieces to be machined very accurately and rapidly having any required surface profile. It may be desirable to machine the workpiece 10 with two tools simultaneously. In this case, two control systems of the kind described above with reference to Figure 1 may be provided, each actuating a respective tool in accordance with a required tool movement. For example, there may be simultaneous turning and boring of a workpiece facing and turning or boring of the workpiece. It will also be appreciated that for complex shapes, it may be desirable to process the Z position and position signals separately. A suitable arrangement for this is shown in Figure 2. In this arrangement, two parallel systems are provided. The first system is substantially as described above with reference to Figure 1 and comprises a computer 13, a signal processor 19 and a closed loop control system 22 which control the radial position of the tool 26 or the position to the tool in one direction . The computer 13 is fed with data defining the required radial position of the tool at various , Z positions. The second system comprises a Z position computer 13 which receives data defined by the required rate of traverse of the tool 26 in the Z direction. This data need only define this rate of traverse at various change points with the computer performing pre programmed interpolation. The computer 13 outputs position signals which are fed to the Z position actuator 29, which may be a stepping motor, to cause the tool 26 to be traversed at the required rate. Because the required rates of traverse or the rates of change of the rate of traverse in the Z direction are comparatively low, it is possible to use a conventional stepping motor without feedback control or a hydraulic or pneumatic slide driven at constant velocity between fixed end stops. The provision of a separate Z position system allows the rate of traverse to be varied which may be necessary where the workpiece is composed of materials of differing hardness which require machining at different rates. It will be appreciated that in any of the embodiments described above with reference to the drawings, the computer may also be used to control other machining functions. This may include control of the speed of rotation of the workpiece and or the placing and removal of workpieces which may be by means of robotic arms.