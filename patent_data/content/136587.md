# ERROR CORRECTION CIRCUIT

## Claims
Fehlerkorrekturschaltung zur Feststellung und Korrektur einer Vielzahl von Fehlern in Codewörtern, die sich aus k Daten und n k Prüfsymbolen zusammensetzen, in Wiedergabedaten von einem Aufzeichnungsmedium, wobei sich jedes Symbol aus m binären Informationsbits zusammensetzt, und wobei ein Reed Solomon Code zur Fehlerfeststellung und korrektur verwendet wird, so daß das Fehlerortungspolynom

## Description
The present invention relates to an improvement in an error correction circuit suitable for use in a digital audio disc referred to hereafter as DAD playback apparatus of an optical compact disc referred hereafter as CD . In recent years, its has becoming popular in the field of acoustic technology to adopt digital recording systems making use of a PCM Pulse Coded Modulation technique, in order to realize playback with as high a fidelity as possible. This kind of technique, usually referred to as digital audio system , is known as a technique which exhibits audio characteristics much superior to that of conventional analog type playback systems,without having any dependency on the characteristics of the recording medium. The technique of the type described, making use of a disc as the recording medium, is generally called a DAD system, and various types of recording playback methods have been proposed such as an optical type method, electrostatic type method, and mechanical type method. This new recording playback technique, on the other hand, requires a playback apparatus which can satisfy various functions and a high standard of performance which could never be achieved by the prior art, regardless of the type of the recording and playback techniques. For instance, in case of the CD system, the disc used as the medium is made of a transparent resin and has a diameter of about 12 cm and a thickness of about 1.2 mm, the disc being coated with a metallic thin film in which are formed pits corresponding to the digital PCM signal. The disc is driven by a system called CLV Constant Linear Velocity system at a varying rotation speed of about 500 to 200 r.p.m. An optical pick up housing a semiconductor laser and a photoelectric conversion element is driven by a linear tracking system so that the laser beam scans radially the disc from the inner side to the outer side of the disc. The disc usually has a track pitch of 1.6 µm and has a program area radial range of 25 to 58 mm which is large enough to store the information for a one hour stereophonic playback on each side of the disc. In addition, index data and other associated data are stored in the lead in area radial range 23 to 25 mm . In the DAD system of the type described, it is required to faciliate an easy generation of a pit synchronizing signal during playback and to realize a stable data slice by using narrow band frequency characteristics of the RF signal read by the optical pick up, the recording of digitized data is conducted after such a modulation that the interval of inversion of polarity always falls between the maximum and minimum polarity inversion interval. In case of DAD playback apparatus of optical CD system, an EFM Eight to Fourteen Modulation is ordinarily used as the modulation system. Briefly, this modulation system is to divide the digitized data at a unit of 8 bit and to record the same after modulation to a 14 bit data. In the playback, therefore, the 14 bit data is demodulated into original 8 bit digitized data. The 8 bit digitized data, produced by the demodulation of the 14 bit data reproduced from the disc, is lend to an error correction circuit in which the error correcting operation is conducted. In the optical CD type DAD playback apparatus, cross interleaved Reed Solomon codes referred hereafter as CIRC codes are used as the error correcting code. CIRC codes are obtained by submitting Reed Solomon codes, which are a kind of Bose Chaudhuri Hocquenghem BCH codes and are generally regarded as the most effective random error correction codes hitherto known to a signal processing called cross interleaving. CIRC codes thus obtained are sensitive enough to correct burst errors. Reed Solomon codes can be decoded in the same way as other BCH codes, thereby correcting errors. A discussion will be made hereinafter as to the method of decoding of typical Reed Solomon codes consisting of k piece of information data symbols and n k piece of inspection symbols, i.e., consisting of n piece of symbols. It is noted here that these symbols are the elements of a Galois field GF 2 If we let U x , V x and E x denote the recording signal polynominal, the playback signal polynominal and the error polynominal, respectively. Then, these polynominals satisfy the following relationship. The coefficients of polynominals are contained in the Galois field GF 2 where Σ is the sum of the errors at all of the error locations. Here, syndrome S where, Then, from equation 3 we have From Equation 4 it is evident that syndrome S Let where e is the number of errors. The coefficients σ₁ to σ Briefly, the above explained process of decoding of the Reed Solomon code is as follows. By using the steps listed above, the steps needed to decode a Reed Solomon code consisting of many block data each containing four inspection symbols will be described as a practical example of the error correction. This code is represented by the following generator polynominal H x Fig. 1 is a block diagram of a conventional error correction circuit constituted by an actual decoding system of CIRC codes based on the theory heretofore described. Pick up 11 is adapted to reproduce an RF signal from the disc. The RF signal is converted by a data slice circuit not shown into a digitized data and is used for the extraction of the synchronizing signal for the self locking purpose, and is given to a demodulating circuit 12. As explained before, demodulating circuit 12 carries out the EFM demodulation for converting the 14 bit data recorded in the disc into 8 bit data and delivers the demodulated symbols to the error correcting means 13. Error correcting means 13 is of a cross interleave double correction system constituted by a double correction circuit 14, de interleave circuit 15 and a double correction circuit 16. Namely, when the result of the error judgement in the double correction circuit 14 has proved that the error is correctable, the error correction is conducted in the manner explained before and the corrected value is delivered to a D A converter not shown through de interleave circuit 15 and double correction circuit 16. On the other hand, when the error correcting capacity is exceeded, the error correction is not performed but the error flag E In the conventional error correction circuit, the coefficients σ In either case, it is necessary to effect a dividing operation. As well known, dividing circuits are rather complicated although multiplying circuits can have a comparatively simple construction. An error correction circuit performing calculations on the basis of the equations mentioned in claim 1 is disclosed in the document EP A 61 345. In order to obtain products and quotients of the elements of the Galois field, this prior art uses conversion ROMs which become fairly large for storing all the necessary data. This gives a rise to the demand for a simple circuit which can perform the judgement as to whether the error is a singular error, double error or a tripple error. It is on object of the present invention to provide an error correction circuit which can perform an error judgement at a high acuracy with a simple circuit arrangement. Another object of the present invention is to provide an error correction circuit which can perform algebraic operations such as multiplication and addition on the elements of the Galois field thereby finding error locations and error patterns in a short time. These objects are achieved in the error correction circuit of the present invention, as claimed in the single claim. Additional objects, advantages, and features of the present invention will further become apparent to persons skilled in the art from a study of the following description and of the accompanying drawings, in which Fig. 1 is a block diagram of a prior art error correction circuit relating to the field of the invention. Fig. 2 is a block diagram of an embodiment of an error correction circuit according to the present invention. Fig. 3 is a flow chart for explaining the operation of the embodiment shown in Fig. 2. Figs. 4 and 5 are timing charts for explaining the operation of the embodiment shown in Fig. 2. The present invention will now be described in detail with reference to the accompanying drawings Fig. 2 to Fig. 5. Throughout the drawings like reference numerals and letters are used to designate like or equivalent elements for the sake of simplicity of explanation. Before describing an enbodiment of the present invention, an explanation will be made hereinafter as to the principle of the error judging means as used in the error corection circuit of the present invention. By way of example, it is assumed here that the Galois field is GF 2⁸ . It is also assumed that the generating polynominal H x is given by It is further assumed that the number n of the symbols of the correction blocks is 32, and that the polynominal U x of the recording operation as expressed by the following equation is divisible by H x . The above mentibned equation, however, is not satisfied when the error is generated in the reproducing operation. Namely, in the case where the error is singular, the syndromes S₀ to S₃ are represented as follows, when the error locations and the error patterns are expressed by α Therefore, the following simultaneous Equation 12 is established. This simultaneous Equation 12 corresponds to simultaneous Equation 9 mentioned before. Therefore, α⁰ to α³¹ are successively substituted for x in the following equation and the error location is identified as the value x which provides the value 0 of the above shown formula. In the case where the error is a double error, the syndromes S₀ to S₃ are given as follows, when the error locations are expressed as αa and α Consequently, the condition of the following simultaneous Equation 14 is met. The simultaneous Equation 14 corresponds to simultaneous Equation 10 . Representing α Further, the following conditions arc derived from simultaneous Equation 14 . Using r1, r2 and r3 meeting the requirements of the following simultaneous Equation 16 Equation 15 can be rewritten as follows. Since α Then, α⁰ to α³¹ are successively substituted for x in Equation 17 , and the error location is identified as the value of x which makes the value of Equation 17 zero. Thus, in case of the singular error, α⁰ to α³¹ are successively substituted for the x in Equation 13 and the singular error is judged from the fact that Equation 13 has a root which can make Equation 13 meet. On the other hand, in the case of the double error, α⁰ to α³¹ are successively substituted for the x in Equation 17 and the double error is judged by the fact that Equation 17 has two roots which can make Equation 17 meet. In the case of the singular error, a following equation is derived from simultaneous Equation 12 . Comparing the above equation with simultaneous Equation 16 , it is understood that the following condition is met. Since when the condition r₃ 0 is met in the case of a duble error, it is judged that the error is double, triple or of higher degree. On the other hand, when the condition r₃ 0 is met, it is judged that the error is singular or triple or of higher degree. Referring now to Figs. 2 to 5, an embodiment of the present invention will be described in detail based upon the principle explained hereinbefore. Fig. 2 shows a block diagram of a circuit for solving Equations 13 and 17 . The operation of the circuit will be explained with reference to a flow chart shown in Fig. 3 and timing charts shown in Figs. 4 and 5. In Fig. 2, calculation processing circuit 17 is adpated to calculate data or signals supplied from BUS line 19 in accordance with a program stored in read only memory referred to as ROM, hereinafter 18, when operations are commenced at each step in the flow chart shown in Fig. 3. Calculation processing circuit 17 first calculates the syndromes S₀ to S₃ in a step ST₂. Calculation processing circuit 17 then delivers to BUS line 19 the syndrome S₁ out of the syndromes S₀ to S₃ thus determined. Meanwhile, gate circuit 20 controlled by ROM 18 delivers a latch signal to latch circuit 21, so that the first syndrome S₁ is latched in latch 21. Subsequently, calculation processing circuit 17 delivers to BUS line 19 the syndromes S₀ to S₃ thus produced. In consequence, gate circuit 20 delivers a latch signal to latch circuit 22 so that the syndrome S₀ is latched by latch circuit 22. Calculation processing circuit 17 makes a judgement in step ST₃ as to whether all the syndromes S₀ to S₃ are zero. In case that the answer in YES, i.e., when all of the syndromes are zero, the symbols are judged as involving no error, i.e., that the symbols are correct, so that the answer is outputted directly without being subjected to the error judgement and error correction which are to be executed through step ST₄. When the answer is NO, i.e., when not all of the syndromes S₀ to S₃ are zero, calculation processing circuit 17 makes a judgement in step ST₅ as to whether one of the syndromes S₀ to S₃ is not zero or all of the syndromes are not zero. If the answer of this judgement is NO, a judgement is made in step ST₆ to decide that the present error is of triple or of higher degree. On the other hand, if the answer to the judgement in step ST₅ is YES, calculation processing circuit 17 calculates the values r₃, r₂ and r₁ on the basis of the syndromes S₀ to S₃ in step ST₇. Thereafter, a judgement is made in step ST₅ as to whether the value r₃ is zero or not. The judgement in step ST₅ is conducted in the following manner. First, calculation processing circuit 17 delivers r₃ out of the values r₃, r₂ and r₁ thus determined to BUS line 19 Then zero judgement circuit 23, which is under the control of ROM 18, makes a judgement whether the value r₃ outputted to BUS line 19 is zero. Meanwhile, the value r₃ delivered to BUS line 19 is latched by latch circuit 24 controlled by ROM 18. Thereafter calculation processing circuit 17 operates to deliver the values r₂ and r₁ successively to BUS line 19. An explanation will be made first with the case where the condition r₃ 0 is met, i.e., with the case where the answer obtained in step ST is NO. In this case, it is judged that the error is double or triple, so that a calculation for determining the root of Equation 17 is conducted in step ST₉. This calculation in step ST₉ is conducted in a manner explained hereinafter. When the condition r₃ 0 is confirmed, zero judging circuit 23 operates to drive gate circuit 20 whereby latch signals are delivered to latch circuits 22 and 21 at such timing that the signals r₁ and r₂ are derived from calculation processing circuit 17. Therefore, latch circuits 22 and 21 latch the values r₂ and r₁ instead of the syndromes S₀ and S₁. After the latching of the signals r₃, r₂ and r₁ in respective latch circuits 24,21, 22, set signals r SP are given to register circuits 25, 26, 27 which are provided to correspond to respective latch circuits 21, 22, 24, so that the signals r₁, r₂, r₃ latched in latch circuits 21, 22, 24 are shifted to register circuits 25, 26, 27. Register circuit 26 is connected to multiplier circuit 28 which is adapted to operate in response to multiplication clock signal r CK so as to multiply the content, i.e., the value r₂ of register circuit 26 by the error location α The outputs from register circuits 25 and 26, obtained for the successive values α⁰ to α³¹ are added by adder 30, and the results of the addition are further added to the output from register circuit 27 by adder 31. Consequently, adder 31 produces an output which is the result of a series of calculations as shown below. The values α which make the result of the calculation zero, i.e., 0 are the root of Equation 17 , i.e., the error locations α In the case where the condition of r₃ 0, i.e., when the answer is YES, the operation is as follows. In this case, since the error is judged to be singular or triple or of higher degree, a judgement is made in zero judging circuit 23 as to whether r₂ is zero in step ST₁₂. In the case where r₂ 0, a judgement is made in step ST₆ that the error is triple or of higher degree. To the contrary, in the case of r₂ 0, a calculation is conducted in step ST₁₃ to determine the root of Equation 13 . This calculation is conducted in a manner explained hereinafter. When the condition of r₃ 0 is confirmed as a result of the judgement in zero judging circuit 23, zero judging circuit 23 operates to prohibit the operation of gate circuit 20. Therefore, the values r₁ and r₂ outputted from calculation processing circuit 17 are not latched in latch circuits 21, 22 so that latch circuits 21,22 hold the syndromes S₁ and S₀. Then, as stated before, the contents, i.e., the values S₁ and S₀ of latch circuits 21, 22 are shifted to register circuits 25, 26, and the content S₀ of register circuit 26 is multiplied by the error location α. The content r₃ of latch circuit 24 is shifted to register 27 and is multiplied by α². Since the condition r₃ 0 is met in this case, the output from register 27 is zero. Thus, adder 31 produces an output which is obtained by a series of calculations shown below. The value of α which makes the calculation result zero 0 is the root of Equation 13 , i.e., the error location α Figs 4 and 5 are timing charts showing the operation in the cases of r₃ 0 and r₃ 0, respectively. Referring first to the case r₃ 0, when the syndromes S₀ to S₃ are outputted from calculation processing circuit 17 at the timing shown in Fig. 4a, latch circuit 22 latches s₀ at the timing shown in Fig. 4b, while latch circuit 21 latches at the timing shown in Fig. 4c. Subsequently, when the signals r₃ to r₁ are outputted from calculation processing circuit 17 at the timing shown in Fig. 4a, zero judging circuit 23 outputs a judging pulse P₁ for the condition r₃ 0 at a timing shown in Fig. 4d so as to inactivate gate circuit 20 thereby to prevent latching of the signals r₂ and r₁ by latch circuits 22, 21. Meanwhile, ROM 18 delivers a latch signal to latch circuit 24 at the timing shown in Fig. 4e, so that latch circuit 24 latches the condition r₃ 0 at a timing as shown in Fig. 4f. Thereafter, if the condition r₂ 0 is met, zero judging circuit 23 delivers a judging pulse P₂ for the condition r₂ 0 at a timing shown in Fig. 4d. After the calculation of the judgement of the condition r₂ 0 following the latching operation of all latch circuits 21, 22, 24, a set signal r SP is outputted at a timing as shown in Fig. 4g, so as to permit the calculation for determining the root of Equation 13 . In the event that the condition r₃ 0, when the syndromes S₀ to S₃ are outputted at a timing shown in Fig. 5a, latch circuit 22 latches S₀ at the timing as shown in Fig. 5b, while latch circuit 21 latches S₁ at the timing shown in Fig. 5c. Then, as calculation processing circuit 17 outputs the signals r₃ to r₁ at the timings shown in Fig. 5d, the judging pulse P₁ for the condition r₃ 0 is not delivered by zero judging circuit 23 becuase the condition is so that gate circuit 20 is allowed to operate, thereby allowing latch circuits 22, 21 to latch subsequent signals r₂ and r₁. In this case, ROM 18 produces latch signals at the timing shown in Fig. 5e, while latch circuit 24 latches r₃ at the timing as shown in Fig. 5f. Thereafter, when calculation processing circuit 17 delivers r₂ and r₁, latch circuits 22, 21 latch the signals r₂ and r₁ in place of the syndromes S₀ and S₁. After the completion of the latching operation of all latch circuits 21, 22, 24, a set signal r SP is outputted at a timing shown in Fig. 5g, followed by a calculation for determining the root of Equation 17 . To sum up, the operation of the described embodiment is as follows. As the first step, a calculation is conducted in accordance with the following equations When the condition r₃ 0 is met, a calculation is made to determine the roots of the following equation. When two roots are obtained, it is judged that the error is a double error and these two roots are regarded as being error locations α When the condition r₃ 0 is met, a calculation is conducted to determine the root of the following equation under the condition r₂ 0. In the case of a double error, the error locations α To the contrary, the conventional apparatus requires dividing circuits for determining the coefficients σ₁ and σ₂, because the aforementioned Equation 11 as the error location polynominal had been operated under a following equation. That is, calculations for determining the coefficients σ₁ and σ₂ had to be made through the dividing operations. According to the present invention, if r₃ 0 Equation 13 is conducted with the syndromes S₁ and S₀ latched by latch circuits 21, 22. On the other hand, if the condition r₃ 0 is met, r₁ and r₂ are latched in place of the syndromes S₁ and S₀ to perform the calculation of Equation 17 . Thus, the parts such as latch circuits 21, 22, register circuits 25, 26, multiplier circuit 28 and adder 30 are commonly used for the error location calculation for the double error. This also contributes to the simplification of the circuit arrangement and the shortening of the processing time. Futhermore, if the condition r₃ 0 is met, the syndromes S₁ and S₀ latched by latch circuit 21, 22 remain latched by these circuits and the calculation of Equation 13 is executed. However, when the condition r₃ 0 is met, the calculation of equation 17 is executed with the values r₁ and r₂ latched in place of the syndromes S₁ and S₀. Consequently, the parts such as latch circuits 21, 22, register circuits 25, 26, multiplier circuit 28 and adder 30 can be used commonly both for the calculation of the error location for a singular error and the calculation of the error location for a double error. This constitutes one of the advantageous features of the present invention. After determination of the root of Equation 13 in step ST₁₄, a judgement is made in step St₁₄ as to whether one root has been determined. When one root has been obtained, it is judged that the error is a singular error, wheres, when one root could not be obtained, it is judged that the error is triple or of higher degeree. It is, therefore, possible to prevent any erroneous judgement of the singular error with a high accuracy. Namely, when an error which is quadruple is erroneously judged as a singular error, the one root may not be obtained because of the conditions r₃ 0 and r₂ 0 being met. In the case where the number n of symbols of the correcting block is 32, while the Galois field isGF 2⁸ , the probability of the erroneous judgement of the quadruple error or error of higher degree for singular error can be nullified advantageously. As will be fully realized from the foregoing description, it is possible to provide an error correction circuit which can perform an error correction without failure with quite a simple circuit arrangement.