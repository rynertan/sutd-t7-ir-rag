# PHOTOELECTRONIC SWITCH

## Claims
Photoelektronischer Schalter mit

## Description
This invention concerns a photoelectronic switch of a pulse modulated light system, that is, a photoelectronic switch adapted to project pulse light and conduct the detecting operation by detecting only the photo reception signal synchronized with the pulse light and, particularly, it relates to a photoelectronic switch which is less sensitive to the effects of external disturbances such as electric noises from power supply lines and pulse light from light sources, for example, fluorescent lamps, or from other photoelectronic switches emitting pulse light of similar periods. The photoelectronic switch described above has been adapted to input a photo reception signal transmitted from a photoreceiving device into an integrating circuit, compare the thus obtained integrated value with a predetermined reference value and output a detection signal only when the former exceeds the reference value for reducing the effect of the external disturbances. However, reactance elements such as capacitors or coils have usually been required for constituting the integrating circuit. Accordingly, it has been difficult to make the circuit portion of the photoelectronic switch smaller and, particularly, to attain an integrated circuit having a reactance with an extremely small capacitance. Further, since the time constant of the integrating circuit is determined with resistors and capacitors or with resistors and coils, the time of generating the detection signal has been varied due to the scatterings in the characteristics of the parts and, accordingly, the operation response time of the photoelectronic switch has not been uniform. In order to overcome the above mentioned problems, JP A 52 82066 discloses a tecnique of counting pulses by utilizing a shift register However, although the technique can attain the integrated circuit structure since the integrating circuit can be constituted without using the reactance element, it requires flip flop circuits by the setting number of countings. Accordingly, it results in additional problem of increase in the number of parts and corresponding increase in the post, as well as loss of the advantage for attaining the integrated circuit structure due to the enlargement of the area for the integrated circuit itself. US A 4 381 446 relates to a photoelectric switch comprising a light projecting segment including a pulse oscillator and a light emitting element adapted to give a pulse light emission in response to an output pulse of the pulse oscillator, a light reception segment including a light reception element adapted to yield a light reception signal on incidence of light, a gate circuit adapted to gate the light reception signal according to the output pulse of the pulse oscillator and an integration circuit for integrating outputs of the gate circuit, and a control circuit for varying the pulse frequency by controlling the pulse oscillator on generation of a light reception signal from the light reception element. US 4 207 466 describes a proximity detecting apparatus for generating a beam of infrared light rays in the form of successive radiation pulses occuring at a predetermined frequency for reflection off objects moving within the proximity of the apparatus. A photo detector device positioned adjacent to the radiation beam senses the reflected rays and responsively produces an output signal. Other light radiation and electrical signal noise sensed by the detector are filtered from the output signal according to the pulse width and frequency of pulse radiation generated by the beam. A detected signal is established as valid only if the signal and the infrared source are in frequency synchronization and if an unbroken pulse train is detected for a predetermined length of time. DE C 3 308 141 relates to an electronic switching device for detecting the presence of an object. This known device comprises a transmitter for transmitting a plurality of pulses and a receiver for receiving said plurality of pulses. An electronic switch is activated only if a particular number of pulses is continuously received by an analog integration means or by a digital counting means. The object underlying the present invention is to provide a photoelectronic switch which is less sensitive to the effects of the external disturbances. This object is achieved by the features of claim 1. These and other objects as well as features of this invention will be understood more specifically by considering the following explanations while referring to a preferred embodiment illustrated in the appended drawings, in which figure 1 is a block diagram for the circuit as one embodiment of the photoelectronic switch according to this invention The invention will now be described specifically referring to the following two embodiments. The portions identical with those in the photoelectronic switch described already regarding the prior art carry the same reference numerals for the simplification of the explanation. As shown in Figure 9, a pulse oscillator 1 for oscillating pulses at a predetermined frequency is connected with a light emitting element drive circuit 3 for driving a light emitting element 2 in this photoelectronic switch. The photo reception signal generated from the photoreceiving element 4 upon receiving the pulse light irradiated from the light emitting element 2 is amplified in an amplifier circuit 5 and then transmitted to a waveform shaping circuit 60. The photo reception signal Further, the pulse oscillator 1 is connected with a presettable up down counter 33 for counting the oscillation pulses Output signals c, p from the latch circuit 7 and the output signals v, w from the primary logic circuit 34 are transmitted to a secondary logic circuit 39. The secondary logic circuit 39 resets the counter output of the counter 33 if the pulse light received continuously at the photoreceiving element 4 is less than the predetermined number. Further, it presets the counted output of the counter 33 if the number of pulse light not received continuously is less than the predetermined number. Then, explanations will be made to one embodiment of a specific circuit of the photoelectronic with as described above while referring to Figure 10. Explanations for the light emitting element drive circuit 3, light emitting element 2, photoreceiving element 4, amplifier circuit 5 and detection output circuit 8 are omitted since they are not required for explanating the operation. The latch circuit 7 that latches the photo reception signal n produced from the photoreceiving element 4 upon receiving the pulse light and wave form shaped in the wave form shaping circuit 60 by the oscillation pulses The primary logic circuit 34 transmitted with the count output signals s, t, u from the counter 33 comprises a first logic circuit 341, a second logic circuit 342 and a flip flop 343 transmitted with the output signals from both of the logic circuits 341, 342. As described above, the output signals v, w of the flip flop 343 are transmitted to the detection output circuit 8 not illustrated as described above. Further, output signals v, w of the flip flop 343 are fed back to the presettable up down counter 33. Accordingly, the counter 33 functions as an up or down counter. That is, it functions as a down counter when the Q output signal In the primary logic circuit 34, the primary logic circuit 341 comprises a NOR circuit 35 transmitted with the In the primary logic circuit 34 having such a constitution, the primary logic circuit 341 outputs a signal at L level when all of the Q output signals s, t, u from the flip flops 331, 332, 333 are at H level. While on the other hand, the secondary logic circuit 342 outputs a signal at L level in the state where all of the signals s, t, u are at L level. Accordingly, the Q output signal While on the other hand, the secondary logic circuit 39 comprises a first NOR circuit 391 and a second NOR circuit 392. The first NOR circuit 391 is transmitted with the output signal The operation of the photoelectronic switch having the circuit of such a constitution will now be described while referring to the operation wave form chart shown in Figures 11 14. At first, the operation of the photoelectronic switch in the state where the photoreceiving element 4 refer to Figure 9 does not receive the pulse light is explained as the first case while referring to Figures 10 and 11. Alphabetical letters in Figure 11 correspond to those for the signals in each of the portions of the circuit in Figure 10. In the state as described above, no photo reception signals are generated in the photoreceiving element 4 as shown to the left of The output signal r at L level from the first NOR circuit 391 is transmitted to each of the preset terminals PR of the flip flops 331, 332, 333. Further, the output signal The primary logic circuit 341 in the primary logic circuit 34 inputted with the Then, the operation of the photoelectronic switch in the case where successive pulse light is received at the photoreceiving element 4 refer to Figure 9 will be explained as the second case also referring to Figures 10 and 11. The light emitting element 4 refer to Figure 9 is driven by the light emitting element drive circuit 3 such that it emits pulse light when the oscillation pulses The pulse signals The counter 33 released from the reset state starts counting for the oscillation pulses In the course of continuous receiving of the pulse light at the photoreceiving element 4, the counter 33 counts the oscillation pulses Further, at the instance the output signal Then, the operation of the photoelectronic switch in the case where the photoreceiving element 4 that has so far received the pulse light continuously no more receives the pulse light continuously will be explained referring to Figures 10 and 12 as the third case. When the pulse light is no more received continuously at the photoreceiving element 4, the output signal At this instance, since the output signal The During the state where the photoreceiving element 4 does not receive the pulse light, the counter 33 continues downward counting. However, at the instance the seventh shot of oscillation pulses is inputted from the pulse oscillator 1, the Q output signal Further, the output signal In the three cases described above, the photoelectronic switch operates in the state quite free from the effects of the external disturbances. Explanation will then be made to the operation in the case where the photoelectronic switch suffers from the effects of the external disturbances. At first, explanation will be made to the case where the photoreceiving element 4 undergoes the effects of the external disturbances during continuous reception of the pulse light and elimination is resulted to a portion of the photo reception signal As described above, in the state where the photoreceiving element 4 receives the pulse light, the Q output signal If elimination is resulted to the pulse light received so far, the output signal During the period in which the pulse light is eliminated, the counter 33 continues downward counting in synchronization with the oscillation pulses Then, explanation will be made to the case where the photoreceiving element 4 does not receive the pulse light and external disturbing pulses are superimposed on the photo reception signal of the photoreceiving element 4 due to the effects of the external disturbances while referring to Figures 10 and 14. In the case where no pulse light is received, the Q output signal Now assuming in this state that the photoreceiving element 4 receives the light of external disturbing pulses c as shown at c in Figure 14, the external disturbing pulses c are waveform shaped into external disturbing pulse signals n . The signals n are transmitted to the latch circuit 7 and the latch circuit 7 inverts its output signals o, p. Therefore, the output signal The counter 33 starts the upward counting for the oscillation pulses That is, since the output signal n of the waveform shaping circuit 60 maintains H level after receiving the light of the final external disturbing pulse c , the output signals o, p of the latch circuit 7 are inverted. Therefore, the output signal As has been described above, when 7 or more pulse light are continuously received, the photoelectronic switch in this prior invention turns the Q output signal However, the photoelectronic switch as described above involve the problems as described below. That is, the photoelectronic switch can overcome the problems in the prior art of increasing the number of parts and the corresponding increase in the cost upon making the circuit components smaller and, particularly, attaining the integrated circuit for the photoelectronic switch, as well as the loss of the advantages for attaining the integrated circuit caused by the increased area of the integrated circuit itself, to some extent without reducing the functions at all. However, there is still present a problem that a number of parts are required for constituting the circuit. An example for solving this problem is given below. As shown in Figure 1, the photoelectronic switch according to this invention has a circuit structure similar to that of the conventional photoelectronic switch as described above. Pulse oscillator 1, light emitting element 2, light emitting element drive circuit 3, photoreceiving element 4, amplifier circuit 5, latch circuit 7 and detection output circuit 8 are constitutional factors in common to them. The waveform shaping circuit 6 conducts waveform shaping for the photo reception signal Then, explanation will be made referring to Figure 2 illustrating a specific embodiment of the circuit. The photo reception signal The counter control circuit 10 comprises a primary logic circuit 12 and a secondary logic circuit 13. The primary logic circuit 12 comprises two NOR gates 121, 122, a delay circuit 123 and an inverter 14. The NOR gate 121 is inputted with the The secondary logic circuit 13 comprises a first logic circuit 131, a second logic circuit 132 and a third logic circuit 133. The first logic circuit 131 comprises a NAND gate 15 inputted with the output signal Then, the second logic circuit 132 comprises a NAND gate 19 inputted with the output signal Then, the third logic circuit 133 comprises a NAND gate 21 inputted with the output signal The output signal The presettable counter 9 is constituted as shown in Figure 4. Four flip flops 91, 92, 93, 94 are connected in series to form a 16 step counter. The output signal The output signal of the NOR gate 26 is inputted to each of the CL terminals of the flip flops 91, 92, 93. The The operation of the photoelectronic switch according to this invention having such a circuit structure will now be described referring to Figure 3, which is an operation waveform chart in each of the sections in the circuit. At first, explanation will be made to the case where 8 or more of 8 shots of the pulse light are successively received in a state where no pulse light is received to the photoreceiving element 4 refer to Figure 1 as the first case. In this example, since the presettable counter 9 is constituted as a 16 step counter, a detection signal from the counter 9 is generated indicating whether the photoreceiving element 4 receives light or not by the successive 8 shots of pulses. In a state where the pulse light is not received successively, the Q output signal Since the Q output signal The pulse signal The Q output signal Then, explanation will be made to the case where 8 or more shots of pulse light are eliminated continuously in a state where the detection signal is externally transmitted indicating that the photoelectronic switch receives the pulse light while referring to Figure 5 as the second case. In a state where the pulse light is not successively received to the photoreceiving element 4, the Q output signal At the instance the 8th pulse is counted, the Q output signal Accordingly, if the photoreceiving element 4 keeps the state of not receiving the pulse light thereafter, the counter 9 maintains the reset condition. The foregoing operation of the photoelectronic switch is that under the state quite free from the effect of external disturbances. Explanation will be made to the operation under the state with the effect of the external disturbances. At first, explanation will be made to the case where the photoreceiving element 4 undergoes the effect of the external disturbances during reception of successively shots of pulse light and its photo reception signal As has been described already, in the state where the photoreceiving element 4 receives the pulse light, the Q output signal Then, explanation will be made to the case where external disturbance pulses are superimposed on the photo reception signal of the photoreceiving element 4 due to the effect of the external disturbances in the state where the photoreceiving element 4 does not receive the pulse light while referring to Figure 7. In the state where no pulse light is received, the Q output signal In this case, if the number of the external disturbance pulse c is less than 8, the output signals g, h of the primary logic circuit 12 are inverted after the input of the final external disturbance pulse c to return the counter 9 into the reset condition. Accordingly, since the output signals it j of the counter 9 are not inverted in this case, the photoelectronic switch keeps to output a detection signal indicating that no pulse light is received. Then, explanation will be made to the second embodiment in which an overcurrent protection circuit is provided to the photoelectronic switch according to this invention while referring to Figure 8. The portions identical with those in first embodiment described above carry the same reference numerals, for which the explanations are omitted. The overcurrent protection circuit 29 has the following constitution. An output transistor is connected at the base thereof to the Q terminal of a presettable counter 9 by way of resistor R1. The collector of the transistor 30 is connected by way of resistor R2 to a power supply Vcc. Further, the emitter of the transistor 30 is grounded to the earth by way of register R3. The resistor R3 converts the output current flowing to the transistor 30 into a voltage. An input terminal on the negative side of a comparator 31 is connected between the transistor 30 and the resistor R3. Further, the input terminal on the positive side is connected to a reference voltage source 32. The second logic circuit 132 of the secondary logic circuit 13 is composed only of NAND gate 19. NAND gate 33 inputted with the output signal from the NAND gate 19 and the output signal from the comparator 31 is disposed to the overcurrent protection circuit 29. The output signal I of the NAND gate 33 is inputted to the CL terminal of the counter 9. Explanation will now be made to the operation of the overcurrent protection circuit 29 having the foregoing constitution. Explanation is made for the state where the photoreceiving element 4 refer to Figure 1 receives pulse light and, therefore, the Q output signal Since the Q output signal The transistor 30 is put to ON in the foregoing operation over a brief period of time from the reception of successive 8 shots of pulse light till the resetting of the counter. The electric power consumed by the transistor 30 is equal to the integrated value for the electric power consumed within the brief period of time. Accordingly, the integration value can not actually exceed the allowable electric power for the transistor 30. Therefore, if an operator erroneously connects the collector of the transistor 30 directly to the power source without connecting the load, the transistor 30 is not damaged. In these embodiments, the photoelectronic switch according to this invention outputs the detection output signal for the photo reception or not photo reception state depending on whether the 8 shots of pulse light are received or not. Accordingly, the operation periods for receiving and not receiving light are set identically. However, it is, of course, possible to set the operation times optionally depending on the number of flip flops in the presettable counter 9, logical constitution for the output signals from the counter 9 and the oscillation frequency of the pulse oscillator 1 and the like. Furthermore, although the presettable counter 8 is used as the counter in these embodiments, other counters such as presettable counter and up down counter can of course be used. As apparent from the foregoing explanations, according to this invention, the oscillation pulses of the pulse oscillator for driving the light emitting element are transmitted to the counter control circuit, which renders the output signal of the counter to the preset condition in a case where a predetermined number of shots of pulse light are successively received based on the signal formed by delaying the thus transmitted oscillation pulses and the photo reception signal from the latch circuit latched to the oscillation pulses, to thereby externally transmit a detection signal indicating that the photoreceiving element receives the pulse light. Then, in the case where pulse light is not successively received, the control circuit renders the counter into the reset condition to thereby externally transmit a detection signal indicating that the photoreceiving element does not receive the pulse light. Accordingly, the output signal of the counter is not inverted unless the photoreceiving element receives a predetermined number of shots of pulse light successively. Therefore, the switch is less sensitive to the effect of the external disturbances. Further, since the photoelectronic switch circuit is constituted in this invention without using reactance elements and reducing the number of parts employed, the circuit can be easily made smaller. Accordingly, it is suitable to attain the integrated circuit.