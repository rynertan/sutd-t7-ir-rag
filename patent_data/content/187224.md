# CURRENT CONTROLLED MOTOR DRIVE CIRCUIT

## Claims
Niederspannungsversorgung Schaltungsanordnung 10 zum Treiben einer zwischen einer IN Leitung 32 und einer OUT Leitung 34 angeschlossenen induktiven Last, wobei die Last einen Motor 20 aufweist, der mit einer Mehrzahl 20 einzelner Motorwicklung Treiber 22 versehen ist, die durch ein Motorsteuerungsmittel 24 gesteuert sind,

## Description
The present invention relates to power supplies in general and more particularly to power supplies for energizing stepper motors. The use or stepper motors to perform a variety of industrial tasks is on the increase. The typical stepper motor includes a plurality of independent windings which must be controlled in a predetermined sequence in order to produce an incremental step. The control signals are generated from a control means which accepts a series of command pulses and provides control signals for controlling the windings. The control signals force the motor to step a predetermined distance. The step is, essentially, produced simultaneously with the appearance of the pulse. In addition to the stepping pulses, each winding must be supplied with energizing current. The energizing current is usually provided from an adequate power supply. Designing adequate power supplies has been a problem in the past. The problem stems from the fact that low voltage stepper motors require a relatively high starting torque and a relatively low running torque. Motor torque is directly related to the current flow in the motor windings. If the current flow is high, the torque is high and vice versa. One of the inherent characteristics of a low voltage stepper motor is that the coil inductance is relatively high which in turn limits the rise time of coil current. Since the natural characteristic of the coils, in the low voltage motor, limits fast current rise and the desired result is to maximize current flow in order to provide the high startup torque, the designer faces a dilemma or reconciling these conflicting requirements. The problem is further augmented because in several applications the motor must respond within a relatively short time interval. However, friction and other motion opposing forces are initially large and a high startup torque is necessary to force the mechanical load into motion. Once started, the inertia of the load will reduce the motor torque requirement. The prior art methods for solving the low startup torque problem can be broadly classified into two main circuit types, namely chopper driver circuits and bilevel or pedestal driver circuits. Although both of these approaches work well for the intended purpose, they suffer from a common drawback, namely a much higher voltage than the rated motor voltage is used to energize the motor. The high voltage causes the coil current to rise quickly thus increasing the startup torque. Regarding the chopper drive circuit, it is designed to pulse a high voltage across the motor coil at a relatively high frequency say, 20 kHz . During the pulse, the coil current rises rapidly and decreases slowly when the pulse ends. As a result, a high startup torque is obtained with a relatively low DC current. In addition to the above identified problem, these circuits suffer from high component count, noise at the switching frequencies and low efficiency due to switching losses in the motor and the active devices which form the circuit. In JA A 51143817 Kokusai Electric Co there is described a power supply apparatus capable of supplying constant current different between the driving and holding states of a pulse motor with no power loss from a single power source wherein the load current can be varied greatly with ease by the alteration of a reference voltage. A voltage is applied to a transistor controlled by a switching circuit 10. The transistor 11 produces a pulse voltage Eâ‚‚ under ON OFF control which is smoothed and then supplied to coils 15 1 15 4 for each or the phases. The current flowing through each of the phase coils is detected by a current level detector. The detected output is compared with the divided component of the reference value REF to control the ON OFF period of the switching transistor 11 so as to maintain the current passing therethrough at a constant level. EP A 59969 Siemens describes a voltage source for constant current control for stepping motor measures load current and average drive voltage. The voltage source has a first measuring device to measure the time varying average of the drive voltage of the stepping motor. A second measuring device measures the stepping motor s load current. The measuring devices are connected to a controller supplied from reference voltage source. In response to the output from the first measuring device the controller regulates the drive voltage applied to the motor s windings and controls the current in them in response to the output from the second measuring device. On the other hand, the pedestal or bilevel driver circuits apply a high voltage across the motor coil until the current reaches a predefined level whereupon the high voltage power supply is switched out of the circuit and a lower rated voltage supply is used to drive the coil. The major disadvantages with this type of circuit are the requirement for at least two power supplies, noise isolation between the supplies, protection required when the power supplies are switched and low efficiency. The above described circuits and other types of circuits aimed at solving the high startup torque problems are given in the following prior art patents U.S. 4,295,083 3,967,179 3,809,991 4,353,021 4,208,868 and U.K. 1,579,121. EP A 116112 IBM shows a pulse width modulator comprised of a waveform generator 40 , a comparator 45 controlled by a clock sequenced sample and hold circuit 35 and a latch 50 which controls driving transistors Q1 Q4 through a phase and switching control logic and drive circuit 20 to monitor the duty cycle and maintain the average motor winding current to a desired value. It is therefore the main object of the present invention to provide a more efficient power supply for driving low voltage stepper motors. It is another object of the present invention to use a single low level voltage supply to provide a relatively high startup current by supplying a relatively large initial voltage across the motor coil and upon inducing motion in the motor reduce the coil current to the level required to keep the motor moving. The circuit arrangement includes a low voltage power supply and a regulating circuit connected thereto. The combination supplies a maximum available voltage to the motor when it is at rest. The coil current is monitored and when it rises above a threshold, the regulating circuit reduces the available voltage to the motor until the coil current falls to the level required to maintain motor motion. The circuit arrangement includes a switching transistor whose emitter is coupled to the low voltage power supply. An averaging filter, having a conductive coil L1 and a capacitor C1 is connected in series, is coupled to the collector lead of the switching transistor. The stepper motor coils are connected across the capacitor. A device suitable for measuring the current through the motor coils and to generate a voltage signal representative of said current is coupled to the motor. The voltage signal is used to adjust the duty cycle of the output signal from a pulse width modulator PWM which is coupled to the base lead of the switching transistor. With this circuit configuration when the motor is at rest, the maximum supply voltage is impressed across the coils or windings. As the motor drivers are activated, maximum current flows through the windings. The voltage signal formed from the current flow adjusts the duty cycle of the signal outputted from the PWM until the input voltage to the motor is at a value suitable to sustain normal operation. Fig. 1 shows a schematic of the regulator circuit of the present invention driving a stepper motor. Fig. 2 shows a set of graphs representative of the electrical signals appearing at different parts of the circuit in Fig. 1. Referring to Fig. 1, the power supply according to the teaching of the present invention is generally indicated by numeral 10. The power supply further includes a regulating circuit arrangement to be described hereinafter which controls energy from a DC source 12 to a stepper motor 14. The stepper motor includes a plurality of individual coils identified by numeral 20. Each coil is coupled through individual FET device 22 to a motor control means 24. A current supply source 26 supplies current over leads 28 to the motor control leads. Command pulses are supplied from an outside source over lead 30 to the motor control means 24. The use of a motor control means such as 24 for modulating current in response to command pulses supplied thereto and to activate motor drivers such as the FET s 22 so that current flows through the selected coil to move the motor an incremental distance is well known in the prior art. Therefore, a detailed description of these devices will not be given. Suffice it to say that in order for the stepper motor 14 to move an incremental distance a command pulse is presented on conductor 30. The motor control means 24 uses the pulse to modulate current supplied on lead 28 and as a result one or more or the FET devices are activated and current flows through the selected coil to step the motor a desired distance. Once the motor is stepped, a holding current holds the motor in its newly acquired position until another step is executed. Still referring to Fig. 1, the stepper motor 14 is connected by leads 32 and 34 to the power supply 10. Lead 32 supplies an input voltage to input node 36 of stepper motor 14. To this end lead 32 is tied to the positive plate 39 of a capacitor C1. The negative plate of C1 is tied to ground. As will be explained subsequently, the voltage which is supplied to stepper motor 14 is essentially the voltage across C1. This voltage is adjusted so that when the motor is at rest i.e., stationary a very high voltage operable to provide a very high starting torque is applied across the windings of the motor. As the motor rotor begins to move and the friction and other forces decrease, the voltage on C1 is adjusted until the voltage across the winding is essentially that which is able to keep the motor in motion. The capacitor C1 is connected to coil L1 which is connected to the collector lead of a switching transistor Q1. The serial combination of L1 and C1 forms an inductive input averaging filter whose output on lead 32 represents the average value of a chopped input signal outputted from Q1. A diode D1 is connected between ground and the collector lead of Q1. The diode is poled so that it provides a path for the inductor current when switch Q1 is in a non conducting state that is, turned off . The base lead of switching transistor Q1 is tied through resistor R2 to the output of a pulse width modulator M1. Similarly, the emitter of switching transistor Q1 is connected to DC source 12. A resistor R1 is connected between the emitter lead and the base lead of switching transistor Q1. Resistor R1 provides a path for Q1 base leakage current, and defines the off VBE voltage. Similarly, resistor R2 is used to limit the Q1 base drive current. M1 is a pulse width modulator whose function it is to provide a variable duty cycle output signal on lead 36 that is proportional to an error signal generated at node 38 and is supplied on conductor 40 to the input of said pulse width modulator. The error voltage at node 38 is generated by the R3 C2 filter which interconnects node 38 to ground potential. The error signal is representative of the average current through the motor coils. The values of R3 and C2 are chosen so that with nominal current flowing through the windings of the motor the error voltage signal that is applied on conductor 40 to the pulse width modulator is such that the correct operating potential is applied on lead 32 to the motor. It should be noted that although the stepper motor 14 shows four energization coils this should not be construed as a limitation on the scope of this invention since the present invention can be used with any motor having fewer or more than four energization coils. Also, Table I gives a listing of values for various components used in Fig. 1. Again, this listing is only representative of the components used and does not intend to limit this invention in any way. Fig. 2 shows a set of graphs which are generated at different zones in the circuit arrangement of Fig. 1. In order to simplify the description of Fig. 2, each graph is identified alphabetically. The same letter is used in Fig. 1 to identify the zone whereat the particular graph is generated. To this end, graph A shows the voltage waveform which is outputted from capacitor C1 and is applied to the stepper motor 14. It should be noted that when the motor is at rest the total supply voltage V Graph B shows the stepper motor drive pulses which are generated and outputted from motor control means 24. Graph C shows the average stepper motor load current which is supplied to windings 20 of stepper motor 14. It should be noted that the largest amount of current is supplied when the motor initially starts from rest and decreases as the rotor of the motor continues to move. Graph D shows an output signal from the pulse width modulator while Graph E shows the signal outputted from switching transistor Q1. With the stepper motor at rest the stepper motor drivers 22 are off and no current flows in sense resistor R3. With no current flow in R3, sense voltage input on conductor 40 to pulse width modulator M1 is zero. In this condition, the output from the pulse width modulator M1 is at its maximum duty cycle and it drives transistor Q1 into saturation. With no load current permitted to flow, the output filter capacitor C1 is charged to an approximate value of the input supplied voltage V It should be noted that the above described invention can be used for any type of electromechanical devices where a high startup energy is needed. Such electromechanical devices may include rotary solenoid, magnetic actuators, etc.