# VENDING MACHINE POWER SWITCHING APPARATUS

## Claims
Leistungsschalteranordnung für einen Verkaufsautomat 20, 40, 200 mit

## Description
This invention relates to an improved vending machine power switching apparatus, and particularly to vending machines and coin mechanisms having a plurality of relays for selecting which of a plurality of loads is to be energized. Vending machines include a wide variety of coin operated machines such as cigarette, coffee, soda, candy and ticket dispensing machines, as well as, juke boxes, pinball machines and the like. Typically, vending machines employ relays for a wide variety of switching functions. A relay is a commonly known electrical component which may be broadly defined as an electrically controlled device that opens and closes electrical contacts to effect the operation of other devices in the same or another electrical circuit. Typically, a relay incorporates an electromagnet, to which a controlling current is applied, which moves electrical contacts to switch the controlled current. As with any electrical component, the designer or manufacturer who employs relays in a system is faced with the task of minimizing the cost of the components used while still achieving the desired reliability and durability in the system. Although alternative switching devices, especially semiconductor devices, are available and have been successfully used in vending machines, electromechanical relays are still preferred for many applications because the use of an electromagnet provides electrical isolation between the controlling and controlled currents, and because a single controlling current and electromagnet can control a plurality of circuits with a plurality of switching contacts. In the case of the common power controlling semiconductor devices such as SCR s, triacs and power transistors, a separate isolation device such as an opto isolator would be required and each power controlling device can open and close only one circuit. A further advantage of relays is that they are not subject to random turn on due to random noise spikes. One of the basic problems in designing vending systems with relays is the problem of contact deterioration or degradation due to arcing, fine metal transfer, and microscopic point welding which occurs when the relay contacts open or close a circuit in which current is flowing. For a general discussion of arcing and like phenomenon, see Frank S. Oliver, The contact degradation problem is exacerbated where a relay is used to switch power to an inductive load. In conventional vending machines, relays are frequently used for switching current to inductive loads such as motors, solenoids and other relays. Some of the many functions of vending machines where power is switched to an inductive load are illustrated by the following U.S. Patents assigned to the assignee of the present invention US A 3,792,766 solenoid used in magnetic coin eliminator , US A 3,797,307 solenoid retracts arrest pin , US A 3,814,115 US A 4,367,760 actuator operates slide plate for dispensing coins to be returned as change , US A 4,106,610 actuators activate gates for directing coins through coin mechanism and US A 4,234,070 US A 4,458,187 actuators dispense customer selected products . Relay manufacturers have devoted extensive work over the years to produce contacts which, for a given size, are less prone to deterioration from switching current. Vending machine designers, concerned with long term reliability, have incorporated special protective circuitry to supress contact arcing. This response to the problem is not fully satisfactory where large numbers of relays are required because the provision of protective circuits for each relay and the cost for the relays used becomes quite expensive. According to a first aspect of the present invention there is provided a vending machine power switching apparatus comprising According to a second aspect of the present invention there is provided a method for energization and de energization of loads in a vending machine load circuit that comprises a plurality of individually selectable inductive loads and a plurality of actuatable relays corresponding in number to said plurality of loads the method comprising the steps of The present invention therefore provides an improved relay switching arrangement which is useful where two or more relays are used to selectively switch power to two or more loads. According to a preferred embodiment of the present invention, a single heavy duty power switching device such as a relay, SCR, triac or power transistor together with arc suppession circuitry or other transient control circuitry, if appropriate, is used in series with the switching contacts of a plurality of relays which are not required to be operated simultaneously. These relays are of smaller capacity and less expensive than the relays which would normally be used. Each of the smaller relays is associated with its own load or loads, such as a dispensing motor or a solenoid for operating a coin directing gate, for example, and is used to select its load. These relays are not used to start and stop the flow of current. Power switching to the load or loads selected by the relays is controlled by the power switching device. As a result, significant cost savings and improved relay lifetime are achieved. Thus, only one power switching device is required for each group of nonconcurrently operated loads, of which there are many in vending machines. For example, only one product is dispensed in each machine cycle from the typical snack, candy or cigarette vending machine therefore, a single power switching means can control the power switching for all of the product dispensing actuators. A single switching means can also be employed for a plurality of operations which occur in sequence, for example in a drink vending machine, the same switching means can be used with separate relays to actuate dispensing a cup, dispensing ice and dispensing the product. Where concurrent operations are required, such as concurrent dispensing of soda water and soft drink syrup, two switching means can be employed to control separate groups of relays. Of course, when two operations are simultaneous, always starting and stopping at the same time, only a single switching means and a single relay is required. In the simplified prior art arrangement 10 shown in Fig. 1, a power source 11 is connected to a plurality of relays 12, 13, and 14 having normally open contacts a,b. The relays 12 14 are controlled by a control means 15, such as a microprocessor control circuit. Each of the relays 12 14 is also connected to a respective load 16 18. When control means 15 causes a relay, for example, relay 13, to close its contacts a,b, current flows through the contacts a,b of relay 13 from power source 11 to its associated load 17. The other relays 12 and 14 operate similarly in conjunction with loads 16 and 18, respectively. Each of the relays 12 14 serves both a load selection function and a power switching function. Each of the relays 12 14 must be designed to withstand the transient conditions occurring during the making and breaking i.e., the opening and closing of the relay contacts. Such transient conditions are particularly severe where the loads 16 18 are inductive loads such as the solenoids or dispensing motors commonly found in vending machines. Such an arrangement is shown in Figure 1 of the above mentioned U.S. patent 4,234,070 Heiman . Fig. 2 shows a block diagram of an improved vending machine power switching apparatus 20 which, in conjunction with the graph of Fig. 3, illustrates the principle of the present invention. In Fig. 2, a power source 21 is shown connected to a power switching device 29, shown here as a relay. The power switching device 29 is connected to a plurality of relays 22 24 which are in turn connected to a plurality of loads 26 28 Although three relays and three loads are shown it should be clear that a greater number of relays can be employed without departing from the invention . All of the relays 22 24 are shown with their contacts a,b normally open and are controlled by a control means 25, such as a microprocessor control circuit. The control means 25 controls the switching of the various relays 22 24 and the power switching device 29 so that relays 22 24 provide a selection function, but do not do power switching, and the power switching device 29 switches the power on or off at the appropriate times. In other words, in this arrangement, the power switching and the load selection functions have been separated. If it is desired to switch power to the load 17, according to the arrangement of Fig. 1, it is only necessary to close a single relay 13 to energize its associated load. To apply power to a load, for example, load 27 in the apparatus of Fig. 2 according to the present invention, relay 23 and power switching device 29 must be switched to their closed positions by the relay control means 25 in the order shown in Fig. 3. Line S₂₃ shows the switching times for relay 23 and line S₂₉ shows the switching times for power switching device 29. First, relay 23 is closed at time t₀ when power switching device 29 is still open. Then, power switching device 29 is closed at time t₁, connecting the selected load 27 to the power source 21. At a time t₂, when it is desired to disconnect load 27 from power source 21, power switching device 29 is opened first, and then, at a later time t₃, relay 23 is opened. The other relays 22 and 24 are switched in the same manner as relay 23. As a consequence of this switching arrangement, the relays 22 24 need only be rated to pass the maximum voltage and current delivered to the load, and only the single power switching device 29 has to be rated to handle switching transients as a result of the making and breaking of contacts during power switching and has to have any necessary associated suppression circuitry. Thus, significant cost savings in conjunction with substantially improved relay lifetime are achieved by following the principles of the present invention. Mechanical failure rather than contact failure becomes the major determinant of the lifetime of relays 22 24. Fig. 4 shows a schematic diagram of a first embodiment of the present invention. The present invention concerns power switching apparatus for use in vending control means and vending machines whose functions are controlled by logic control means, such as TTL, LSI, microprocessor or other types of control circuit, and which have a plurality of relays for selecting among a plurality of loads, such as solenoids or dispensing motors, to be energized. The design of microprocessor control circuits and other types of controls for the wide variety of functions normally found in vending control means and vending machines is well within the capabilities of one skilled in the art. See, for example, U.S. Patents US A 4,225,056, US A 4,231,105, US A 4,328,539, US A 4,354,613, US A 4,372,464 and US A 4,463,446. The invention is not limited to any particular type of control circuit or any particular function of an inductive load to which power is switched in a vending machine. In the vending machine power switching apparatus 40 of Fig. 4, a 117 VAC power supply 41 is connected to a power switching means 49, which includes a triac 74 and an optical coupler 75. Other switching devices such as SCRs, relays, and any other power switching devices or circuits suitable for the particular application at hand are contemplated by the term power switching means. The power switching means 49 is connected by line 76 to one contact of each of a plurality of relays 42 44 which are shown in their normally open positions. Each of the relays 42 44 is connected to its respective load 46 48. Any load equivalent to those commonly found in vending machines is contemplated. A switching control means 45 is also connected to the power switching means 49 and to the relays 42 44 through a plurality of buffer drivers 91 95 each of the buffer drivers may be one of the buffer drivers from a Fairchild 7407 hex buffer driver chip . The switching control means 45 includes a microprocessor 81, such as the Intel 8031. In a typical vending machine, a microprocessor, such as microprocessor 81, has a plurality of inputs and outputs other than those shown in Fig. 4 for monitoring and controlling the entire operation of the vending machine. Such details are not part of the present invention and are omitted to avoid obscuring the invention. Microprocessor 81, subject to its program control and its inputs not shown , produces output signals which control the switching of the power switching means 49 and the relays 42 44. These output signals are connected through eight data bus lines collectively referred to as bus 82, and the lines 83 and 84, to a plurality of flip flops designated collectively as 85 and 86 which may suitably be National Semiconductor 74C374 octal three state, non inverting D type flip flop chips . The output from one of the plurality of flip flops 86 controls the power switching device 49 via the buffer driver 91. The power switching device 49 includes an opto isolator 75 and a triac 74. It is used, as described in connection with Figs. 2 and 3, to turn on and off the power to the switching contacts of relays 42 44. The outputs of three of the plurality of flip flops 85 control the relays 42 44 via buffer drivers 92 94. The a contacts of the relays 42 44 are each connected in series with the output of the power switching device 49 via line 76, and the b contacts are connected to the respective loads 46 48. When one of the relays 42 44 is switched from its normally open position, it selects which of the loads 46 48 power is applied to. As described in the illustrative embodiment of Figs. 2 and 3, for each switching event, the load to receive power is first selected by one of the relays 42 44 before power is applied by the switching device 49 and the power is turned off by the switching device 49 before the contacts of the selected relay 42 44 are opened again. When an input signal is applied to one of the inputs of the buffer drivers 92 94, current flows through the coil C of one of the relays 42 44 and the particular buffer driver. The current through the coil C causes the contacts a,b to move from their normally open position to their closed position. After the load is selected, the appropriate input signal is applied to buffer driver 91, its output goes low, current flows through the light emitting diode portion 71 of optical coupler 75, and current is allowed to flow through the photo receptor portion 72 of optical coupler 75. As a result, triac 74 conducts and 117 VAC from the power supply 41 appears on line 56 and is applied, via the closed contacts of the previously selected relay to the selected load. When the power is to be removed from the selected load, the procedure is reversed, first deactivating the triac 74 to turn off the power and then deenergizing the relay to terminate the selection. The switching control means 45 provides sequential output signals which switch the relays 42 44 in the appropriate order, as discussed in conjunction with Fig. 3. For example, where the loads 46 48 are dispensing motors for delivery of a product selected by the customer, once appropriate credit is established and a selection is made, the appropriate relay of the relays 42 44 is switched on to select a dispensing motor. Then, the power switching means 49 is turned on so that power is connected to the dispensing motor and a product is delivered. Next, after product delivery is actually sensed or after a sufficient time has elapsed for delivery to occur, power switching means 49 is turned off and power is disconnected from the motor. Finally, the appropriate selecting relay of the relays 42 44 is turned off. While the embodiment above described has been discussed in terms of a preferred arrangement in which a single switching control means 45 controls both the power switching means 49 and the load selecting relays 42 44, separate control means could be used so long as the proper switching order is maintained. Fig. 5 shows a second embodiment of the present invention, a price control apparatus 200 for inclusion within a vending control means or a coin mechanism. The price control apparatus 200 shown in Fig. 5 has a four price capacity however, the same principles are applicable to various other numbers of prices. The price control apparatus 200 is shown in Fig. 5 as connected to a vending apparatus 300 by price selection lines 315 318. The vending apparatus 300 does not form a part of the present embodiment therefore, only illustrative components are shown for the purpose of explaining the operation of the price control apparatus 200. Various vending apparatus employing a price selection line interface can be employed without departing from the present invention. Each of the selection lines 315 318 in the price control apparatus 200 is connected to the input of an associated one of the optical coupler circuits 245 248. As shown in the case of optical coupler circuit 245, each of optical coupler circuits 245 248 typically includes a Motorola or equivalent type MCT6 optical isolator incorporating a light emitting diode LED 241 connected to the input and a photo responsive device 242, optically coupled to the LED, at the output. The optical coupler circuit also includes an RC time constant circuit at its output comprising capacitor 243 and resistor 244. The illustrative vending apparatus 300 includes a plurality of dispensing actuators, such as motors or solenoids, shown here as dispensing motors M₁ M When the signalling current flows in this fashion, the optical coupler circuit 245 associated with the selection line 315 produces a signal output which is transmitted to one input of an associated AND gate 235 of the AND gates 235 238. The other input of each of the AND gates 235 238 is connected to one of the outputs of a counter decoder 239, typically a CMOS type 4017 device. The counter decoder 239 sequentially transmits a pulse to each of the AND gates 235 238. If the other input of one of the AND gates, such as AND gate 235 in this example, is concurrently receiving a true signal, the pulse is passed by the AND gate and transmitted to the corresponding one of the price matrices 215 218, price matrix 215 in this case. The outputs of each of the AND gates 235 238 are also connected via diodes to the enable input of the counter decoder 239 and an RC circuit comprising resistor 261 and capacitor 262 connected in parallel to ground. When one of the AND gates 235 238 produces an output, the capacitor 262 is charged. This charge inhibits the operation of the counter decoder 239, causing it to send its output repeatedly to the same AND gate, thus locking that AND gate on and preventing the recognition of the other AND gates during the selection of one of the selection wires 315 318 or a resulting active vend cycle. The output of the selected AND gate, gate 235 in this case, is also connected to the associated one of the buffer drivers 291 294, buffer driver 291 in this case. A signal from the AND gate 235 through the buffer driver 291 causes current to flow through the coil of the associated relay K₁, causing its previously open contacts a,b to close. This condition will continue so long as the selection switch SS The optical coupler circuits 245 248, the RC time constant circuits, the AND gates 235 238 and the counter 239 comprise selection logic means 240 having a plurality of outputs, here four outputs are shown. Each of the price matrices 215 218 has a single input and, in this embodiment, seven outputs. As shown in the case of price matrix 215, the input of each of the price matrices 215 218 is connected to a plurality of diodes. The other side of each of the diodes is connected to one of seven switches comprising a DIP switch S₁. The outputs of the switches of each of the price matrices 215 218 are connected to the coin mechanism s microprocessor 281 via bus 287. The closing of various combinations of the switches S₁ connects the input of the price matrix to selected outputs, and conveys the price set by advance setting of the switches in binary form to the microprocessor 281 when the price matrix in question receives an input signal. Typically, the binary units correspond to five cents 5 and the values indicated to the microprocessor 281 by closing the various switches are as shown in connection with price matrix 215 in Fig. 5. For example, as shown in Fig. 5, to indicate 25 , the first 5 and third 20 switches are closed. Thus, if these switches were closed in price matrix 215 when selection switch SS When the microprocessor 281 is informed of the price selection, it compares the price with the customer s credit in conventional fashion. If there is enough credit and all other conditions programmed into the microprocessor 281 have been satisfied, the microprocessor 281 produces a As long as one of the series connected holding switches HS₁ HS